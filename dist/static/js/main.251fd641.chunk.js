(this["webpackJsonpccl-dashboard"]=this["webpackJsonpccl-dashboard"]||[]).push([[0],{339:function(e,t){},35:function(e,t,a){},421:function(e,t,a){},480:function(e,t,a){},623:function(e,t){},624:function(e,t){},625:function(e,t){},627:function(e,t){},656:function(e,t){},657:function(e,t){},728:function(e,t){},80:function(e,t,a){e.exports={tableWrapper:"home_tableWrapper__2xihx",flex2:"home_flex2__1pLcR",table:"home_table__-VvPU",tableheader:"home_tableheader__D74z9",filters:"home_filters__3m_xG",button:"home_button__23-wh"}},873:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),l=(a(476),a(41)),o=a.n(l),r=(a(480),a(12)),c=a(4),s=a(8),d=a.n(s),u=a(935),b=a(930),p=a(931),j=a(937),m=a(936),v=a(934),h=a(972),O=a(113),g=a(928),x=a(929),f=a(40),y=a(7),_=a.n(y),C=a(207),w=a(494).default,S={min:8,max:250,lowerCase:1,upperCase:1,numeric:1,symbol:1,requirementCount:2},k=C.object({name:C.string().min(3).max(40).required(),password:C.string().min(1).required()}),N=C.object({email:C.string().email({minDomainSegments:2,tlds:!1})}),P=C.object({code:C.string().min(6),password:w(S)}),D=(C.object({firstName:C.string().min(3).max(25).required(),middleName:C.string().min(3).max(25).required(),lastName:C.string().min(3).max(25).required(),email:C.string().email({minDomainSegments:2,tlds:!1}).required(),alias:C.string().min(3).max(25).required(),username:C.string().min(3).max(25).required()}),C.object({password:w(S)})),I=a(208),A=a.n(I),T={apiUrl:"https://c30j81s4jj.execute-api.ap-south-1.amazonaws.com/dev/"},E=A.a.create({baseURL:T.apiUrl,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"*"}});E.interceptors.request.use((function(e){if(e.data)for(var t=0,a=Object.keys(null===e||void 0===e?void 0:e.data);t<a.length;t++){var n=a[t];""!==e.data[n]&&void 0!==e.data[n]||(e.data[n]=null)}return e}),(function(e){return Promise.reject(e)})),E.interceptors.response.use((function(e){return 200===e.status?e.data:e}),(function(e){return Promise.reject(e)}));var q=E,F={login:"dev-testenvLogin",forget:"dev-forgotPassword",confirmForgotPassword:"dev-confirmForgotPassword",registerUser:"dev-userRegistration",insertUser:"dev-insertUserDetails",listPoolUsers:"dev-listPoolUsers",userStatus:"dev-enableUser",userStatusDisable:"dev-disableUser",changePassword:"dev-changePassword",leads:"dev-getLeadsInfo",accounts:"dev-getAllAccounts",contacts:"dev-getAllContacts",quotes:"dev-getAllQuotes",userRole:"dev-getUserRole",userDetail:"dev-getUserDetail",userAllDetail:"dev-getAllUsersDetail",companyName:"dev-getCompanyNames",designation:"dev-getDesignation",departmentName:"dev-getDepartmentNames",division:"dev-getDivisions",delegatedApprover:"dev-getDelegatedApprover",country:"dev-getCountry",state:"dev-getState",city:"dev-getCity",profile:"dev-getUserProfile",insertLead:"dev-insertLeadDetails",leadsInfo:"dev-getLeadCreationInfo",leadsDetail:"dev-getLeadDetailonHyperLink",contactsInleadToAccount:"dev-getContactsInLeadtoAcc",convertLeadToAccount:"dev-insertLeadIntoAccount",getUsers:"dev-getUsers",quotesInfo:"dev-getQuotationCreationInfo",insertQuote:"dev-insertQuotationDetail",sampleRequests:"dev-getAllSampleRequests",accountsDetail:"dev-getAccountHyperlink",accountContact:"dev-cvuAccountContactDetails",accountSample:"dev-cvuSampleRequest",insertSample:"dev-insertOrUpdateSampleRequest",viewSample:"dev-viewSampleRequest",getQuoteItems:"dev-getAllQuoteLineItems",quoteItemsInfo:"dev-getQuoteLineCreationInfo",insertQuoteItem:"dev-insertQuoteLineItemDetail",updateQuoteItem:"dev-updateQuoteLineInfo",updateQuoteStatus:"dev-updateQuotationStatus",getAccountContacts:"dev-getAccountContacts",getAccountSamples:"dev-getAccountSamples",getAccountQuotes:"dev-getAccountQuotes",reassignLead:"dev-reassignLead",reassignAccount:"dev-reassignAccount",quotesInfoErp:"dev-getQuoteInformation",quoteItemSystemInfo:"dev-qqiSystemMasterInfo",quoteItemSystemPackInfo:"dev-qqiSamplePackDetails",quoteRequestPrice:"dev-quotationPriceRequest",quoteSamples:"dev-qqiSampleGCConfig",quoteSamplePricing:"dev-updateQuotePricingInfo",quoteRequestGCRates:"dev-reqForGcRates",currencyConversion:"dev-qqiCurrencyStamp",poCreationInfo:"dev-getPOFormInfo",PoCreationInfo:"dev-getPoCreationInfo",getAllPurchaseOrders:"dev-listPurchaseOrders",createGCPo:"dev-insertGCPODetails",approvedQuotesOnGC:"dev-listApprovedQtLinesOnGc",topApprovedPos:"dev-listTop3ApprovedPos",topMrin:"dev-topMrinDetail",poDetails:"dev-viewGCPODetails",portAndOriginForPo:"dev-getPortandOriginForPO",poDocuments:"dev-poDocumentsUpload",updateGCPo:"dev-editGCPODetails",gCPoStatus:"dev-updateGcPoStatus",getProductAndCategory:"dev-getcreateSRItemForm",createVendor:"dev-insertVendorGCPO",getAllmrins:"dev-listMrins",mrinDetails:"dev-viewMrin",createOrUpdateMrin:"dev-insertOrUpdateMrin",getMrinCreationInfo:"dev-getMrinCreationInfo",getMrinListForPoView:"dev-getMrinListForPoView",getGCs:"dev-listGCDetails",getGCDetail:"dev-viewGCDetail",getSuppliers:"dev-getSuppliers",getSupplierList:"dev-listSuppliers",editSuppliers:"dev-editSupplier",curdSupplier:"dev-cvuSupplier",getGcCreationInfo:"dev-getGCCreationInfo",createOrUpdateGcDetail:"dev-insertOrEditGCDetail",vendorLogin:"dev-vendorLogin",getDispatchDetails:"dev-viewGCPODispatchDetails",balQuoteQtyForPoOrder:"dev-getBalQuoteQtyForPoOrder",getGCDebitNoteCreationInfo:"dev-getGCDebitNoteCreationInfo",listGCDebitNoteDetails:"dev-listGCDebitNoteDetails",insertOrEditGCDebitNoteDetail:"dev-insertOrEditGCDebitNoteDetail",viewGCDebitNoteDetail:"dev-viewGCDebitNoteDetail",updateGcDebitNoteStatus:"dev-updateGcDebitNoteStatus",createorupdateSampleLineItem:"dev-insertOrUpdateSampleLineItem",getNotifications:"dev-getNotifications",viewAndDeleteSampleLineItem:"dev-viewAndDeleteSampleLineItem",updateMRINGCSpec:"dev-updateMRINGCSpec",sendEmail:"dev-sendITSupportEmail",releaseDebitNote:"dev-releaseDebitNote"},M=function(e){return q.post("".concat(T.apiUrl).concat(F.login),e).then((function(e){return e}))},R=function(e){return q.post("".concat(T.apiUrl).concat(F.forget),e).then((function(e){return e})).catch((function(e){return console.log("Error from forget password api",e.message,e.code)}))},B=function(e){return q.post("".concat(T.apiUrl).concat(F.confirmForgotPassword),e).then((function(e){return e}))},H=function(e){return q.post("".concat(T.apiUrl).concat(F.registerUser),e).then((function(t){return t&&q.post("".concat(T.apiUrl).concat(F.insertUser),e).then((function(e){return e})),t}))},G=function(e){return q.post("".concat(T.apiUrl).concat(F.insertUser),e).then((function(e){return e}))},L=function(e){return q.post("".concat(T.apiUrl).concat(F.userDetail),e).then((function(e){return e})).catch((function(e){return console.log("Error from get users list api",e.message,e.code)}))},U=function(e){return q.post("".concat(T.apiUrl).concat(F.userStatus),e).then((function(e){return e}))},Q=function(e){return q.post("".concat(T.apiUrl).concat(F.userStatusDisable),e).then((function(e){return e}))},V=function(e){return q.post("".concat(T.apiUrl).concat(F.leads),e).then((function(e){return e}))},z=function(e){return q.post("".concat(T.apiUrl).concat(F.accounts),e).then((function(e){return e}))},W=function(e){return q.post("".concat(T.apiUrl).concat(F.contacts),e).then((function(e){return e}))},Y=function(e){return q.post("".concat(T.apiUrl).concat(F.quotes),e).then((function(e){return e}))},K=function(){return q.get("".concat(T.apiUrl).concat(F.userRole)).then((function(e){return e}))},J=function(){return q.get("".concat(T.apiUrl).concat(F.companyName)).then((function(e){return e}))},Z=function(){return q.get("".concat(T.apiUrl).concat(F.designation)).then((function(e){return e}))},X=function(){return q.get("".concat(T.apiUrl).concat(F.departmentName)).then((function(e){return e}))},$=function(e){return q.post("".concat(T.apiUrl).concat(F.division),e).then((function(e){return e}))},ee=function(){return q.get("".concat(T.apiUrl).concat(F.delegatedApprover)).then((function(e){return e}))},te=function(){return q.get("".concat(T.apiUrl).concat(F.country)).then((function(e){return e}))},ae=function(e){return q.post("".concat(T.apiUrl).concat(F.state),e).then((function(e){return e}))},ne=function(e){return q.post("".concat(T.apiUrl).concat(F.city),e).then((function(e){return e}))},ie=function(){return q.get("".concat(T.apiUrl).concat(F.profile)).then((function(e){return e}))},le=function(e){return q.post("".concat(T.apiUrl).concat(F.insertLead),e).then((function(e){return e}))},oe=function(e){return q.post("".concat(T.apiUrl).concat(F.leadsInfo),e).then((function(e){return e}))},re=function(e){return q.post("".concat(T.apiUrl).concat(F.contactsInleadToAccount),e).then((function(e){return e}))},ce=function(e){return q.post("".concat(T.apiUrl).concat(F.getUsers),e).then((function(e){return e}))},se=function(e){return q.post("".concat(T.apiUrl).concat(F.getProductAndCategory),e).then((function(e){return e}))},de=function(e){return q.post("".concat(T.apiUrl).concat(F.quotesInfo),e).then((function(e){return e}))},ue=function(e){return q.post("".concat(T.apiUrl).concat(F.insertQuote),e).then((function(e){return e}))},be=function(e){return q.post("".concat(T.apiUrl).concat(F.sampleRequests),e).then((function(e){return e}))},pe=function(e){return q.post("".concat(T.apiUrl).concat(F.accountsDetail),e).then((function(e){return e}))},je=function(e){return q.post("".concat(T.apiUrl).concat(F.accountContact),e).then((function(e){return e}))},me=function(e){return q.post("".concat(T.apiUrl).concat(F.viewSample),e).then((function(e){return e}))},ve=function(e){return q.post("".concat(T.apiUrl).concat(F.insertSample),e).then((function(e){return e}))},he=function(e){return q.post("".concat(T.apiUrl).concat(F.insertQuoteItem),e).then((function(e){return e}))},Oe=function(e){return q.post("".concat(T.apiUrl).concat(F.updateQuoteItem),e).then((function(e){return e}))},ge=function(e){return q.post("".concat(T.apiUrl).concat(F.quoteItemsInfo),e).then((function(e){return e}))},xe=function(e){return q.post("".concat(T.apiUrl).concat(F.poCreationInfo),e).then((function(e){return e}))},fe=function(e){return q.post("".concat(T.apiUrl).concat(F.PoCreationInfo),e).then((function(e){return e}))},ye=function(e){return q.post("".concat(T.apiUrl).concat(F.getAllPurchaseOrders),e).then((function(e){return e}))},_e=function(e){return q.post("".concat(T.apiUrl).concat(F.createGCPo),e).then((function(e){return e}))},Ce=function(e){return q.post("".concat(T.apiUrl).concat(F.updateGCPo),e).then((function(e){return e}))},we=function(e){return q.post("".concat(T.apiUrl).concat(F.gCPoStatus),e).then((function(e){return e}))},Se=function(e){return q.post("".concat(T.apiUrl).concat(F.approvedQuotesOnGC),e).then((function(e){return e}))},ke=function(e){return q.post("".concat(T.apiUrl).concat(F.topApprovedPos),e).then((function(e){return e}))},Ne=function(e){return q.post("".concat(T.apiUrl).concat(F.topMrin),e).then((function(e){return e}))},Pe=function(e){return q.post("".concat(T.apiUrl).concat(F.poDetails),e).then((function(e){return e}))},De=function(e){return q.post("".concat(T.apiUrl).concat(F.getAllmrins),e).then((function(e){return e}))},Ie=function(e){return q.post("".concat(T.apiUrl).concat(F.mrinDetails),e).then((function(e){return e}))},Ae=function(e){return q.post("".concat(T.apiUrl).concat(F.createOrUpdateMrin),e).then((function(e){return e}))},Te=function(e){return q.post("".concat(T.apiUrl).concat(F.getMrinCreationInfo),e).then((function(e){return e}))},Ee=function(e){return q.post("".concat(T.apiUrl).concat(F.getMrinListForPoView),e).then((function(e){return e}))},qe=function(e){return q.post("".concat(T.apiUrl).concat(F.createVendor),e).then((function(e){return e}))},Fe=function(e){return q.post("".concat(T.apiUrl).concat(F.portAndOriginForPo),e).then((function(e){return e}))},Me=function(e){return q.post("".concat(T.apiUrl).concat(F.balQuoteQtyForPoOrder),e).then((function(e){return e}))},Re=function(e){return q.post("".concat(T.apiUrl).concat(F.poDocuments),e).then((function(e){return e}))},Be=function(e){return q.post("".concat(T.apiUrl).concat(F.getGCs),e).then((function(e){return e}))},He=function(e){return q.post("".concat(T.apiUrl).concat(F.getGCDetail),e).then((function(e){return e}))},Ge=function(e){return q.post("".concat(T.apiUrl).concat(F.getSupplierList),e).then((function(e){return e}))},Le=function(e){return q.post("".concat(T.apiUrl).concat(F.curdSupplier),e).then((function(e){return e}))},Ue=function(e){return q.post("".concat(T.apiUrl).concat(F.getGcCreationInfo),e).then((function(e){return e}))},Qe=function(e){return q.post("".concat(T.apiUrl).concat(F.createOrUpdateGcDetail),e).then((function(e){return e}))},Ve=function(e){return q.post("".concat(T.apiUrl).concat(F.vendorLogin),e).then((function(e){return e}))},ze=function(e){return q.post("".concat(T.apiUrl).concat(F.getGCDebitNoteCreationInfo),e).then((function(e){return e}))},We=function(e){return q.post("".concat(T.apiUrl).concat(F.listGCDebitNoteDetails),e).then((function(e){return e}))},Ye=function(e){return q.post("".concat(T.apiUrl).concat(F.insertOrEditGCDebitNoteDetail),e).then((function(e){return e}))},Ke=function(e){return q.post("".concat(T.apiUrl).concat(F.viewGCDebitNoteDetail),e).then((function(e){return e}))},Je=function(e){return q.post("".concat(T.apiUrl).concat(F.updateGcDebitNoteStatus),e).then((function(e){return e}))},Ze=function(e){return q.post("".concat(T.apiUrl).concat(F.createorupdateSampleLineItem),e).then((function(e){return e}))},Xe=function(e){return q.post("".concat(T.apiUrl).concat(F.viewAndDeleteSampleLineItem),e).then((function(e){return e}))},$e=function(e){return q.post("".concat(T.apiUrl).concat(F.getNotifications),e).then((function(e){return e}))},et=function(e){return q.post("".concat(T.apiUrl).concat(F.updateMRINGCSpec),e).then((function(e){return e}))},tt=function(e,t){return q.post("".concat(e).concat(F.sendEmail),t).then((function(e){return e}))},at=function(e){return q.post("".concat(T.apiUrl).concat(F.releaseDebitNote),e).then((function(e){return e}))},nt=a(3),it=a(974),lt=a(971),ot=a(0);function rt(e){return Object(ot.jsx)(lt.a,Object(nt.a)({elevation:6,variant:"filled"},e))}function ct(e){var t="bottom",a="center",n=!0;return Object(ot.jsx)(it.a,{anchorOrigin:{vertical:t,horizontal:a},open:n,onClose:e.handleClose,autoHideDuration:5e3,children:Object(ot.jsx)(rt,{onClose:e.handleClose,severity:e.severity||"success",children:e.message})},t+a)}var st="#ffffff",dt="#F05A30",ut=Object(n.createContext)({token:null,role:null,storeToken:function(){},setPreference:function(){},getPreference:function(){},removeToken:function(){}}),bt=Object(g.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat",height:"100%",width:"100%"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),backgroundColor:dt,color:st,"&:hover":{backgroundColor:dt,color:st}}}}));function pt(e){var t=bt(),a=Object(f.g)(),i=Object(f.f)(),l=Object(n.useContext)(ut),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=l.getPreference();return null!==t&&void 0!==t&&t.rememberMe?t[e]:""},s=Object(n.useState)(o("name")),g=Object(c.a)(s,2),y=g[0],C=g[1],w=Object(n.useState)(""),S=Object(c.a)(w,2),N=S[0],P=S[1],D=Object(n.useState)(o("password")),I=Object(c.a)(D,2),A=I[0],T=I[1],E=Object(n.useState)(""),q=Object(c.a)(E,2),F=q[0],R=q[1],B=Object(n.useState)(o("rememberMe")||!1),H=Object(c.a)(B,2),G=H[0],L=H[1],U=Object(n.useState)({open:!1,message:"",severity:""}),Q=Object(c.a)(U,2),V=Q[0],z=Q[1],W=Object(n.useState)(!1),Y=Object(c.a)(W,2),K=Y[0],J=Y[1],Z=function(){var e=Object(r.a)(d.a.mark((function e(t){var n,o,r,c,s,u,b,p,j,m,v,h,O,g;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null===(o=k.validate({name:y,password:A},{errors:{escapeHtml:!0}}))||void 0===o||null===(n=o.error)||void 0===n||!n.details.length){e.next=6;break}o.error.details[0].path.includes("password")?(R("Password cannot be empty"),P("")):P("Please enter valid name"),e.next=29;break;case 6:return J(!0),e.prev=7,r={username:y,password:A},e.next=11,M(r);case 11:if(c=e.sent,_.a.isEmpty(c)){e.next=20;break}return e.next=15,l.storeToken(c);case 15:return j={rememberMe:G,name:y,password:A},console.log("Setting Preference",j),e.next=19,l.setPreference(j);case 19:a(null!==i&&void 0!==i&&null!==(s=i.state)&&void 0!==s&&null!==(u=s.from)&&void 0!==u&&u.pathname?null===i||void 0===i||null===(b=i.state)||void 0===b||null===(p=b.from)||void 0===p?void 0:p.pathname:"/home");case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(7),console.log("Er is",e.t0),z({open:!0,message:null===e.t0||void 0===e.t0||null===(m=e.t0.response)||void 0===m||null===(v=m.data)||void 0===v?void 0:v.split(":")[(null===e.t0||void 0===e.t0||null===(h=e.t0.response)||void 0===h||null===(O=h.data)||void 0===O||null===(g=O.split(":"))||void 0===g?void 0:g.length)-1],severity:"error"});case 26:return e.prev=26,J(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[7,22,26,29]])})));return function(t){return e.apply(this,arguments)}}();return Object(ot.jsxs)(x.a,{component:"main",maxWidth:"xs",children:[Object(ot.jsx)(b.a,{}),V.open&&Object(ot.jsx)(ct,{severity:V.severity,message:V.message,handleClose:function(){return z({open:!1,message:"",severity:""})}}),Object(ot.jsxs)("div",{className:t.paper,children:[Object(ot.jsx)(O.a,{component:"h1",variant:"h5",children:"Login"}),Object(ot.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(ot.jsx)(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Username",name:"name",autoComplete:"name",autoFocus:!0,value:y,error:Boolean(N.length),helperText:N,onChange:function(e){C(e.target.value),P("")}}),Object(ot.jsx)(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:A,error:Boolean(F.length),helperText:F,onChange:function(e){return T(e.target.value)}}),Object(ot.jsx)(v.a,{control:Object(ot.jsx)(h.a,{value:"remember",style:{color:dt},color:"primary",checked:G,onChange:function(){return L(!G)}}),label:"Remember me"}),Object(ot.jsx)(u.a,{type:"submit",fullWidth:!0,variant:"contained",disabled:K,className:t.submit,onClick:Z,children:K?"Loading...":"Login"}),Object(ot.jsx)(m.a,{container:!0,children:Object(ot.jsx)(m.a,{item:!0,xs:!0,children:Object(ot.jsx)(O.a,{align:"center",children:Object(ot.jsx)(j.a,{href:"/forget",variant:"body2",style:{color:dt},children:"Forgot password?"})})})})]})]})]})}var jt=Object(g.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat",height:"100%",width:"100%"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),backgroundColor:dt,color:st,"&:hover":{backgroundColor:dt,color:st}}}}));function mt(e){var t=jt(),a=Object(f.g)(),i=Object(n.useContext)(ut),l=Object(n.useState)(""),o=Object(c.a)(l,2),s=o[0],j=o[1],m=Object(n.useState)(""),v=Object(c.a)(m,2),h=v[0],g=v[1],y=Object(n.useState)(""),C=Object(c.a)(y,2),w=C[0],S=C[1],N=Object(n.useState)(""),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)({open:!1,message:"",severity:""}),T=Object(c.a)(A,2),E=T[0],q=T[1],F=function(){var e=Object(r.a)(d.a.mark((function e(t){var n,l,o,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null===(l=k.validate({name:s,password:w},{errors:{escapeHtml:!0}}))||void 0===l||null===(n=l.error)||void 0===n||!n.details.length){e.next=6;break}l.error.details[0].path.includes("password")?(I("OTP cannot be empty"),g("")):g("Please enter valid name"),e.next=26;break;case 6:return e.prev=6,o={username:s,password:w,vendor:!0},e.next=10,Ve(o);case 10:if(r=e.sent,_.a.isEmpty(r)){e.next=21;break}return e.next=14,i.storeToken(r);case 14:return localStorage.setItem("isVendorFirstScreen","true"),localStorage.setItem("currentActivePage",0),c={name:s,password:w},console.log("Setting Pererence",c),e.next=20,i.setPreference(c);case 20:a("/vendor");case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(6),q({open:!0,message:"Invalid credentials",severity:"error"});case 26:case"end":return e.stop()}}),e,null,[[6,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(ot.jsxs)(x.a,{component:"main",maxWidth:"xs",children:[Object(ot.jsx)(b.a,{}),E.open&&Object(ot.jsx)(ct,{severity:E.severity,message:E.message,handleClose:function(){return q({open:!1,message:"",severity:""})}}),Object(ot.jsxs)("div",{className:t.paper,children:[Object(ot.jsx)(O.a,{component:"h1",variant:"h5",children:"Login"}),Object(ot.jsxs)("form",{className:t.form,noValidate:!0,children:[Object(ot.jsx)(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Email",name:"name",autoFocus:!0,value:s,error:Boolean(h.length),helperText:h,onChange:function(e){j(e.target.value),g("")}}),Object(ot.jsx)(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"OTP",type:"password",id:"password",value:w,error:Boolean(D.length),helperText:D,onChange:function(e){return S(e.target.value)}}),Object(ot.jsx)(u.a,{type:"submit",fullWidth:!0,variant:"contained",className:t.submit,onClick:F,children:"Login"})]})]})]})}var vt=Object(g.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat",height:"100%",width:"100%"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),backgroundColor:dt,color:st,"&:hover":{backgroundColor:dt,color:st}}}}));function ht(){var e=vt(),t=Object(n.useState)(""),a=Object(c.a)(t,2),i=a[0],l=a[1],o=Object(n.useState)(""),s=Object(c.a)(o,2),b=s[0],v=s[1],h=Object(n.useState)(""),g=Object(c.a)(h,2),y=g[0],C=g[1],w=Object(n.useState)(""),S=Object(c.a)(w,2),k=S[0],D=S[1],I=Object(n.useState)(!1),A=Object(c.a)(I,2),T=A[0],E=A[1],q=Object(n.useState)(""),F=Object(c.a)(q,2),M=F[0],H=F[1],G=Object(n.useState)(""),L=Object(c.a)(G,2),U=L[0],Q=L[1],V=Object(n.useState)({open:!1,message:"",severity:""}),z=Object(c.a)(V,2),W=z[0],Y=z[1],K=Object(f.g)(),J=function(){var e=Object(r.a)(d.a.mark((function e(t){var a,n,l,o,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=N.validate({email:i},{errors:{escapeHtml:!0}}),console.log("Value",n),null===n||void 0===n||null===(a=n.error)||void 0===a||!a.details.length){e.next=7;break}v(n.error.details[0].message),e.next=14;break;case 7:return l={username:i},e.next=10,R(l);case 10:r=e.sent,console.log("Response",r),_.a.isEmpty(r)?o="Some error occured. Please try again":(E(!0),o="Reset link sent successfully"),Y({open:!0,message:o});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(r.a)(d.a.mark((function e(t){var a,n,l,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,n={username:i,confirmationcode:M,password:U},null===(l=P.validate({code:M,password:U}))||void 0===l||null===(a=l.error)||void 0===a||!a.details.length){e.next=8;break}l.error.details[0].path.includes("password")?(C("Password must be minimum 8 character long along with uppercase, lowercase, special character and numbers"),D(""),setTimeout((function(){return C("")}),5e3)):D("Please enter valid code"),e.next=13;break;case 8:return e.next=10,B(n);case 10:o=e.sent,console.log("Response",o),_.a.isEmpty(o)&&K("/");case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),Y({open:!0,message:e.t0.response.data.split(":")[e.t0.response.data.split(":").length-1],severity:"error"}),console.log("Error in changing password",e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(ot.jsxs)(x.a,{component:"main",maxWidth:"xs",children:[W.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},W),{},{handleClose:function(){return Y({open:!1,message:"",severity:""})}})),Object(ot.jsxs)("div",{className:e.paper,children:[Object(ot.jsx)(O.a,{component:"h1",variant:"h5",children:"Forgot Password"}),!T&&Object(ot.jsx)(O.a,{variant:"body2",gutterBottom:!0,display:"block",align:"center",children:"Please enter the email address you'd like your password reset information set to"}),T?Object(ot.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(ot.jsx)(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"code",label:"Verification Code",name:"code",autoComplete:"code",autoFocus:!0,value:M,error:Boolean(k.length),helperText:k,onChange:function(e){return H(e.target.value)}}),Object(ot.jsx)(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"password",label:"New Password",name:"password",type:"password",autoComplete:"password",value:U,error:Boolean(y.length),helperText:y,onChange:function(e){return Q(e.target.value)}}),Object(ot.jsx)(u.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:Z,children:"Change Password"})]}):Object(ot.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(ot.jsx)(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email ID",name:"email",autoComplete:"email",autoFocus:!0,value:i,error:Boolean(b.length),helperText:b,onChange:function(e){return l(e.target.value)}}),Object(ot.jsx)(u.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:J,children:"Request reset link"})]}),Object(ot.jsx)(m.a,{container:!0,justify:"center",alignItems:"center",children:Object(ot.jsx)(m.a,{item:!0,xs:!0,children:Object(ot.jsx)(j.a,{href:"/",variant:"body2",align:"center",style:{color:dt},children:"Back to Login"})})})]})]})}var Ot=a(6),gt=a(15),xt=a(968),ft=a(941),yt=a(942),_t=a(943),Ct=a(450),wt=a(178),St=a.n(wt),kt=a(218),Nt=a.n(kt),Pt=a(219),Dt=a.n(Pt),It=a(423),At=a.n(It),Tt=a(292),Et=a.n(Tt),qt=a(291),Ft=a.n(qt),Mt=a(446),Rt=a(938),Bt=a(939),Ht=a(940),Gt=Object(gt.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return Object(ot.jsx)(Mt.a,Object(nt.a)({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),Lt=Object(gt.a)((function(e){return{root:{"&:focus":{backgroundColor:dt,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(Rt.a);function Ut(e){var t=e.anchorEl,a=e.handleClose,n=e.children,i=e.options;return Object(ot.jsxs)("div",{children:[n,Object(ot.jsx)(Gt,{id:"customized-menu",anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:a,children:i.map((function(e){return Object(ot.jsxs)(Lt,{onClick:e.action,children:[Object(ot.jsx)(Bt.a,{children:e.icon}),Object(ot.jsx)(Ht.a,{primary:e.name})]})}))})]})}var Qt=a(886),Vt=Object(g.a)((function(e){return{paper:{"& #simple-modal-title":{color:dt}}}}));function zt(e){var t=Vt();return Object(ot.jsx)("div",{children:Object(ot.jsx)(Qt.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",className:t.paper,disableBackdropClick:!0,children:e.body()})})}var Wt=Object(g.a)((function(e){return{button:{margin:e.spacing(1),backgroundColor:dt,color:st,minWidth:150,textTransform:"capitalize","&:hover":{backgroundColor:dt,opacity:.8}},outlineButton:{border:"1px solid"+dt,color:dt,"&:hover":{backgroundColor:dt,opacity:.8,color:st}}}}));function Yt(e){var t=Wt(),a=e.label,n=e.variant;return Object(ot.jsx)(u.a,Object(nt.a)(Object(nt.a)({variant:n||"contained",color:"primary",className:n?t.outlineButton:t.button},e),{},{children:a}))}var Kt={managingDirector:"Managing Director",gmc:"GMC",marketingExecutive:"Marketing Executive",managerCommerical:"Manager Commercial",commercialExecutive:"Commercial Executive",asstManagerPurchase:"Asst.Manager Purchase GC",managerPurchaseGC:"Manager Purchase GC",managerStoresPackingAndGC:"Manager Stores Packing and GC",purchaseExecutiveGC:"Purchase Executive GC",asstManagerPurchaseGC:"Asst.Manager Purchase GC",gcStoresExecutive:"GC Stores Executive",srManager:"Sr.Manager",qcManager:"QC Manager",accountsExecutive:"Accounts Executive",accountsManager:"Accounts Manager",vendor:"Vendor",marketingRepresentative:"Marketing Representative",managerPackackingDevelopment:"Manager Packaging Development"},Jt=function(){var e=Object(n.useState)(localStorage.getItem("currentUserId")),t=Object(c.a)(e,2),a=t[0],i=t[1],l=Object(n.useState)(localStorage.getItem("currentUserRole")),o=Object(c.a)(l,2),s=o[0],u=o[1],b=function(e){localStorage.setItem("token",e.id),console.log("HEllo",e.id),localStorage.setItem("currentUserId",e.user_id),localStorage.setItem("currentUserRole",e.role),localStorage.setItem("currentUserName",e.user_name),u(e.role),i(e.id)},p=function(){var e=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Came inside this"),console.log("Logging out"),localStorage.removeItem("token"),localStorage.removeItem("currentUserId"),localStorage.removeItem("currentUserName"),localStorage.removeItem("preference"),localStorage.removeItem("currentActivePage"),localStorage.removeItem("currentUserRole"),i(null),u(void 0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(r.a)(d.a.mark((function e(){var t,n,i,l,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=25;break}return e.prev=1,e.next=4,localStorage.getItem("preference");case 4:if(i=e.sent,l={username:null===(t=JSON.parse(i))||void 0===t?void 0:t.name,password:null===(n=JSON.parse(i))||void 0===n?void 0:n.password},s===Kt.vendor&&(l.vendor=!0),s!==Kt.vendor){e.next=13;break}return e.next=10,Ve(l);case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,M(l);case 15:e.t0=e.sent;case 16:if(o=e.t0,_.a.isEmpty(o)){e.next=20;break}return e.next=20,b(o);case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(1),console.log("Er is",e.t1);case 25:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(){return e.apply(this,arguments)}}();return{storeToken:b,getToken:function(){return localStorage.getItem("token")},setPreference:function(e){localStorage.setItem("preference",JSON.stringify(e))},getPreference:function(){var e=localStorage.getItem("preference");return JSON.parse(e)},getCurrentUserDetails:function(){var e={};return e.id=localStorage.getItem("currentUserId"),e.role=localStorage.getItem("currentUserRole"),e.name=localStorage.getItem("currentUserName"),e},token:a,role:s,removeToken:p,refreshToken:j}},Zt=a(422),Xt=a.n(Zt),$t=a(944),ea=a(975),ta=a(967),aa=a(932),na=a(104),ia=Object(gt.a)({indicator:{display:"flex",justifyContent:"center",backgroundColor:"transparent","& > span":{maxWidth:40,width:"100%",backgroundColor:dt}}})((function(e){return Object(ot.jsx)(xt.a,Object(nt.a)(Object(nt.a)({},e),{},{TabIndicatorProps:{children:Object(ot.jsx)("span",{})}}))})),la=Object(gt.a)((function(e){return{root:{textTransform:"none",color:dt,fontSize:e.typography.pxToRem(15),marginRight:e.spacing(1),"&:focus":{opacity:1,fontWeight:800},"& > span":{height:"100%"},opacity:.8,fontWeight:600,padding:"unset",minWidth:"180px"}}}))((function(e){return Object(ot.jsx)(ft.a,Object(nt.a)({disableRipple:!0},e))})),oa=Object(g.a)((function(e){return{root:{flexGrow:1},notification:{marginRight:"2em",cursor:"pointer",position:"relative"},notificationBox:{height:"350px",width:"300px",zIndex:"99",boxShadow:"0px 0px 4px 2px #0e0e0e38",padding:"10px"},hyperspan:{color:"#337ab7",cursor:"pointer"},semiNotiBox:{overflow:"auto",border:"1px solid #0000008c",borderRadius:"10px",height:"290px",width:"100%"},mainNotiRow:{margin:"5px"},mainNotiRowP:{color:"#000"},markRead:{color:"#337ab7",margin:"0 0 5px 0",textAlign:"right",cursor:"pointer"},mainNotiRowH3:{color:"#000",margin:"0"},padding:{padding:e.spacing(3)},demo2:{backgroundColor:e.palette.background.paper},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},paper:{position:"absolute",margin:"auto",top:"40%",left:"40%",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},label:{fontSize:e.typography.pxToRem(20),fontWeight:700}}}));function ra(e){var t,a=oa(),l=Object(n.useContext)(ut),o=i.a.useState(null),s=Object(c.a)(o,2),u=s[0],b=s[1],j=i.a.useState(!1),v=Object(c.a)(j,2),h=v[0],g=v[1],y=i.a.useState(""),_=Object(c.a)(y,2),C=_[0],w=_[1],S=i.a.useState(""),k=Object(c.a)(S,2),N=k[0],P=k[1],I=i.a.useState(0),A=Object(c.a)(I,2),E=A[0],M=A[1],R=i.a.useState(10),B=Object(c.a)(R,2),H=B[0],G=B[1],L=i.a.useState(null),U=Object(c.a)(L,2),Q=U[0],V=U[1],z=i.a.useState(-1),W=Object(c.a)(z,2),Y=W[0],K=W[1],J=i.a.useState(null),Z=Object(c.a)(J,2),X=Z[0],$=Z[1],ee=i.a.useState({open:!1,message:"",severity:""}),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],ie=i.a.useState({old:!1,new:!1}),le=Object(c.a)(ie,2),oe=le[0],re=le[1],ce=i.a.useState(""),se=Object(c.a)(ce,2),de=se[0],ue=se[1],be=i.a.useState(!1),pe=Object(c.a)(be,2),je=pe[0],me=pe[1],ve=Jt(),he=ve.getCurrentUserDetails,Oe=ve.getPreference,ge=he(),xe=null===(t=Oe())||void 0===t?void 0:t.name,fe=Object(f.g)(),ye=[{name:"Edit Profile",icon:Object(ot.jsx)(Nt.a,{}),action:function(){}},{name:"Change Password",icon:Object(ot.jsx)(Dt.a,{}),action:function(){return g(!h)}},{name:"Logout",icon:Object(ot.jsx)(St.a,{}),action:function(){return Se()}}],_e=[{name:"Logout",icon:Object(ot.jsx)(St.a,{}),action:function(){return ke()}}],Ce=Boolean(X),we=Ce?"simple-popover":void 0,Se=function(){l.removeToken().then((function(){fe("/login")}))},ke=function(){l.removeToken().then((function(){fe("/login/vendor")}))};Object(n.useEffect)(Object(r.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(){return(a=Object(r.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e({userid:localStorage.getItem("currentUserId"),get_count:!0});case 2:t=e.sent,K(parseInt(t.notify_count));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},t=function(){return a.apply(this,arguments)},t();case 3:case"end":return e.stop()}}),e)}))),[]);var Ne=setInterval(Object(r.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e({userid:localStorage.getItem("currentUserId"),get_count:!0});case 2:t=e.sent,K(parseInt(t.notify_count));case 4:case"end":return e.stop()}}),e)}))),3e3);clearInterval(Ne);var Pe=function(e,t){"oldPass"===t?w(e.target.value):P(e.target.value)},De=function(){var e=Object(r.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null===(n=D.validate({password:N}))||void 0===n||null===(a=n.error)||void 0===a||!a.details.length){e.next=6;break}n.error.details[0].path.includes("password")&&(ue("Password must be minimum 8 character long along with uppercase, lowercase, special character and numbers"),setTimeout((function(){return ue("")}),5e3)),e.next=22;break;case 6:return me(!0),e.prev=7,e.next=10,i={username:xe,previouspassword:C,newpassword:N},q.post("".concat(T.apiUrl).concat(F.changePassword),i).then((function(e){return e}));case 10:e.sent&&(ne({open:!0,message:"Password updated successfully"}),setTimeout((function(){Ae(),ne({open:!1,message:""})}),2e3)),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(7),console.log("Error here",e.t0),ne({open:!0,message:e.t0.response.data,severity:"error"}),console.log("Error in changing pass",e.t0.message);case 19:return e.prev=19,me(!1),e.finish(19);case 22:case"end":return e.stop()}var i}),e,null,[[7,14,19,22]])})));return function(t){return e.apply(this,arguments)}}(),Ie=function(e){re(Object(nt.a)(Object(nt.a)({},oe),{},Object(Ot.a)({},e,!oe[e])))},Ae=function(){P(""),w(""),re({old:!1,new:!1}),g(!1)},Te=function(){var e=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V([]),$e({userid:localStorage.getItem("currentUserId"),read_all:!0}),$(null);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(r.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(t.currentTarget),e.next=3,$e({userid:localStorage.getItem("currentUserId"),view:!0});case 3:a=e.sent,V(a.notifications_feed);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ot.jsxs)("div",{className:a.root,children:[ae.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},ae),{},{handleClose:function(){return ne({open:!1,message:"",severity:""})}})),Object(ot.jsx)(yt.a,{position:"static",style:{backgroundColor:dt},children:Object(ot.jsxs)(_t.a,{children:[Object(ot.jsx)(Ct.a,{edge:"start",className:a.menuButton,color:"inherit"}),Object(ot.jsx)(O.a,{variant:"h6",className:a.title}),Object(ot.jsx)("div",{className:a.notification,onClick:function(e){return Ee(e)},children:Object(ot.jsx)($t.a,{badgeContent:Y,showZero:!0,children:Object(ot.jsx)(Xt.a,{})})}),Object(ot.jsx)(aa.a,{id:we,open:Ce,anchorEl:X,onClose:function(){$(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:Object(ot.jsx)(ta.a,{component:"div",noValidate:!0,className:a.notificationBox,autoComplete:"off",children:Object(ot.jsxs)("div",{children:[Object(ot.jsx)("h3",{className:a.mainNotiRowH3,children:"Notification"}),Object(ot.jsx)("p",{className:a.markRead,onClick:function(){return Te()},children:"Mark all as read"}),null!=Q&&Object(ot.jsxs)("div",{className:a.semiNotiBox,children:[Q.slice(E*H,E*H+H).map((function(e,t){return Object(ot.jsx)("div",{className:a.mainNotiRow,children:Object(ot.jsx)("p",{className:a.mainNotiRowP,children:e.status})})})),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:Q.length,rowsPerPage:H,page:E,onChangePage:function(e,t){M(t)},onChangeRowsPerPage:function(e){G(+e.target.value),M(0)}})]})]})})}),Object(ot.jsxs)("div",{id:"user-details",children:[Object(ot.jsx)("div",{className:a.label,children:ge.name}),Object(ot.jsx)("div",{children:ge.role})]}),Object(ot.jsx)(Ut,{handleClose:function(){b(null)},anchorEl:u,options:"Vendor"===ge.role?_e:ye,children:Object(ot.jsx)(Ct.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",onClick:function(e){b(e.currentTarget)},children:Object(ot.jsx)(At.a,{})})})]})}),Object(ot.jsx)(yt.a,{position:"static",color:"default",children:Object(ot.jsx)("div",{className:a.demo2,children:Object(ot.jsx)(ia,{"aria-label":"tabs",variant:"scrollable",scrollButtons:"auto",children:function(){var t,a=[];return null===e||void 0===e||null===(t=e.routes)||void 0===t||t.map((function(e,t){var n;return(void 0===(null===e||void 0===e?void 0:e.roles)||(null===e||void 0===e||null===(n=e.roles)||void 0===n?void 0:n.indexOf(null===ge||void 0===ge?void 0:ge.role))>-1)&&a.push(Object(ot.jsx)(na.b,{to:null===e||void 0===e?void 0:e.to,style:function(e){return{borderBottom:e.isActive&&"2px solid ".concat(dt),textDecoration:"none"}},children:Object(ot.jsx)(la,{tabIndex:t,label:null===e||void 0===e?void 0:e.label})})),null})),a}()})})}),Object(ot.jsx)(zt,{open:h,handleClose:function(){return g(!h)},body:function(){return Object(ot.jsxs)(x.a,{className:a.paper,children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-end",children:[Object(ot.jsx)(m.a,{item:!0,sm:10,children:Object(ot.jsx)(p.a,{label:"Old Password",value:C,onChange:function(e){return Pe(e,"oldPass")},required:!0,type:null!==oe&&void 0!==oe&&oe.old?"text":"password",fullWidth:!0})}),Object(ot.jsx)(m.a,{item:!0,sm:1,children:null!==oe&&void 0!==oe&&oe.old?Object(ot.jsx)(Ft.a,{onClick:function(){return Ie("old")},color:"disabled"}):Object(ot.jsx)(Et.a,{onClick:function(){return Ie("old")},color:"disabled"})})]}),Object(ot.jsxs)(m.a,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-end",children:[Object(ot.jsx)(m.a,{item:!0,sm:10,children:Object(ot.jsx)(p.a,{label:"New Password",value:N,onChange:function(e){return Pe(e,"newPass")},required:!0,error:Boolean(de.length),helperText:de,type:null!==oe&&void 0!==oe&&oe.new?"text":"password",fullWidth:!0})}),Object(ot.jsx)(m.a,{item:!0,sm:1,children:null!==oe&&void 0!==oe&&oe.new?Object(ot.jsx)(Ft.a,{onClick:function(){return Ie("new")},color:"disabled"}):Object(ot.jsx)(Et.a,{onClick:function(){return Ie("new")},color:"disabled"})})]}),Object(ot.jsxs)(m.a,{container:!0,direction:"column",xs:12,md:12,justifyContent:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:je,label:je?"Loading...":"Change Password",onClick:De})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:Ae})})]})]})}}),Object(ot.jsx)("div",{style:{flex:1,maxHeight:"calc(100vh - 130px)",overflow:"scroll",margin:"1rem"},children:e.children})]})}ra.defaultProps={routes:[],component:function(){return Object(ot.jsx)("div",{})}};var ca=[{label:"Home",to:"/home"},{label:"Leads",to:"/leads",roles:["Marketing Executive","Managing Director"]},{label:"Accounts",to:"/accounts",roles:["Marketing Executive","Managing Director"]},{label:"Contacts",to:"/contacts",roles:["Marketing Executive","Managing Director"]},{label:"Sample Request",to:"/sample-request",roles:["Marketing Executive","Managing Director"]},{label:"Quote",to:"/quotes",roles:["GMC","Manager Commercial","Commercial Executive","Managing Director","Asst.Manager Purchase GC","Marketing Executive"]},{label:"Users",to:"/users",roles:["Admin","Managing Director"]},{label:"Purchase Orders",to:"/purchase-orders",roles:["Managing Director","Manager Purchase GC","Manager Stores Packing and GC","Purchase Executive GC","Asst.Manager Purchase GC","GC Stores Executive"]},{label:"Debit Note GC",to:"/debit-note-gc",roles:["Managing Director","Manager Purchase GC","Accounts Executive","Accounts Manager"]},{label:"MRIN",to:"/mrin",roles:["GC Stores Executive","Manager Stores Packing and GC","Sr.Manager","QC Manager","Managing Director","Accounts Executive","Accounts Manager","Manager Purchase GC"]},{label:"GC",to:"/gc",roles:["Managing Director","GC Stores Executive","Manager Stores Packing and GC"]},{label:"Supplier",to:"/supplier",roles:["Managing Director","Purchase Manager","Manager Purchase GC"]}],sa=[{label:"Home",to:"/vendor"}],da=a(976),ua=a(946),ba=a(947),pa=a(933),ja=a(881),ma=a(948),va=a(424),ha=a.n(va),Oa=Object(g.a)((function(e){return{container:{padding:0,margin:0,justifyContent:"center",display:"flex",flexDirection:"column",width:"100%",maxWidth:window.innerWidth},root:{backgroundColor:dt,color:st,width:128,height:128,fontSize:"5em"},menuButton:{marginRight:e.spacing(2)},item:{marginTop:e.spacing(2)},gridContainer:{marginTop:e.spacing(5)}}})),ga=function(){var e=Oa(),t=Object(f.g)(),a=function(e,a){e.preventDefault(),"logout"===a?(localStorage.removeItem(""),localStorage.removeItem("currentActivePage"),t("/login")):"back"===a&&t(-1)};return Object(ot.jsxs)(x.a,{fluid:!0,className:e.container,children:[Object(ot.jsx)(yt.a,{position:"static",style:{backgroundColor:dt},children:Object(ot.jsx)(_t.a,{children:Object(ot.jsx)(Ct.a,{edge:"start",className:e.menuButton,color:"inherit",onClick:function(e){return a(e,"back")},children:Object(ot.jsx)(ha.a,{})})})}),Object(ot.jsxs)(m.a,{container:!0,justify:"center",alignItems:"center",direction:"column",className:e.gridContainer,children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(da.a,{className:e.root,variant:"circular",sizes:"large",children:"A"})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(O.a,{variant:"h6",style:{color:dt,padding:"1em 0em"},children:"Welcome, Admin"})}),Object(ot.jsx)(m.a,{item:!0,className:e.item,children:Object(ot.jsx)(ua.a,{children:Object(ot.jsx)(ba.a,{children:Object(ot.jsxs)(pa.a,{component:"nav","aria-label":"main",children:[Object(ot.jsxs)(ja.a,{button:!0,children:[Object(ot.jsx)(Bt.a,{children:Object(ot.jsx)(Nt.a,{})}),Object(ot.jsx)(Ht.a,{primary:"Edit Profile"})]}),Object(ot.jsxs)(ja.a,{button:!0,children:[Object(ot.jsx)(Bt.a,{children:Object(ot.jsx)(Dt.a,{})}),Object(ot.jsx)(Ht.a,{primary:"Change Password"})]}),Object(ot.jsx)(ma.a,{}),Object(ot.jsxs)(ja.a,{button:!0,onClick:function(e){return a(e,"logout")},children:[Object(ot.jsx)(Bt.a,{children:Object(ot.jsx)(St.a,{})}),Object(ot.jsx)(Ht.a,{primary:"Logout"})]})]})})})})]})]})},xa=a(957),fa=a.p+"static/media/background.b0847028.jpg",ya=a(70),_a=a(425),Ca=a.n(_a),wa=a(426);var Sa=function(e){return Object(ot.jsx)("div",{style:{height:"100%"},dangerouslySetInnerHTML:{__html:e.iframe}})},ka=Object(wa.autoPlay)(Ca.a),Na=Object(g.a)((function(e){return{root:{height:"100vh",width:"100%",flexGrow:1},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),backgroundColor:e.palette.background.default}}}));var Pa=function(){var e=Na(),t=Object(ya.a)(),a=i.a.useState(0),l=Object(c.a)(a,2),o=l[0],r=l[1],s=Object(n.useState)([]),d=Object(c.a)(s,2),u=d[0],b=d[1];return Object(n.useEffect)((function(){fetch("https://graph.instagram.com/me/media?fields=media_type,media_url&&limit=5&&access_token=bbea45a9fdff94469d17af805d6403d6").then((function(e){return e.json()})).then((function(e){e.error||b(e.data)})).catch((function(e){console.error("Error:",e)}))}),[]),Object(ot.jsx)("div",{className:e.root,children:Object(ot.jsx)(ka,{axis:"rtl"===t.direction?"x-reverse":"x",index:o,onChangeIndex:function(e){r(e)},containerStyle:{height:"100vh"},style:{height:"100vh"},enableMouseEvents:!0,children:null===u||void 0===u?void 0:u.map((function(e,t){return Object(ot.jsx)(ot.Fragment,{children:Math.abs(o-t)<=2?Object(ot.jsx)(Sa,{iframe:"<img src="+e.media_url+' width="100%" height="100%"/>'}):null})}))})})},Da=a(876),Ia=a(877),Aa=a(885),Ta=a(880),Ea=Object(g.a)((function(e){return{formControl:{marginTop:e.spacing(1),marginBottom:e.spacing(1),minWidth:"95%"},selectEmpty:{marginTop:e.spacing(2)}}})),qa=function(e){var t=e.label,a=e.value,n=e.onChange,i=e.options,l=e.error,o=e.helperText,r=e.className,c=Ea();return Object(ot.jsxs)(Da.a,{variant:"outlined",className:c.formControl+" "+r,error:l,children:[Object(ot.jsx)(Ia.a,{id:t,children:t}),Object(ot.jsx)(Aa.a,Object(nt.a)(Object(nt.a)({},e),{},{value:a,onChange:n,label:t,fullWidth:!0,children:i.map((function(e){return Object(ot.jsx)(Rt.a,{value:e.value,children:e.label})}))})),l&&Object(ot.jsx)(Ta.a,{children:o})]})},Fa=function(e){var t=e.label,a=e.value,n=e.onChange,i=e.variant,l=e.fullWidth;return Object(ot.jsx)(p.a,Object(nt.a)(Object(nt.a)({},e),{},{id:t,label:t,variant:i,value:a,onChange:n,fullWidth:l}))};Fa.defaultProps={variant:"outlined",fullWidth:!0};var Ma=a(878),Ra=Object(g.a)((function(e){return{heading:{margin:"4px",fontWeight:450,color:"black"},label:{margin:"4px",color:"black"}}})),Ba=function(e){var t=Ra(),a=e.id,n=e.variant,i=e.children;return Object(ot.jsx)(Ma.a,Object(nt.a)(Object(nt.a)({},e),{},{id:a,variant:n,className:(e.bold?t.heading:t.label)+" "+e.className,children:i}))};Ba.defaultProps={fullWidth:!0};var Ha=a(949),Ga=a(970),La=Object(g.a)((function(e){return{label:{"& .MuiRadio-colorSecondary.Mui-checked":{color:dt}}}})),Ua=function(e){var t=e.label,a=e.disabled,n=e.onChange,i=e.options,l=La();return Object(ot.jsxs)(Da.a,{component:"fieldset",children:[Object(ot.jsx)(Ma.a,{component:"legend",children:t}),Object(ot.jsx)(Ha.a,Object(nt.a)(Object(nt.a)({"aria-label":t,onChange:n},e),{},{row:!0,children:i.map((function(e){return Object(ot.jsx)(v.a,{disabled:a,className:l.label,value:e.value,control:Object(ot.jsx)(Ga.a,{}),label:e.label})}))}))]})},Qa=Object(g.a)({root:{"& .MuiCheckbox-colorSecondary.Mui-checked":{color:dt}}}),Va=function(e){var t=Qa();return Object(ot.jsx)("div",{className:t.root,children:Object(ot.jsx)(v.a,{control:Object(ot.jsx)(h.a,{disabled:e.disabled,checked:e.checked,onChange:e.onChange}),label:e.label})})},za=a(441),Wa=a(71),Ya=a(966),Ka=a(442),Ja=a(950),Za=Object(Ka.a)({overrides:{MuiPickersCalendar:{week:{"& .MuiPickersDay-current":{color:dt},"& .MuiPickersDay-daySelected":{backgroundColor:dt,color:st}}}}}),Xa=function(e){var t=e.label,a=e.value,n=e.onChange,i=e.variant,l=e.format,o=e.id;return Object(ot.jsx)(Wa.a,{utils:za.a,children:Object(ot.jsx)(Ja.a,{theme:Za,children:Object(ot.jsx)(Ya.a,Object(nt.a)(Object(nt.a)({},e),{},{disableToolbar:!0,variant:i,format:l,id:o,label:t,value:a,onChange:n,fullWidth:!0,autoOk:!0}))})})};Xa.defaultProps={variant:"inline",id:"date-picker-inline",format:"MM/dd/yyyy",margin:"normal"};var $a=a(969),en=function(e){return Object(ot.jsx)($a.a,Object(nt.a)(Object(nt.a)({},e),{},{getOptionLabel:function(t){return e.labelprop?t[e.labelprop]?t[e.labelprop].toString():"":t.label?t.label:""},onChange:e.onChange,options:e.options,renderInput:function(t){return Object(ot.jsx)(p.a,Object(nt.a)(Object(nt.a)({},t),{},{helperText:e.helperText,label:e.label,error:e.error,variant:"outlined",required:e.required}))}}))},tn=function(e){var t=e.payload,a=function(e,t){switch(e.type){case"input":return Object(ot.jsx)(Fa,Object(nt.a)({},e),t);case"button":return Object(ot.jsx)(Yt,Object(nt.a)({},e),t);case"number":case"float":return Object(ot.jsx)(Fa,Object(nt.a)(Object(nt.a)({},e),{},{type:"number"}),t);case"file":return Object(ot.jsx)(Fa,Object(nt.a)(Object(nt.a)({},e),{},{type:"file"}),t);case"label":return Object(ot.jsx)(Ba,Object(nt.a)(Object(nt.a)({},e),{},{children:e.value}),t);case"select":return Object(ot.jsx)(qa,Object(nt.a)({},e),t);case"radio":return Object(ot.jsx)(Ua,Object(nt.a)({},e),t);case"checkbox":return Object(ot.jsx)(Va,Object(nt.a)({},e),t);case"datePicker":return Object(ot.jsx)(Xa,Object(nt.a)({},e),t);case"autocomplete":return Object(ot.jsx)(en,Object(nt.a)({},e),t);default:return null}};return Object(ot.jsx)(m.a,{id:"top-row",container:!0,spacing:24,direction:"row",children:t.map((function(e,t){return Object(ot.jsx)(m.a,{item:!0,xs:e.xs||12,sm:e.sm||6,children:a(e,t)})}))})},an=a(956),nn=a(977),ln=a(958),on=a(959),rn=a(19),cn=a.n(rn),sn=(a(35),a(953)),dn=a(955),un=a(945),bn=a(952),pn=a(954),jn=a(951),mn=a(300),vn=Object(gt.a)((function(e){return{head:{backgroundColor:"#feecda"},body:{fontSize:14}}}))(un.a),hn=Object(gt.a)((function(e){return{root:{"&:nth-of-type(even)":{},"& .MuiOutlinedInput-input":{padding:"10px 14px"}}}}))(jn.a),On=Object(g.a)({table:{minWidth:650},container:{width:"95%"}});function gn(e){var t,a=On(),i=function(){var t;return null===(t=e.rows)||void 0===t?void 0:t.map((function(t){return parseInt(t[e.totalColId]?t[e.totalColId]:0)})).reduce((function(e,t){return e+t}),0)},l=Object(n.useState)(i()),o=Object(c.a)(l,2),r=o[0],s=o[1],d=function(e){var t=Object(n.useState)(e.initialValue),a=Object(c.a)(t,2),l=a[0],o=a[1],r=function(t){"date"===e.type?(o(t),u(e.index,e.id,t)):e.id&&"dispatch_quantity"===e.id?t.target.value>=0&&o(t.target.value):o(t.target.value)},d=function(){u(e.index,e.id,l)};return Object(n.useEffect)((function(){o(e.initialValue);var t=i();s(t)}),[e.initialValue]),"date"===e.type?Object(ot.jsx)(Xa,{value:"-"===l?new Date:l,onChange:r,onBlur:d}):"button"===e.type?Object(ot.jsx)(Yt,{onClick:function(t){e.handler.handleClick(e.index)},label:e.label}):Object(ot.jsx)(Fa,{value:l,onChange:r,onBlur:d,type:e.type})},u=function(t,a,n){e.rows.forEach((function(e,i){i===t&&(e[a]=n)}));var l=i();s(l),e.onUpdate&&e.onUpdate(l)};return Object(ot.jsx)(bn.a,{component:mn.a,className:a.container,children:Object(ot.jsxs)(sn.a,{className:a.table,"aria-label":"simple table",children:[!e.hideHeader&&Object(ot.jsx)(pn.a,{children:Object(ot.jsx)(hn,{children:e.columns.map((function(e){return Object(ot.jsx)(vn,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ot.jsx)(dn.a,{style:{backgroundColor:"#fff"},children:void 0===e.rows||null===e.rows||0===e.rows.length?Object(ot.jsx)("p",{children:"No records to display"}):null===(t=e.rows)||void 0===t?void 0:t.map((function(t,a){return Object(ot.jsx)(hn,{children:e.columns.map((function(e){var n=""!==t[e.id]?t[e.id]:"-";return Object(ot.jsx)(vn,{align:e.align,children:!0===e.isEditable?Object(ot.jsx)(d,{initialValue:n,index:a,id:e.id,type:e.type,label:e.label,handler:e.handler}):n},e.id)}))},t.name)}))}),null!==e.rows&&e.rows.length>0&&e.hasTotal&&Object(ot.jsxs)(hn,{children:[Object(ot.jsx)(vn,{colSpan:e.columns.findIndex((function(t){return t.id===e.totalColId}))-1}),Object(ot.jsx)(vn,{children:r})]})]})})}var xn=[{id:"doc_kind",label:"Document Name"},{id:"document_name",label:"File Name"}],fn=[{id:"doc_kind",label:"Document Name"}];var yn=Object(g.a)({root:{width:"100%",marginTop:24}}),_n=function(e){var t,a,n,l,o,c,s,u=yn(),b=[],p=!0===e.details?xn:fn;for(var j in i.a.useEffect((function(){console.log("Props Data",e.data)}),[e.data]),e.data){var m,v;b.push((t=e.data[j].doc_kind,a=e.data[j].document_name,n=e.data[j].file_name,l=e.data[j].upload,o=e.data[j].required,c=null===(m=e.data[j])||void 0===m?void 0:m.docid,s=null===e||void 0===e||null===(v=e.data[j])||void 0===v?void 0:v.dispatchid,{doc_kind:t,document_name:a,file_name:n,upload:l,required:o,docid:c,dispatchid:s}))}var h=function(t,a,n,i,l){e.downloadFile("download_file",a,n,i,l)},O=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},g=function(){var e=Object(r.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Came isndie this"),console.log(t.target.files[0]),e.next=4,O(t.target.files[0]);case 4:a.file=e.sent,a.file=a.file.replace(/^data:application\/(pdf);base64,/,""),a.fileName=t.target.files[0].name,console.log("Row is",a);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(ot.jsx)(mn.a,{className:u.root,children:Object(ot.jsx)(bn.a,{children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[!0===e.details&&Object(ot.jsx)(pn.a,{children:Object(ot.jsxs)(jn.a,{children:[p.map((function(e){return Object(ot.jsx)(un.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)})),Object(ot.jsx)(un.a,{children:"Documents Required"}),Object(ot.jsx)(un.a,{children:"Upload"}),Object(ot.jsx)(un.a,{})]})}),!0===e.edit&&Object(ot.jsx)(pn.a,{children:Object(ot.jsxs)(jn.a,{children:[p.map((function(e){return Object(ot.jsx)(un.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)})),Object(ot.jsx)(un.a,{children:"File"}),Object(ot.jsx)(un.a,{children:"Documents Required"}),Object(ot.jsx)(un.a,{children:"Upload"}),Object(ot.jsx)(un.a,{}),Object(ot.jsx)(un.a,{}),Object(ot.jsx)(un.a,{})]})}),Object(ot.jsx)(dn.a,{children:b.map((function(t,a){return console.log("Row is",t),!0===e.details?Object(ot.jsxs)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:[p.map((function(e,a){var n=t[e.id];return Object(ot.jsx)(un.a,{align:e.align,children:n},e.id)})),Object(ot.jsx)(un.a,{children:Object(ot.jsx)(Va,{checked:t.required,name:t.required,disabled:!0})}),Object(ot.jsx)(un.a,{children:Object(ot.jsx)(Va,{checked:!!t.upload,name:t.upload,disabled:!0})}),Object(ot.jsx)(un.a,{children:t.file_name&&Object(ot.jsx)(Yt,{label:"Download",onClick:function(e){h(0,t.file_name,t.document_name,null===t||void 0===t?void 0:t.docid,null===t||void 0===t?void 0:t.dispatchid)}})})]},t.code):Object(ot.jsxs)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:[p.map((function(e,a){var n=t[e.id];return Object(ot.jsx)(un.a,{align:e.align,children:n},e.id)})),Object(ot.jsxs)(un.a,{children:[!t.file_name&&Object(ot.jsx)(Fa,{type:"file",onChange:function(e){g(e,t)}}),t.document_name]}),Object(ot.jsx)(un.a,{children:Object(ot.jsx)(Va,{checked:null===t||void 0===t?void 0:t.required,name:null===t||void 0===t?void 0:t.required})}),Object(ot.jsx)(un.a,{children:Object(ot.jsx)(Va,{checked:!!t.upload,name:t.upload})}),Object(ot.jsx)(un.a,{children:!t.file_name&&Object(ot.jsx)(Yt,{label:"Upload",onClick:function(a){!function(t,a,n,i,l,o){e.uploadFile("upload_file",a,n,i,l,o)}(0,t.file,t.doc_kind,t.fileName,null===t||void 0===t?void 0:t.docid,null===t||void 0===t?void 0:t.dispatchid)}})}),Object(ot.jsx)(un.a,{children:t.file_name&&Object(ot.jsx)(Yt,{label:"Download",onClick:function(e){h(0,t.file_name,t.document_name,null===t||void 0===t?void 0:t.docid,null===t||void 0===t?void 0:t.dispatchid)}})}),Object(ot.jsx)(un.a,{children:t.file_name&&Object(ot.jsx)(Yt,{label:"Delete",onClick:function(a){!function(t,a,n,i){e.deleteFile("delete_file",a,n,i)}(0,t.file_name,null===t||void 0===t?void 0:t.docid,null===t||void 0===t?void 0:t.dispatchid)}})})]},t.code)}))})]})})})},Cn=Object(g.a)((function(e){return{root:{paddingTop:e.spacing(3),minWidth:"100%","& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .page-header":{width:"100%",marginBottom:15},"& .MuiAccordion-root":{width:"100%"},"& .dispatchTable":{maxHeight:"400px",overflowY:"auto"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"},modal:{position:"absolute",margin:"auto",top:"30%",right:"10%",left:"10%",width:900,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),wn=function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},Sn=function(e){var t=Cn(),a=Object(f.g)(),i=Object(n.useState)({}),l=Object(c.a)(i,2),o=l[0],s=l[1],u=Object(n.useState)(null),b=Object(c.a)(u,2),p=b[0],j=b[1],v=Object(n.useState)([]),h=Object(c.a)(v,2),g=h[0],y=h[1],C=Object(n.useState)({}),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)({}),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)([]),T=Object(c.a)(A,2),E=T[0],q=T[1],F=Object(n.useState)([]),M=Object(c.a)(F,2),R=M[0],B=M[1],H=Object(n.useState)({open:!1,message:"",severity:""}),G=Object(c.a)(H,2),L=G[0],U=G[1],Q=Object(n.useState)(!1),V=Object(c.a)(Q,2),z=V[0],W=V[1],Y=Object(n.useState)(!1),K=Object(c.a)(Y,2),J=K[0],Z=K[1],X=Object(n.useState)(-1),$=Object(c.a)(X,2),ee=$[0],te=$[1],ae=Object(n.useState)([]),ne=Object(c.a)(ae,2),ie=ne[0],le=ne[1],oe=Object(n.useState)(!1),re=Object(c.a)(oe,2),ce=re[0],se=re[1],de=Object(n.useState)(!1),ue=Object(c.a)(de,2),be=ue[0],pe=ue[1],je=Object(n.useState)(!1),me=Object(c.a)(je,2),ve=me[0],he=me[1];function Oe(){return(Oe=Object(r.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe({po_list:!0,username:JSON.parse(localStorage.getItem("preference")).name});case 2:(t=e.sent)&&t.length?le(t):(le([]),se(!0));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){Oe.apply(this,arguments)}(),Z(!0)}),[]);var ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=null===e||void 0===e?void 0:e.filter((function(e){return e.value===t}))[0];return a},xe=function(e,t){var a=Object(nt.a)(Object(nt.a)({},o),{},Object(Ot.a)({},t,e.target.value));s(a),console.log(a)},fe=function(){var e=Object(r.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="Please enter valid details",I(a={}),_.a.isEmpty(o.dispatch)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{dispatch:t})),_.a.isEmpty(o.invoice)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{invoice:t})),_.a.isEmpty(o.dispatchQty)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{dispatchQty:t})),_.a.isEmpty(o.coffeeGrade)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{coffeeGrade:t})),_.a.isEmpty(o.vehicleDetails)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{vehicleDetails:t})),_.a.isEmpty(o.moisture)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{moisture:t})),_.a.isEmpty(o.brokenbits)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{brokenbits:t})),_.a.isEmpty(o.insectedbeans)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{insectedbeans:t})),_.a.isEmpty(o.sticks)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{sticks:t})),_.a.isEmpty(o.stones)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{stones:t})),_.a.isEmpty(o.husk)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{husk:t})),_.a.isEmpty(a)){e.next=18;break}I(a),e.next=31;break;case 18:return W(!0),n={vendor_create:!0,dispatch_id:o.dispatch,invoice_no:o.invoice,dispatch_quantity:o.dispatchQty,coffee_grade:o.coffeeGrade,vehicle_no:o.vehicleDetails,po_no:S.po_no,po_date:S.po_date,po_category:S.po_category,supplier_id:S.supplier_id,supplier_email:S.supplier_email,item_id:S.item_id,total_quantity:S.total_quantity?S.total_quantity:"",density:o.density&&""!==o.density?o.density.toString():0,moisture:o.moisture.toString(),browns:o.browns&&""!==o.browns?o.browns.toString():0,blacks:o.blacks&&""!==o.blacks?o.blacks.toString():0,brokenbits:o.brokenbits.toString(),insectedbeans:o.insectedbeans.toString(),bleached:o.bleached&&""!==o.bleached?o.bleached.toString():0,husk:o.husk.toString(),sticks:o.sticks.toString(),stones:o.stones.toString(),beansretained:o.beansretained&&""!==o.beansretained?o.beansretained.toString():0},e.prev=20,e.next=23,qe(n);case 23:e.sent&&(U({open:!0,message:"Dispatch information sent successfully"}),setTimeout((function(){W(!1),localStorage.setItem("vendorAllDisable",!0),s({})}),2e3)),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(20),W(!1),U({open:!0,message:e.t0.message,severity:"error"});case 31:case"end":return e.stop()}}),e,null,[[20,27]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(r.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Came insdie this"),n=Object(nt.a)(Object(nt.a)({},o),{},{dispatch:a.value}),j(null===a||void 0===a?void 0:a.value),qe({type:"dispatch_view",dispatch_id:a.value}).then(function(){var e=Object(r.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(nt.a)(Object(nt.a)({},n),{},{related_detid:t.related_detid,delivered_quantity:t.delivered_quantity,expected_quantity:t.expected_quantity,dispatch_date:t.dispatch_date}),e.next=3,s(n);case 3:t.dispatch_sumbit?pe(!0):pe(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_e=[{label:"Dispatch details *",type:"autocomplete",labelprop:"label",value:ge(E,o.dispatch)||"",required:!0,error:null===D||void 0===D?void 0:D.dispatch,helperText:null===D||void 0===D?void 0:D.dispatch,options:E||[],sm:12,onChange:ye}],Ce=[{label:"Expected quantity",type:"number",value:o.expected_quantity||"",disabled:!0},{label:"Delivery date",type:"datePicker",value:S.dispatch_date,disabled:!0},{label:"Delivered quantity",type:"number",value:o.delivered_quantity||"",disabled:!0},{label:"Parent dispatch",type:"input",value:S.parentDispatch||"-",disabled:!0},{label:"Invoice number",type:"input",required:!0,error:null===D||void 0===D?void 0:D.invoice,helperText:null===D||void 0===D?void 0:D.invoice,value:o.invoice||"",onChange:function(e){return xe(e,"invoice")},disabled:be},{label:"Dispatch quantity (KGS)",type:"number",required:!0,error:null===D||void 0===D?void 0:D.dispatchQty,helperText:null===D||void 0===D?void 0:D.dispatchQty,value:o.dispatchQty||"",onChange:function(e){return xe(e,"dispatchQty")},disabled:be},{label:"Coffee grade",type:"input",required:!0,error:null===D||void 0===D?void 0:D.coffeeGrade,helperText:null===D||void 0===D?void 0:D.coffeeGrade,value:o.coffeeGrade||"",onChange:function(e){return xe(e,"coffeeGrade")},disabled:be},{label:"Vehicle/BL number details",type:"input",required:!0,error:null===D||void 0===D?void 0:D.vehicleDetails,helperText:null===D||void 0===D?void 0:D.vehicleDetails,rows:3,multiline:!0,value:o.vehicleDetails||"",onChange:function(e){return xe(e,"vehicleDetails")},disabled:be}],we=[{label:"Density(Gm/Cc)",type:"number",value:o.density||"",sm:12,onChange:function(e){return xe(e,"density")},disabled:be},{label:"Moisture(%)",type:"number",required:!0,sm:12,error:null===D||void 0===D?void 0:D.moisture,helperText:null===D||void 0===D?void 0:D.moisture,value:o.moisture||"",onChange:function(e){return xe(e,"moisture")},disabled:be},{label:"Browns (%)",type:"number",sm:12,value:o.browns||"",onChange:function(e){return xe(e,"browns")},disabled:be},{label:"Blacks (%)",type:"number",sm:12,value:o.blacks||"",onChange:function(e){return xe(e,"blacks")},disabled:be},{label:"Broken & Bits (%)",type:"number",required:!0,sm:12,error:null===D||void 0===D?void 0:D.brokenbits,helperText:null===D||void 0===D?void 0:D.brokenbits,value:o.brokenbits||"",onChange:function(e){return xe(e,"brokenbits")},disabled:be},{label:"Insected beans (%)",type:"number",required:!0,sm:12,error:null===D||void 0===D?void 0:D.insectedbeans,helperText:null===D||void 0===D?void 0:D.insectedbeans,value:o.insectedbeans||"",onChange:function(e){return xe(e,"insectedbeans")},disabled:be},{label:"Bleached (%)",type:"number",sm:12,value:o.bleached||"",onChange:function(e){return xe(e,"bleached")},disabled:be},{label:"Husk (%)",type:"number",required:!0,sm:12,error:null===D||void 0===D?void 0:D.husk,helperText:null===D||void 0===D?void 0:D.husk,value:o.husk||"",onChange:function(e){return xe(e,"husk")},disabled:be},{label:"Sticks (%)",type:"number",required:!0,sm:12,error:null===D||void 0===D?void 0:D.sticks,helperText:null===D||void 0===D?void 0:D.sticks,value:o.sticks||"",onChange:function(e){return xe(e,"sticks")},disabled:be},{label:"Stones (%)",type:"number",required:!0,sm:12,error:null===D||void 0===D?void 0:D.stones,helperText:null===D||void 0===D?void 0:D.stones,value:o.stones||"",onChange:function(e){return xe(e,"stones")},disabled:be},{label:"Beans retained on 5mm mesh during sieve analysis",type:"number",sm:12,value:o.beansretained||"",onChange:function(e){return xe(e,"beansretained")},disabled:be}],Se=function(e){var t=[];Re({type:"getDocumentsOnPo",po_id:e}).then((function(e){null===e||void 0===e||e.map((function(e){return t.push({upload:!(null===e||void 0===e||!e.file_name),file_name:null===e||void 0===e?void 0:e.file_name,document_name:null===e||void 0===e?void 0:e.document_name,doc_kind:null===e||void 0===e?void 0:e.doc_kind,required:null===e||void 0===e?void 0:e.required,docid:null===e||void 0===e?void 0:e.docid,dispatchid:null===e||void 0===e?void 0:e.dispatchid}),null})),y(t)}))};Object(n.useEffect)((function(){if(null!==S&&void 0!==S&&S.poid){var e=[];Re({type:"getDocumentsOnPo",po_id:null===S||void 0===S?void 0:S.poid}).then((function(t){null===t||void 0===t||t.map((function(t){return e.push({upload:!(null===t||void 0===t||!t.file_name),file_name:null===t||void 0===t?void 0:t.file_name,document_name:null===t||void 0===t?void 0:t.document_name,doc_kind:null===t||void 0===t?void 0:t.doc_kind,required:null===t||void 0===t?void 0:t.required,docid:null===t||void 0===t?void 0:t.docid,dispatchid:null===t||void 0===t?void 0:t.dispatchid})})),y(e)}))}}),[null===S||void 0===S?void 0:S.poid]);var ke=[{label:"PO Number",type:"autocomplete",required:!0,labelprop:"po_no",value:ge(ie,ee),options:ie||[],onChange:function(e,t){e.preventDefault(),te(t.po_no),Pe({po_no:t.po_no}).then((function(e){k(e),B(e?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{composition_name:"Density(Gm/Cc)",composition_rate:e.density},{composition_name:"Moisture (%)",composition_rate:e.moisture},{composition_name:"Browns (%)",composition_rate:e.browns},{composition_name:"Blacks (%)",composition_rate:e.blacks},{composition_name:"Broken & Bits (%)",composition_rate:e.brokenbits},{composition_name:"Insected beans (%)",composition_rate:e.insectedbeans},{composition_name:"Bleached (%)",composition_rate:e.bleached},{composition_name:"Husk (%)",composition_rate:e.husk},{composition_name:"Sticks (%)",composition_rate:e.sticks},{composition_name:"Stones (%)",composition_rate:e.stones},{composition_name:"Beans retained on 5mm mesh during sieve analysis",composition_rate:e.beansretained}]}(e):null)})),qe({type:"all_dispatches",po_no:t.po_no}).then((function(e){e.dispatches_for_po&&q(function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(n){return a.push({label:n[e],value:n[t]||n[e]})})),a}(e.dispatches_for_po,"dispatch_id","dispatch_id"))}))},sm:12}],Ne=function(){var e=Object(r.a)(d.a.mark((function e(t,a,n,i,l,o){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Re({type:"uploadDocument",document_name:i,po_id:null===S||void 0===S?void 0:S.poid,docid:l,dispatchid:o,document_content:a,doc_kind:n,updatedBy:localStorage.getItem("currentUserId")});case 5:r=e.sent,console.log("Response",r),r&&(U({open:!0,message:"File uploaded successfully"}),Se(null===S||void 0===S?void 0:S.poid),he((function(e){return!e}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),U({open:!0,message:e.t0.message,severity:"error"});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a,n,i,l,o){return e.apply(this,arguments)}}(),De=function(){var e=Object(r.a)(d.a.mark((function e(t,a,n,i,l){var o,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re({type:"downloadDocument",file_name:a,docid:i,dispatchid:l});case 3:(o=e.sent)&&(r="data:application/pdf;base64,".concat(o.fileData),(c=document.createElement("a")).href=r,c.download=n,c.click(),U({open:!0,message:"File downloaded successfully"})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),U({open:!0,message:e.t0.message,severity:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n,i,l){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(r.a)(d.a.mark((function e(t,a,n,i){var l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re({type:"removeDocument",file_name:a,docid:n,dispatchid:i});case 3:l=e.sent,console.log("Response",l),l&&(U({open:!0,message:"File deleted successfully"}),Se(null===S||void 0===S?void 0:S.poid)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),U({open:!0,message:e.t0.message,severity:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n,i){return e.apply(this,arguments)}}(),Ae=[];return!0!==J?Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[L.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},L),{},{handleClose:function(){return U({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(ua.a,{className:"page-header",children:[Object(ot.jsx)(an.a,{title:" Purchase Order Details",className:"cardHeader"}),Object(ot.jsx)(xa.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsxs)(m.a,{container:!0,md:12,children:[Object(ot.jsxs)(m.a,{item:!0,md:2,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"PO no"}),Object(ot.jsx)(O.a,{children:null===S||void 0===S?void 0:S.po_no})]}),Object(ot.jsxs)(m.a,{item:!0,md:2,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"PO date"}),Object(ot.jsx)(O.a,{children:wn(null===S||void 0===S?void 0:S.po_date)})]}),Object(ot.jsxs)(m.a,{item:!0,md:2,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"PO category"}),Object(ot.jsx)(O.a,{children:null===S||void 0===S?void 0:S.po_category})]}),Object(ot.jsxs)(m.a,{item:!0,md:2,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Item name"}),Object(ot.jsx)(O.a,{children:null===S||void 0===S?void 0:S.item_name})]}),Object(ot.jsxs)(m.a,{item:!0,md:2,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Total quantity"}),Object(ot.jsx)(O.a,{children:null===S||void 0===S?void 0:S.total_quantity})]})]})})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Dispatch information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{container:!0,children:[Object(ot.jsxs)(m.a,{item:!0,md:12,xs:12,className:"dispatch_details",children:[Object(ot.jsx)(tn,{payload:_e}),be&&Object(ot.jsx)(ua.a,{className:"page-header",children:Object(ot.jsx)(xa.a,{className:"cardHeader",children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,children:Object(ot.jsx)(O.a,{variant:"h7",children:"Dispatch Details already submitted"})})})}),Object(ot.jsx)(tn,{payload:Ce})]}),Object(ot.jsx)(m.a,{item:!0,md:6,xs:6,children:Object(ot.jsxs)(m.a,{item:!0,md:12,xs:12,style:{marginRight:25},children:[Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Expected order composition information"})}),Object(ot.jsx)(gn,{rows:R,columns:[{id:"composition_name",label:"Item"},{id:"composition_rate",label:"Composition"}],hasTotal:!1})]})}),Object(ot.jsxs)(m.a,{item:!0,md:6,xs:6,children:[Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Dispatch composition information"})}),Object(ot.jsx)(tn,{payload:we})]}),Object(ot.jsxs)(m.a,{container:!0,md:12,xs:12,children:[Object(ot.jsxs)(m.a,{container:!0,className:"item",md:12,xs:12,direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(O.a,{style:{fontSize:"1.2rem"},children:"Document information"})}),Object(ot.jsx)(Yt,{label:ve?"Done":"Edit",onClick:function(e){e.stopPropagation(),he((function(e){return!e}))}})]}),Object(ot.jsx)(_n,{data:null===g||void 0===g?void 0:g.filter((function(e){return console.log("Document is",e),(null===e||void 0===e?void 0:e.dispatchid)===p})),edit:ve,details:!ve,uploadFile:function(e,t,a,n,i,l){return Ne(e,t,a,n,i,l)},downloadFile:function(e,t,a,n,i){return De(e,t,a,n,i)},deleteFile:function(e,t,a,n){return Ie(e,t,a,n)}})]})]})})]}),Object(ot.jsx)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:Object(ot.jsxs)(m.a,{item:!0,children:[!be&&Object(ot.jsx)(Yt,{disabled:z,label:z?"Loading ...":"Submit",onClick:fe}),be&&Object(ot.jsx)(Yt,{label:"Exit",onClick:function(){return a("/Vendor")}}),Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return Z(!0)}})]})})]}):(Ae=Object(ot.jsx)(zt,{open:J,handleClose:function(){return Z(!J)},body:function(){return Object(ot.jsxs)(x.a,{className:t.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Select PO details"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{id:"top-row",xs:6,md:10,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:ke})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Next",onClick:function(){Z(!J)}})}),ce&&Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Exit",onClick:function(){return Z(!1)}})})]})]})}}),Object(ot.jsx)(x.a,{className:t.root,children:Ae}))},kn=a(965),Nn=a(99),Pn=a(236),Dn=a(964),In=a(80),An=a.n(In),Tn=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],i=t[1],l=kn.a.RangePicker;Object(n.useEffect)((function(){A.a.get("http://k8s-develope-leapfrog-6e0891b4e1-1182481187.ap-south-1.elb.amazonaws.com/gin-dev-getconfirmedorders",{headers:{"Content-Type":"application/json",Accept:"*"}}).then((function(e){return e.data})).then((function(e){console.log("Response fetched is",e);var t=null===e||void 0===e?void 0:e.map((function(e){return{"S. No.":null===e||void 0===e?void 0:e.SerialNo,"Contract No.":null===e||void 0===e?void 0:e.ContactNo,"Customer Name":null===e||void 0===e?void 0:e.CustomerName,"Marketing Rep.":null===e||void 0===e?void 0:e.MarketingRep,"Product Type":null===e||void 0===e?void 0:e.ProductCode,"Packing Type":null===e||void 0===e?void 0:e.PackingType,"Sample Code":null===e||void 0===e?void 0:e.SampleCode,"Brand Name":null===e||void 0===e?void 0:e.BrandName,Destination:null===e||void 0===e?void 0:e.Destination,Incoterms:null===e||void 0===e?void 0:e.InCoterms,"Quantity (Kg)":null===e||void 0===e?void 0:e.Quantity,"Price ($/Kg)":null===e||void 0===e?void 0:e.Price,"Value ($)":null===e||void 0===e?void 0:e.Value}}));i(t)})).catch((function(e){console.log("Error is",e)}))}),[]);var o=function(e){return e.map((function(e,t){return{title:function(){return Object(ot.jsx)("b",{children:_.a.toUpper(e)})},dataIndex:e,key:e,width:150,ellipsis:!0,render:function(e){return 0===t?Object(ot.jsx)("a",{href:"#",children:e}):e}}}))},r=o(["S. No.","Contract No.","Customer Name","Marketing Rep.","Product Type","Sample Code","Packing Type","Brand Name","Destination","Incoterms","Quantity (Kg)","Price ($/Kg)","Value ($)"]),s=o(["Contract Date","Purchase Order No.","Purchase Order Date"]),d=o(["Net Wt.(g)","Units per Carton","No. of Cartons","No. Of Units","Order Scheduled Date","Requested Dispatch Date","Production Scheduled Date","Ready for Dispatch Date","Dispatched Date","Status","Dispatched Plant","Product Description"]);return Object(ot.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(ot.jsxs)("section",{className:An.a.filters,children:[Object(ot.jsxs)("div",{className:An.a.datefilter,children:[Object(ot.jsx)(l,{}),Object(ot.jsxs)("section",{className:An.a.button,children:[Object(ot.jsx)(Nn.a,{type:"primary",style:{backgroundColor:dt,border:"1px solid ".concat(dt)},children:"Apply"}),Object(ot.jsx)(Nn.a,{style:{color:dt,border:"1px solid ".concat(dt)},children:"Clear"})]})]}),Object(ot.jsxs)(Pn.a.Group,{children:[Object(ot.jsx)(Pn.a.Button,{value:"Week",children:"Week to Date"}),Object(ot.jsx)(Pn.a.Button,{value:"Month",children:"Month to Date"}),Object(ot.jsx)(Pn.a.Button,{value:"Year",children:"Year to Date"})]})]}),Object(ot.jsxs)("div",{style:{display:"flex",width:"100%",flexDirection:"row"},children:[Object(ot.jsxs)("div",{className:"".concat(An.a.tableWrapper," ").concat(An.a.flex2),children:[Object(ot.jsx)("section",{className:An.a.tableheader,children:Object(ot.jsx)("h2",{style:{color:dt},children:"Confirmed Orders"})}),Object(ot.jsx)(Dn.a,{columns:r,dataSource:a,size:"small",scroll:{x:500,y:200},className:An.a.table,onHeaderRow:function(e,t){console.log("Columns are",e,t)}})]}),Object(ot.jsxs)("div",{className:An.a.tableWrapper,children:[Object(ot.jsx)("section",{className:An.a.tableheader,children:Object(ot.jsx)("h2",{style:{color:dt},children:"Purchases against Orders"})}),Object(ot.jsx)(Dn.a,{columns:s,dataSource:[{"Contract Date":"12/10/2021","Purchase Order No.":"PO-1234","Purchase Order Date":"15/10/2021"},{"Contract Date":"12/10/2021","Purchase Order No.":"PO-1234","Purchase Order Date":"15/10/2021"},{"Contract Date":"12/10/2021","Purchase Order No.":"PO-1234","Purchase Order Date":"15/10/2021"},{"Contract Date":"12/10/2021","Purchase Order No.":"PO-1234","Purchase Order Date":"15/10/2021"}],scroll:{x:500,y:200},size:"small",className:An.a.table})]})]}),Object(ot.jsxs)("div",{className:An.a.tableWrapper,children:[Object(ot.jsx)("section",{className:An.a.tableheader,children:Object(ot.jsx)("h2",{style:{color:dt},children:"Production Planning Logistics"})}),Object(ot.jsx)(Dn.a,{columns:d,dataSource:[{"Net Wt.(g)":"100gm","Units per Carton":"22","No. of Cartons":"3","No. Of Units":"66","Order Scheduled Date":"12/10/2021","Requested Dispatch Date":"15/10/2021","Production Scheduled Date":"14/10/2021","Ready for Dispatch Date":"13/10/2021","Dispatched Date":"13/10/2021",Status:"Pending","Dispatched Plant":"Duggirala","Product Description":"Description"},{"Net Wt.(g)":"100gm","Units per Carton":"22","No. of Cartons":"3","No. Of Units":"66","Order Scheduled Date":"12/10/2021","Requested Dispatch Date":"15/10/2021","Production Scheduled Date":"14/10/2021","Ready for Dispatch Date":"13/10/2021","Dispatched Date":"13/10/2021",Status:"Pending","Dispatched Plant":"Duggirala","Product Description":"Description"},{"Net Wt.(g)":"100gm","Units per Carton":"22","No. of Cartons":"3","No. Of Units":"66","Order Scheduled Date":"12/10/2021","Requested Dispatch Date":"15/10/2021","Production Scheduled Date":"14/10/2021","Ready for Dispatch Date":"13/10/2021","Dispatched Date":"13/10/2021",Status:"Pending","Dispatched Plant":"Duggirala","Product Description":"Description"}],className:An.a.table,size:"small",scroll:{x:500,y:200}})]})]})},En=a(960),qn=a(430),Fn=a.n(qn),Mn=Object(g.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)},backgroundColor:dt,color:st,textTransform:"capitalize","&:hover":{backgroundColor:dt,opacity:.8}},extendedIcon:{marginRight:e.spacing(1)}}}));function Rn(e){var t=Mn();return Object(ot.jsxs)(En.a,Object(nt.a)(Object(nt.a)({},e),{},{className:t.root,children:[e.icon||Object(ot.jsx)(Fn.a,{className:t.extendedIcon}),e.label]}))}var Bn=Object(g.a)((function(e){return{button:{margin:e.spacing(1),backgroundColor:dt,color:st,minWidth:70,textTransform:"capitalize","&:hover":{backgroundColor:dt,opacity:.8}},outlineButton:{border:"1px solid"+dt,color:dt,"&:hover":{backgroundColor:dt,opacity:.8,color:st}}}}));function Hn(e){var t=Bn(),a=e.label,n=e.variant;return Object(ot.jsx)(u.a,Object(nt.a)(Object(nt.a)({variant:n||"contained",color:"primary",className:n?t.outlineButton:t.button},e),{},{children:a}))}var Gn=Object(g.a)((function(e){return{filterMain:{padding:"10px 20px 30px 20px",width:"300px !imporant"},formcontrolFilter:{marginBottom:"15px"},imgFilter:{position:"relative",top:"5px",left:"5px",cursor:"pointer"}}})),Ln=[{enable:!1,type:"",value:"select",title:"Select"},{enable:!0,type:" = ",value:"eq",title:"Is equal to"},{enable:!0,type:" != ",value:"neq",title:"Is not equal to"},{enable:!0,type:" like ",value:"startswith",title:"Starts with"},{enable:!0,type:" like ",value:"contains",title:"Contains"},{enable:!0,type:" not like ",value:"doesnotcontain",title:"Does not contain"},{enable:!0,type:" like ",value:"endswith",title:"Ends with"},{enable:!0,type:" is null ",value:"isnull",title:"Is null"},{enable:!0,type:" is not null ",value:"isnotnull",title:"Is not null"},{enable:!0,type:' = "" ',value:"isempty",title:"Is empty"},{enable:!0,type:' != "" ',value:"isnotempty",title:"Is not empty"},{enable:!0,type:" is null ",value:"hasnovalue",title:"Has no value"},{enable:!0,type:" is not null ",value:"hasvalue",title:"Has value"}];function Un(e){var t=Gn(),a=i.a.useState(null),n=Object(c.a)(a,2),l=n[0],o=n[1],r=i.a.useState(null),s=Object(c.a)(r,2),d=s[0],u=s[1],b=i.a.useState({before:"select",and:"select",after:"select"}),j=Object(c.a)(b,2),v=j[0],h=j[1],O=function(){o(null)},g=Boolean(l),x=g?"simple-popover":void 0,f=e.order,y=e.orderBy,C=e.headCells,w=function(e,t){var a=Object(nt.a)({},v);a[t]=e.target.value,h(a)},S=function(){e.clearAdvancedFilters(),h({before:"select",and:"select",after:"select",afterText:"",beforeText:""}),o(null)},k=function(e,t,a){var n;switch(a=null===(n=a)||void 0===n?void 0:n.trim(),e){case"eq":return" ".concat(t," = '").concat(a,"' ");case"neq":return" ".concat(t," <> '").concat(a,"' ");case"startswith":return" ".concat(t," like '").concat(a,"%' ");case"contains":return" ".concat(t," like '%").concat(a,"%' ");case"doesnotcontain":return" ".concat(t," not like '%").concat(a,"%' ");case"endswith":return" ".concat(t," like '%").concat(a,"' ");case"isnull":case"hasnovalue":return" ".concat(t," is null ");case"isnotnull":case"hasvalue":return" ".concat(t," is not null ");case"isempty":return" ".concat(t," = '' ");case"isnotempty":return" ".concat(t," <> '' ");default:return null}};return Object(ot.jsx)(pn.a,{children:Object(ot.jsx)(jn.a,{children:C.map((function(a){return Object(ot.jsxs)(un.a,{align:a.numeric?"right":"left",padding:a.disablePadding?"none":"normal",sortDirection:y===a.id&&f,children:[a.label,a.hideFilter?null:Object(ot.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAABU1BMVEUAAAAAAAAAAAAAAAA/AAAzMzMqKiofHx8cHBwZGRknJyckJCQiIiIcHBwmGSYkJCQeHh4lHBwkGyQjIyMfHx8kHR0jHCMlHx8jHR0iHCIiHCIjHh4hHCEhISElICAhHSEjHx8jHx8iHh4jHx8iHx8hHiEkHSEjHSAhHh4kHiEiHx8iHx8hHh4iICAiHx8iHx8kHx8jHiAiHiAiHiAiHiAiHx8jHx8jHx8iHiAiHiAiHiAjHiAjHx8jHx8iHx8iHx8iHyAiHiAjHiAjHiAiHx8iHx8jHyAiHx8iHiAiHh8iHx8jHx8jHiAiHiAjHx8jHyAjHyAiHh8jHx8iHh8jHyAiHyAiHiAjHx8iHyAiHiAiHx8iHyAjHiAiHx8iHyAiHyAjHyAiHh8iHyAjHyAjHh8iHh8iHyAjHyAjHyAjHiAiHh8iHh8iHx8jHyAjHyAjHyAjHyAk9ITjAAAAcHRSTlMAAQIDBAUGCAkKDQ4PEhQVGRscHSAjJCkrLC0yNTY3PUBBQkhJTE1OU1VZWltnaGlqdHV2d3h5g4SFhoeIkZKTlJWWnaKjpKqvsLGztre7vL3BwsjMzc7S1dbb3t/j5OXm6uzt8PL09fb3+fr7/P3+zkVWrAAACUJJREFUeNrt3emfV2Mcx+G7xVKIECL7Hg010SQqzNhly15EQkrT///Ig17RaObMbznn3Mv3uv6Ec38efGveTSkBAAAAAAAAAAAAAAAAAAAAAAAAAACQ2ztXCex4uuVzXyGuU9tTuusH3yGqH3ellNKDv/kSMV146NoZ8PTfvkVEV569fgi+7mNEdPDfPwlsec/XiGf5hj8L3vaV7xHN6dtv/NuAe876IrH8vHvt3wc98odvEsmf+/7/N4Ivrvoqcazuv/nvhI/5LHEcWeeHAls/8l2i+GDrej8W2vmtLxPDd3es/4PB+3/xbSL4dc9GPxp+/C9fp32Xntg4DnjV52nfAXlIaMc7+yB5SOtObe8uxOQhbbuWgHSRh7TsegLSRR7Srv8SkC7ykGYdnCgUl4e0annCfyogD2nT2gSkizykRed2T/7PheQh7bn46DT/YEwe0pr1EpAu8pDGHJny34zKQ9qyfgLSRR7Sko0SkC7ykHZsnIB0kYe04tKTs/3uCHlIIw747SGhHZ/518fIQ1rw2fbZf4GQPKR+mycg8pCWXdg73y8Rk4fUbbIERB7SrIPzvr88pGrLaX7ykHpNnoDIQ1o0TQIiD2nPdAmIPKQ10yYgXd70OetzpL/3l4dU6MOtPQ5AHlKdWRIQeUg7ZktA5CGtmDUBkYc04kAagDykGseHeH95SDXmSUDkIfWbLwGRh9Ru3gREHlK3+RMQeUjVDg3630zKQ0q3nIYlDylbPwmIPKRWfSUg8pA69ZeAyENq1GcCIg+p0NJI/+O8PKRM/SYg8pDa9J2AyEPq0n8CIg+pyRAJiDykIgtpZPKQopwY+/3lIUX54tbRByAPKchwCYg8pAZDJiDykPJdeS5lIg8pwqFc7y8PKcJyykcekt/wCYg8pGRjJCDykHKNk4DIQ0q1+lLKTh6S0VL+95eHZDReAiIPKdGYCYg8pDzjJiDykNKMnYDIQwqzkAoiDxndiZLeXx4yuhwJiDykHHkSEHlIKXIlIPKQMuRLQOQhRThU4vvLQ0aznMokDxlH3gREHpJb7gREHpJX/gREHpJTCQmIPCSjpbLfXx4ysDISEHlILt/fmYonDxlOOQmIPCSHkhIQeUgGC6kS8pBBnKjl/eUhg/jy1moGIA8ZQHkJiDxkTCUmIPKQ8ZSZgMhDRrNY2/vLQ3q1kuojD+nP6R0VDkAe0puSExB5yPDKTkDkIUMrPQGRhwxsqd73l4f04JNtFQ9AHjK3GhIQechw6khA5CFDqSUBkYcMZCE1QB4ys5MtvL88ZGY1JSDykP7VlYDIQ/pWWwIiD+lXfQmIPKRXiy29vzxkaiupLfKQ6dSZgMhD+lJrAiIP6Ue9CYg8pA81JyDykB4cbfP95SETqjsBkYfMq/YERB4yn/N7UsPkIZtpIQGRh8xhITVOHtLpZOvvLw/p1EoCIg+ZzZldKQB5yEZaSkDkIdNrKwGRh0xtMcr7y0PWtZLikIfc7OsdgQYgD7nJuXtTKPKQtdpMQOQhk2o1AZGHTOhovPeXh9yg3QREHjKJlhMQecjmzj+QgpKHXA2QgMhDNrGQApOHBEhA5CFdIiQg8pCNnbk7BRc7D4mSgHSJnIfESUC6BM5DFr1+6DxkxeOnFDgPiZWAdImZh0RLQLpEzEPiJSBd4uUhEROQLuHykKPefI1oeUjMBKRLrDwkagLSJVIeEjcB6RInD4mcgHQJk4cseOv1BclD3vbSG4iRh0RPQLpEyEMkIF3az0MkIN1az0MkIJtpPA857IU30XYe8v4WL7yZlvMQCcgk2s1DJCCTaTUPkYBMqs08ZPVlLzupJvOQN7zrxFrMQyQg02gvD5GATKe1PEQCMq228hAJyPSaykNe8Z7TaygPkYDMop08RAIym1byEAnIrNrIQyQgs2shD7nyvHecXQN5iARkHvXnIRKQ+dSeh0hA5lV3HiIBmV/NecjFx7zf/OrNQyQg/ag2D5GA9KPWPEQC0pc68xAJSH9qzEMkIH2qLw+59JRX61N1eYgEpGeV5SESkL7VlYdIQPpXUx4iARlCPXnIhYe91hCeqSQPkYAMpZI8RAIylDryEAnIcGrIQyQgQyo/D5GADKv0PEQCMrSy8xAJyPCKzkMkIMMrOQ/5VAIygnLzEAnIOErNQyQgYykzD5GAjKfIPEQCMqIC8xAJyJjKy0MkIOMqLQ+RgIytrDxEAjK+kvIQCUgOBeUhr3mNDMrJQyQgeZSSh0hAcikjD5GA5FNCHiIByamAPEQCklX2POSYN8gqdx4iAcktbx4iAckvZx4iASlBvjzksgSkCNnyEAlIITLlIe/68oXIk4dIQMqRIw+RgJRk78XR/wbYfwRTlNF/LHTWNzcADAADwAAwAAwAA8AAMAAMAAPAADAADAADwAAwAAwAA8AAMAAMAAPAADAADAADwAAwAAwAA8AAMAAMAAPAADAADAADwAAwAAwAA8AAMAAMAAPAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzAAAzANzcADAADwAAwAAwAA8AAMAAMAAPAADAADAADwAAwAAwAA8AAMAAMAAPAADAADIDaBnDKN488gN8Pb/PNAw/g4/t88cAD+OkF3zvwAC6/tdPnDjyAb/b52IEH4PiLPQDHX+gBOP5CD8DxF3sAjr/QA3D8xR6A4y/0ABx/oQfg+Is9AMdf6AE4/mIPwPEXegCOv9ADcPzFHoDjL/QAHH+xB+D4Cz0Ax1/oATj+Yg/A8Rd6AI6/2ANw/IUegOMv9AAcf7EH4PgLPQDHX+wBOP5CD8DxF3oAjr/YA3D8hR6A4y/2ABx/oQfg+As9AMdf7AE4/kIPwPEXewCOv9ADcPyFHoDjL/YAHH+hB+D4iz0Ax1/oATj+Qg/A8Rd7AI6/0ANw/MUegOMv9AAcf6EH4PiLPQDHX+gBOP5iD8DxF3oAjr/QA3D8xR6A4y/0ABx/sQfg+As9AMdf6AE4/mIPwPEXegCOv9gDcPyFHoDjL/QAHH+xB+D4i23/Vt8AAAAAAAAAAAAAAAAAAAAAAAAAAACo1j9pOlQiqDFZ4QAAAABJRU5ErkJggg==",width:"17px",alt:"filter-icon",onClick:function(e){return function(e,t){u(t.id),o(e.currentTarget)}(e,a)},className:t.imgFilter}),Object(ot.jsx)(aa.a,{id:x,open:g,anchorEl:l,onClose:O,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:Object(ot.jsx)(ta.a,{component:"form",sx:{"& > :not(style)":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:Object(ot.jsxs)("div",{className:t.filterMain,children:[Object(ot.jsx)("p",{children:"Show items with value that:"}),Object(ot.jsx)(Da.a,{className:t.formcontrolFilter,fullWidth:!0,children:Object(ot.jsx)(Aa.a,{value:v.before,onChange:function(e){return w(e,"before")},children:null===Ln||void 0===Ln?void 0:Ln.map((function(e,t){return Object(ot.jsx)(Rt.a,{disabled:!e.enable,selected:!e.enable,value:e.value,children:e.title})}))})}),Object(ot.jsx)(Da.a,{className:t.formcontrolFilter,fullWidth:!0,children:Object(ot.jsx)(p.a,{id:"standard-basic",variant:"standard",value:v.beforeText,onChange:function(e){return w(e,"beforeText")}})}),Object(ot.jsx)(Da.a,{className:t.formcontrolFilter,fullWidth:!0,children:Object(ot.jsxs)(Aa.a,{value:v.and,onChange:function(e){return w(e,"and")},children:[Object(ot.jsx)(Rt.a,{value:"select",disabled:!0,children:"Select"}),Object(ot.jsx)(Rt.a,{value:"and",children:"And"}),Object(ot.jsx)(Rt.a,{value:"or",children:"Or"})]})}),Object(ot.jsx)(Da.a,{className:t.formcontrolFilter,fullWidth:!0,children:Object(ot.jsx)(Aa.a,{value:v.after,onChange:function(e){return w(e,"after")},children:Ln.map((function(e,t){return Object(ot.jsx)(Rt.a,{disabled:!e.enable,value:e.value,children:e.title})}))})}),Object(ot.jsx)(Da.a,{className:t.formcontrolFilter,fullWidth:!0,children:Object(ot.jsx)(p.a,{id:"standard-basic",value:v.afterText,variant:"standard",onChange:function(e){return w(e,"afterText")}})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{item:!0,md:6,xs:6,children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Hn,{label:"Clear",onClick:function(){return S()}})})}),Object(ot.jsx)(m.a,{item:!0,md:6,xs:6,children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Hn,{label:"Filter",onClick:function(){return function(){var t=[k(v.before,d,v.beforeText),k(v.after,d,v.afterText)].filter(Boolean).join(" ".concat(v.and," "));_.a.isEmpty(t)?S():e.selectedAdvancedFilters(t),o(null)}()}})})})]})]})})})]},a.id)}))})})}var Qn=[{id:"accountname",label:"Lead Name"},{id:"aliases",label:"Aliases"},{id:"contactfirstname",label:"First Name"},{id:"contactlastname",label:"Last Name"},{id:"contact_mobile",label:"Mobile"},{id:"email",label:"Email"},{id:"leadscore",label:"Profile Completion"},{id:"masterstatus",label:"Status"}];var Vn=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440},sortHeader:{cursor:"pointer"}}),zn=function(e){var t=Vn(),a=i.a.useState(0),l=Object(c.a)(a,2),o=l[0],r=l[1],s=i.a.useState(10),d=Object(c.a)(s,2),u=d[0],b=d[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),m=j[0],v=j[1],h=i.a.useState("asc"),O=Object(c.a)(h,2),g=O[0],x=O[1],f=i.a.useState(""),y=Object(c.a)(f,2),_=y[0],C=y[1],w=[];function S(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}i.a.useEffect((function(){console.log("Props Data",e.data),e.data&&e.data.map((function(e){var t,a,n,i,l,o,r,c,s;w.push((t=e.leadid,a=e.accountname,n=e.aliases,i=e.contactfirstname,l=e.contactlastname,o=e.contact_mobile,r=e.email,c=e.leadscore,s=e.masterstatus,{id:t,accountname:a,aliases:n,contactfirstname:i,contactlastname:l,contact_mobile:o,email:r,leadscore:c,masterstatus:s}))})),v(w)}),[e.data]);return Object(ot.jsxs)(mn.a,{className:t.root,children:[console.log("allData::",m),Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(Un,{classes:t,order:g,orderBy:_,onRequestSort:function(e,t){x(_===t&&"asc"===g?"desc":"asc"),C(t)},rowCount:m.length,headCells:Qn,selectedAdvancedFilters:e.selectedAdvancedFilters,clearAdvancedFilters:e.clearAdvancedFilters}),Object(ot.jsx)(dn.a,{children:m.length>0?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(m,function(e,t){return"desc"===e?function(e,a){return S(e,a,t)}:function(e,a){return-S(e,a,t)}}(g,_)).slice(o*u,o*u+u).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Qn.map((function(a,n){var i=t[a.id];return Object(ot.jsx)(un.a,{align:a.align,children:n?i:Object(ot.jsx)("a",{href:"#",onClick:function(a){return function(t,a,n){return t.preventDefault(),0===a&&e.setRoute("create_lead_edit",n),!1}(a,n,t.id)},children:i})},a.id)}))},t.code)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:m.length,rowsPerPage:u,page:o,onChangePage:function(e,t){r(t)},onChangeRowsPerPage:function(e){b(+e.target.value),r(0)}})]})},Wn=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column","& #top-row":{marginTop:10,marginBottom:5}}}})),Yn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=[];return e.map((function(e){return a.push({label:e[t],value:e.id||e[t]})})),a},Kn=function(e){var t=Wn(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)({}),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)({sample:"No",manufacturing:"No",business:"No"}),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)({}),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)({}),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)({}),D=Object(c.a)(P,2),I=D[0],A=D[1],T=Object(n.useState)({}),E=Object(c.a)(T,2),q=E[0],F=E[1],M=Object(n.useState)({}),R=Object(c.a)(M,2),B=R[0],H=R[1],G=Object(n.useState)([]),L=Object(c.a)(G,2),U=L[0],Q=L[1],V=Object(n.useState)([]),z=Object(c.a)(V,2),W=z[0],Y=z[1],K=Object(n.useState)([]),J=Object(c.a)(K,2),Z=J[0],X=J[1],$=Object(n.useState)([]),ee=Object(c.a)($,2),ie=ee[0],re=ee[1],ce=Object(n.useState)([]),se=Object(c.a)(ce,2),de=se[0],ue=se[1],be=Object(n.useState)([]),pe=Object(c.a)(be,2),je=pe[0],me=pe[1],ve=Object(n.useState)({}),he=Object(c.a)(ve,2),Oe=he[0],ge=he[1],xe=Object(n.useState)({open:!1,message:"",severity:""}),fe=Object(c.a)(xe,2),ye=fe[0],_e=fe[1],Ce=Object(n.useState)(!1),we=Object(c.a)(Ce,2),Se=we[0],ke=we[1],Ne=Jt().getCurrentUserDetails;Object(n.useEffect)((function(){oe({type:"accountDetails"}).then((function(e){return Y(Yn(e,"accounttype","accounttype"))})),oe({type:"productsegments"}).then((function(e){return X(Yn(e,"productsegment","id"))})),oe({type:"phonecodes"}).then((function(e){return re(function(){var e=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return e.push({label:"".concat(t.countryname," (+").concat(t.dialcode,")"),value:t.dialcode})})),e}(e))})),oe({type:"coffeetypes"}).then((function(e){return Q(Yn(e,"coffeetype","id"))})),oe({type:"salutations"}).then((function(e){return ue(Yn(e,"salutation"))}))}),[]);Object(n.useEffect)((function(){te().then((function(e){var t=Yn(e,"country");F(Object(nt.a)(Object(nt.a)({},q),{},{country:t})),H(Object(nt.a)(Object(nt.a)({},B),{},{country:t}))}))}),[]);var Pe=function(e,t){e.preventDefault();var a=e.target.value;o(Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,a)))},De=function(e,t){e.preventDefault();var a=e.target.value;p(Object(nt.a)(Object(nt.a)({},b),{},Object(Ot.a)({},t,a)))},Ie=function(e,t){e.preventDefault();var a=e.target.value;g(Object(nt.a)(Object(nt.a)({},h),{},Object(Ot.a)({},t,a)))},Ae=function(e,t){e.preventDefault();var a=e.target.value;C(Object(nt.a)(Object(nt.a)({},y),{},Object(Ot.a)({},t,a)))},Te=function(e,t){e.preventDefault();var a=e.target.value;N(Object(nt.a)(Object(nt.a)({},k),{},Object(Ot.a)({},t,a)))},Ee=[{label:"Lead for company",type:"input",disabled:!0,value:"CCL"},{label:"Lead name",type:"input",required:!0,value:l.name,error:null===Oe||void 0===Oe?void 0:Oe.name,helperText:null===Oe||void 0===Oe?void 0:Oe.name,onChange:function(e){return Pe(e,"name")}},{label:"Aliases name",type:"input",value:l.aliases,onChange:function(e){return Pe(e,"aliases")}},{label:"Account type",type:"autocomplete",labelprop:"label",multiple:!0,required:!0,error:null===Oe||void 0===Oe?void 0:Oe.accountType,helperText:null===Oe||void 0===Oe?void 0:Oe.accountType,value:l.accountType,options:W||[],onChange:function(e,t){t&&o(Object(nt.a)(Object(nt.a)({},l),{},{accountType:t}))}},{label:"Website",type:"input",value:l.website,onChange:function(e){return Pe(e,"website")}},{label:"Annual turn over ($)",type:"input",value:l.turnover,onChange:function(e){return Pe(e,"turnover")}},{label:"Product segment",type:"autocomplete",labelprop:"label",multiple:!0,value:l.productSegment||[],options:Z,onChange:function(e,t){e.preventDefault(),o(Object(nt.a)(Object(nt.a)({},l),{},{productSegment:t}))}}],qe=[{label:"Salutation",type:"autocomplete",labelprop:"label",required:!0,error:null===Oe||void 0===Oe?void 0:Oe.salutation,helperText:null===Oe||void 0===Oe?void 0:Oe.salutation,value:b.salutation,options:de,onChange:function(e,t){p(Object(nt.a)(Object(nt.a)({},b),{},{salutation:t}))}},{label:"First name",type:"input",required:!0,value:b.firstName,error:null===Oe||void 0===Oe?void 0:Oe.firstName,helperText:null===Oe||void 0===Oe?void 0:Oe.firstName,onChange:function(e){return De(e,"firstName")}},{label:"Last name",type:"input",required:!0,value:b.lastName,error:null===Oe||void 0===Oe?void 0:Oe.lastName,helperText:null===Oe||void 0===Oe?void 0:Oe.lastName,onChange:function(e){return De(e,"lastName")}},{label:"Email",type:"input",required:!0,value:b.email,error:null===Oe||void 0===Oe?void 0:Oe.email,helperText:null===Oe||void 0===Oe?void 0:Oe.email,onChange:function(e){return De(e,"email")}},{label:"Designation",type:"input",value:b.designation,onChange:function(e){return De(e,"designation")}},{label:"Ext",type:"autocomplete",labelprop:"label",required:!0,error:null===Oe||void 0===Oe?void 0:Oe.ext,helperText:null===Oe||void 0===Oe?void 0:Oe.ext,value:void 0!==b.ext?b.ext:"",options:ie,onChange:function(e,t){e.preventDefault(),p(Object(nt.a)(Object(nt.a)({},b),{},{ext:t}))},sm:3},{label:"Phone",type:"number",required:!0,value:b.phone,error:null===Oe||void 0===Oe?void 0:Oe.phone,helperText:null===Oe||void 0===Oe?void 0:Oe.phone,placeholder:"",onChange:function(e){return De(e,"phone")},sm:3},{label:"Mobile",type:"number",value:b.mobile,error:null===Oe||void 0===Oe?void 0:Oe.mobile,helperText:null===Oe||void 0===Oe?void 0:Oe.mobile,onChange:function(e){return De(e,"mobile")}}],Fe=[{label:"Instant coffee business",type:"radio",value:h.business||"No",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],onChange:function(e){return Ie(e,"business")},sm:3},{label:"Manufacturing unit",type:"radio",value:h.manufacturing||"No",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],onChange:function(e){return Ie(e,"manufacturing")},sm:3},{label:"Coffee type",type:"autocomplete",labelprop:"label",multiple:!0,value:h.interested,options:U,onChange:function(e,t){g(Object(nt.a)(Object(nt.a)({},h),{},{interested:t}))}},{label:"Sample ready",type:"radio",value:h.sample||"No",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],onChange:function(e){return Ie(e,"sample")}},{label:"Other information",type:"input",required:!1,value:h.otherinformation,onChange:function(e){return Ie(e,"otherinformation")}}],Me=[{label:"Street name",type:"input",required:!0,value:y.street,error:null===Oe||void 0===Oe?void 0:Oe.billingStreet,helperText:null===Oe||void 0===Oe?void 0:Oe.billingStreet,onChange:function(e){return Ae(e,"street")}},{label:"Country",type:"autocomplete",labelprop:"label",required:!0,error:null===Oe||void 0===Oe?void 0:Oe.billingCountry,helperText:null===Oe||void 0===Oe?void 0:Oe.billingCountry,value:y.country||"",options:q.country||[],onChange:function(e,t){_.a.isEmpty(t)?(F(Object(nt.a)(Object(nt.a)({},q),{},{state:[]})),C(Object(nt.a)(Object(nt.a)({},y),{},{country:null,state:null,city:null}))):(ae({countryname:t.value}).then((function(e){return F(Object(nt.a)(Object(nt.a)({},q),{},{state:Yn(e,"state")}))})).catch((function(e){return console.log("Get state error",e.message)})),C(Object(nt.a)(Object(nt.a)({},y),{},{country:t,state:null,city:null})))}},{label:"Province/State",type:"autocomplete",labelprop:"label",required:!0,error:null===Oe||void 0===Oe?void 0:Oe.billingState,helperText:null===Oe||void 0===Oe?void 0:Oe.billingState,value:y.state||"",options:q.state||[],onChange:function(e,t){_.a.isEmpty(t)?(F(Object(nt.a)(Object(nt.a)({},q),{},{city:[]})),C(Object(nt.a)(Object(nt.a)({},y),{},{state:null,city:null}))):(ne({statename:t.value}).then((function(e){return F(Object(nt.a)(Object(nt.a)({},q),{},{city:Yn(e,"city")}))})).catch((function(e){return console.log("Get state error",e.message)})),C(Object(nt.a)(Object(nt.a)({},y),{},{state:t,city:null})))}},{label:"City",type:"autocomplete",labelprop:"label",required:!0,error:null===Oe||void 0===Oe?void 0:Oe.billingCity,helperText:null===Oe||void 0===Oe?void 0:Oe.billingCity,value:y.city||"",options:q.city||[],onChange:function(e,t){C(Object(nt.a)(Object(nt.a)({},y),{},{city:t}))}},{label:"Postal code",type:"input",inputProps:{maxLength:6},value:y.postalcode,onChange:function(e){return Ae(e,"postalcode")}}],Re=[{label:"Street name",type:"input",value:k.street,onChange:function(e){return Te(e,"street")}},{label:"Country",type:"autocomplete",labelprop:"label",value:k.country||"",options:B.country||[],onChange:function(e,t){_.a.isEmpty(t)?(H(Object(nt.a)(Object(nt.a)({},B),{},{state:[]})),N(Object(nt.a)(Object(nt.a)({},k),{},{country:null,state:null,city:null}))):(ae({countryname:t.value}).then((function(e){return H(Object(nt.a)(Object(nt.a)({},B),{},{state:Yn(e,"state")}))})).catch((function(e){return console.log("Get state error",e.message)})),N(Object(nt.a)(Object(nt.a)({},k),{},{country:t,city:null,state:null})))}},{label:"Province/State",type:"autocomplete",labelprop:"label",value:k.state||"",options:B.state||[],onChange:function(e,t){_.a.isEmpty(t)?(H(Object(nt.a)(Object(nt.a)({},B),{},{city:[]})),N(Object(nt.a)(Object(nt.a)({},k),{},{state:null,city:null}))):(ne({statename:t.value}).then((function(e){return H(Object(nt.a)(Object(nt.a)({},B),{},{city:Yn(e,"city")}))})).catch((function(e){return console.log("Get state error",e.message)})),N(Object(nt.a)(Object(nt.a)({},k),{},{state:t,city:null})))}},{label:"City",type:"autocomplete",labelprop:"label",value:k.city||"",options:B.city||[],onChange:function(e,t){N(Object(nt.a)(Object(nt.a)({},k),{},{city:t}))}},{label:"Postal code",type:"input",inputProps:{maxLength:6},value:k.postalcode,onChange:function(e){return Te(e,"postalcode")}},{label:"Shipping to continent",type:"autocomplete",labelprop:"label",required:!0,error:null===Oe||void 0===Oe?void 0:Oe.shippingContinent,helperText:null===Oe||void 0===Oe?void 0:Oe.shippingContinent,value:I.continent||"",options:[{label:"South America",value:"South America"},{label:"Oceania",value:"Oceania"},{label:"North America",value:"North America"},{label:"Europe",value:"Europe"},{label:"Asia",value:"Asia"},{label:"Antarctica",value:"Antarctica"},{label:"Africa",value:"Africa"}],onChange:function(e,t){_.a.isEmpty(t)?(me([]),A(Object(nt.a)(Object(nt.a)({},I),{},{continent:null,country:null}))):(oe({type:"countries",continentname:t.value}).then((function(e){return e&&me(Yn(e,"countryname"))})),A(Object(nt.a)(Object(nt.a)({},I),{},{continent:t,country:null})))}},{label:"Shipping to country",type:"autocomplete",labelprop:"label",required:!0,error:null===Oe||void 0===Oe?void 0:Oe.shippingCountry,helperText:null===Oe||void 0===Oe?void 0:Oe.shippingCountry,value:I.country||"",options:je,onChange:function(e,t){A(Object(nt.a)(Object(nt.a)({},I),{},{country:t}))}}],Be=function(){var e=h.interested,t=h.sample,a=h.manufacturing,n=h.business,i=h.otherinformation,l=0;return(null===e||void 0===e?void 0:e.length)>0&&!_.a.isEmpty(e[0])&&(l+=20),_.a.isEmpty(t)||(l+=20),_.a.isEmpty(a)||(l+=20),_.a.isEmpty(n)||(l+=20),_.a.isEmpty(i)||(l+=20),l},He=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,o,r,c,s,u,p,j,m,v,O,g,x,f,C,w,S,N,P,D,A,T,E,q,F,M,R,B,H,G,L,U,Q,V;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=b.phone,n=b.mobile,i=b.designation,o=b.salutation,r=b.firstName,c=b.lastName,s=b.email,u=b.ext,p=y.postalcode,j=y.street,m=y.country,v=y.state,O=y.city,g=h.interested,x=h.sample,f=h.manufacturing,C=h.business,w=h.otherinformation,S=l.website,N=l.productSegment,P=l.turnover,D=l.accountType,A=l.name,T=l.aliases,E=I.continent,q=[],null===g||void 0===g||g.map((function(e,t){q.push(e.value)})),F=[],null===N||void 0===N||N.map((function(e,t){F.push(e.value)})),M=[],null===D||void 0===D||D.map((function(e,t){M.push(e.value)})),R={},B="Please fill valid details",H="Exceeded maximum length",_.a.isEmpty(A)&&(R=Object(nt.a)(Object(nt.a)({},R),{},{name:B})),_.a.isEmpty(r)&&(R=Object(nt.a)(Object(nt.a)({},R),{},{firstName:B})),_.a.isEmpty(c)&&(R=Object(nt.a)(Object(nt.a)({},R),{},{lastName:B})),_.a.isEmpty(o)&&(R=Object(nt.a)(Object(nt.a)({},R),{},{salutation:B})),_.a.isEmpty(s)&&(R=Object(nt.a)(Object(nt.a)({},R),{},{email:B})),_.a.isEmpty(u)&&(R=Object(nt.a)(Object(nt.a)({},R),{},{ext:B})),_.a.isEmpty(a)&&(R=Object(nt.a)(Object(nt.a)({},R),{},{phone:B})),!_.a.isEmpty(a)&&a.length>10&&(R=Object(nt.a)(Object(nt.a)({},R),{},{phone:H})),!_.a.isEmpty(n)&&n.length>10&&(R=Object(nt.a)(Object(nt.a)({},R),{},{mobile:H})),_.a.isEmpty(D)&&(R=Object(nt.a)(Object(nt.a)({},R),{},{accountType:B})),_.a.isEmpty(j)&&(R=Object(nt.a)(Object(nt.a)({},R),{},{billingStreet:B})),_.a.isEmpty(m)&&(R=Object(nt.a)(Object(nt.a)({},R),{},{billingCountry:B})),_.a.isEmpty(v)&&(R=Object(nt.a)(Object(nt.a)({},R),{},{billingState:B})),_.a.isEmpty(O)&&(R=Object(nt.a)(Object(nt.a)({},R),{},{billingCity:B})),_.a.isEmpty(E)&&(R=Object(nt.a)(Object(nt.a)({},R),{},{shippingContinent:B})),_.a.isEmpty(I.country)&&(R=Object(nt.a)(Object(nt.a)({},R),{},{shippingCountry:B})),_.a.isEmpty(R)){t.next=41;break}throw t.prev=30,ge(R),{message:"Please fill all mandatory fields"};case 36:t.prev=36,t.t0=t.catch(30),_e({open:!0,message:t.t0.message,severity:"error"});case 39:t.next=54;break;case 41:return ke(!0),V={update:!1,emailid:JSON.parse(localStorage.getItem("preference")).name,accountname:A,accounttypeid:null===M||void 0===M?void 0:M.join(","),aliases:T,approvalstatus:!0,approxannualrev:P,billing_citycode:null===O||void 0===O?void 0:O.value,billing_countrycode:null===m||void 0===m?void 0:m.value,billing_postalcode:p,billing_statecode:null===v||void 0===v?void 0:v.value,billing_street:j,coffeetypeid:null===q||void 0===q?void 0:q.join(","),contact_citycode:null===k||void 0===k||null===(G=k.city)||void 0===G?void 0:G.value,contact_countrycode:null===k||void 0===k||null===(L=k.country)||void 0===L?void 0:L.value,contact_email:s,contact_ext:null===u||void 0===u?void 0:u.value,contact_firstname:r,contact_lastname:c,contact_mobile:n,contact_phone:a,contact_position:i,contact_postalcode:null===k||void 0===k?void 0:k.postalcode,contact_salutationid:+(null===o||void 0===o?void 0:o.value),contact_statecode:null===k||void 0===k||null===(U=k.state)||void 0===U?void 0:U.value,contact_street:null===k||void 0===k?void 0:k.street,countryid:"123",createddate:new Date,createduserid:Ne().id,instcoffee:"Yes"===C,isactive:!0,leadscore:Be(),manfacunit:"Yes"===f,masterstatus:"New",productsegmentid:null===F||void 0===F?void 0:F.join(","),sample_ready:"Yes"===x,shipping_continent:null===E||void 0===E?void 0:E.value,shipping_continentid:"123",shipping_country:null===I||void 0===I||null===(Q=I.country)||void 0===Q?void 0:Q.value,website:S,otherinformation:w},t.prev=43,t.next=46,le(V);case 46:t.sent&&(_e({open:!0,message:"Lead created successfully"}),setTimeout((function(){e.back(),ke(!1)}),2e3)),t.next=54;break;case 50:t.prev=50,t.t1=t.catch(43),ke(!1),_e({open:!0,message:t.t1.message,severity:"error"});case 54:case"end":return t.stop()}}),t,null,[[30,36],[43,50]])})));return function(){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[ye.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},ye),{},{handleClose:function(){return _e({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Leads information"})})}),Object(ot.jsx)(tn,{payload:Ee}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Contacts information"})})}),Object(ot.jsx)(tn,{payload:qe}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Profile completion"})})}),Object(ot.jsx)(tn,{payload:Fe}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Billing address"})})}),Object(ot.jsx)(tn,{payload:Me}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Shipping address"})})}),Object(ot.jsx)(tn,{payload:Re}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:Se,label:Se?"Loading ...":"Create Lead",onClick:He})})]})]})},Jn=a(431),Zn=[{id:"customername",label:"Customer Name"},{id:"contact",label:"Contact Name"},{id:"country",label:"Country"}];var Xn=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),$n=function(e){var t=Xn(),a=i.a.useState(0),n=Object(c.a)(a,2),l=n[0],o=n[1],r=i.a.useState(10),s=Object(c.a)(r,2),d=s[0],u=s[1],b=[];i.a.useEffect((function(){console.log("Props Data",e.data),e.data&&e.data.map((function(e){var t,a,n;b.push((t=e.customername,a=e.contactname,n=e.country,{customername:t,contactname:a,country:n}))}))}),[e.data]);return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(pn.a,{children:Object(ot.jsx)(jn.a,{children:Zn.map((function(e){return Object(ot.jsx)(un.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ot.jsx)(dn.a,{children:b.length&&b.slice(l*d,l*d+d).map((function(e,t){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Zn.map((function(t,a){var n=e[t.id];return Object(ot.jsx)(un.a,{align:t.align,children:n},t.id)}))},e.code)}))})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:b.length,rowsPerPage:d,page:l,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){u(+e.target.value),o(0)}})]})},ei=[{id:"description",label:"Description"},{id:"createduserid",label:"Created By"},{id:"createddate",label:"Created Date"},{id:"modifieduserid",label:"Modified By"},{id:"modifieddate",label:"Modified Date"}],ti=function(e){var t=new Date(e);return e?t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear():""};var ai=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),ni=function(e){var t=ai(),a=i.a.useState(0),n=Object(c.a)(a,2),l=n[0],o=n[1],r=i.a.useState(10),s=Object(c.a)(r,2),d=s[0],u=s[1],b=[];i.a.useEffect((function(){console.log("Props Data",e.data)}),[e.data]),e.data&&e.data.map((function(e){var t,a,n,i,l;b.push((t=e.description,a=e.createduserid,n=ti(e.createddate),i=e.modifieduserid,l=ti(e.modifieddate),{description:t,createduserid:a,createddate:n,modifieduserid:i,modifieddate:l}))}));return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(pn.a,{children:Object(ot.jsx)(jn.a,{children:ei.map((function(e){return Object(ot.jsx)(un.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ot.jsxs)(dn.a,{children:[b.length>0&&b.slice(l*d,l*d+d).map((function(e,t){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:ei.map((function(t,a){var n=e[t.id];return Object(ot.jsx)(un.a,{align:t.align,children:n},t.id)}))},e.code)})),0===b.length&&Object(ot.jsx)("p",{style:{float:"right",justifyContent:"center"},children:"No Records to Display."})]})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:b.length,rowsPerPage:d,page:l,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){u(+e.target.value),o(0)}})]})},ii=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column","& #top-row":{marginTop:10,marginBottom:5}},modal:{position:"absolute",margin:"auto",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:1e3,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),overflow:"scroll"}}})),li=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return e.map((function(e){return n.push({label:e[t],value:e[a]||e[t]})})),n},oi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return null===e||void 0===e||e.map((function(e){return t.push({label:"".concat(e.countryname," (+").concat(e.dialcode,")"),value:e.dialcode})})),t},ri=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=[];return null===e||void 0===e||e.map((function(e){return a.push({label:e[t],value:e.userid||e[t]})})),a},ci=function(e){var t,a,i,l,o,s=ii(),u=Object(n.useState)(!1),b=Object(c.a)(u,2),p=b[0],j=b[1],v=Object(n.useState)(!1),h=Object(c.a)(v,2),g=h[0],f=h[1],y=Object(n.useState)(!1),C=Object(c.a)(y,2),w=C[0],S=C[1],k=Object(n.useState)(!1),N=Object(c.a)(k,2),P=N[0],D=N[1],I=Object(n.useState)(!1),A=Object(c.a)(I,2),E=A[0],M=A[1],R=Object(n.useState)(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:t.accountname||"",aliases:t.aliases||"",accountType:null===(e=t.accounttypeid)||void 0===e?void 0:e.split(","),website:t.website||"",turnover:t.approxannualrev||"",productSegment:t.Productsegment,status:t.status}}()),B=Object(c.a)(R,2),H=B[0],G=B[1],L=Object(n.useState)(null),U=Object(c.a)(L,2),Q=U[0],V=U[1],z=Object(n.useState)(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{business:!0===t.instcoffee?"Yes":"No",manufacturing:!0===t.manfacunit?"Yes":"No",sample:!0===t.sample_ready?"Yes":"No",interested:null===(e=t.coffeetypeid)||void 0===e?void 0:e.split(","),otherinformation:t.otherinformation||""}}()),W=Object(c.a)(z,2),Y=W[0],K=W[1],J=Object(n.useState)(0),Z=Object(c.a)(J,2),X=Z[0],$=Z[1],ee=Object(n.useState)(""),ie=Object(c.a)(ee,2),se=ie[0],de=ie[1],ue=Object(n.useState)(""),be=Object(c.a)(ue,2),pe=be[0],je=be[1],me=Object(n.useState)(""),ve=Object(c.a)(me,2),he=ve[0],Oe=ve[1],ge=Object(n.useState)(""),xe=Object(c.a)(ge,2),fe=xe[0],ye=xe[1],_e=Object(n.useState)(""),Ce=Object(c.a)(_e,2),we=Ce[0],Se=Ce[1],ke=Object(n.useState)({}),Ne=Object(c.a)(ke,2),Pe=Ne[0],De=Ne[1],Ie=Object(n.useState)([]),Ae=Object(c.a)(Ie,2),Te=Ae[0],Ee=Ae[1],qe=Object(n.useState)([]),Fe=Object(c.a)(qe,2),Me=Fe[0],Re=Fe[1],Be=Object(n.useState)([]),He=Object(c.a)(Be,2),Ge=He[0],Le=He[1],Ue=Object(n.useState)(""),Qe=Object(c.a)(Ue,2),Ve=Qe[0],ze=Qe[1],We=Object(n.useState)(""),Ye=Object(c.a)(We,2),Ke=Ye[0],Je=Ye[1],Ze=Object(n.useState)(""),Xe=Object(c.a)(Ze,2),$e=Xe[0],et=Xe[1],tt=Object(n.useState)(""),at=Object(c.a)(tt,2),it=at[0],rt=at[1],st=Object(n.useState)(""),ut=Object(c.a)(st,2),bt=ut[0],pt=ut[1],jt=Object(n.useState)([]),mt=Object(c.a)(jt,2),vt=mt[0],ht=mt[1],gt=Object(n.useState)([]),xt=Object(c.a)(gt,2),ft=xt[0],yt=xt[1],_t=Object(n.useState)([]),Ct=Object(c.a)(_t,2),wt=Ct[0],St=Ct[1],kt=Object(n.useState)([]),Nt=Object(c.a)(kt,2),Pt=Nt[0],Dt=Nt[1],It=Object(n.useState)([]),At=Object(c.a)(It,2),Tt=At[0],Et=At[1],qt=Object(n.useState)([]),Ft=Object(c.a)(qt,2),Mt=Ft[0],Rt=Ft[1],Bt=Object(n.useState)([]),Ht=Object(c.a)(Bt,2),Gt=Ht[0],Lt=Ht[1],Ut=Object(n.useState)([]),Qt=Object(c.a)(Ut,2),Vt=Qt[0],Wt=Qt[1],Kt=Object(n.useState)([]),Zt=Object(c.a)(Kt,2),Xt=Zt[0],$t=Zt[1],ea=Object(n.useState)({}),ta=Object(c.a)(ea,2),aa=ta[0],na=ta[1],ia=Object(n.useState)({open:!1,message:"",severity:""}),la=Object(c.a)(ia,2),oa=la[0],ra=la[1],ca=Object(n.useState)(!1),sa=Object(c.a)(ca,2),da=sa[0],ua=sa[1],ba=Object(n.useState)(!1),pa=Object(c.a)(ba,2),ja=pa[0],ma=pa[1],va=Object(n.useState)(!1),ha=Object(c.a)(va,2),Oa=ha[0],ga=ha[1],xa=Object(n.useState)(!1),fa=Object(c.a)(xa,2),ya=fa[0],_a=fa[1],Ca=Object(n.useState)({}),wa=Object(c.a)(Ca,2),Sa=wa[0],ka=wa[1],Na=Object(n.useState)([]),Pa=Object(c.a)(Na,2),Da=Pa[0],Ia=Pa[1],Aa=Object(n.useState)(""),Ta=Object(c.a)(Aa,2),Ea=Ta[0],qa=Ta[1],Fa=Object(n.useState)(""),Ma=Object(c.a)(Fa,2),Ra=Ma[0],Ba=Ma[1],Ha=Object(n.useState)([]),Ga=Object(c.a)(Ha,2),La=Ga[0],Ua=Ga[1],Qa=Jt().getCurrentUserDetails;Object(n.useEffect)((function(){te().then((function(e){var t=li(e,"country");Ee(t),ht(t)}))}),[]),Object(n.useEffect)((function(){var e=_.a.find(Gt,{value:null===Q||void 0===Q?void 0:Q.ext});V(Object(nt.a)(Object(nt.a)({},Q),{},{ext:{label:null===e||void 0===e?void 0:e.label,value:null===e||void 0===e?void 0:e.value}}))}),[Gt]),Object(n.useEffect)((function(){oe({type:"accountDetails"}).then((function(e){return Et(li(e,"accounttype","id"))})),oe({type:"productsegments"}).then((function(e){return Rt(li(e,"productsegment","id"))}));var t,a=[];oe({type:"phonecodes"}).then((function(e){a=e,Lt(oi(e))})),oe({type:"coffeetypes"}).then((function(e){return Dt(li(e,"coffeetype","id"))})),oe({type:"salutations"}).then((function(e){return Wt(li(e,"salutation","id"))})),(t={leadid:e.leadId},q.post("".concat(T.apiUrl).concat(F.leadsDetail),t).then((function(e){return e}))).then(function(){var e=Object(r.a)(d.a.mark((function e(t){var n,i,l,o,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Response is",JSON.stringify(t,null,3)),l={name:t.accountname||"",aliases:t.aliases||"",accountType:li(t.accounttypes,"accounttype","id"),website:t.website||"",turnover:t.approxannualrev||"",productSegment:null!==t.Productsegment?li(t.Productsegment,"productsegment","id"):[],status:t.status},e.next=4,G(l);case 4:return o=_.a.find(oi(a),{value:t.contact_ext}),r={salutation:{value:t.salutation.id,label:t.salutation.salutation},firstName:t.contact_firstname||"",lastName:t.contact_lastname||"",email:t.contact_email||t.email||"",designation:t.contact_position||"",ext:o?{label:o.label,value:o.value}:null!==t&&void 0!==t&&t.contact_ext?null===t||void 0===t?void 0:t.contact_ext:{},contact_phone:t.contact_phone||"",mobile:t.contact_mobile||""},e.next=8,V(r);case 8:console.log("Response fetched is",t),c={business:!0===t.instcoffee?"Yes":"No",manufacturing:!0===t.manfacunit?"Yes":"No",sample:!0===t.sample_ready?"Yes":"No",interested:li(null!==(n=t.coffeetypes)&&void 0!==n?n:[],"coffeetype","coffeetypeid"),otherinformation:t.otherinformation||""},K(c),de(t.billing_street),Se(t.billing_postalcode),je({label:t.billing_countrycode,value:t.billing_countrycode}),$(t.leadscore?parseInt(t.leadscore):0),ze(t.contact_street),Ua(t.audit_log_crm_leads),pt(t.contact_postalcode),Je({label:t.contact_countrycode,value:t.contact_countrycode}),ae({countryname:t.billing_countrycode}).then((function(e){Re(li(e,"state")),Oe({label:t.billing_statecode,value:t.billing_statecode}),ne({statename:t.billing_statecode}).then((function(e){Le(li(e,"city")),ye({label:t.billing_citycode,value:t.billing_citycode})})).catch((function(e){return console.log("Get city error",e.message)}))})).catch((function(e){return console.log("Get state error",e.message)})),ae({countryname:t.contact_countrycode}).then((function(e){yt(li(e,"state")),et({label:t.contact_statecode,value:t.contact_statecode}),ne({statename:t.contact_statecode}).then((function(e){St(li(e,"city")),rt({label:t.contact_citycode,value:t.contact_citycode})})).catch((function(e){return console.log("Get city error",e.message)}))})).catch((function(e){return console.log("Get state error",e.message)})),oe({type:"countries",continentname:t.shipping_continent}).then((function(e){e&&$t(li(e,"countryname"));var a={continent:{label:t.shipping_continent,value:t.shipping_continent},country:{label:t.shipping_country,value:t.shipping_country}};De(a)})),re({leadname:t.accountname}).then((function(e){ka(e)})),ce({type:"Accounts",loginuserid:null===(i=Qa())||void 0===i?void 0:i.id}).then((function(e){Ia(ri(e,"username"))}));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var Va=function(e,t){e.preventDefault();var a=e.target.value;G(Object(nt.a)(Object(nt.a)({},H),{},Object(Ot.a)({},t,a)))},za=function(e,t){e.preventDefault();var a=e.target.value;V(Object(nt.a)(Object(nt.a)({},Q),{},Object(Ot.a)({},t,a)))},Wa=function(e,t){e.preventDefault();var a=e.target.value;K(Object(nt.a)(Object(nt.a)({},Y),{},Object(Ot.a)({},t,a)))},Ya=function(e,t){e.preventDefault();var a=e.target.value;"postalcode"===t&&Se(a),"street"===t&&de(a)},Ka=function(e,t){e.preventDefault();var a=e.target.value;"postalcode"===t&&pt(a),"street"===t&&ze(a)},Ja=[{label:"Lead for company",type:"input",disabled:!0,value:"CCL"},{label:"Lead name",type:"input",required:!0,value:H.name,error:null===aa||void 0===aa?void 0:aa.name,helperText:null===aa||void 0===aa?void 0:aa.name,onChange:function(e){return Va(e,"name")},disabled:!p,placeholder:""},{label:"Aliases name",type:"input",value:H.aliases,onChange:function(e){return Va(e,"aliases")},disabled:!p,placeholder:""},{label:"Account type",type:"autocomplete",labelprop:"label",multiple:!0,error:null===aa||void 0===aa?void 0:aa.accountType,helperText:null===aa||void 0===aa?void 0:aa.accountType,value:H.accountType||[],options:Tt,onChange:function(e,t){G(Object(nt.a)(Object(nt.a)({},H),{},{accountType:t}))},disabled:!p,placeholder:""},{label:"Website",type:"input",value:H.website,onChange:function(e){return Va(e,"website")},disabled:!p},{label:"Annual turn over ($)",type:"input",value:H.turnover,onChange:function(e){return Va(e,"turnover")},disabled:!p,placeholder:""},{label:"Product segment",type:"autocomplete",labelprop:"label",multiple:!0,value:H.productSegment||[],options:Mt,onChange:function(e,t){G(Object(nt.a)(Object(nt.a)({},H),{},{productSegment:t}))},disabled:!p,placeholder:""}],Za=[{label:"Salutation",type:"autocomplete",labelprop:"label",required:!0,error:null===aa||void 0===aa?void 0:aa.salutation,helperText:null===aa||void 0===aa?void 0:aa.salutation,disabled:!p,value:(null===Q||void 0===Q?void 0:Q.salutation)||"",options:Vt,onChange:function(e,t){e.preventDefault(),V(Object(nt.a)(Object(nt.a)({},Q),{},{salutation:t}))}},{label:"First name",type:"input",required:!0,value:(null===Q||void 0===Q?void 0:Q.firstName)||"",error:null===aa||void 0===aa?void 0:aa.firstName,helperText:null===aa||void 0===aa?void 0:aa.firstName,onChange:function(e){return za(e,"firstName")},disabled:!p},{label:"Last name",type:"input",required:!0,value:(null===Q||void 0===Q?void 0:Q.lastName)||"",error:null===aa||void 0===aa?void 0:aa.lastName,helperText:null===aa||void 0===aa?void 0:aa.lastName,onChange:function(e){return za(e,"lastName")},disabled:!p},{label:"Email",type:"input",required:!0,value:(null===Q||void 0===Q?void 0:Q.email)||"",error:null===aa||void 0===aa?void 0:aa.email,helperText:null===aa||void 0===aa?void 0:aa.email,onChange:function(e){return za(e,"email")},disabled:!p},{label:"Designation",type:"input",value:null!==Q&&void 0!==Q&&Q.designation?null===Q||void 0===Q?void 0:Q.designation:"",onChange:function(e){return za(e,"designation")},disabled:!p},{label:"Ext",type:"autocomplete",labelprop:"label",required:!0,error:null===aa||void 0===aa?void 0:aa.ext,helperText:null===aa||void 0===aa?void 0:aa.ext,value:null!==Q&&void 0!==Q&&Q.ext?Q.ext:"",options:Gt,onChange:function(e,t){e.preventDefault(),V(Object(nt.a)(Object(nt.a)({},Q),{},{ext:t}))},disabled:!p,sm:3},{label:"Phone",type:"number",required:!0,value:(null===Q||void 0===Q?void 0:Q.contact_phone)||"",error:null===aa||void 0===aa?void 0:aa.contact_phone,helperText:null===aa||void 0===aa?void 0:aa.contact_phone,placeholder:"",onChange:function(e){return za(e,"contact_phone")},disabled:!p,sm:3},{label:"Mobile",type:"number",error:null===aa||void 0===aa?void 0:aa.mobile,helperText:null===aa||void 0===aa?void 0:aa.mobile,value:(null===Q||void 0===Q?void 0:Q.mobile)||"",onChange:function(e){return za(e,"mobile")},disabled:!p}],Xa=[{label:"Instant coffee business",type:"radio",value:Y.business||"Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],onChange:function(e){return Wa(e,"business")},disabled:!p,sm:3},{label:"Manufacturing unit",type:"radio",value:Y.manufacturing||"Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],onChange:function(e){return Wa(e,"manufacturing")},disabled:!p,sm:3},{label:"Coffee type",type:"autocomplete",labelprop:"label",multiple:!0,value:Y.interested||[],options:Pt,onChange:function(e,t){e.preventDefault(),console.log("interested::",t),K(Object(nt.a)(Object(nt.a)({},Y),{},{interested:t}))},disabled:!p},{label:"Sample ready",type:"radio",value:Y.sample||"Yes",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],onChange:function(e){return Wa(e,"sample")},disabled:!p},{label:"Other information",type:"input",required:!1,value:Y.otherinformation||"",onChange:function(e){return Wa(e,"otherinformation")},disabled:!p}],$a=[{label:"Street name",type:"input",required:!0,value:se,error:null===aa||void 0===aa?void 0:aa.billingStreet,helperText:null===aa||void 0===aa?void 0:aa.billingStreet,onChange:function(e){return Ya(e,"street")},disabled:!p},{label:"Country",type:"autocomplete",labelprop:"label",required:!0,error:null===aa||void 0===aa?void 0:aa.billingCountry,helperText:null===aa||void 0===aa?void 0:aa.billingCountry,value:pe||"",options:Te||[],onChange:function(e,t){je(t),ae({countryname:t.value}).then((function(e){return Re(li(e,"state"))})).catch((function(e){return console.log("Get state error",e.message)}))},disabled:!p},{label:"Province/State",type:"autocomplete",labelprop:"label",required:!0,error:null===aa||void 0===aa?void 0:aa.billingState,helperText:null===aa||void 0===aa?void 0:aa.billingState,value:he||"",options:Me||[],onChange:function(e,t){Oe(t),ne({statename:t.value}).then((function(e){return Le(li(e,"city"))})).catch((function(e){return console.log("Get state error",e.message)}))},disabled:!p},{label:"City",type:"autocomplete",labelprop:"label",required:!0,error:null===aa||void 0===aa?void 0:aa.billingCity,helperText:null===aa||void 0===aa?void 0:aa.billingCity,value:fe||"",options:Ge||[],onChange:function(e,t){ye(t)},disabled:!p},{label:"Postal code",type:"input",inputProps:{maxLength:6},value:we,onChange:function(e){return Ya(e,"postalcode")},disabled:!p}],en=[{label:"Street name",type:"input",value:Ve,onChange:function(e){return Ka(e,"street")},disabled:!p},{label:"Country",type:"autocomplete",labelprop:"label",value:Ke||"",options:vt||[],onChange:function(e,t){Je(t),ae({countryname:null===t||void 0===t?void 0:t.value}).then((function(e){return yt(li(e,"state"))})).catch((function(e){return console.log("Get state error",e.message)}))},disabled:!p},{label:"Province/State",type:"autocomplete",labelprop:"label",value:$e||"",options:ft||[],onChange:function(e,t){et(t),ne({statename:null===t||void 0===t?void 0:t.value}).then((function(e){return St(li(e,"city"))})).catch((function(e){return console.log("Get state error",e.message)}))},disabled:!p},{label:"City",type:"autocomplete",labelprop:"label",value:it||"",options:wt||[],onChange:function(e,t){rt(t)},disabled:!p},{label:"Postal code",type:"input",inputProps:{maxLength:6},value:bt,onChange:function(e){return Ka(e,"postalcode")},disabled:!p},{label:"Shipping to continent",type:"autocomplete",labelprop:"label",required:!0,error:null===aa||void 0===aa?void 0:aa.shippingContinent,helperText:null===aa||void 0===aa?void 0:aa.shippingContinent,disabled:!p,value:Pe.continent||[],options:[{label:"South America",value:"South America"},{label:"Oceania",value:"Oceania"},{label:"North America",value:"North America"},{label:"Europe",value:"Europe"},{label:"Asia",value:"Asia"},{label:"Antarctica",value:"Antarctica"},{label:"Africa",value:"Africa"}],onChange:function(e,t){e.preventDefault(),oe({type:"countries",continentname:t.value}).then((function(e){return e&&$t(li(e,"countryname"))})),De(Object(nt.a)(Object(nt.a)({},Pe),{},{continent:t}))}},{label:"Shipping to country",type:"autocomplete",labelprop:"label",required:!0,error:null===aa||void 0===aa?void 0:aa.shippingCountry,helperText:null===aa||void 0===aa?void 0:aa.shippingCountry,disabled:!p,value:Pe.country||[],options:Xt,onChange:function(e,t){e.preventDefault(),De(Object(nt.a)(Object(nt.a)({},Pe),{},{country:t}))}}],an=[{type:"label",value:"Contact",bold:!0,sm:"6"},{type:"label",value:Sa?null===(t=Sa.leaddetails)||void 0===t?void 0:t.contact:"",sm:"6"},{type:"label",value:"Phone",bold:!0,sm:"6"},{type:"label",value:Sa?null===(a=Sa.leaddetails)||void 0===a?void 0:a.phone:"",sm:"6"},{type:"label",value:"Email",bold:!0,sm:"6"},{type:"label",value:Sa?null===(i=Sa.leaddetails)||void 0===i?void 0:i.email:"",sm:"6"},{type:"label",value:"Website",bold:!0,sm:"6"},{type:"label",value:Sa?null===(l=Sa.leaddetails)||void 0===l?void 0:l.website:"",sm:"6"},{type:"label",value:"Lead owner",bold:!0,sm:"6"},{type:"label",value:Sa?null===(o=Sa.leaddetails)||void 0===o?void 0:o.username:"",sm:"6"}],nn=[{label:"Select users to assign",type:"autocomplete",labelprop:"label",required:!0,value:Ea,options:Da,onChange:function(e,t){e.preventDefault(),qa(t)}}],ln=[{label:"Comments",type:"input",required:!0,error:null===aa||void 0===aa?void 0:aa.comments,helperText:null===aa||void 0===aa?void 0:aa.comments,multiline:!0,rows:5,value:Ra,onChange:function(e){return function(e){e.preventDefault();var t=e.target.value;Ba(t)}(e)},sm:12}],on=function(){var e=Y.interested,t=Y.sample,a=Y.manufacturing,n=Y.business,i=Y.otherinformation,l=0;return(null===e||void 0===e?void 0:e.length)>0&&!_.a.isEmpty(e[0])&&(l+=20),_.a.isEmpty(t)||(l+=20),_.a.isEmpty(a)||(l+=20),_.a.isEmpty(n)||(l+=20),_.a.isEmpty(i)||(l+=20),console.log("percentage::",l),l},rn=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,l,o,r,c,s,u,b,p,j,m,v,h,O,g,x,f,y,C,w,S,k,N,P,D,I;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Q.contact_phone,n=Q.mobile,i=Q.designation,l=Q.salutation,o=Q.firstName,r=Q.lastName,c=Q.email,s=Q.ext,u=Y.interested,b=Y.sample,p=Y.manufacturing,j=Y.business,m=Y.otherinformation,v=H.website,h=H.productSegment,O=H.turnover,g=H.accountType,x=H.name,f=H.aliases,y=Pe.continent,C=[],u.map((function(e,t){C.push(e.value)})),w=[],h.map((function(e,t){w.push(e.value)})),S=[],g.map((function(e,t){S.push(e.value)})),k={},N="Please fill valid details",P="Exceeded maximum length",_.a.isEmpty(x)&&(k=Object(nt.a)(Object(nt.a)({},k),{},{name:N})),_.a.isEmpty(o)&&(k=Object(nt.a)(Object(nt.a)({},k),{},{firstName:N})),_.a.isEmpty(r)&&(k=Object(nt.a)(Object(nt.a)({},k),{},{lastName:N})),_.a.isEmpty(l)&&(k=Object(nt.a)(Object(nt.a)({},k),{},{salutation:N})),_.a.isEmpty(c)&&(k=Object(nt.a)(Object(nt.a)({},k),{},{email:N})),_.a.isEmpty(a)&&(k=Object(nt.a)(Object(nt.a)({},k),{},{contact_phone:N})),!_.a.isEmpty(a)&&a.length>10&&(k=Object(nt.a)(Object(nt.a)({},k),{},{contact_phone:P})),!_.a.isEmpty(n)&&n.length>10&&(k=Object(nt.a)(Object(nt.a)({},k),{},{mobile:P})),_.a.isEmpty(se)&&(k=Object(nt.a)(Object(nt.a)({},k),{},{billingStreet:N})),_.a.isEmpty(g)&&(k=Object(nt.a)(Object(nt.a)({},k),{},{accountType:N})),_.a.isEmpty(pe)&&(k=Object(nt.a)(Object(nt.a)({},k),{},{billingCountry:N})),_.a.isEmpty(he)&&(k=Object(nt.a)(Object(nt.a)({},k),{},{billingState:N})),_.a.isEmpty(fe)&&(k=Object(nt.a)(Object(nt.a)({},k),{},{billingCity:N})),_.a.isEmpty(y)&&(k=Object(nt.a)(Object(nt.a)({},k),{},{shippingContinent:N})),_.a.isEmpty(Pe.country)&&(k=Object(nt.a)(Object(nt.a)({},k),{},{shippingCountry:N})),_.a.isEmpty(k)){t.next=31;break}na(k),t.next=45;break;case 31:return ga(!0),D={update:!0,leadid:e.leadId,accountname:x||null,accounttypeid:S.length>0?null===S||void 0===S?void 0:S.join(","):null,aliases:f||null,approvalstatus:!0,approxannualrev:O||null,billing_citycode:fe?fe.value:null,billing_countrycode:pe?pe.value:null,billing_postalcode:we||null,billing_statecode:he?he.value:null,billing_street:se||null,coffeetypeid:C.length>0?null===C||void 0===C?void 0:C.join(","):null,contact_citycode:it?it.value:null,contact_countrycode:Ke?Ke.value:null,contact_email:c||null,contact_ext:s?s.value:null,contact_firstname:o||null,contact_lastname:r||null,contact_mobile:n||null,contact_phone:a||null,contact_position:i||null,contact_postalcode:bt||null,contact_salutationid:l?+l.value:null,contact_statecode:$e?$e.value:null,contact_street:Ve||null,countryid:"123",modifieddate:new Date,modifieduserid:Qa().id,instcoffee:"Yes"===j,isactive:!0,leadscore:on(),manfacunit:"Yes"===p,masterstatus:H.status?H.status:null,productsegmentid:w.length>0?null===w||void 0===w?void 0:w.join(","):null,sample_ready:"Yes"===b,shipping_continent:y?y.value:null,shipping_continentid:"123",shipping_country:Pe?Pe.country.value:null,website:""!==v?v:null,otherinformation:m||null},t.prev=33,t.next=36,le(D);case 36:I=t.sent,console.log("Response",I),I&&(ra({open:!0,message:"Lead updated successfully"}),setTimeout((function(){e.back(),ga(!1)}),2e3)),t.next=45;break;case 41:t.prev=41,t.t0=t.catch(33),ga(!1),ra({open:!0,message:t.t0.message,severity:"error"});case 45:case"end":return t.stop()}}),t,null,[[33,41]])})));return function(){return t.apply(this,arguments)}}(),cn=function(){var t=Object(r.a)(d.a.mark((function t(a,n){var i,l,o,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("convertleadtoaccount"===n){t.next=6;break}if(i={},"Please fill valid details",_.a.isEmpty(Ra)&&(i=Object(nt.a)(Object(nt.a)({},i),{},{comments:"Please fill valid details"})),_.a.isEmpty(i)){t.next=6;break}return na(i),t.abrupt("return");case 6:return"approve"===n?S(!w):"reject"===n?D(!P):f(!g),t.prev=7,l={leadid:e.leadId,role:Qa().role,emailid:JSON.parse(localStorage.getItem("preference")).name},"convertleadtoaccount"===n?l.convertleadtoaccount=!0:"approve"===n?l.approve=!0:"reject"===n&&(l.reject=!0),t.next=12,a=l,q.post("".concat(T.apiUrl).concat(F.convertLeadToAccount),a).then((function(e){return e}));case 12:o=t.sent,console.log("Response",o),o&&("convertleadtoaccount"===n?r="Lead approval and conversion email sent successfully":"approve"===n?r="Lead approved, Account created and email sent successfully!":"reject"===n&&(r="Lead rejected and email sent successfully"),setTimeout((function(){"approve"===n?S(!w):"reject"===n?D(!P):f(!g),ra({open:!0,message:r}),e.back()}),5e3)),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(7),"approve"===n?S(!w):"reject"===n?D(!P):f(!g),ra({open:!0,message:t.t0.message,severity:"error"});case 21:case"end":return t.stop()}var a}),t,null,[[7,17]])})));return function(e,a){return t.apply(this,arguments)}}(),sn=function(){var t=Object(r.a)(d.a.mark((function t(a){var n,i,l,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M(!E),t.prev=1,!_.a.isEmpty(null===Ea||void 0===Ea?void 0:Ea.value)&&void 0!==(null===Ea||void 0===Ea?void 0:Ea.value)){t.next=6;break}return ra({open:!0,severity:"error",message:"Please select a user to reassign"}),setTimeout((function(){ra({open:!1,message:""})}),2e3),t.abrupt("return");case 6:return l={leadid:null===(n=e.leadId)||void 0===n?void 0:n.toString(),userid:null===Ea||void 0===Ea?void 0:Ea.value,loggedinuserid:null===(i=Qa())||void 0===i?void 0:i.id},ga(!0),t.next=10,a=l,q.post("".concat(T.apiUrl).concat(F.reassignLead),a).then((function(e){return e}));case 10:o=t.sent,console.log("Response",o),o&&("Lead reassigned successfully",ra({open:!0,message:"Lead reassigned successfully"}),M(!E),setTimeout((function(){e.back()}),2e3)),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),M(!E),ra({open:!0,message:t.t0.message,severity:"error"});case 19:return t.prev=19,ga(!1),t.finish(19);case 22:case"end":return t.stop()}var a}),t,null,[[1,15,19,22]])})));return function(e){return t.apply(this,arguments)}}(),dn=function(){ua(!da)};return Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)(O.a,{style:{marginTop:30,marginBottom:10,color:dt,fontWeight:"bold"},children:"Profile Completion"}),Object(ot.jsx)(Jn.PieChart,{label:function(){return"".concat(X,"%")},labelStyle:{display:"flex",justifyContent:"center",alignItems:"center"},viewBoxSize:25,totalValue:100,animate:!0,animationDuration:1e3,data:[{title:"",value:X,color:"#E38627"}]}),Object(ot.jsxs)("form",{className:s.root,noValidate:!0,autoComplete:"off",children:[oa.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},oa),{},{handleClose:function(){return ra({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Leads information"})})}),Object(ot.jsx)(tn,{payload:Ja}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Contacts information"})})}),Object(ot.jsx)(tn,{payload:Za}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Profile completion"})})}),Object(ot.jsx)(tn,{payload:Xa}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Billing address"})})}),Object(ot.jsx)(tn,{payload:$a}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Shipping address"})})}),Object(ot.jsx)(tn,{payload:en}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})}),Object(ot.jsx)(ni,{data:La})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:p?Object(ot.jsx)(Yt,{disabled:Oa,label:Oa?"Loading ...":"Save",onClick:rn}):"Account Created"!==H.status&&"Approved"!==H.status&&Object(ot.jsx)(Yt,{label:"Edit",onClick:function(){return j(!0)}})}),Object(ot.jsx)(m.a,{item:!0,children:("Managing Director"===Qa().role||"Marketing Executive"===Qa().role)&&"New"===H.status&&X>=90&&Object(ot.jsx)(Yt,{label:"Convert To Account",onClick:function(e){return dn()}})}),Object(ot.jsx)(m.a,{item:!0,children:("New"===H.status||"Rejected"===H.status)&&"Managing Director"===Qa().role&&Object(ot.jsx)(Yt,{label:"Re-Assign",onClick:function(e){return ma(!ja)}})}),Object(ot.jsx)(m.a,{item:!0,children:"Pending Approval"===H.status&&"Marketing Executive"!==Qa().role&&Object(ot.jsx)(Yt,{label:"Approve / Reject",onClick:function(e){return _a(!ya)}})})]}),Object(ot.jsx)(zt,{open:da,handleClose:function(){return ua(!da)},body:function(){var e,t;return Object(ot.jsxs)(x.a,{className:s.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Lead Details"}),Object(ot.jsxs)(lt.a,{icon:!1,children:["Lead Conversion",Object(ot.jsxs)("ul",{children:[""!==(null===Sa||void 0===Sa||null===(e=Sa.erpcontacts)||void 0===e?void 0:e.customername)&&Object(ot.jsxs)("li",{children:[" Similar contact already exsist in the system for the account ",Object(ot.jsx)("b",{children:H.name})]}),Object(ot.jsxs)("li",{children:["Are you sure you want to proceed creating account for ",Object(ot.jsx)("b",{children:H.name})," in the system?"]}),Object(ot.jsx)("li",{children:'Click on "Proceed" button to create Account.'})]})]}),Object(ot.jsxs)("h3",{children:["Lead Name: ",Sa?null===(t=Sa.leaddetails)||void 0===t?void 0:t.leadname:""]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{id:"top-row",xs:6,md:3,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:an})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:g?"Loading ...":"Proceed",disabled:g,onClick:function(e){return cn(e,"convertleadtoaccount")}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:function(){return dn()}})})]}),Object(ot.jsx)("h3",{children:"Similar contact records from Accounts database"}),Object(ot.jsx)($n,{data:[null===Sa||void 0===Sa?void 0:Sa.erpcontacts]})]})}}),Object(ot.jsx)(zt,{open:ja,handleClose:function(){return ma(!ja)},body:function(){return Object(ot.jsxs)(x.a,{className:s.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Select user"}),Object(ot.jsx)("h4",{children:"Select user to assign:"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{id:"top-row",xs:6,md:10,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:nn})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:Oa?"Loading...":"Proceed",disabled:Oa,onClick:sn})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:function(){return ma(!ja)}})})]})]})}}),Object(ot.jsx)(zt,{open:ya,handleClose:function(){return _a(!ya)},body:function(){return Object(ot.jsxs)(x.a,{className:s.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Approval/Reject"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{id:"top-row",xs:10,md:10,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:ln})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:w?"Loading ...":"Approve",disabled:w,onClick:function(e){return cn(e,"approve")}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:P?"Loading ...":"Reject",disabled:P,onClick:function(e){return cn(e,"reject")}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:function(){return _a(!ya)}})})]})]})}})]})},si=a(432),di=a(294),ui=function(e){return Object(n.useEffect)(Object(r.a)(d.a.mark((function t(){var a,n,i,l,o,r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:a=t.sent,n=a.tableData,i=a.tableName,n&&n.length>0&&(l=di.utils.json_to_sheet(n),o={Sheets:{data:l},SheetNames:["data"]},r=di.write(o,{bookType:"xlsx",type:"array"}),c=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),si.saveAs(c,i+".xlsx"));case 6:case"end":return t.stop()}}),t)}))),[e.tableData]),Object(ot.jsx)(n.Fragment,{})},bi=Object(g.a)((function(e){return{button:{margin:e.spacing(1),backgroundColor:dt,color:st,minWidth:150,textTransform:"capitalize",borderRadius:"24px",height:"48px",boxShadow:"0px 3px 5px -1px rgb(0 0 0 / 20%), 0px 6px 10px 0px rgb(0 0 0 / 14%), 0px 1px 18px 0px rgb(0 0 0 / 12%)",transition:"backgroundColor 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&:hover":{backgroundColor:dt,opacity:.8}},outlineButton:{border:"1px solid"+dt,color:dt,"&:hover":{backgroundColor:dt,opacity:.8,color:st}}}}));function pi(e){var t=bi(),a=e.label,n=e.variant;return Object(ot.jsx)(u.a,Object(nt.a)(Object(nt.a)({variant:n||"contained",color:"primary",className:n?t.outlineButton:t.button},e),{},{children:a}))}var ji=Object(g.a)((function(e){return{formControl:{margin:e.spacing(1),marginTop:e.spacing(2),minWidth:120}}})),mi=function(){var e=(0,Jt().getCurrentUserDetails)(),t=null===e||void 0===e?void 0:e.role,a=null===e||void 0===e?void 0:e.id,l=i.a.useState(t===Kt.managingDirector?"allleads":"myleads"),o=Object(c.a)(l,2),s=o[0],u=o[1],b=ji(),p=Object(n.useState)(null),j=Object(c.a)(p,2),v=j[0],h=j[1],O=Object(n.useState)(""),g=Object(c.a)(O,2),x=g[0],f=g[1],y=Object(n.useState)(-1),C=Object(c.a)(y,2),w=C[0],S=C[1],k=Object(n.useState)(""),N=Object(c.a)(k,2),P=N[0],D=N[1],I=Object(n.useState)(!1),A=Object(c.a)(I,2),T=A[0],E=A[1],q=function(){var t=Object(r.a)(d.a.mark((function t(n,i){var l,o,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l="",(null===e||void 0===e?void 0:e.role)===Kt.managingDirector&&"myleads"!==i||(l+="createdbyuserid = '".concat(null===e||void 0===e?void 0:e.id,"'")),"allleads"!==i&&"myleads"!==i&&(_.a.isEmpty(l)||(l+=" AND "),l+=" masterstatus = '".concat(i,"'")),_.a.isEmpty(n)||(_.a.isEmpty(l)||(l+=" AND "),l+="".concat(n)),o={filter:l,loggedinuserid:a},t.next=7,V(o);case 7:r=t.sent,h(r);case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){q(P,s)}),[s,P]),Object(n.useEffect)((function(){""===x&&q("","allleads")}),[x]);var F=function(){u("allleads"),f("")},M=function(e,t){console.log("Lead id",t),S(t),f(e)};return _.a.isEmpty(x)?Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0,children:Object(ot.jsxs)(Da.a,{variant:"outlined",className:b.formControl,children:[Object(ot.jsx)(Ia.a,{htmlFor:"outlined-age-native-simple",children:"View"}),Object(ot.jsxs)(Aa.a,{native:!0,value:s,onChange:function(e){u(e.target.value),D(null)},label:"View",inputProps:{name:"view",id:"outlined-view-native-simple"},children:[(null===e||void 0===e?void 0:e.role)===Kt.managingDirector?Object(ot.jsx)("option",{value:"allleads",children:"All Leads"}):null,Object(ot.jsx)("option",{value:"myleads",children:"My Leads"}),Object(ot.jsx)("option",{value:"New",children:"New"}),Object(ot.jsx)("option",{value:"Pending Approval",children:"Pending Approval"}),Object(ot.jsx)("option",{value:"Account Created",children:"Account Created"})]})]})}),Object(ot.jsxs)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:[null!==v&&Object(ot.jsx)(pi,{onClick:function(){E(!0)},label:"Export to excel"}),Object(ot.jsx)(Rn,{onClick:function(){return f("create_lead")},label:"Create Lead",variant:"extended"})]})]}),!0===T&&Object(ot.jsx)(ui,{tableData:v,tableName:"Lead"}),Object(ot.jsx)(zn,{selectedAdvancedFilters:function(e){return D(e)},clearAdvancedFilters:function(){return D("")},data:v,commonFilter:s,setRoute:function(e,t){return M(e,t)}})]}):"create_lead"===x?Object(ot.jsx)(Kn,{back:function(){return F()}}):Object(ot.jsx)(ci,{back:function(){return F()},leadId:w})},vi=[{id:"accountname",label:"Account Name"},{id:"aliases",label:"Aliases"},{id:"accounttypeid",label:"Account Type",hideFilter:!0},{id:"account_owner",label:"Account Owner"},{id:"masterstatus",label:"Approval Status"}];var hi=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440},sortHeader:{cursor:"pointer"}}),Oi=function(e){var t=hi(),a=i.a.useState(0),l=Object(c.a)(a,2),o=l[0],r=l[1],s=i.a.useState(10),d=Object(c.a)(s,2),u=d[0],b=d[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),m=j[0],v=j[1],h=i.a.useState("asc"),O=Object(c.a)(h,2),g=O[0],x=O[1],f=i.a.useState(""),y=Object(c.a)(f,2),_=y[0],C=y[1],w=[];function S(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}i.a.useEffect((function(){console.log("Props Data",e.data),e.data&&e.data.map((function(e){var t,a,n,i,l,o;w.push((t=e.accountid,a=e.accountname,n=e.aliases,i=e.accounttypeid,l=e.account_owner,o=e.masterstatus,{accountid:t,accountname:a,aliases:n,accounttypeid:i,account_owner:l,masterstatus:o}))})),v(w)}),[e.data]);return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(Un,{classes:t,order:g,orderBy:_,onRequestSort:function(e,t){x(_===t&&"asc"===g?"desc":"asc"),C(t)},rowCount:m.length,headCells:vi,selectedAdvancedFilters:e.selectedAdvancedFilters,clearAdvancedFilters:e.clearAdvancedFilters}),Object(ot.jsx)(dn.a,{children:m.length>0?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(m,function(e,t){return"desc"===e?function(e,a){return S(e,a,t)}:function(e,a){return-S(e,a,t)}}(g,_)).slice(o*u,o*u+u).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:vi.map((function(a){var n=t[a.id];return Object(ot.jsx)(un.a,{align:a.align,children:"accountname"===a.id?Object(ot.jsx)("a",{href:"#",onClick:function(a){var n;n=t.accountid,console.log(n),e.accountDetails("view_account",n)},children:n}):n},a.id)}))},a)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:m.length,rowsPerPage:u,page:o,onChangePage:function(e,t){r(t)},onChangeRowsPerPage:function(e){b(+e.target.value),r(0)}})]})},gi=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"}}})),xi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;console.log("key");var a=[];return e.map((function(e){return a.push({label:e[t],value:e.id||e[t]})})),a},fi=function(e){var t=gi(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)([]),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)([]),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)([]),f=Object(c.a)(x,2),y=f[0],_=f[1],C=Object(n.useState)([]),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)(!1),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)({open:!1,message:"",severity:""}),T=Object(c.a)(A,2),E=T[0],q=T[1];Object(n.useEffect)((function(){oe({type:"accountDetails"}).then((function(e){return g(xi(e,"accounttype"))})),oe({type:"productsegments"}).then((function(e){return _(xi(e,"productsegment"))})),oe({type:"coffeetypes"}).then((function(e){return p(xi(e,"coffeetype"))})),pe({viewaccount:!0,accountid:e.id.toString()}).then((function(e){var t,a,n,i,l,r,c,s,d,u,b,p;oe({type:"countries",continentname:e.shippingtocontinent}).then((function(e){e&&k(xi(e,"countryname"))}));var j={accountOwner:e.accountowner||"",accountName:e.accountname||"",accountType:null!==e.accounttypes?xi(e.accounttypes,"accounttype"):[],aliases:e.aliases||"",phone:e.phone||"",fax:e.fax||"",email:e.email||"",website:e.website||"",turnover:e.approxannualrev||"",productSegment:null!==e.Productsegment?xi(e.Productsegment,"productsegment"):[],street:e.shippinginformation&&(null===(t=e.shippinginformation[0])||void 0===t?void 0:t.shipping_street)||"",city:e.shippinginformation&&(null===(a=e.shippinginformation[0])||void 0===a?void 0:a.shipping_city)||"",state:e.shippinginformation&&(null===(n=e.shippinginformation[0])||void 0===n?void 0:n.shipping_state)||"",postalCode:e.shippinginformation&&(null===(i=e.shippinginformation[0])||void 0===i?void 0:i.shipping_postalcode)||"",country:e.shippinginformation&&(null===(l=e.shippinginformation[0])||void 0===l?void 0:l.shipping_country)||"",billingStreet:e.billinginformation&&(null===(r=e.billinginformation[0])||void 0===r?void 0:r.billing_street)||"",billingCity:e.billinginformation&&(null===(c=e.billinginformation[0])||void 0===c?void 0:c.billing_city)||"",billingState:e.billinginformation&&(null===(s=e.billinginformation[0])||void 0===s?void 0:s.billing_state)||"",billingPostalCode:e.billinginformation&&(null===(d=e.billinginformation[0])||void 0===d?void 0:d.billing_postalcode)||"",billingCountry:e.billinginformation&&(null===(u=e.billinginformation[0])||void 0===u?void 0:u.billing_country)||"",alreadyInBusiness:e.profilesectioninfo&&1===(null===(b=e.profilesectioninfo[0])||void 0===b?void 0:b.instcoffee)?"Yes":"No",hasManfacUnit:e.profilesectioninfo&&1===(null===(p=e.profilesectioninfo[0])||void 0===p?void 0:p.manfacunit)?"Yes":"No",coffeeType:null!==e.coffeetypes?xi(e.coffeetypes,"coffeetype"):[],other:e.otherinfo||"",shippingCountry:{label:e.shippingtocountry,value:e.shippingtocountry},shippingContinent:{label:e.shippingtocontinent,value:e.shippingtocontinent}};o(j)}))}),[]);var F=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.value));o(a),console.log(a)},M=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,o,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],l.accountType.map((function(e,t){a.push(e.value)})),n=[],l.productSegment.map((function(e,t){n.push(e.value)})),i=[],l.coffeeType.map((function(e,t){i.push(e.value)})),o={accountid:e.id.toString(),updateaccount:!0,accountowner:l.accountOwner,accountname:l.accountName,coffeetypeid:i.join(","),accounttypeid:a.join(","),aliases:l.aliases,phone:l.phone,email:l.email,fax:l.fax,website:l.website,approxannualrev:l.turnover,productsegmentid:n.join(","),shippingtocontinent:l.shippingContinent.value,shippingtocountry:l.shippingCountry.value,otherinfo:l.other,shipping_street:l.street,shipping_city:l.city,shipping_state:l.state,shipping_postalcode:l.postalCode,shipping_country:l.country,billing_street:l.billingStreet,billing_city:l.billingCity,billing_state:l.billingState,billing_postalcode:l.billingPostalCode,billing_country:l.billingCountry},I(!0),t.prev=8,t.next=11,pe(o);case 11:r=t.sent,console.log("Response",r),r&&(q({open:!0,message:"Account edited successfully"}),e.back()),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(8),q({open:!0,message:t.t0.message,severity:"error"});case 19:return t.prev=19,I(!1),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[8,16,19,22]])})));return function(){return t.apply(this,arguments)}}(),R=[{label:"Account name",type:"input",value:l.accountName||"",onChange:function(e){return F(e,"accountName")}},{label:"Account type",type:"autocomplete",labelprop:"label",multiple:!0,value:l.accountType||[],options:h||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},{accountType:t});o(a)}},{label:"Aliases",type:"input",multiline:!0,rows:2,value:l.aliases||"",onChange:function(e){return F(e,"aliases")}},{label:"Phone",type:"input",value:l.phone||"",onChange:function(e){return F(e,"phone")}},{label:"Email",type:"input",value:l.email||"",onChange:function(e){return F(e,"email")}},{label:"Fax",type:"input",value:l.fax||"",onChange:function(e){return F(e,"fax")}},{label:"Website",type:"input",value:l.website||"",onChange:function(e){return F(e,"website")}},{label:"Annual approx. turnover($)",type:"input",value:l.turnover||"",onChange:function(e){return F(e,"turnover")}},{label:"Product segment",type:"autocomplete",labelprop:"label",multiple:!0,value:l.productSegment||[],options:y||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},{productSegment:t});o(a)}}],B=[{label:"Street",type:"input",value:l.street||"",onChange:function(e){return F(e,"street")}},{label:"City",type:"input",value:l.city||"",onChange:function(e){return F(e,"city")}},{label:"Province/State",type:"input",value:l.state||"",onChange:function(e){return F(e,"state")}},{label:"Postal code",type:"input",value:l.postalCode||"",onChange:function(e){return F(e,"postalCode")}},{label:"Country",type:"input",value:l.country||"",onChange:function(e){return F(e,"country")}}],H=[{label:"Street",type:"input",value:l.billingStreet||"",onChange:function(e){return F(e,"billingStreet")}},{label:"City",type:"input",value:l.billingCity||"",onChange:function(e){return F(e,"billingCity")}},{label:"Province/State",type:"input",value:l.billingState||"",onChange:function(e){return F(e,"billingState")}},{label:"Postal code",type:"input",value:l.billingPostalCode||"",onChange:function(e){return F(e,"billingPostalCode")}},{label:"Country",type:"input",value:l.billingCountry||"",onChange:function(e){return F(e,"billingCountry")}}],G=[{label:"Already in instant coffee business?",type:"radio",value:l.alreadyInBusiness||"",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],onChange:function(e){return F(e,"alreadyInBusiness")},sm:6},{label:"Do you have instant coffee manufacturing unit?",type:"radio",value:l.hasManfacUnit||"",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],onChange:function(e){return F(e,"hasManfacUnit")},sm:6},{label:"Coffee type interested in?",type:"autocomplete",labelprop:"label",multiple:!0,value:l.coffeeType||[],options:b||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},{coffeeType:t});o(a)}},{label:"Other information",type:"input",multiline:!0,rows:2,value:l.other||"",onChange:function(e){return F(e,"other")}}],L=[{label:"Shipping to continent",type:"autocomplete",labelprop:"label",value:l.shippingContinent||"",options:[{label:"South America",value:"South America"},{label:"Oceania",value:"Oceania"},{label:"North America",value:"North America"},{label:"Europe",value:"Europe"},{label:"Asia",value:"Asia"},{label:"Antarctica",value:"Antarctica"},{label:"Africa",value:"Africa"}],onChange:function(e,t){e.preventDefault(),oe({type:"countries",continentname:t.value}).then((function(e){return e&&k(xi(e,"countryname"))})),o(Object(nt.a)(Object(nt.a)({},l),{},{shippingContinent:t}))}},{label:"Shipping to country",type:"autocomplete",labelprop:"label",value:l.shippingCountry||"",options:S||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},{shippingCountry:t});o(a)}}];return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[E.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},E),{},{handleClose:function(){return q({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Accounts information"})})}),Object(ot.jsx)(tn,{payload:R}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsxs)(m.a,{id:"top-row",xs:12,md:6,direction:"column",children:[Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Shipping address"})}),Object(ot.jsx)(tn,{payload:B})]}),Object(ot.jsxs)(m.a,{id:"top-row",xs:12,md:6,direction:"column",children:[Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Billing address"})}),Object(ot.jsx)(tn,{payload:H})]})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Profile completion"})})}),Object(ot.jsx)(tn,{payload:G}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Shipping information"})})}),Object(ot.jsx)(tn,{payload:L}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:D,label:D?"Loading ...":"Save",onClick:M})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})})]})]})},yi=a(9),_i=["children","value","index"];function Ci(e){var t=e.children,a=e.value,n=e.index,i=Object(yi.a)(e,_i);return Object(ot.jsx)("div",Object(nt.a)(Object(nt.a)({role:"tabpanel",hidden:a!==n,id:"wrapped-tabpanel-".concat(n),"aria-labelledby":"wrapped-tab-".concat(n)},i),{},{children:a===n&&Object(ot.jsx)(ta.a,{p:3,children:Object(ot.jsx)(O.a,{children:t})})}))}var wi=Object(g.a)((function(e){return{root:{flexGrow:1},tabs:{"& .MuiTab-root":{color:dt},"& .MuiTabs-indicator":{backgroundColor:dt}}}}));function Si(e){var t=wi(),a=i.a.useState(e.value),n=Object(c.a)(a,2),l=n[0],o=n[1];return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(xt.a,{value:l,onChange:function(e,t){o(t)},className:t.tabs,children:e.children.map((function(e){return Object(ot.jsx)(ft.a,Object(nt.a)({label:e.props.label,value:e.props.index},(t=e.props.index,{id:"wrapped-tab-".concat(t),"aria-controls":"wrapped-tabpanel-".concat(t)})));var t}))}),e.children.map((function(e){return Object(ot.jsx)(Ci,{value:l,index:e.props.index,children:e.props.children})}))]})}var ki=[{id:"firstname",label:"First Name"},{id:"lastname",label:"Last Name"},{id:"email",label:"Email"}];var Ni=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),Pi=function(e){var t=Ni(),a=i.a.useState(0),n=Object(c.a)(a,2),l=n[0],o=n[1],r=i.a.useState(10),s=Object(c.a)(r,2),d=s[0],u=s[1],b=[];i.a.useEffect((function(){console.log("Props Data",e.data)}),[e.data]),e.data&&e.data.map((function(e){var t,a,n,i;b.push((t=e.contactfirstname,a=e.contactlastname,n=e.contactemail,i=e.contactid,{firstname:t,lastname:a,email:n,contactid:i}))}));return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(pn.a,{children:Object(ot.jsx)(jn.a,{children:ki.map((function(e){return Object(ot.jsx)(un.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ot.jsx)(dn.a,{children:b.length&&b.slice(l*d,l*d+d).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:ki.map((function(a){var n=t[a.id];return Object(ot.jsx)(un.a,{align:a.align,children:"firstname"===a.id?Object(ot.jsx)("a",{href:"#",onClick:function(a){var n;n=t.contactid,console.log(n),e.contactDetails("view_contact",n)},children:n}):n},a.id)}))},a)}))})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:b.length,rowsPerPage:d,page:l,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){u(+e.target.value),o(0)}})]})},Di=[{id:"samplereqno",label:"ID"},{id:"accountname",label:"Account Name"},{id:"contactfirstname",label:"First Name"},{id:"contactlastname",label:"Last Name"},{id:"products",label:"No.Of Products"},{id:"createddate",label:"Date"},{id:"createdbyusername",label:"Created By"},{id:"status",label:"Status"},{id:"requesttoqcstatus",label:"Request To QC Status"},{id:"receivedqcstatus",label:"Received By QC Status"}];var Ii=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),Ai=function(e){var t=Ii(),a=i.a.useState(0),l=Object(c.a)(a,2),o=l[0],r=l[1],s=i.a.useState(10),d=Object(c.a)(s,2),u=d[0],b=d[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),m=j[0],v=j[1],h=i.a.useState("asc"),O=Object(c.a)(h,2),g=O[0],x=O[1],f=i.a.useState(""),y=Object(c.a)(f,2),_=y[0],C=y[1],w=[];function S(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}i.a.useEffect((function(){console.log("Props Data",e.data),e.data&&null!==e.data&&e.data.map((function(e){var t,a,n,i,l,o,r,c,s,d,u;w.push((t=e.samplereqno,a=e.samplereqid,n=e.accountname,i=e.contactfirstname,l=e.contactlastname,o=e.products,r=e.createddate,c=e.createdbyusername,s=e.status,d=e.requesttoqcstatus,u=e.receivedqcstatus,{samplereqno:t,samplereqid:a,accountname:n,contactfirstname:i,contactlastname:l,products:o,createddate:r,createdbyusername:c,status:s,requesttoqcstatus:d,receivedqcstatus:u}))})),v(w)}),[e.data]);return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(Un,{classes:t,order:g,orderBy:_,onRequestSort:function(e,t){x(_===t&&"asc"===g?"desc":"asc"),C(t)},rowCount:m.length,headCells:Di,selectedAdvancedFilters:e.selectedAdvancedFilters,clearAdvancedFilters:e.clearAdvancedFilters}),Object(ot.jsx)(dn.a,{children:m.length>0?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(m,function(e,t){return"desc"===e?function(e,a){return S(e,a,t)}:function(e,a){return-S(e,a,t)}}(g,_)).slice(o*u,o*u+u).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Di.map((function(a){var n=t[a.id];return Object(ot.jsx)(un.a,{align:a.align,children:"samplereqno"===a.id?Object(ot.jsx)("a",{href:"#",onClick:function(a){var n,i;i=null!==(n=t.samplereqid)&&void 0!==n?n:t.id,e.sampleDetails("view_sample",i)},children:n}):"requesttoqcstatus"===a.id?Object(ot.jsx)(Va,{checked:"true"===t.requesttoqcstatus|!0===t.requesttoqcstatus,name:t.requesttoqcstatus,disabled:!0}):"receivedqcstatus"===a.id?Object(ot.jsx)(Va,{checked:"true"===t.receivedqcstatus||!0===t.receivedqcstatus,name:t.receivedqcstatus,disabled:!0}):n},a.id)}))},t.code)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:m.length,rowsPerPage:u,page:o,onChangePage:function(e,t){r(t)},onChangeRowsPerPage:function(e){b(+e.target.value),r(0)}})]})},Ti=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column","& #top-row":{marginTop:10,marginBottom:5}}}})),Ei=function(e){var t=e?new Date(e):new Date;return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},qi=function(e){var t=Ti(),a=(0,Jt().getCurrentUserDetails)(),i=null===a||void 0===a?void 0:a.role,l=null===a||void 0===a?void 0:a.id,o=Object(n.useState)({}),s=Object(c.a)(o,2),u=s[0],b=s[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),v=j[0],h=j[1],g=Object(n.useState)({open:!1,message:"",severity:""}),x=Object(c.a)(g,2),f=x[0],y=x[1],C=Object(n.useState)(!1),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)([]),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)([]),T=Object(c.a)(A,2),E=T[0],q=T[1];Object(n.useEffect)((function(){de(i!==Kt.managingDirector?{type:"accountdetailsforsamplerequest",createdbyuserid:l}:{type:"accountdetailsforsamplerequest"}).then((function(t){if(t&&null!==t){var a,n,i,l=t.find((function(t){return t.account_id.toString()===e.accountId.toString()}));h(null===t?[]:t);var o=void 0!==l&&(null===l||void 0===l?void 0:l.contact_details.length)>0?l.contact_details:[];de({type:"shippingaddressoncontacts",account_id:null===l||void 0===l||null===(a=l.account_id)||void 0===a?void 0:a.toString(),contact_id:null===(n=o[0])||void 0===n||null===(i=n.contact_id)||void 0===i?void 0:i.toString()}).then((function(e){var t=[],a=[];null===e||void 0===e||e.map((function(e){var n;return null===e||void 0===e||null===(n=e.shipping_address)||void 0===n?void 0:n.map((function(e){return t.push(e),a.push(e),null}))})),q(a);var n=_.a.cloneDeep(u);n.address=(null===t||void 0===t?void 0:t.find((function(e){return null===e||void 0===e?void 0:e.primary_address})))||(null===t||void 0===t?void 0:t[0]),n.contact=void 0!==l?o[0]:"",n.account=void 0!==l?l:{},b(n),I(o)}))}else h([]),b({})}))}),[e.accountId]);var F=[{label:"Record type",type:"input",disabled:!0,value:"CCL"},{label:"Account name",type:"autocomplete",labelprop:"account_name",value:u.account||e.accountId,options:v||[],onChange:function(e,t){t&&(I(null===t.contact_details?[]:t.contact_details),b(Object(nt.a)(Object(nt.a)({},u),{},{account:t,contact:""})))}},{label:"Created date",type:"input",disabled:!0,value:Ei(u.creationDate)||Ei("")},{label:"Contact name",type:"autocomplete",labelprop:"contact_name",value:u.contact||"",options:D||[],onChange:function(e,t){var a,n,i;t&&de({type:"shippingaddressoncontacts",account_id:null===u||void 0===u||null===(a=u.account)||void 0===a||null===(n=a.account_id)||void 0===n?void 0:n.toString(),contact_id:null===t||void 0===t||null===(i=t.contact_id)||void 0===i?void 0:i.toString()}).then((function(e){var a=[],n=[];null===e||void 0===e||e.map((function(e){var t;return null===e||void 0===e||null===(t=e.shipping_address)||void 0===t?void 0:t.map((function(e){return a.push(e),n.push(e),null}))})),q(n);var i=_.a.cloneDeep(u);i.address=(null===a||void 0===a?void 0:a.find((function(e){return null===e||void 0===e?void 0:e.primary_address})))||(null===a||void 0===a?void 0:a[0]),i.contact=t,i.contact_id=null===t||void 0===t?void 0:t.contact_id,b(i)}))}},{label:"Shipping address",type:"autocomplete",labelprop:"address",options:null!==E?E:[],value:u.address||"",onChange:function(e,t){t&&b(Object(nt.a)(Object(nt.a)({},u),{},{address:t}))}},{label:"Remarks",type:"input",multiline:!0,rows:3,value:u.remarks||"",onChange:function(e){return function(e,t){e.preventDefault();var a=e.target.value;b(Object(nt.a)(Object(nt.a)({},u),{},Object(Ot.a)({},t,a)))}(e,"remarks")}}],M=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},R=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,l,o,r,c,s,b,p,j,m;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k(!0),l=null===(a=v.find((function(e){var t,a;return(null===e||void 0===e?void 0:e.account_id)===(null===u||void 0===u||null===(t=u.account)||void 0===t||null===(a=t.account_id)||void 0===a?void 0:a.toString())})))||void 0===a?void 0:a.account_name,o=null===(n=D.find((function(e){var t,a;return(null===e||void 0===e?void 0:e.contact_id)===(null===u||void 0===u||null===(t=u.contact)||void 0===t||null===(a=t.contact_id)||void 0===a?void 0:a.toString())})))||void 0===n?void 0:n.contact_name,r=null===(i=E.find((function(e){var t;return(null===e||void 0===e?void 0:e.shipping_id)===(null===u||void 0===u||null===(t=u.address)||void 0===t?void 0:t.shipping_id)})))||void 0===i?void 0:i.address,c=" Sample Request from ".concat(l),s=" A new sample is requested: \n Account Name: ".concat(l," \n Contact Name: \n        ").concat(o," \n Shipping Address: ").concat(r,".\n         \n Sample Requested by ").concat(localStorage.getItem("currentUserName")," on ").concat(M()," "),b=0,p=["pkonidena@dignosolutions.com","shilpa.a@continental.coffee"];case 7:if(!(b<p.length)){t.next=24;break}return j=p[b],m={to_email:j,subject:c,message:s},t.prev=10,t.next=13,tt("https://c30j81s4jj.execute-api.ap-south-1.amazonaws.com/dev/",m);case 13:t.sent&&(y({open:!0,message:"Sample requested successfully"}),setTimeout((function(){k(!1),e.back()}),2e3)),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(10),k(!1),y({open:!0,message:t.t0.message,severity:"error"});case 21:b++,t.next=7;break;case 24:case"end":return t.stop()}}),t,null,[[10,17]])})));return function(){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[f.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},f),{},{handleClose:function(){return y({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Sample request information"})})}),Object(ot.jsx)(tn,{payload:F}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:S,label:S?"Loading...":"Request Sample",onClick:R})})]})]})},Fi=[{id:"description",label:"Description"},{id:"createdby",label:"Created By"},{id:"createddate",label:"Created Date"},{id:"modifiedby",label:"Modified By"},{id:"modifieddate",label:"Modified Date"},{id:"status",label:"Status"}],Mi=function(e){var t=new Date(e);return e?t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear():""};var Ri=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),Bi=function(e){var t=Ri(),a=i.a.useState(0),n=Object(c.a)(a,2),l=n[0],o=n[1],r=i.a.useState(10),s=Object(c.a)(r,2),d=s[0],u=s[1],b=[];i.a.useEffect((function(){console.log("Props Data",e.data)}),[e.data]),e.data&&e.data.map((function(e){var t,a,n,i,l,o;b.push((t=e.description,a=e.created_username,n=Mi(e.created_date),i=e.modified_username,l=Mi(e.modified_date),o=e.status,{description:t,createdby:a,createddate:n,modifiedby:i,modifieddate:l,status:o}))}));return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(pn.a,{children:Object(ot.jsx)(jn.a,{children:Fi.map((function(e){return Object(ot.jsx)(un.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ot.jsxs)(dn.a,{children:[b.length>0&&b.slice(l*d,l*d+d).map((function(e,t){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Fi.map((function(t,a){var n=e[t.id];return Object(ot.jsx)(un.a,{align:t.align,children:n},t.id)}))},e.code)})),0===b.length&&Object(ot.jsx)("p",{style:{float:"right",justifyContent:"center"},children:"No Records to Display."})]})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:b.length,rowsPerPage:d,page:l,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){u(+e.target.value),o(0)}})]})},Hi=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column","& #top-row":{marginTop:10,marginBottom:5}}}})),Gi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return e.map((function(e){return n.push({label:e[t],value:e[a]||e[t]})})),n},Li=[{label:"New",value:"New"},{label:"Pending with QC",value:"Pending with QC"},{label:"Approved",value:"Approved"}],Ui=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},Qi=function(e){var t=Hi(),a=(0,Jt().getCurrentUserDetails)(),i=null===a||void 0===a?void 0:a.role,l=null===a||void 0===a?void 0:a.id,o=Object(n.useState)({}),s=Object(c.a)(o,2),u=s[0],b=s[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),v=j[0],h=j[1],g=Object(n.useState)([]),x=Object(c.a)(g,2),f=x[0],y=x[1],C=Object(n.useState)(!1),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)({open:!1,message:"",severity:""}),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)([]),T=Object(c.a)(A,2),E=T[0],q=T[1];Object(n.useEffect)((function(){try{me({type:"viewsample",sample_id:parseInt(e.id)}).then((function(e){e&&de(i!==Kt.managingDirector?{type:"accountdetailsforsamplerequest",createdbyuserid:l}:{type:"accountdetailsforsamplerequest"}).then((function(t){if(t){var a,n,i=t.find((function(t){return t.account_id.toString()===e.account_id.toString()}));h(t);var l=null!==i&&void 0!==i&&i.contact_details?Gi(i.contact_details,"contact_name","contact_id"):[];q(e.audit_log),b({account:{account_name:e.account_name,account_id:e.account_id},address:null!==t?{address:e.shipping_address,shipping_id:e.shipping_id}:"",contact:{label:e.contact_firstname,value:e.contact_id},contactList:l,createddate:e.samplereq_date,masterstatus:{label:e.masterstatus,value:e.masterstatus},remarks:e.remarks,samplerequestid:e.samplereq_number}),de({type:"shippingaddressoncontacts",account_id:null===(a=e.account_id)||void 0===a?void 0:a.toString(),contact_id:null===(n=e.contact_id)||void 0===n?void 0:n.toString()}).then((function(e){var t;e&&y(null!==e?null===(t=e[0])||void 0===t?void 0:t.shipping_address:[])}))}}))}))}catch(t){I({open:!0,message:t.message,severity:"error"})}}),[e.id]);var F=[{label:"Sample request number",type:"input",disabled:!0,value:u.samplerequestid||""},{label:"Record type",type:"input",disabled:!0,value:u.recordtype||"CCL"},{label:"Account name",type:"autocomplete",labelprop:"account_name",value:u.account||"",options:v||[],onChange:function(e,t){t&&b(Object(nt.a)(Object(nt.a)({},u),{},{account:t,contact:{},contactList:Gi(t.contact_details,"contact_name","contact_id")}))}},{label:"Contact name",type:"autocomplete",labelprop:"label",value:u.contact||"",options:u.contactList||[],onChange:function(e,t){var a,n,i;t&&(b(Object(nt.a)(Object(nt.a)({},u),{},{contact:t})),de({type:"shippingaddressoncontacts",account_id:null===u||void 0===u||null===(a=u.account)||void 0===a||null===(n=a.account_id)||void 0===n?void 0:n.toString(),contact_id:null===t||void 0===t||null===(i=t.value)||void 0===i?void 0:i.toString()}).then((function(e){var a=[],n=[];null===e||void 0===e||e.map((function(e){var t;return null===e||void 0===e||null===(t=e.shipping_address)||void 0===t?void 0:t.map((function(e){return a.push(e),n.push(e),null}))})),y(n);var i=_.a.cloneDeep(u);i.address=(null===a||void 0===a?void 0:a.find((function(e){return null===e||void 0===e?void 0:e.primary_address})))||(null===a||void 0===a?void 0:a[0]),i.contact=t,b(i)})))}},{label:"Shipping address",type:"autocomplete",labelprop:"address",options:f||[],value:u.address||"",onChange:function(e,t){t&&b(Object(nt.a)(Object(nt.a)({},u),{},{address:t}))}},{label:"Remarks",type:"input",multiline:!0,rows:3,value:u.remarks||"",onChange:function(e){return function(e,t){e.preventDefault();var a=e.target.value;b(Object(nt.a)(Object(nt.a)({},u),{},Object(Ot.a)({},t,a)))}(e,"remarks")}},{label:"Status",type:"autocomplete",labelprop:"label",value:u.masterstatus||"",options:Li,onChange:function(e,t){b(Object(nt.a)(Object(nt.a)({},u),{},{masterstatus:t}))}},{label:"Created date",type:"input",value:u.createddate||"",disabled:!0}],M=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,l,o,r,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k(!0),c={update:!0,sample_id:parseInt(e.id),account_id:null===(a=u.account)||void 0===a||null===(n=a.account_id)||void 0===n?void 0:n.toString(),contact_id:null===(i=u.contact)||void 0===i||null===(l=i.value)||void 0===l?void 0:l.toString(),modifieddate:Ui(),username:localStorage.getItem("currentUserName"),modifieduserid:localStorage.getItem("currentUserId"),masterstatus:null===(o=u.masterstatus)||void 0===o?void 0:o.value,shipping_address:null===u||void 0===u||null===(r=u.address)||void 0===r?void 0:r.shipping_id,remarks:u.remarks},t.prev=2,t.next=5,ve(c);case 5:s=t.sent,console.log("Response",s),s&&(I({open:!0,message:"Sample updated successfully"}),setTimeout((function(){k(!1),e.back()}),2e3)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),k(!1),I({open:!0,message:t.t0.message,severity:"error"});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[D.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},D),{},{handleClose:function(){return I({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Sample request information"})})}),Object(ot.jsx)(tn,{payload:F}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})}),Object(ot.jsx)(Bi,{data:E}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:S,label:S?"Loading ...":"Save",onClick:M})})]})]})},Vi=a(883),zi=Object(g.a)((function(e){return{root:{width:"95%",margin:10,zIndex:100,'&[x-placement*="left"]  > span':{right:0,width:0,height:0,borderTop:"1em solid transparent",borderBottom:"1em solid transparent",borderLeft:"1em solid "+dt,marginRight:"-0.9em","&:before":{borderWidth:"1em 0 1em 1em",borderColor:"transparent transparent transparent white"}},'&[x-placement*="right"]  > span':{left:0,width:0,height:0,borderTop:"1em solid transparent",borderBottom:"1em solid transparent",borderRight:"1em solid "+dt,marginLeft:"-0.9em","&:before":{borderWidth:"1em 1em 1em 0",borderColor:"transparent white transparent transparent"}},'&[x-placement*="top"]  > span':{bottom:0,width:0,height:0,borderLeft:"1em solid transparent",borderRight:"1em solid transparent",borderTop:"1em solid "+dt,marginBottom:"-0.9em","&:before":{borderWidth:"1em 1em 0 1em",borderColor:"white transparent transparent transparent"}},'&[x-placement*="bottom"]  > span':{width:0,height:0,borderLeft:"1em solid transparent",borderRight:"1em solid transparent",borderBottom:"1em solid "+dt,marginTop:"-0.9em","&:before":{borderWidth:"0 1em 1em 1em",borderColor:"transparent transparent white transparent"}}},paper:{border:"1px solid",padding:e.spacing(1),backgroundColor:e.palette.background.paper},links:{marginTop:10,cursor:"pointer"},arrow:{position:"absolute",fontSize:10,width:"3em",height:"3em","&:before":{margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}}}}));function Wi(e){var t=zi(),a=Object(n.useState)(null),i=Object(c.a)(a,2),l=i[0],o=i[1],r=Object(n.useState)(null),s=Object(c.a)(r,2),d=s[0],u=s[1],b=function(e){o(l?null:e.currentTarget)},p=Boolean(l),m=p?"simple-popper":void 0;return Object(ot.jsxs)("div",{className:t.links,children:[Object(ot.jsx)(j.a,{"aria-describedby":m,onMouseEnter:b,onClick:function(t){o(l?null:t.currentTarget),e.linkRef.current.scrollIntoView()},children:e.linkLabel}),Object(ot.jsxs)(Vi.a,{id:m,open:p,anchorEl:l,onMouseLeave:b,placement:"top",className:t.root,modifiers:{flip:{enabled:!0},preventOverflow:{enabled:!0,boundariesElement:"scrollParent"},arrow:{enabled:!0,element:d}},children:[Object(ot.jsx)("span",{className:t.arrow,ref:u}),Object(ot.jsxs)("div",{className:t.paper,children:[e.body(),Object(ot.jsx)(Yt,{label:"Close",onClick:b})]})]})]})}var Yi=[{id:"sno",label:"SNO"},{id:"samplecode",label:"Sample Code"},{id:"producttype",label:"Product Type"},{id:"samplecategory",label:"Sample Category"},{id:"packingitem",label:"Packing Type"},{id:"dispatchDate",label:"Dispatch Date"},{id:"status",label:"Status"}];var Ki=Object(g.a)((function(e){return{root:{width:"100%",marginTop:24},container:{maxHeight:440},modal:{position:"absolute",margin:"auto",top:"30%",left:"30%",width:700,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),Ji=function(e){var t=Ki(),a=i.a.useState(0),l=Object(c.a)(a,2),o=l[0],s=l[1],u=i.a.useState(0),b=Object(c.a)(u,2),p=b[0],j=b[1],v=Object(n.useState)({open:!1,message:"",severity:""}),h=Object(c.a)(v,2),O=h[0],g=h[1],f=i.a.useState(10),y=Object(c.a)(f,2),_=y[0],C=y[1],w=i.a.useState(!1),S=Object(c.a)(w,2),k=S[0],N=S[1],P=[];i.a.useEffect((function(){console.log("Props Data",e.data)}),[e.data]),e.data&&e.data.map((function(e){var t,a,n,i,l,o,r,c;return P.push((t=e.serial_no,a=e.lineitem_id,n=e.sample_code,i=e.product_type,l=e.sample_category,o=e.packing_type,r=e.dispatch_date,c=e.status,{sno:t,lineitemid:a,samplecode:n,producttype:i,samplecategory:l,packingitem:o,dispatchDate:r,status:c})),!0}));var D=function(){var e=Object(r.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(t),N(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){N(!1),e.sampleItemDetails("delete_sampleitem",p)},A=function(){N(!1)};return Object(ot.jsxs)(ot.Fragment,{children:[O.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},O),{},{handleClose:function(){return g({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(pn.a,{children:Object(ot.jsxs)(jn.a,{children:[Yi.map((function(e){return Object(ot.jsx)(ot.Fragment,{children:Object(ot.jsx)(un.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)})})),Object(ot.jsx)(un.a,{children:"Action"})]})}),Object(ot.jsx)(dn.a,{children:P.length>0?P.slice(o*_,o*_+_).map((function(t,a){return Object(ot.jsxs)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:[Yi.map((function(a){var n=t[a.id];return Object(ot.jsx)(un.a,{align:a.align,children:"sno"===a.id?Object(ot.jsx)("a",{href:"#",onClick:function(a){var n;n=t.lineitemid,e.sampleItemDetails("view_sampleitem",n)},children:n}):n},a.id)})),Object(ot.jsx)(Yt,{label:"Delete",onClick:function(){return D(t.lineitemid)}})]},a)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:P.length,rowsPerPage:_,page:o,onChangePage:function(e,t){s(t)},onChangeRowsPerPage:function(e){C(+e.target.value),s(0)}}),Object(ot.jsx)(zt,{open:k,handleClose:A,body:function(){return Object(ot.jsxs)(x.a,{className:t.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Success"}),Object(ot.jsx)("p",{children:"Are you sure you want to delete this record?"}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Ok",onClick:I})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:A})})]})]})}})]})]})},Zi=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column","& #top-row":{marginTop:10,marginBottom:5}}}})),Xi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return e.map((function(e){return n.push({label:e[t],value:e[a]||e[t]})})),n},$i=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},el=function(e){var t=Zi(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)([]),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)([]),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)({}),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)({open:!1,message:"",severity:""}),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)(!1),D=Object(c.a)(P,2),I=D[0],A=D[1];function T(){return(T=Object(r.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se({});case 2:t=e.sent,p(Xi(t.product_type,"product_name","product_id")),g(Xi(t.sample_category,"sample_category","samplecat_id"));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){T.apply(this,arguments)}()}),[]);var E=function(e,t){e.preventDefault();var a,n=e.target.value;"target"===t&&"No"===n?o(Object(nt.a)(Object(nt.a)({},l),{},(a={},Object(Ot.a)(a,t,n),Object(Ot.a)(a,"targetprice",""),a))):o(Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,n)))},q=[{label:"Product type",type:"autocomplete",labelprop:"label",required:!0,value:l.product,error:null===y||void 0===y?void 0:y.product,helperText:null===y||void 0===y?void 0:y.product,options:b||[],onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{product:t}))}},{label:"Description",type:"input",multiline:!0,rows:3,value:l.description||"",error:null===y||void 0===y?void 0:y.description,helperText:null===y||void 0===y?void 0:y.description,required:!0,onChange:function(e){return E(e,"description")}},{label:"Target",type:"radio",value:l.target,defaultValue:"No",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],onChange:function(e){return E(e,"target")},sm:6},{label:"Yes"===l.target?"Target Price":"No Target Price",type:"input",disabled:"Yes"!==l.target,value:l.targetprice,onChange:function(e){return E(e,"targetprice")}},{label:"Sample category",type:"autocomplete",labelprop:"label",required:!0,value:l.category,error:null===y||void 0===y?void 0:y.category,helperText:null===y||void 0===y?void 0:y.category,options:h||[],onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{category:t}))}}],F=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,o,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},n="Please fill valid details",l.category&&""!==l.category||(a=Object(nt.a)(Object(nt.a)({},a),{},{category:n})),l.product&&""!==l.product||(a=Object(nt.a)(Object(nt.a)({},a),{},{product:n})),l.description&&""!==l.description||(a=Object(nt.a)(Object(nt.a)({},a),{},{description:n})),_.a.isEmpty(a)){t.next=8;break}C(a),t.next=23;break;case 8:return r={sample_reqid:e.sampleid.toString(),product_id:null===(i=l.product)||void 0===i?void 0:i.value.toString(),sample_catid:null===(o=l.category)||void 0===o?void 0:o.value.toString(),description:l.description,targetprice_enabled:!!l.target&&"Yes"===l.target,target_price:l.targetprice?l.targetprice.toString():"",created_date:$i(),created_byuser:localStorage.getItem("currentUserName"),created_byuserid:localStorage.getItem("currentUserId")},A(!0),t.prev=10,t.next=13,Ze(r);case 13:t.sent&&(N({open:!0,message:"Sample line item created successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(10),N({open:!0,message:t.t0.message,severity:"error"});case 20:return t.prev=20,A(!1),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[10,17,20,23]])})));return function(){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[k.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},k),{},{handleClose:function(){return N({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Sample request item information"})})}),Object(ot.jsx)(tn,{payload:q}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:I,label:I?"Loading...":"Request Sample Item",onClick:F})})]})]})},tl=a(11),al=a(978),nl=a(961),il=a(973),ll=a(433),ol=a.n(ll),rl=Object(g.a)({root:{color:"#eaeaf0",display:"flex",height:22,alignItems:"center"},active:{},circle:{},completed:{color:"#784af4",zIndex:1,fontSize:18}});function cl(e){var t=rl(),a=e.active,n=e.completed;return Object(ot.jsx)("div",{className:Object(tl.a)(t.root,Object(Ot.a)({},t.active,a)),children:n?Object(ot.jsx)(ol.a,{className:t.completed}):Object(ot.jsx)("div",{className:t.circle})})}var sl=Object(g.a)((function(e){return{root:{width:"100%","& .MuiStep-horizontal":{padding:0},"& .MuiStepConnector-root":{display:"none"},"& .MuiStep-root":{flex:"1 1 0%",pointer:"cursor",marginLeft:".375rem",marginRight:".4375rem",background:"var(--lwc-colorBackgroundPathIncomplete,rgb(236, 235, 234))"," & .MuiStepLabel-label":{color:"black",padding:"0.65rem",width:"max-content"}}," & .MuiStep-completed":{background:"var(--lwc-colorBackgroundPathComplete,rgb(69, 198, 90))"," & .MuiStepLabel-label":{color:"white",padding:"0.75rem"}}," & .MuiStep-root div.active":{background:"var(--lwc-colorBackgroundPathActive,rgb(1, 68, 134))"," & .MuiStepLabel-label":{color:"white",padding:"0.65rem"}}," & .MuiPaper-root .MuiStep-root:first-child, & .MuiPaper-root .MuiStep-root:first-child > div":{borderTopLeftRadius:"var(--lwc-heightSalesPath,2rem)",borderBottomLeftRadius:"var(--lwc-heightSalesPath,2rem)"}," & .MuiPaper-root .MuiStep-root:last-child, & .MuiPaper-root .MuiStep-root:last-child > div":{marginRight:0,borderTopRightRadius:"var(--lwc-heightSalesPath,2rem)",borderBottomRightRadius:"var(--lwc-heightSalesPath,2rem)",paddingRight:".625rem"}},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));function dl(e){var t=sl(),a=e.steps,l=i.a.useState(parseInt(e.completeStep)),o=Object(c.a)(l,2),r=o[0],s=o[1];return Object(n.useState)((function(){e.completeStep&&(console.log("step::",e.completeStep),s(e.completeStep))}),[e.completeStep]),Object(ot.jsx)("div",{className:t.root,children:Object(ot.jsx)(al.a,{activeStep:e.activeStep,children:a.map((function(t,a){var n={};return r===a&&(n.active=!0),Object(ot.jsx)(nl.a,Object(nt.a)(Object(nt.a)({id:a+1},n),{},{children:Object(ot.jsx)("div",{className:n.active?"active":"",style:{width:e.activeStepProgress?e.activeStepProgress:"100%"},children:Object(ot.jsx)(il.a,Object(nt.a)(Object(nt.a)({},{}),{},{StepIconComponent:cl,children:t}))})}),t)}))})})}var ul=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column","& #top-row":{marginTop:10,marginBottom:5}}}})),bl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return e.map((function(e){return n.push({label:e[t],value:e[a]||e[t]})})),n},pl=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},jl=function(e){var t=ul(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)([]),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)([]),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)({}),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)({open:!1,message:"",severity:""}),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)(!1),D=Object(c.a)(P,2),I=D[0],A=D[1];Object(n.useEffect)((function(){var t=Object(nt.a)({},e.data);t.product_id={label:t.product_type,value:t.product_id},t.sample_catid={label:t.sample_category,value:t.sample_catid},o(t)}),[e.data]),Object(n.useEffect)((function(){function e(){return(e=Object(r.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se({});case 2:t=e.sent,p(bl(t.product_type,"product_name","product_id")),g(bl(t.sample_category,"sample_category","samplecat_id"));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var T=function(e,t){e.preventDefault();var a,n=e.target.value;"targetprice_enabled"===t&&"No"===n?o(Object(nt.a)(Object(nt.a)({},l),{},(a={},Object(Ot.a)(a,t,n),Object(Ot.a)(a,"target_price",""),a))):o(Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,n)))},E=[{label:"Product Type",type:"autocomplete",labelprop:"label",required:!0,value:l.product_id?l.product_id:"",error:null===y||void 0===y?void 0:y.product_id,helperText:null===y||void 0===y?void 0:y.product_id,options:b||[],onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{product_id:t}))}},{label:"Description",type:"input",multiline:!0,rows:3,value:l.description||"",error:null===y||void 0===y?void 0:y.description,helperText:null===y||void 0===y?void 0:y.description,required:!0,onChange:function(e){return T(e,"description")}},{label:"Target",type:"radio",value:!0===l.targetprice_enabled||"Yes"===l.targetprice_enabled?"Yes":"No",defaultValue:"No",options:[{label:"Yes",value:"Yes"},{label:"No",value:"No"}],onChange:function(e){return T(e,"targetprice_enabled")},sm:6},{label:!0===l.targetprice_enabled||"Yes"===l.targetprice_enabled?"Target Price":"No Target Price",type:"input",disabled:!0!==l.targetprice_enabled&&"Yes"!==l.targetprice_enabled,value:l.target_price,onChange:function(e){return T(e,"target_price")}},{label:"Sample category",type:"autocomplete",labelprop:"label",required:!0,value:l.sample_catid?l.sample_catid:"",error:null===y||void 0===y?void 0:y.sample_catid,helperText:null===y||void 0===y?void 0:y.sample_catid,options:h||[],onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{sample_catid:t}))}}],q=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,o,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},n="Please fill valid details",l.sample_catid&&""!==l.sample_catid||(a=Object(nt.a)(Object(nt.a)({},a),{},{sample_catid:n})),l.product_id&&""!==l.product_id||(a=Object(nt.a)(Object(nt.a)({},a),{},{product_id:n})),l.description&&""!==l.description||(a=Object(nt.a)(Object(nt.a)({},a),{},{description:n})),_.a.isEmpty(a)){t.next=8;break}C(a),t.next=23;break;case 8:return r={update:!0,lineitem_id:e.id,sample_reqid:e.sampleid.toString(),product_id:null===(i=l.product_id)||void 0===i?void 0:i.value.toString(),sample_catid:null===(o=l.sample_catid)||void 0===o?void 0:o.value.toString(),description:l.description,targetprice_enabled:!!l.targetprice_enabled&&("Yes"===l.targetprice_enabled||!0===l.targetprice_enabled),target_price:l.target_price?l.target_price:"",modified_date:pl(),modified_byuser:localStorage.getItem("currentUserName"),modified_byuserid:localStorage.getItem("currentUserId")},A(!0),t.prev=10,t.next=13,Ze(r);case 13:t.sent&&(N({open:!0,message:"Sample updated successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(10),N({open:!0,message:t.t0.message,severity:"error"});case 20:return t.prev=20,A(!1),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[10,17,20,23]])})));return function(){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[k.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},k),{},{handleClose:function(){return N({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Sample request information"})})}),Object(ot.jsx)(tn,{payload:E}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})}),Object(ot.jsx)(Bi,{data:l.audit_log}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:I,label:I?"Loading...":"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Save",onClick:q})})]})]})},ml=function(e){var t=Object(n.useState)({}),a=Object(c.a)(t,2),i=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(c.a)(o,2),s=r[0],d=r[1];Object(n.useEffect)((function(){l(e.data)}),[e.data]);var u,b=[{type:"label",value:"Product Type",bold:!0,sm:"6"},{type:"label",value:i.product_type,sm:"6"},{type:"label",value:"Description",bold:!0,sm:"6"},{type:"label",value:i.description,sm:"6"},{type:"label",value:"Sample category",bold:!0,sm:"6"},{type:"label",value:i.sample_category,sm:"6"}],p=[{type:"label",value:"Target",bold:!0,sm:"6"},{type:"label",value:!1===i.targetprice_enabled?"No":"Yes",sm:"6"},{type:"label",value:"Target Price",bold:!0,sm:"6"},{type:"label",value:""===i.target_price?"-":i.target_price,sm:"6"}];return s?(u=Object(ot.jsx)(jl,{back:e.back,sampleid:e.sampleid,id:e.id,data:e.data}),Object(ot.jsx)(ot.Fragment,{children:u})):Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(ua.a,{className:"page-header",children:[Object(ot.jsx)(an.a,{title:"Sample request line item details",className:"cardHeader"}),Object(ot.jsx)(xa.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:b})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:p})})]})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})}),Object(ot.jsx)(Bi,{data:i.audit_log}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Edit",onClick:function(){return d(!0)}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:e.back})})]})]})},vl=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .page-header":{width:"100%",marginBottom:15},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"},card:{boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)",marginBottom:5},modal:{position:"absolute",margin:"auto",top:"30%",left:"30%",width:700,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),hl=function(e){var t=vl(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)(!1),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)([]),v=Object(c.a)(j,2),h=v[0],g=v[1],f=Object(n.useState)([]),y=Object(c.a)(f,2),_=y[0],C=y[1],w=Object(n.useState)(!1),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)(!1),D=Object(c.a)(P,2),I=D[0],A=D[1],T=Object(n.useState)(-1),E=Object(c.a)(T,2),q=E[0],F=E[1],M=Object(n.useState)([]),R=Object(c.a)(M,2),B=R[0],H=R[1],G=Object(n.useState)({open:!1,message:"",severity:""}),L=Object(c.a)(G,2),U=L[0],Q=L[1],V=Object(n.useRef)(null);console.log("Id is",e.id),Object(n.useEffect)((function(){Xe({type:"listsamplelineitems",sample_reqid:parseInt(e.id)}).then((function(e){g(e)})),me({type:"viewsample",sample_id:parseInt(e.id)}).then((function(e){o(e),H(e.audit_log)}))}),[e.id]);var z,W=[{type:"label",value:"Sample request number",bold:!0,sm:"6"},{type:"label",value:l.samplereq_number,sm:"6"},{type:"label",value:"Account name",bold:!0,sm:"6"},{type:"label",value:l.account_name,sm:"6"},{type:"label",value:"Shipping address",bold:!0,sm:"6"},{type:"label",value:l.shipping_address,sm:"6"},{type:"label",value:"Status",bold:!0,sm:"6"},{type:"label",value:l.masterstatus,sm:"6"}],Y=[{type:"label",value:"Record type",bold:!0,sm:"6"},{type:"label",value:l.recordtype,sm:"6"},{type:"label",value:"Contact name",bold:!0,sm:"6"},{type:"label",value:l.contact_firstname,sm:"6"},{type:"label",value:"Remarks",bold:!0,sm:"6"},{type:"label",value:l.remarks,sm:"6"},{type:"label",value:"Created date",bold:!0,sm:"6"},{type:"label",value:l.samplereq_date,sm:"6"}],K=function(t,a){"view_sampleitem"===t?(Xe({type:"viewsamplelineitem",lineitem_id:parseInt(a)}).then((function(e){C(e)})),N(!0),F(a)):(Xe({type:"deletesamplelineitem",lineitem_id:parseInt(a)}).then((function(e){e&&Q({open:!0,message:e})})),Xe({type:"listsamplelineitems",sample_reqid:parseInt(e.id)}).then((function(e){g(e)})),p(!1),N(!1))},J=function(){var e=Object(r.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(!I),Q({open:!0,message:"Something Went Wrong",severity:"error"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){A(!1),e.back()};if(b)z=Object(ot.jsx)(el,{back:function(){p(!1),Xe({type:"listsamplelineitems",sample_reqid:parseInt(e.id)}).then((function(e){g(e)}))},sampleid:e.id});else{if(!k)return Object(ot.jsxs)(ot.Fragment,{children:[U.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},U),{},{handleClose:function(){return Q({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(ua.a,{className:"page-header",children:[Object(ot.jsx)(an.a,{title:"Sample request details",className:"cardHeader"}),Object(ot.jsxs)(xa.a,{children:[Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:W})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Y})})]}),Object(ot.jsx)(m.a,{container:!0,className:t.links,md:6,children:Object(ot.jsx)(m.a,{item:!0,md:5,xs:6,children:Object(ot.jsx)(Wi,{linkLabel:"Sample Line Items Information",body:function(){return Object(ot.jsxs)(x.a,{className:t.popover,children:[Object(ot.jsx)(m.a,{id:"top-row",container:!0,ref:V,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Sample line item information"})})}),Object(ot.jsx)(Ji,{data:h,sampleItemDetails:function(e,t){return K(e,t)}})]})},linkRef:V})})})]})]}),Object(ot.jsx)(ua.a,{className:"page-header",children:Object(ot.jsx)(xa.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,children:Object(ot.jsx)(dl,{activeStep:"New"===l.masterstatus?"1":"Pending with QC"===l.masterstatus?"2":"Received from QC"===l.masterstatus?"3":"Approved"===l.masterstatus?"4":"5",steps:["New","Pending with QC","Received from QC","Approved","Samples dispatched"],stepClick:function(e){console.log("e::",e)}})})})})}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Sample line item information"})})}),Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0}),Object(ot.jsx)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:Object(ot.jsx)(Rn,{label:"Sample Line Item",variant:"extended",onClick:function(){p(!0)},sampleId:e.id})})]}),Object(ot.jsx)(Ji,{data:h,sampleItemDetails:function(e,t){return K(e,t)}}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})}),Object(ot.jsx)(Bi,{data:B}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Edit",onClick:function(t){return e.editSample("edit_sample",e.id)}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Submit",onClick:function(e){return J(e)}})})]}),Object(ot.jsx)(zt,{open:I,handleClose:Z,body:function(){return Object(ot.jsxs)(x.a,{className:t.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Success"}),Object(ot.jsx)("p",{children:"Sample request submitted and email sent successfully"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Close",onClick:Z})})})]})}})]});z=Object(ot.jsx)(ml,{back:function(){Xe({type:"listsamplelineitems",sample_reqid:parseInt(e.id)}).then((function(e){g(e)})),p(!1),N(!1)},sampleid:e.id,id:q,data:_})}return Object(ot.jsx)(ot.Fragment,{children:z})},Ol=a(22),gl=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column","& #top-row":{marginTop:10,marginBottom:5}}}})),xl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return null===e||void 0===e||e.map((function(e){return null===n||void 0===n?void 0:n.push({label:null===e||void 0===e?void 0:e[t],value:(null===e||void 0===e?void 0:e[a])||(null===e||void 0===e?void 0:e[t])})})),n},fl=function(e){var t=gl(),a=(0,Jt().getCurrentUserDetails)(),i=null===a||void 0===a?void 0:a.role,l=null===a||void 0===a?void 0:a.id,o=Object(n.useState)({}),s=Object(c.a)(o,2),u=s[0],b=s[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),v=j[0],h=j[1],g=Object(n.useState)([]),x=Object(c.a)(g,2),f=x[0],y=x[1],C=Object(n.useState)({}),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)({open:!1,message:"",severity:""}),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)(!1),T=Object(c.a)(A,2),E=T[0],q=T[1],F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=null===e||void 0===e?void 0:e.filter((function(e){return e.value===t}))[0];return a};Object(n.useEffect)((function(){oe({type:"salutations"}).then((function(e){return y(xl(e,"salutation","id"))})),de(i!==Kt.managingDirector?{type:"accountdetailsforQuotation",createdbyuserid:l}:{type:"accountdetailsforQuotation"}).then((function(t){if(console.log("Res is",t),null!==t){var a=xl(t,"account_name","account_id");if(h(a),e.accountId){var n=t.find((function(t){var a;return t.account_id.toString()===(null===e||void 0===e||null===(a=e.accountId)||void 0===a?void 0:a.toString())}));b(Object(nt.a)(Object(nt.a)({},u),{},{account:void 0!==n?F(a,null===n||void 0===n?void 0:n.account_id):{}}))}}else h([]),b.apply(void 0,Object(Ol.a)(u))}))}),[e.accountId]);var M=function(e,t){e.preventDefault();var a=e.target.value;b(Object(nt.a)(Object(nt.a)({},u),{},Object(Ot.a)({},t,a)))},R=[{label:"Account name",type:"autocomplete",labelprop:"label",value:void 0!==(null===u||void 0===u?void 0:u.account)?null===u||void 0===u?void 0:u.account:{},options:v,onChange:function(e,t){b(Object(nt.a)(Object(nt.a)({},u),{},{account:t}))}},{label:"Salutation",type:"autocomplete",labelprop:"label",required:!0,error:null===S||void 0===S?void 0:S.salutation,helperText:null===S||void 0===S?void 0:S.salutation,value:F(f,u.salutation),options:f,onChange:function(e,t){b(Object(nt.a)(Object(nt.a)({},u),{},{salutation:t}))}},{label:"First name",type:"input",value:u.firstName,required:!0,error:null===S||void 0===S?void 0:S.firstName,helperText:null===S||void 0===S?void 0:S.firstName,onChange:function(e){return M(e,"firstName")}},{label:"Last name",type:"input",value:u.lastName,onChange:function(e){return M(e,"lastName")}},{label:"Email",type:"input",value:u.email,onChange:function(e){return M(e,"email")}},{label:"Position",type:"input",value:u.position,onChange:function(e){return M(e,"position")}},{label:"Phone",type:"number",value:u.phone,error:null===S||void 0===S?void 0:S.phone,helperText:null===S||void 0===S?void 0:S.phone,onChange:function(e){return M(e,"phone")}},{label:"Mobile",type:"number",value:u.mobile,error:null===S||void 0===S?void 0:S.mobile,helperText:null===S||void 0===S?void 0:S.mobile,onChange:function(e){return M(e,"mobile")}}],B=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,l,o,r,c,s,b;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},n="Please fill valid details",i="Exceeded maximum length",_.a.isEmpty(u.salutation)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{salutation:n})),_.a.isEmpty(u.firstName)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{firstName:n})),!_.a.isEmpty(u.phone)&&u.phone.length>10&&(a=Object(nt.a)(Object(nt.a)({},a),{},{phone:i})),!_.a.isEmpty(u.mobile)&&u.mobile.length>10&&(a=Object(nt.a)(Object(nt.a)({},a),{},{mobile:i})),_.a.isEmpty(a)){t.next=10;break}k(a),t.next=26;break;case 10:return s={create:!0,accountid:null===u||void 0===u||null===(l=u.account)||void 0===l?void 0:l.value.toString(),salutationid:parseInt(null===u||void 0===u||null===(o=u.salutation)||void 0===o?void 0:o.value),firstname:u.firstName||"",lastname:u.lastName||"",email:u.email||"",position:u.position||"",phone:(null===(r=u.phone)||void 0===r?void 0:r.toString())||"",mobile:(null===(c=u.mobile)||void 0===c?void 0:c.toString())||""},q(!0),t.prev=12,t.next=15,je(s);case 15:b=t.sent,console.log("Response",b),b&&(I({open:!0,message:"Contact created successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(12),I({open:!0,message:t.t0.message,severity:"error"});case 23:return t.prev=23,q(!1),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[12,20,23,26]])})));return function(){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[D.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},D),{},{handleClose:function(){return I({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Contact details"})})}),Object(ot.jsx)(tn,{payload:R}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:E,label:E?"Loading...":"Create Contact",onClick:B})})]})]})},yl=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"}}})),_l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return e.map((function(e){return n.push({label:e[t],value:e[a]||e[t]})})),n},Cl=function(e){var t=yl(),a=(0,Jt().getCurrentUserDetails)(),i=null===a||void 0===a?void 0:a.role,l=null===a||void 0===a?void 0:a.id,o=Object(n.useState)({}),s=Object(c.a)(o,2),u=s[0],b=s[1],p=Object(n.useState)([{}]),j=Object(c.a)(p,2),v=j[0],h=j[1],g=Object(n.useState)({}),x=Object(c.a)(g,2),f=x[0],y=x[1],C=Object(n.useState)([]),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)({}),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)([]),T=Object(c.a)(A,2),E=T[0],q=T[1],F=Object(n.useState)([]),M=Object(c.a)(F,2),R=M[0],B=M[1],H=Object(n.useState)([]),G=Object(c.a)(H,2),L=G[0],U=G[1],Q=Object(n.useState)([]),V=Object(c.a)(Q,2),z=V[0],W=V[1],Y=Object(n.useState)([]),K=Object(c.a)(Y,2),J=K[0],Z=K[1],X=Object(n.useState)([]),$=Object(c.a)(X,2),ee=$[0],ae=$[1],ne=Object(n.useState)([]),ie=Object(c.a)(ne,2),le=ie[0],oe=ie[1],re=Object(n.useState)(!0),ce=Object(c.a)(re,2),se=ce[0],be=ce[1],pe=Object(n.useState)([]),je=Object(c.a)(pe,2),me=je[0],ve=je[1],he=Object(n.useState)({open:!1,message:"",severity:""}),Oe=Object(c.a)(he,2),ge=Oe[0],xe=Oe[1],fe=Object(n.useState)(!1),ye=Object(c.a)(fe,2),_e=ye[0],Ce=ye[1];function we(e){return{label:null===e||void 0===e?void 0:e.address,value:null===e||void 0===e?void 0:e.billing_id}}Object(n.useEffect)((function(){de({type:"incoterms"}).then((function(e){return null!==e&&B(_l(e,"incoterms","incotermsid"))})),de({type:"currencies"}).then((function(e){null!==e&&ve(e),U(_l(e,"currencyname","currencycode"))})),de({type:"loadingports"}).then((function(e){return null!==e&&W(_l(e,"portloading_name","id"))})),de({type:"destinationports"}).then((function(e){return null!==e&&Z(_l(e,"destination_port","id"))})),te().then((function(e){return null!==e&&oe(_l(e,"country","countryid"))}))}),[]),Object(n.useEffect)((function(){de(i!==Kt.managingDirector?{type:"accountdetailsforQuotation",createdbyuserid:l}:{type:"accountdetailsforQuotation"}).then((function(t){if(null!==t)if(q(null!==t?_l(t,"account_name","account_id"):[]),e.accountId){var a,n,i=null!==t?t.find((function(t){return t.account_id==e.accountId})):void 0;h(null!==t?t:[]),k(null!==t?_l(t,"account_name","account_id"):[]);var l=null!==i&&void 0!==i&&i.contact_details?_l(i.contact_details,"contact_name","contact_id"):[],o=0!==l.length?{label:null===(a=l[0])||void 0===a?void 0:a.label,value:null===(n=l[0])||void 0===n?void 0:n.value}:{};o&&be(!1);var r={accountName:void 0!==i?{label:i.account_name,value:i.account_id}:{},contact:o,contactList:l,accountType:void 0!==i?i.accounttype_name:"",accountTypeId:void 0!==i?i.accounttype_id:""};b(r),I(o)}else h(t),k(null!==t?_l(t,"account_name","account_id"):[])}))}),[e.accountId]),Object(n.useEffect)((function(){var e,t,a,n,i=_.a.cloneDeep(u);de({type:"billingaddressoncontacts",account_id:null===u||void 0===u||null===(e=u.accountName)||void 0===e||null===(t=e.value)||void 0===t?void 0:t.toString(),contact_id:null===u||void 0===u||null===(a=u.contact)||void 0===a||null===(n=a.value)||void 0===n?void 0:n.toString()}).then((function(e){var t=[],a=[];null===e||void 0===e||e.map((function(e){var n;return null===e||void 0===e||null===(n=e.billing_address)||void 0===n?void 0:n.map((function(e){return t.push(e),a.push(we(e)),null}))})),ae(a),i.billingAddress=we((null===t||void 0===t?void 0:t.find((function(e){return null===e||void 0===e?void 0:e.primary_address})))||(null===t||void 0===t?void 0:t[0])),b(i)}))}),[D]);var Se=function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},Object(Ot.a)({},t,e.target.value));b(a),console.log(a)},ke=function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},Object(Ot.a)({},t,e));b(a),console.log(a)},Ne=function(e){var t=e?new Date(e):new Date;return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},Pe=function(){var t=Object(r.a)(d.a.mark((function t(){var n,i,l,o,r,c,s,b,p,j,m,v,h,O,g,x,f,C,w,k;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i="Please enter valid details",l={},S.length>0&&_.a.isEmpty(null===(n=u.accountName)||void 0===n?void 0:n.toString())&&(l=Object(nt.a)(Object(nt.a)({},l),{},{accountName:i})),_.a.isEmpty(u.incoTerms)&&(l=Object(nt.a)(Object(nt.a)({},l),{},{incoTerms:i})),_.a.isEmpty(u.currency)&&(l=Object(nt.a)(Object(nt.a)({},l),{},{currency:i})),_.a.isEmpty(null===u||void 0===u?void 0:u.billingAddress)&&(l=Object(nt.a)(Object(nt.a)({},l),{},{billingAddress:i})),u.loadingPort||(l=Object(nt.a)(Object(nt.a)({},l),{},{loadingPort:i})),u.dispatchFrom||(l=Object(nt.a)(Object(nt.a)({},l),{},{dispatchFrom:i})),u.dispatchTo||(l=Object(nt.a)(Object(nt.a)({},l),{},{dispatchTo:i})),_.a.isEmpty(l)){t.next=13;break}y(l),t.next=29;break;case 13:return w={update:!1,quoteid:(new Date).getUTCMilliseconds(),createduserid:a.id,accountid:null===(o=u.accountName)||void 0===o||null===(r=o.value)||void 0===r?void 0:r.toString(),accounttypeid:u.accountTypeId,accounttypename:u.accountType,finalclientaccountid:(null===(c=u.client)||void 0===c||null===(s=c.value)||void 0===s?void 0:s.toString())||"0",billing_id:null===u||void 0===u||null===(b=u.billingAddress)||void 0===b?void 0:b.value,incotermsid:u.incoTerms.value,createddate:new Date,fromdate:u.dispatchFrom,todate:u.dispatchTo,currencycode:null===(p=u.currency)||void 0===p?void 0:p.value,currencyid:null===(j=me.find((function(e){var t;return(null===e||void 0===e?void 0:e.currencycode)===(null===u||void 0===u||null===(t=u.currency)||void 0===t?void 0:t.value)})))||void 0===j?void 0:j.currencyid,portloadingid:null===(m=u.loadingPort)||void 0===m||null===(v=m.value)||void 0===v?void 0:v.toString(),destinationid:(null===(h=u.destinationPort)||void 0===h||null===(O=h.value)||void 0===O?void 0:O.toString())||"0",isactive:1,payment_terms:u.terms,other_specification:u.others,remarks_marketing:u.remarks,destination_port:u.destinationPortName,port_loading:u.portLoadingName,destination_country:null===(g=u.destinationCountry)||void 0===g?void 0:g.label,destination_countryid:null===(x=u.destinationCountry)||void 0===x?void 0:x.value,status_id:"1",master_status:"New",contactid:(null===(f=u.contact)||void 0===f||null===(C=f.value)||void 0===C?void 0:C.toString())||"1"},Ce(!0),t.prev=15,t.next=18,ue(w);case 18:k=t.sent,console.log("Response",k),k&&(xe({open:!0,message:"Quote created successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(15),xe({open:!0,message:t.t0.message,severity:"error"});case 26:return t.prev=26,Ce(!1),t.finish(26);case 29:case"end":return t.stop()}}),t,null,[[15,23,26,29]])})));return function(){return t.apply(this,arguments)}}(),De=[{label:"Account name",type:"autocomplete",labelprop:"label",required:!0,error:null===f||void 0===f?void 0:f.accountName,helperText:null===f||void 0===f?void 0:f.accountName,value:u.accountName||[],options:S||[],onChange:function(e,t){var a,n,i=null===v||void 0===v?void 0:v.find((function(e){return e.account_id===(null===t||void 0===t?void 0:t.value)}));console.log("details::",v,null===t||void 0===t?void 0:t.value);var l=null!==i&&void 0!==i&&i.contact_details?_l(null===i||void 0===i?void 0:i.contact_details,"contact_name","contact_id"):[],o=Object(nt.a)(Object(nt.a)({},u),{},{accountName:t,accountType:null===i||void 0===i?void 0:i.accounttype_name,accountTypeId:null===i||void 0===i?void 0:i.accounttype_id,billingAddress:null===i||void 0===i?void 0:i.billing_address,contactList:l,contact:(null===l||void 0===l?void 0:l.length)>0?{label:null===(a=l[0])||void 0===a?void 0:a.label,value:null===(n=l[0])||void 0===n?void 0:n.value}:"1"});be(!1),I({}),b(o)}},{label:"Contact name",type:"autocomplete",labelprop:"label",disabled:se,value:u.contact||"",options:u.contactList||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},{contact:t});I(t),b(a)}},{label:"Account type",type:"input",multiline:!0,required:!0,disabled:!0,rows:2,value:u.accountType||""},{label:"Quote creation date",type:"input",disabled:!0,value:Ne(u.creationDate)||Ne("")},{label:"Billing address",type:"autocomplete",options:ee||[],multiline:!0,required:!0,rows:3,error:null===f||void 0===f?void 0:f.billingAddress,helperText:null===f||void 0===f?void 0:f.billingAddress,value:u.billingAddress||"",onChange:function(e,t){return function(e,t,a){var n=Object(nt.a)(Object(nt.a)({},u),{},Object(Ot.a)({},t,a));b(n)}(0,"billingAddress",t)}},{label:"Payment terms",type:"input",value:u.terms,onChange:function(e){return Se(e,"terms")}},{label:"Incoterms",type:"autocomplete",labelprop:"label",required:!0,error:null===f||void 0===f?void 0:f.incoTerms,helperText:null===f||void 0===f?void 0:f.incoTerms,value:u.incoTerms,options:R,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},{incoTerms:t});b(a)}},{label:"Quote status",type:"input",disabled:!0,value:u.status||"New"},{label:"Remarks from marketing",type:"input",value:u.remarks,multiline:!0,onChange:function(e){return Se(e,"remarks")}},{label:"Customer currency",type:"autocomplete",labelprop:"label",value:u.currency||[],required:!0,error:null===f||void 0===f?void 0:f.currency,helperText:null===f||void 0===f?void 0:f.currency,options:L,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},{currency:t});b(a)}},{label:"Final client",type:"autocomplete",labelprop:"label",value:u.client||[],options:E,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},{client:t});b(a)}}],Ie=[{label:"Port of loading",type:"autocomplete",labelprop:"label",value:u.loadingPort||[],required:!0,error:null===f||void 0===f?void 0:f.loadingPort,helperText:null===f||void 0===f?void 0:f.loadingPort,options:z,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},{loadingPort:t,portLoadingName:null===t||void 0===t?void 0:t.label});b(a)}},{label:"Destination country",type:"autocomplete",labelprop:"label",value:u.destinationCountry,options:le,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},{destinationCountry:t});b(a)}},{label:"Dispatch period from",type:"datePicker",value:u.dispatchFrom||null,required:!0,error:null===f||void 0===f?void 0:f.dispatchFrom,helperText:null===f||void 0===f?void 0:f.dispatchFrom,minDate:new Date,onChange:function(e){return ke(e,"dispatchFrom")},sm:3},{label:"Dispatch period to",type:"datePicker",value:u.dispatchTo||null,required:!0,error:null===f||void 0===f?void 0:f.dispatchTo,helperText:null===f||void 0===f?void 0:f.dispatchTo,minDate:new Date,onChange:function(e){return ke(e,"dispatchTo")},sm:3},{label:"Destination port",type:"autocomplete",labelprop:"label",value:u.destinationPort,options:J,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},{destinationPort:t,destinationPortName:null===t||void 0===t?void 0:t.label});b(a)}},{label:"Others (Specification)",type:"input",value:u.others,onChange:function(e){return Se(e,"others")}}];return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[ge.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},ge),{},{handleClose:function(){return xe({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Quote information"})})}),Object(ot.jsx)(tn,{payload:De}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Dispatch details"})})}),Object(ot.jsx)(tn,{payload:Ie}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:_e,label:_e?"Loading...":"Save",onClick:Pe})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})})]})]})},wl=[{id:"lineitemnumber",label:"Line Item Id"},{id:"quoteitem",label:"Quote Item"},{id:"samplecode",label:"Sample Code"},{id:"expectedquantity",label:"Expected Qty (kgs)"},{id:"category",label:"Catogory"},{id:"categorytype",label:"Catogory Type"},{id:"weight",label:"Weight"},{id:"upc",label:"UPC"},{id:"baseprice",label:"Base Price"},{id:"finalrate",label:"Final Rate"},{id:"customerapprovalstatus",label:"Customer Approval Status"},{id:"gmcapprovalstatus",label:"GMC Approval Status"},{id:"negativemarginstatus",label:"Negative Margin Status"}];var Sl=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),kl=function(e){var t=Sl(),a=i.a.useState(0),n=Object(c.a)(a,2),l=n[0],o=n[1],r=i.a.useState(10),s=Object(c.a)(r,2),d=s[0],u=s[1],b=[];i.a.useEffect((function(){console.log("Props Data",e.data)}),[e.data]),e.data&&e.data.map((function(e){var t,a,n,i,l,o,r,c,s,d,u,p,j,m;b.push((t=e.quotelineitem_id,a=e.quotelineitem_number,n=e.quotelineitem_id,i=e.sample_code,l=e.expectedorder_kgs,o=e.category,r=e.categorytype,c=e.weight,s=e.upc_id,d=e.baseprice,u=e.final_price,p=e.customer_approval,j=e.gms_approvalstatus,m=e.negativemargin_status,{lineitemid:t,lineitemnumber:a,quoteitem:n,samplecode:i,expectedquantity:l,category:o,categorytype:r,weight:c,upc:s,baseprice:d,finalrate:u,customerapprovalstatus:p,gmcapprovalstatus:j,negativemarginstatus:m}))}));return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(pn.a,{children:Object(ot.jsx)(jn.a,{children:wl.map((function(e){return Object(ot.jsx)(un.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ot.jsx)(dn.a,{children:b.length>0?b.slice(l*d,l*d+d).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:wl.map((function(a){var n=t[a.id];return Object(ot.jsx)(un.a,{align:a.align,children:"lineitemnumber"===a.id?Object(ot.jsx)("a",{href:"#",onClick:function(a){var n;n=t.lineitemid,e.quoteItemDetails("view_quoteitem",n)},children:n}):n},a.id)}))},a)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:b.length,rowsPerPage:d,page:l,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){u(+e.target.value),o(0)}})]})},Nl=[{id:"description",label:"Description"},{id:"createdby",label:"Created By"},{id:"createddate",label:"Created Date"},{id:"modifiedby",label:"Modified By"},{id:"modifieddate",label:"Modified Date"},{id:"status",label:"Status"}],Pl=function(e){var t=new Date(e);return e?t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear():""};var Dl=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),Il=function(e){var t=Dl(),a=i.a.useState(0),n=Object(c.a)(a,2),l=n[0],o=n[1],r=i.a.useState(10),s=Object(c.a)(r,2),d=s[0],u=s[1],b=[];i.a.useEffect((function(){console.log("Props Data",e.data)}),[e.data]),e.data&&e.data.map((function(e){var t,a,n,i,l,o;b.push((t=e.description,a=e.created_username,n=Pl(e.created_date),i=e.modified_username,l=Pl(e.modified_date),o=e.status,{description:t,createdby:a,createddate:n,modifiedby:i,modifieddate:l,status:o}))}));return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(pn.a,{children:Object(ot.jsx)(jn.a,{children:Nl.map((function(e){return Object(ot.jsx)(un.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ot.jsxs)(dn.a,{children:[b.length>0&&b.slice(l*d,l*d+d).map((function(e,t){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Nl.map((function(t,a){var n=e[t.id];return Object(ot.jsx)(un.a,{align:t.align,children:n},t.id)}))},e.code)})),0===b.length&&Object(ot.jsx)("p",{style:{float:"right",justifyContent:"center"},children:"No Records to Display."})]})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:b.length,rowsPerPage:d,page:l,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){u(+e.target.value),o(0)}})]})},Al=function(e){var t=Object(n.useState)({}),a=Object(c.a)(t,2),i=a[0],l=a[1];Object(n.useEffect)((function(){ge({type:"Viewquotelineitem",quotelineitem_id:parseInt(e.id)}).then((function(e){l(e)}))}),[]);var o=[{type:"label",value:"Quote Number",bold:!0,sm:"6"},{type:"label",value:i.quote_number,sm:"6"},{type:"label",value:"Destination",bold:!0,sm:"6"},{type:"label",value:i.destination,sm:"6"},{type:"label",value:"Sample Code",bold:!0,sm:"6"},{type:"label",value:i.sample_code,sm:"6"}],r=[{type:"label",value:"Incoterms",bold:!0,sm:"6"},{type:"label",value:i.incoterms,sm:"6"},{type:"label",value:"Coffee Type",bold:!0,sm:"6"},{type:"label",value:i.coffee_type,sm:"6"},{type:"label",value:"Customer Brand Name",bold:!0,sm:"6"},{type:"label",value:i.customerbrand_name,sm:"6"}],s=[{type:"label",value:"Is Packaging New Type",bold:!0,sm:"6"},{type:"label",value:1===i.isreqnew_packing?"Yes":"No",sm:"6"}],d=[{type:"label",value:"New Packaging Type Requirement",bold:!0,sm:"6"},{type:"label",value:i.taskdesc,sm:"6"},{type:"label",value:"Task Status (New Packing Type)",bold:!0,sm:"6"},{type:"label",value:i.new_packtype_status,sm:"6"}],u=[{type:"label",value:"Packing Category",bold:!0,sm:"6"},{type:"label",value:i.category_name,sm:"6"},{type:"label",value:"Weight",bold:!0,sm:"6"},{type:"label",value:i.weight_name,sm:"6"},{type:"label",value:"No of Secondary Packs/Master Carton",bold:!0,sm:"6"},{type:"label",value:i.noofsecondary_name,sm:"6"},{type:"label",value:"Carton Type",bold:!0,sm:"6"},{type:"label",value:i.cartontype_name,sm:"6"},{type:"label",value:"Is Palletization Required?",bold:!0,sm:"6"},{type:"label",value:1===i.palletizationrequire_id?"Yes":"No",sm:"6"},{type:"label",value:"Description of Packing Type available in ERP",bold:!0,sm:"6"},{type:"label",value:i.currencyname,sm:"6"}],b=[{type:"label",value:"Packing Type",bold:!0,sm:"6"},{type:"label",value:i.categorytype_name,sm:"6"},{type:"label",value:"Secondary Packing",bold:!0,sm:"6"},{type:"label",value:i.secondary_name,sm:"6"},{type:"label",value:"UPC",bold:!0,sm:"6"},{type:"label",value:i.upc_name,sm:"6"},{type:"label",value:"Cap Type",bold:!0,sm:"6"},{type:"label",value:i.captype_name,sm:"6"},{type:"label",value:"Additional Requirements",bold:!0,sm:"6"},{type:"label",value:i.additional_req,sm:"6"}],p=[{type:"label",value:"Expected Order Quantity(Kgs)",bold:!0,sm:"6"},{type:"label",value:i.expectedorder_kgs,sm:"6"}],j=[{type:"label",value:"Base Price (Per KG)",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.baseprice,sm:"6"},{type:"label",value:"Margin Value",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.margin,sm:"6"},{type:"label",value:"Margin (%)",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.margin_percentage,sm:"6"},{type:"label",value:"Final Price (Per KG)",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.final_price,sm:"6"}],v=[{type:"label",value:"Negative Margin Status",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.negativemargin_status,sm:"6"},{type:"label",value:"Negative Margin Remarks",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.negativemargin_remarks,sm:"6"},{type:"label",value:"Negative Margin Reason",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.negativemargin_reason,sm:"6"}],h=[{type:"label",value:"Customer Approval Status",bold:!0,sm:"6"},{type:"label",value:_.a.isEmpty(null===i||void 0===i?void 0:i.customer_approval)?null:Boolean(parseInt(null===i||void 0===i?void 0:i.customer_approval))?"Approved":"Rejected",sm:"6"},{type:"label",value:"Confirmed Order Quantity (Kgs)",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.confirmed_orderquantity,sm:"6"}],g=[{type:"label",value:"Customer Rejection Remarks",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.customer_rejectionremarks,sm:"6"}],x=[{type:"label",value:"GMC Approval Status",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.gms_approvalstatus,sm:"6"}],f=[{type:"label",value:"GMS Rejection Remarks",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.gms_rejectionremarks,sm:"6"}],y=[{type:"label",value:"General Remark",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.gms_rejectionremarks,sm:"6"}];return Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(ua.a,{className:"page-header",children:[Object(ot.jsx)(an.a,{title:" Quotation Item Details",className:"cardHeader"}),Object(ot.jsx)(xa.a,{children:Object(ot.jsxs)(m.a,{container:!0,md:6,children:[Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Quote Number"}),Object(ot.jsx)(O.a,{children:i.quote_number})]}),Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Quote Item Id"}),Object(ot.jsx)(O.a,{children:i.quotelineitem_number})]}),Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Sample Code"}),Object(ot.jsx)(O.a,{children:i.sample_code})]})]})})]}),Object(ot.jsx)(ua.a,{className:"page-header",children:Object(ot.jsx)(xa.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,children:Object(ot.jsx)(dl,{activeStep:"Rejected"===(null===i||void 0===i?void 0:i.gms_approvalstatus)?4:"Approved"===(null===i||void 0===i?void 0:i.gms_approvalstatus)?3:"0"===(null===i||void 0===i?void 0:i.customer_approval)?2:"1"===(null===i||void 0===i?void 0:i.customer_approval)?1:0,steps:["Customer Approved","Customer Rejected","GMC Approved","GMC Rejected"],stepClick:function(e){console.log("e::",e)}})})})})}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Quotation & Sample Information"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:o})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:r})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"New Packaging Type Request Details"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:s})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:d})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Packaging Type Details"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:u})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:b})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Expected Order Quantity"})})}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:p})})}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Price Information"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:j})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:v})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Customer Approval & Confirmed Order Quantity"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:h})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:g})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"GMC Approval"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:x})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:f})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"General Remarks"})})}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:y})})}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})}),Object(ot.jsx)(Il,{data:i.audit_log}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Edit",onClick:function(t){return e.edit("edit_quoteItem",e.id)}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})})]})]})},Tl=a(962),El=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .page-header":{width:"100%",marginBottom:15},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"},card:{boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)",marginBottom:5}}})),ql=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return null===e||void 0===e||e.map((function(e){return n.push({label:e[t],value:e[a]||e[t]})})),n},Fl=function(e){var t=(0,Jt().getCurrentUserDetails)(),a=null===t||void 0===t?void 0:t.role,l=null===t||void 0===t?void 0:t.id,o=El(),s=Object(n.useState)({}),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)({}),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)(null),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)({}),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)({}),D=Object(c.a)(P,2),I=D[0],A=D[1],T=Object(n.useState)({}),E=Object(c.a)(T,2),q=E[0],F=E[1],M=Object(n.useState)([]),R=Object(c.a)(M,2),B=R[0],H=R[1],G=Object(n.useState)(0),L=Object(c.a)(G,2),U=L[0],Q=L[1],V=Object(n.useState)(0),z=Object(c.a)(V,2),W=z[0],Y=z[1],K=Object(n.useState)(0),J=Object(c.a)(K,2),Z=J[0],X=J[1],$=Object(n.useState)(0),ee=Object(c.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(0),ie=Object(c.a)(ne,2),le=ie[0],oe=ie[1],re=Object(n.useState)(0),ce=Object(c.a)(re,2),se=ce[0],de=ce[1],ue=Object(n.useState)(0),be=Object(c.a)(ue,2),pe=be[0],je=be[1],me=Object(n.useState)(0),ve=Object(c.a)(me,2),xe=ve[0],fe=ve[1],ye=Object(n.useState)(!0),_e=Object(c.a)(ye,2),Ce=_e[0],we=_e[1],Se=Object(n.useState)([]),ke=Object(c.a)(Se,2),Ne=ke[0],Pe=ke[1],De=Object(n.useState)(!0),Ie=Object(c.a)(De,2),Ae=Ie[0],Te=Ie[1],Ee=Object(n.useState)(!0),qe=Object(c.a)(Ee,2),Fe=qe[0],Me=qe[1],Re=Object(n.useState)(!0),Be=Object(c.a)(Re,2),He=Be[0],Ge=Be[1],Le=Object(n.useState)([]),Ue=Object(c.a)(Le,2),Qe=Ue[0],Ve=Ue[1],ze=Object(n.useState)(!0),We=Object(c.a)(ze,2),Ye=We[0],Ke=We[1],Je=Object(n.useState)([]),Ze=Object(c.a)(Je,2),Xe=Ze[0],$e=Ze[1],et=Object(n.useState)(!0),tt=Object(c.a)(et,2),at=tt[0],it=tt[1],lt=Object(n.useState)([]),rt=Object(c.a)(lt,2),st=rt[0],dt=rt[1],ut=Object(n.useState)(!0),bt=Object(c.a)(ut,2),pt=bt[0],jt=bt[1],mt=Object(n.useState)([]),vt=Object(c.a)(mt,2),ht=vt[0],gt=vt[1],xt=Object(n.useState)(!0),ft=Object(c.a)(xt,2),yt=ft[0],_t=ft[1],Ct=Object(n.useState)([]),wt=Object(c.a)(Ct,2),St=wt[0],kt=wt[1],Nt=Object(n.useState)(!1),Pt=Object(c.a)(Nt,2),Dt=Pt[0],It=Pt[1],At=Object(n.useState)([]),Tt=Object(c.a)(At,2),Et=Tt[0],qt=Tt[1],Ft=Object(n.useState)([]),Mt=Object(c.a)(Ft,2),Rt=Mt[0],Bt=Mt[1],Ht=Object(n.useState)([]),Gt=Object(c.a)(Ht,2),Lt=Gt[0],Ut=Gt[1],Qt=Object(n.useState)([]),Vt=Object(c.a)(Qt,2),zt=Vt[0],Wt=Vt[1],Zt=Object(n.useState)(!1),Xt=Object(c.a)(Zt,2),$t=Xt[0],ea=Xt[1],ta=Object(n.useState)({open:!1,message:"",severity:""}),aa=Object(c.a)(ta,2),na=aa[0],ia=aa[1];Object(n.useEffect)((function(){var t;ge({type:"samplecode",account_id:null===(t=e.accountId)||void 0===t?void 0:t.toString()}).then((function(e){Bt(ql(e,"sample_code","sample_id")),Ut(e)})),ge({type:"allCategories"}).then((function(t){H(ql(t,"category_name","category_id")),ge({type:"Viewquotelineitem",quotelineitem_id:parseInt(e.id)}).then((function(e){console.log("Response is",e),Q(e.category_id),p({sampleCode:e.sample_code,sampleId:e.sample_id,lineItemNumber:e.quotelineitem_number,customerBrand:e.customerbrand_name,isPalletization:e.palletizationrequire_id,orderQty:e.expectedorder_kgs,additionalRequirements:e.additional_req,coffeeType:e.coffee_type,isreqnew_packing:1===e.isreqnew_packing?"Yes":"No",taskdesc:e.taskdesc,baseprice:e.baseprice}),g({margin:parseFloat(null===e||void 0===e?void 0:e.margin.replace(/\$|,/g,"")),margin_percentage:e.margin_percentage,final_price:e.final_price,negativemargin_status:e.negativemargin_status,negativemargin_reason:null===e||void 0===e?void 0:e.negativemargin_reason,negativemargin_remarks:null===e||void 0===e?void 0:e.negativemargin_remarks}),C(null===e||void 0===e?void 0:e.negativemargin_status),N({customer_approval:null===e||void 0===e?void 0:e.customer_approval,confirmed_orderquantity:null===e||void 0===e?void 0:e.confirmed_orderquantity}),A({gms_approvalstatus:null===e||void 0===e?void 0:e.gms_approvalstatus,gms_rejectionremarks:null===e||void 0===e?void 0:e.gms_rejectionremarks}),Me(!1),Wt(e.audit_log),ge({type:"categoryTypes",category_id:e.category_id}).then((function(t){Pe(ql(t,"categorytype_name","categorytype_id")),t&&(we(!1),Y(e.categorytype_id))})),ge({type:"weights",category_id:e.category_id||0,categorytype_id:e.categorytype_id||0}).then((function(t){qt(ql(t,"weight_name","weight_id")),t&&(Te(!1),X(e.weight_id))})),ge({type:"secondarypackings",category_id:e.category_id,categorytype_id:e.categorytype_id,weight_id:e.weight_id}).then((function(t){Ve(ql(t,"secondary_name","secondary_id")),t&&(Ge(!1),ae(e.secondary_id))})),ge({type:"noofsecondarypacks",category_id:e.category_id||0,categorytype_id:e.categorytype_id||0,weight_id:e.weight_id||0,secondary_id:e.secondary_id||0}).then((function(t){$e(ql(t,"noofsecondary_name","noofsecondary_id")),t&&(Ke(!1),oe(e.noofsecondary_id))})),ge({type:"upcs",category_id:e.category_id,categorytype_id:e.categorytype_id,weight_id:e.weight_id,secondary_id:e.secondary_id}).then((function(t){dt(ql(t,"upc_name","upc_id")),t&&(it(!1),fe(e.upc_id))})),2!==e.category_id&&1!==e.category_id&&4!==e.category_id&&ge({type:"captypes"}).then((function(t){kt(ql(t,"captype_name","captype_id")),t&&(_t(!1),de(e.captype_id))})),2===e.category_id&&!e.weight_id||1===e.category_id||ge({type:"cartontypes"}).then((function(t){gt(ql(t,"cartontype_name","cartontype_id")),t&&(jt(!1),je(e.cartontype_id))}))}))}))}),[]),Object(n.useEffect)((function(){Boolean(parseInt(k.customer_approval))?N(Object(nt.a)(Object(nt.a)({},k),{},{rejectionRemarks:null})):N(Object(nt.a)(Object(nt.a)({},k),{},{confirmed_orderquantity:null}))}),[k.customer_approval]);var la=function(e,t){var a=Object(nt.a)(Object(nt.a)({},b),{},Object(Ot.a)({},t,e.target.value));p(a)},oa=function(e,t){var a,n,i=Object(nt.a)(Object(nt.a)({},h),{},Object(Ot.a)({},t,e.target.value));"margin"===t&&(i.margin_percentage=_.a.isEmpty(null===i||void 0===i?void 0:i.margin)?null:null===(a=parseFloat(null===i||void 0===i?void 0:i.margin)/parseFloat(null===b||void 0===b?void 0:b.baseprice.replace(/\$|,/g,""))*100)||void 0===a?void 0:a.toFixed(2),i.final_price=_.a.isEmpty(null===i||void 0===i?void 0:i.margin)?null:null===(n=parseFloat(null===b||void 0===b?void 0:b.baseprice.replace(/\$|,/g,""))+parseFloat(null===i||void 0===i?void 0:i.margin))||void 0===n?void 0:n.toFixed(2),parseFloat(i[t])>=0&&(i.negativemargin_status=null,i.negativemargin_remarks=null,i.negativemargin_reason=null));g(i)},ra=function(e,t){var a=Object(nt.a)(Object(nt.a)({},k),{},Object(Ot.a)({},t,e.target.value));N(a)},ca=function(e,t){var a=Object(nt.a)(Object(nt.a)({},I),{},Object(Ot.a)({},t,e.target.value));"gms_approvalstatus"===t&&(a.gms_rejectionremarks=null),A(a)},sa=function(e,t){var a=Object(nt.a)(Object(nt.a)({},b),{},{isPalletization:null===t||void 0===t?void 0:t.value});p(a)},da=function(e,t){X(0),Te(!0),ge({type:"weights",category_id:e||0,categorytype_id:t||0}).then((function(e){qt(ql(e,"weight_name","weight_id")),e&&Te(!1)}))},ba=function(e,t,a,n){oe(0),Ke(!0),ge({type:"noofsecondarypacks",category_id:e||0,categorytype_id:t||0,weight_id:a||0,secondary_id:n||0}).then((function(e){$e(ql(e,"noofsecondary_name","noofsecondary_id")),e&&Ke(!1)}))},pa=function(e,t,a,n){fe(0),it(!0),ge({type:"upcs",category_id:e,categorytype_id:t,weight_id:a,secondary_id:n}).then((function(e){dt(ql(e,"upc_name","upc_id")),e&&it(!1)}))},ja=function(e){de(0),_t(!0),2!==e&&1!==e&&4!==e&&5!==e?ge({type:"captypes"}).then((function(e){kt(ql(e,"captype_name","captype_id")),e&&_t(!1)})):kt([])},ma=function(e,t){je(0),jt(!0),2===e&&!t||1===e?gt([]):ge({type:"cartontypes"}).then((function(e){gt(ql(e,"cartontype_name","cartontype_id")),e&&jt(!1)}))},va=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return null===e||void 0===e?void 0:e.filter((function(e){return e.value===t}))[0]},ha=function(){var a=Object(r.a)(d.a.mark((function a(){var n,i,l,o;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i="Please enter valid details",l={},(void 0===(null===b||void 0===b?void 0:b.isPalletization)||_.a.isEmpty(null===b||void 0===b?void 0:b.isPalletization.toString()))&&(void 0!==(null===b||void 0===b?void 0:b.isreqnew_packing)&&"No"!==(null===b||void 0===b?void 0:b.isreqnew_packing)||(l=Object(nt.a)(Object(nt.a)({},l),{},{isPalletization:i}))),U||"No"!==(null===b||void 0===b?void 0:b.isreqnew_packing)||(l=Object(nt.a)(Object(nt.a)({},l),{},{category:i})),_.a.isEmpty(null===b||void 0===b||null===(n=b.orderQty)||void 0===n?void 0:n.toString())&&(l=Object(nt.a)(Object(nt.a)({},l),{},{orderQty:i})),_.a.isEmpty(null===b||void 0===b?void 0:b.sampleId)&&(l=Object(nt.a)(Object(nt.a)({},l),{},{sampleId:i})),_.a.isEmpty(l)){a.next=19;break}throw a.prev=7,F(l),{message:"Please fill all mandatory fields to save"};case 13:a.prev=13,a.t0=a.catch(7),ia({open:!0,severity:"error",message:a.t0.message}),setTimeout((function(){ia({open:!1,message:""})}),2e3);case 17:a.next=34;break;case 19:return o={update:!0,quote_id:e.quoteId,quotelineitem_id:parseInt(e.id),sample_id:null===b||void 0===b?void 0:b.sampleId,category_id:U,categorytype_id:W,weight_id:Z,cartontype_id:pe,captype_id:se,secondary_id:te,noofsecondary_id:le,upc_id:xe,palletizationrequire_id:"No"===(null===b||void 0===b?void 0:b.isreqnew_packing)?null===b||void 0===b?void 0:b.isPalletization:null,customerbrand_name:null===b||void 0===b?void 0:b.customerBrand,additional_req:null===b||void 0===b?void 0:b.additionalRequirements,expectedorder_kgs:parseInt(null===b||void 0===b?void 0:b.orderQty),isreqnew_packing:null!==b&&void 0!==b&&b.isreqnew_packing&&"Yes"===(null===b||void 0===b?void 0:b.isreqnew_packing)?1:0,taskdesc:null===b||void 0===b?void 0:b.taskdesc,modified_date:new Date,modified_by:t.name,modified_byuserid:t.id},It(!0),a.prev=21,a.next=24,he(o);case 24:a.sent&&(ia({open:!0,message:"Quote Item updated successfully"}),setTimeout((function(){e.back()}),2e3)),a.next=31;break;case 28:a.prev=28,a.t1=a.catch(21),ia({open:!0,message:a.t1.message,severity:"error"});case 31:return a.prev=31,It(!1),a.finish(31);case 34:case"end":return a.stop()}}),a,null,[[7,13],[21,28,31,34]])})));return function(){return a.apply(this,arguments)}}(),Oa=function(){var t=Object(r.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Please enter valid details",a={},_.a.isEmpty(null===h||void 0===h?void 0:h.margin.toString())&&(a=Object(nt.a)(Object(nt.a)({},a),{},{margin:"Please enter valid details"})),_.a.isEmpty(a)){t.next=16;break}throw t.prev=4,F(a),{message:"Please fill all mandatory fields to save"};case 10:t.prev=10,t.t0=t.catch(4),ia({open:!0,severity:"error",message:t.t0.message}),setTimeout((function(){ia({open:!1,message:""})}),2e3);case 14:t.next=30;break;case 16:return It(!0),t.prev=17,t.next=20,Oe(Object(nt.a)(Object(nt.a)({type:"marginInfo"},h),{},{lineitem_id:parseInt(e.id)}));case 20:t.sent&&(ia({open:!0,message:"Quote item updated successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=27;break;case 24:t.prev=24,t.t1=t.catch(17),ia({open:!0,message:t.t1.message,severity:"error"});case 27:return t.prev=27,It(!1),t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[4,10],[17,24,27,30]])})));return function(){return t.apply(this,arguments)}}(),ga=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="Please enter valid details",i={},_.a.isEmpty(null===k||void 0===k||null===(a=k.customer_approval)||void 0===a?void 0:a.toString())&&(i=Object(nt.a)(Object(nt.a)({},i),{},{customer_approval:n})),_.a.isEmpty(null===k||void 0===k?void 0:k.confirmed_orderquantity)&&Boolean(parseInt(null===k||void 0===k?void 0:k.customer_approval))&&(i=Object(nt.a)(Object(nt.a)({},i),{},{confirmed_orderquantity:n})),_.a.isEmpty(null===k||void 0===k?void 0:k.rejectionRemarks)&&!Boolean(parseInt(null===k||void 0===k?void 0:k.customer_approval))&&(i=Object(nt.a)(Object(nt.a)({},i),{},{rejectionRemarks:n})),_.a.isEmpty(i)){t.next=18;break}throw t.prev=6,F(i),{message:"Please fill all mandatory fields to save"};case 12:t.prev=12,t.t0=t.catch(6),ia({open:!0,severity:"error",message:t.t0.message}),setTimeout((function(){ia({open:!1,message:""})}),2e3);case 16:t.next=32;break;case 18:return It(!0),t.prev=19,t.next=22,Oe(Object(nt.a)(Object(nt.a)({type:"customerInfo"},k),{},{customer_approval:parseInt(null===k||void 0===k?void 0:k.customer_approval),lineitem_id:parseInt(e.id)}));case 22:t.sent&&(ia({open:!0,message:"Quote item updated successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=29;break;case 26:t.prev=26,t.t1=t.catch(19),ia({open:!0,message:t.t1.message,severity:"error"});case 29:return t.prev=29,It(!1),t.finish(29);case 32:case"end":return t.stop()}}),t,null,[[6,12],[19,26,29,32]])})));return function(){return t.apply(this,arguments)}}(),fa=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Please enter valid details",n={},_.a.isEmpty(null===I||void 0===I||null===(a=I.gms_approvalstatus)||void 0===a?void 0:a.toString())&&(n=Object(nt.a)(Object(nt.a)({},n),{},{gms_approvalstatus:"Please enter valid details"})),_.a.isEmpty(n)){t.next=16;break}throw t.prev=4,F(n),{message:"Please fill all mandatory fields to save"};case 10:t.prev=10,t.t0=t.catch(4),ia({open:!0,severity:"error",message:t.t0.message}),setTimeout((function(){ia({open:!1,message:""})}),2e3);case 14:t.next=30;break;case 16:return It(!0),t.prev=17,t.next=20,Oe(Object(nt.a)(Object(nt.a)({type:"gmcInfo"},I),{},{lineitem_id:parseInt(e.id)}));case 20:t.sent&&(ia({open:!0,message:"Quote item updated successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=27;break;case 24:t.prev=24,t.t1=t.catch(17),ia({open:!0,message:t.t1.message,severity:"error"});case 27:return t.prev=27,It(!1),t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[4,10],[17,24,27,30]])})));return function(){return t.apply(this,arguments)}}(),ya=[{label:"Sample code",type:"autocomplete",labelprop:"label",value:va(Rt,null===b||void 0===b?void 0:b.sampleId)||"",required:!0,error:null===q||void 0===q?void 0:q.sampleId,helperText:null===q||void 0===q?void 0:q.sampleId,options:Rt||[],onChange:function(e,t){var a=Lt.find((function(e){return e.sample_id===(null===t||void 0===t?void 0:t.value)})),n=Object(nt.a)(Object(nt.a)({},b),{},{sampleId:null===t||void 0===t?void 0:t.value,coffeeType:null===a||void 0===a?void 0:a.coffee_tyoe});p(n)},disabled:"New"!==e.status},{label:"Coffee type",type:"input",disabled:"New"!==e.status,value:(null===b||void 0===b?void 0:b.coffeeType)||""},{label:"Customer brand name",type:"input",value:(null===b||void 0===b?void 0:b.customerBrand)||"",onChange:function(e){return la(e,b)},disabled:"New"!==e.status}],_a=[{label:"Packaging category",type:"autocomplete",labelprop:"label",required:!0,error:null===q||void 0===q?void 0:q.category,helperText:null===q||void 0===q?void 0:q.category,value:va(B,U)||"",options:B||[],onChange:function(e,t){Q(null===t||void 0===t?void 0:t.value),Y(0),qt([]),ae(0),oe(0),$e([]),dt([]),Ve([]),gt([]),kt([]),it(!0),Ge(!0),we(!0),Ke(!0),jt(!0),_t(!0),ge({type:"categoryTypes",category_id:null===t||void 0===t?void 0:t.value}).then((function(e){Pe(ql(e,"categorytype_name","categorytype_id")),e&&we(!1)})),da(null===t||void 0===t?void 0:t.value),ba(null===t||void 0===t?void 0:t.value),Me(!1)}},{label:"Packaging type",type:"autocomplete",labelprop:"label",disabled:Ce||"New"!==e.status,value:va(Ne,W)||"",options:Ne||[],onChange:function(e,t){Y(null===t||void 0===t?void 0:t.value),qt([]),ae(0),fe(0),je(0),de(0),oe(0),$e([]),dt([]),Ve([]),gt([]),kt([]),it(!0),Ge(!0),Ke(!0),jt(!0),_t(!0),da(U,null===t||void 0===t?void 0:t.value)}},{label:"Weight",type:"autocomplete",labelprop:"label",disabled:Ae||"New"!==e.status,value:va(Et,Z)||"",options:Et||[],onChange:function(e,t){X(null===t||void 0===t?void 0:t.value),Ge(!0),fe(0),dt([]),it(!0),ge({type:"secondarypackings",category_id:U,categorytype_id:W,weight_id:null===t||void 0===t?void 0:t.value}).then((function(e){Ve(ql(e,"secondary_name","secondary_id")),e&&Ge(!1)})),pa(U,W,null===t||void 0===t?void 0:t.value,te),2===U&&ma(U,null===t||void 0===t?void 0:t.value)}},{label:"Secondary packaging",type:"autocomplete",labelprop:"label",disabled:He||"New"!==e.status,value:va(Qe,te)||"",options:Qe,onChange:function(e,t){ae(null===t||void 0===t?void 0:t.value),de(0),kt([]),_t(!0),ma(U),pa(U,W,Z,null===t||void 0===t?void 0:t.value),ba(U,W,Z,null===t||void 0===t?void 0:t.value)}},{label:"No of secondary packs/master carton",type:"autocomplete",labelprop:"label",disabled:Ye||"New"!==e.status,value:va(Xe,le)||"",options:Xe||[],onChange:function(e,t){oe(null===t||void 0===t?void 0:t.value),ma(U),ja(U)}},{label:"UPC",type:"autocomplete",labelprop:"label",disabled:at||"New"!==e.status,value:va(st,xe)||"",options:st,onChange:function(e,t){fe(null===t||void 0===t?void 0:t.value),de(0),kt([]),_t(!0),ma(U,Z)}},{label:"Carton type",type:"autocomplete",labelprop:"label",disabled:pt||"New"!==e.status,value:va(ht,pe)||"",options:ht||[],onChange:function(e,t){je(null===t||void 0===t?void 0:t.value),ja(U)}},{label:"Cap type",type:"autocomplete",labelprop:"label",disabled:yt||"New"!==e.status,value:va(St,se)||"",options:St||[],onChange:function(e,t){de(null===t||void 0===t?void 0:t.value)}},{label:"Yes"===(null===b||void 0===b?void 0:b.isreqnew_packing)?"Is palletization required?":"Is palletization required?*",type:"autocomplete",labelprop:"label",disabled:Fe||"New"!==e.status,required:!0,error:null===q||void 0===q?void 0:q.isPalletization,helperText:null===q||void 0===q?void 0:q.isPalletization,value:va([{label:"Yes",value:!0},{label:"No",value:!1}],null===b||void 0===b?void 0:b.isPalletization)||0,options:[{label:"Yes",value:!0},{label:"No",value:!1}],onChange:sa},{label:"Additional requirements",type:"input",value:(null===b||void 0===b?void 0:b.additionalRequirements)||"",multiline:!0,onChange:function(e){return la(e,"additionalRequirements")},disabled:"New"!==e.status}],Ca=[{label:"Packaging category",type:"input",required:!0,value:U,onChange:function(e){return Q(e.target.value)}},{label:"Packaging type",type:"input",value:W,onChange:function(e){return Y(e.target.value)}},{label:"Weight",type:"input",value:Z,onChange:function(e){return X(e.target.value)}},{label:"Secondary packaging",type:"input",value:te,onChange:function(e){return ae(e.target.value)}},{label:"No of secondary packs/master carton",type:"input",value:le,onChange:function(e){return oe(e.target.value)}},{label:"UPC",type:"input",value:xe,onChange:function(e){return fe(e.target.value)}},{label:"Carton type",type:"input",value:pe,onChange:function(e){return je(e.target.value)}},{label:"Cap type",type:"input",value:se,onChange:function(e){return de(e.target.value)}},{label:"Yes"===(null===b||void 0===b?void 0:b.isreqnew_packing)?"Is palletization required?":"Is palletization required?*",type:"input",labelprop:"label",disabled:Fe||"New"!==e.status,required:!0,error:null===q||void 0===q?void 0:q.isPalletization,helperText:null===q||void 0===q?void 0:q.isPalletization,value:va([{label:"Yes",value:!0},{label:"No",value:!1}],null===b||void 0===b?void 0:b.isPalletization)||0,options:[{label:"Yes",value:!0},{label:"No",value:!1}],onChange:sa},{label:"Additional requirements",type:"input",value:(null===b||void 0===b?void 0:b.additionalRequirements)||"",multiline:!0,onChange:function(e){return la(e,"additionalRequirements")},disabled:"New"!==e.status}],wa=[{label:"Expected order Qty(Kg)",type:"input",required:!0,error:null===q||void 0===q?void 0:q.orderQty,helperText:null===q||void 0===q?void 0:q.orderQty,value:(null===b||void 0===b?void 0:b.orderQty)||"",onChange:function(e){return la(e,"orderQty")},disabled:"New"!==e.status}],Sa=[{label:"Base price(per Kg)(GBP)",type:"input",multiline:!0,rows:3,value:(null===b||void 0===b?void 0:b.baseprice)||"",onChange:function(e){return la(e,"baseprice")},disabled:!0}],ka=[{label:"Margin value(GBP)",type:"number",value:(null===h||void 0===h?void 0:h.margin)||"",required:"Base Price Received"===e.status,disabled:!("Base Price Received"===e.status&&(a!==Kt.managingDirector||a!==Kt.marketingExecutive)&&"Pending"!==y),error:!(null===q||void 0===q||!q.margin),helperText:null===q||void 0===q?void 0:q.margin,onChange:function(e){return oa(e,"margin")}},{label:"Negative margin status",type:"select",required:"Quote Submitted"===e.status,disabled:"Base Price Received"!==e.status||a!==Kt.gmc&&a!==Kt.managingDirector||"Pending"!==y||parseFloat(null===h||void 0===h?void 0:h.margin)>=0,error:!(null===q||void 0===q||!q.negativemargin_status),helperText:null===q||void 0===q?void 0:q.negativemargin_status,options:[{label:"Approved",value:"Approved"},{label:"Pending",value:"Pending"},{label:"Rejected",value:"Rejected"}],value:(null===h||void 0===h?void 0:h.negativemargin_status)||"",onChange:function(e){return oa(e,"negativemargin_status")}},{label:"Margin(%)",type:"input",value:(null===h||void 0===h?void 0:h.margin_percentage)||"",disabled:!0},{label:"Negative margin remarks",type:"input",multiline:!0,rows:6,value:(null===h||void 0===h?void 0:h.negativemargin_remarks)||"",disabled:"Base Price Received"!==e.status||a!==Kt.gmc&&a!==Kt.managingDirector||"Pending"!==y||parseFloat(null===h||void 0===h?void 0:h.margin)>=0,onChange:function(e){return oa(e,"negativemargin_remarks")}},{label:"Final price (Per KG) (GBP)",type:"input",value:(null===h||void 0===h?void 0:h.final_price)||"",disabled:!0},{label:"Negative margin reason",type:"input",multiline:!0,rows:3,value:(null===h||void 0===h?void 0:h.negativemargin_reason)||"",disabled:"Base Price Received"!==e.status||a!==Kt.gmc&&a!==Kt.managingDirector||"Pending"!==y||parseFloat(null===h||void 0===h?void 0:h.margin)>=0,onChange:function(e){return oa(e,"negativemargin_reason")}}],Na=[{label:"Customer approval status",type:"select",required:"Quote Submitted"===e.status,disabled:!("Quote Submitted"===e.status&&(a!==Kt.managingDirector||a!==Kt.marketingExecutive)),error:!(null===q||void 0===q||!q.customer_approval),helperText:null===q||void 0===q?void 0:q.customer_approval,options:[{label:"Approved",value:"1"},{label:"Rejected",value:"0"}],value:(null===k||void 0===k?void 0:k.customer_approval)||"",onChange:function(e){return ra(e,"customer_approval")}},{label:"Customer rejection remarks",type:"input",required:"Quote Submitted"===e.status&&!Boolean(parseInt(null===k||void 0===k?void 0:k.customer_approval)),disabled:!("Quote Submitted"===e.status&&(a!==Kt.managingDirector||a!==Kt.marketingExecutive))||Boolean(parseInt(null===k||void 0===k?void 0:k.customer_approval)),multiline:!0,error:!(null===q||void 0===q||!q.rejectionRemarks),helperText:null===q||void 0===q?void 0:q.rejectionRemarks,rows:4,value:(null===k||void 0===k?void 0:k.rejectionRemarks)||"",onChange:function(e){return ra(e,"rejectionRemarks")}},{label:"Confirmed order quantity(Kgs)",type:"number",error:!(null===q||void 0===q||!q.confirmed_orderquantity),helperText:null===q||void 0===q?void 0:q.confirmed_orderquantity,disabled:!("Quote Submitted"===e.status&&(a!==Kt.managingDirector||a!==Kt.marketingExecutive))||!Boolean(parseInt(null===k||void 0===k?void 0:k.customer_approval)),required:"Quote Submitted"===e.status&&Boolean(parseInt(null===k||void 0===k?void 0:k.customer_approval)),value:(null===k||void 0===k?void 0:k.confirmed_orderquantity)||"",onChange:function(e){return ra(e,"confirmed_orderquantity")}}],Pa=[{label:"GMC approval status",type:"select",disabled:!("Bid Submitted to GMC"===e.status&&(a!==Kt.managingDirector||a!==Kt.gmc)),options:[{label:"Approved",value:"Approved"},{label:"Rejected",value:"Rejected"}],value:(null===I||void 0===I?void 0:I.gms_approvalstatus)||"",required:"Bid Submitted to GMC"===e.status,error:!(null===q||void 0===q||!q.gms_approvalstatus),helperText:null===q||void 0===q?void 0:q.gms_approvalstatus,onChange:function(e){return ca(e,"gms_approvalstatus")}},{label:"GMC rejection remarks",type:"input",disabled:!("Bid Submitted to GMC"===e.status&&(a!==Kt.managingDirector||a!==Kt.gmc)&&"Rejected"===(null===I||void 0===I?void 0:I.gms_approvalstatus)),multiline:!0,rows:4,value:(null===I||void 0===I?void 0:I.gms_rejectionremarks)||"",onChange:function(e){return ca(e,"gms_rejectionremarks")}}],Da=[{label:"General remarks",type:"input",multiline:!0,rows:3,value:(null===I||void 0===I?void 0:I.generalRemarks)||"",onChange:function(e){return la(e,"generalRemarks")}}],Ia=function(){var t=Object(r.a)(d.a.mark((function t(){var n,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={},parseInt(null===h||void 0===h?void 0:h.margin)>0&&(n=Object(nt.a)(Object(nt.a)({},n),{},{margin:"Margin cannot be positive"})),Number.isNaN(null===h||void 0===h?void 0:h.margin)&&(n=Object(nt.a)(Object(nt.a)({},n),{},{margin:"Margin is invalid"})),_.a.isEmpty(n)){t.next=16;break}throw t.prev=4,F(n),{message:"Please fill all mandatory fields to save"};case 10:t.prev=10,t.t0=t.catch(4),ia({open:!0,severity:"error",message:t.t0.message}),setTimeout((function(){ia({open:!1,message:""})}),2e3);case 14:t.next=31;break;case 16:return It(!0),t.prev=17,i={type:"negativemarginrequest",role:a,loginuserid:l,margin:null===h||void 0===h?void 0:h.margin,margin_percentage:null===h||void 0===h?void 0:h.margin_percentage,negativemargin_status:"Pending",lineitem_id:parseInt(e.id),final_price:null===h||void 0===h?void 0:h.final_price},t.next=21,Oe(i);case 21:t.sent&&(ia({open:!0,message:"Quote item updated successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=28;break;case 25:t.prev=25,t.t1=t.catch(17),ia({open:!0,message:t.t1.message,severity:"error"});case 28:return t.prev=28,It(!1),t.finish(28);case 31:case"end":return t.stop()}}),t,null,[[4,10],[17,25,28,31]])})));return function(){return t.apply(this,arguments)}}(),Aa=function(){var t=Object(r.a)(d.a.mark((function t(){var n,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={},"Pending"===(null===h||void 0===h?void 0:h.negativemargin_status)&&(n=Object(nt.a)(Object(nt.a)({},n),{},{negativemargin_status:"Margin status cannot be pending"})),console.log("Error obj is",n),_.a.isEmpty(n)){t.next=16;break}throw t.prev=4,F(n),{message:"Please fill all mandatory fields to save"};case 10:t.prev=10,t.t0=t.catch(4),ia({open:!0,severity:"error",message:t.t0.message}),setTimeout((function(){ia({open:!1,message:""})}),2e3);case 14:t.next=31;break;case 16:return It(!0),t.prev=17,i={type:"negativemarginapproval",role:a,loginuserid:l,negativemargin_remarks:null===h||void 0===h?void 0:h.negativemargin_remarks,negativemargin_reason:null===h||void 0===h?void 0:h.negativemargin_reason,negativemargin_status:null===h||void 0===h?void 0:h.negativemargin_status,lineitem_id:parseInt(e.id)},t.next=21,Oe(i);case 21:t.sent&&(ia({open:!0,message:"Quote item updated successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=28;break;case 25:t.prev=25,t.t1=t.catch(17),ia({open:!0,message:t.t1.message,severity:"error"});case 28:return t.prev=28,It(!1),t.finish(28);case 31:case"end":return t.stop()}}),t,null,[[4,10],[17,25,28,31]])})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){$t?(Q(""),Y(""),X(""),ae(""),fe(""),je(""),de(""),oe("")):(Q(null),Y(null),X(null),ae(0),fe(0),je(0),de(0),oe(0))}),[$t]);return Object(ot.jsxs)("form",{className:o.root,noValidate:!0,autoComplete:"off",children:[na.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},na),{},{handleClose:function(){return ia({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(ua.a,{className:"page-header",children:[Object(ot.jsx)(an.a,{title:" Quotation item details",className:"cardHeader"}),Object(ot.jsx)(xa.a,{children:Object(ot.jsxs)(m.a,{container:!0,md:6,children:[Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Quote number"}),Object(ot.jsx)(O.a,{children:e.quoteId})]}),Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Quote item id"}),Object(ot.jsx)(O.a,{children:null===b||void 0===b?void 0:b.lineItemNumber})]}),Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Sample code"}),Object(ot.jsx)(O.a,{children:null===b||void 0===b?void 0:b.sampleCode})]})]})})]}),Object(ot.jsx)(ua.a,{className:"page-header",children:Object(ot.jsx)(xa.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,children:Object(ot.jsx)(dl,{activeStep:"Rejected"===(null===I||void 0===I?void 0:I.gms_approvalstatus)?4:"Approved"===(null===I||void 0===I?void 0:I.gms_approvalstatus)?3:"0"===(null===k||void 0===k?void 0:k.customer_approval)?2:"1"===(null===k||void 0===k?void 0:k.customer_approval)?1:0,steps:["Customer Approved","Customer Rejected","GMC Approved","GMC Rejected"],stepClick:function(e){console.log("e::",e)}})})})})}),Object(ot.jsx)(m.a,{container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Sample information"})})}),Object(ot.jsx)(tn,{payload:ya}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsxs)(m.a,{container:!0,md:12,xs:12,className:"item",alignItems:"center",justifyContent:"space-between",children:[Object(ot.jsx)(O.a,{children:"Packaging details"}),Object(ot.jsxs)(m.a,{container:!0,md:6,xs:6,alignItems:"center",justifyContent:"flex-end",children:[Object(ot.jsx)(O.a,{children:"Request New Packing Type"}),Object(ot.jsx)(Tl.a,{checked:$t,color:"secondary",onChange:function(){return ea((function(e){return!e}))}})]})]})}),Object(ot.jsx)(tn,{payload:$t?Ca:_a}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Expected order quantity details"})})}),Object(ot.jsx)(tn,{payload:wa}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Prices from ERP"})})}),Object(ot.jsx)(tn,{payload:Sa}),Object(ot.jsxs)(i.a.Fragment,{children:[Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Margin information"})})}),Object(ot.jsx)(tn,{payload:ka})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsxs)(m.a,{item:!0,md:6,xs:12,children:[Object(ot.jsx)(Yt,{label:Dt?"Loading...":"Request For Approval",disabled:Dt||_.a.isEmpty(null===h||void 0===h?void 0:h.margin)||parseFloat(null===h||void 0===h?void 0:h.margin)>=0||"Pending"===y||a!==Kt.managingDirector&&a!==Kt.marketingExecutive,onClick:Ia}),Object(ot.jsx)(Yt,{label:Dt?"Loading...":"Save",onClick:Aa,disabled:Dt||a!==Kt.managingDirector&&a!==Kt.gmc||"Pending"!==y})]})}),Object(ot.jsxs)(i.a.Fragment,{children:[Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Customer approval & confirmed order quantity"})})}),Object(ot.jsx)(tn,{payload:Na})]}),Object(ot.jsxs)(i.a.Fragment,{children:[Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"GMC approval"})})}),Object(ot.jsx)(tn,{payload:Pa})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"General remarks"})})}),Object(ot.jsx)(tn,{payload:Da}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})}),Object(ot.jsx)(Il,{data:zt}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:function(){switch(e.status){case"New":return Object(ot.jsx)(Yt,{disabled:Dt,label:Dt?"Loading...":"Save",onClick:ha});case"Base Price Received":return Object(ot.jsx)(Yt,{disabled:Dt,label:Dt?"Loading...":"Save",onClick:Oa});case"Quote Submitted":return Object(ot.jsx)(Yt,{disabled:Dt,label:Dt?"Loading...":"Save",onClick:ga});case"Bid Submitted to GMC":return Object(ot.jsx)(Yt,{disabled:Dt,label:Dt?"Loading...":"Save",onClick:fa});default:return null}}()}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})})]})]})},Ml=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"}}})),Rl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return null===e||void 0===e||e.map((function(e){return n.push({label:e[t],value:e[a]||e[t]})})),n},Bl=function(e){var t=Ml(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)({}),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)([]),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)(null),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)(0),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)(0),D=Object(c.a)(P,2),I=D[0],A=D[1],T=Object(n.useState)(0),E=Object(c.a)(T,2),q=E[0],F=E[1],M=Object(n.useState)(0),R=Object(c.a)(M,2),B=R[0],H=R[1],G=Object(n.useState)(0),L=Object(c.a)(G,2),U=L[0],Q=L[1],V=Object(n.useState)(0),z=Object(c.a)(V,2),W=z[0],Y=z[1],K=Object(n.useState)(0),J=Object(c.a)(K,2),Z=J[0],X=J[1],$=Object(n.useState)(!0),ee=Object(c.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)([]),ie=Object(c.a)(ne,2),le=ie[0],oe=ie[1],re=Object(n.useState)(!0),ce=Object(c.a)(re,2),se=ce[0],de=ce[1],ue=Object(n.useState)(!0),be=Object(c.a)(ue,2),pe=be[0],je=be[1],me=Object(n.useState)(!0),ve=Object(c.a)(me,2),Oe=ve[0],xe=ve[1],fe=Object(n.useState)([]),ye=Object(c.a)(fe,2),_e=ye[0],Ce=ye[1],we=Object(n.useState)(!0),Se=Object(c.a)(we,2),ke=Se[0],Ne=Se[1],Pe=Object(n.useState)([]),De=Object(c.a)(Pe,2),Ie=De[0],Ae=De[1],Te=Object(n.useState)(!0),Ee=Object(c.a)(Te,2),qe=Ee[0],Fe=Ee[1],Me=Object(n.useState)([]),Re=Object(c.a)(Me,2),Be=Re[0],He=Re[1],Ge=Object(n.useState)(!0),Le=Object(c.a)(Ge,2),Ue=Le[0],Qe=Le[1],Ve=Object(n.useState)([]),ze=Object(c.a)(Ve,2),We=ze[0],Ye=ze[1],Ke=Object(n.useState)(!0),Je=Object(c.a)(Ke,2),Ze=Je[0],Xe=Je[1],$e=Object(n.useState)([]),et=Object(c.a)($e,2),tt=et[0],at=et[1],it=Object(n.useState)(!1),lt=Object(c.a)(it,2),rt=lt[0],st=lt[1],dt=Object(n.useState)(!1),ut=Object(c.a)(dt,2),bt=ut[0],pt=ut[1],jt=Object(n.useState)([]),mt=Object(c.a)(jt,2),vt=mt[0],ht=mt[1],gt=Object(n.useState)([]),xt=Object(c.a)(gt,2),ft=xt[0],yt=xt[1],_t=Object(n.useState)([]),Ct=Object(c.a)(_t,2),wt=Ct[0],St=Ct[1],kt=Object(n.useState)({open:!1,message:"",severity:""}),Nt=Object(c.a)(kt,2),Pt=Nt[0],Dt=Nt[1],It=(0,Jt().getCurrentUserDetails)();Object(n.useEffect)((function(){var t;ge({type:"allCategories"}).then((function(e){return g(Rl(e,"category_name","category_id"))})),ge({type:"samplecode",account_id:null===(t=e.accountId)||void 0===t?void 0:t.toString()}).then((function(e){yt(Rl(e,"sample_code","sample_id")),St(e)}))}),[]);var At=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.value));o(a),console.log(a)},Tt=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},{isPalletization:null===t||void 0===t?void 0:t.value});o(a)},Et=function(e,t){A(0),de(!0),ge({type:"weights",category_id:e||0,categorytype_id:t||0}).then((function(e){ht(Rl(e,"weight_name","weight_id")),e&&de(!1)}))},qt=function(e,t,a,n){H(0),Ne(!0),ge({type:"noofsecondarypacks",category_id:e||0,categorytype_id:t||0,weight_id:a||0,secondary_id:n||0}).then((function(e){Ae(Rl(e,"noofsecondary_name","noofsecondary_id")),e&&Ne(!1)}))},Ft=function(e,t,a,n){X(0),Fe(!0),ge({type:"upcs",category_id:e,categorytype_id:t,weight_id:a,secondary_id:n}).then((function(e){He(Rl(e,"upc_name","upc_id")),e&&Fe(!1)}))},Mt=function(e){Q(0),Xe(!0),2!==e&&1!==e&&4!==e&&5!==e?ge({type:"captypes"}).then((function(e){at(Rl(e,"captype_name","captype_id")),e&&Xe(!1)})):at([])},Rt=function(e,t){Y(0),Qe(!0),2===e&&!t||1===e?Ye([]):ge({type:"cartontypes"}).then((function(e){Ye(Rl(e,"cartontype_name","cartontype_id")),e&&Qe(!1)}))},Bt=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a="Please enter valid details",n={},_.a.isEmpty(null===l||void 0===l?void 0:l.sampleId)&&(n=Object(nt.a)(Object(nt.a)({},n),{},{sampleId:a})),(_.a.isEmpty(null===y||void 0===y?void 0:y.toString())||void 0===y)&&(n=Object(nt.a)(Object(nt.a)({},n),{},{category:a})),(void 0===l.isPalletization||_.a.isEmpty(l.isPalletization.toString()))&&(void 0!==l.isreqnew_packing&&"No"!==l.isreqnew_packing||(n=Object(nt.a)(Object(nt.a)({},n),{},{isPalletization:a}))),y||"No"!==l.isreqnew_packing||(n=Object(nt.a)(Object(nt.a)({},n),{},{category:a})),_.a.isEmpty(l.orderQty)&&(n=Object(nt.a)(Object(nt.a)({},n),{},{orderQty:a})),_.a.isEmpty(n)){t.next=20;break}throw t.prev=8,p(n),{message:"Please fill all mandatory fields to save"};case 14:t.prev=14,t.t0=t.catch(8),Dt({open:!0,severity:"error",message:t.t0.message}),setTimeout((function(){Dt({open:!1,message:""})}),2e3);case 18:t.next=36;break;case 20:return i={update:!1,quote_id:e.quoteId,sample_id:l.sampleId,category_id:y,categorytype_id:k,weight_id:I,cartontype_id:W,captype_id:U,secondary_id:q,noofsecondary_id:B,upc_id:Z,palletizationrequire_id:"No"===l.isreqnew_packing?l.isPalletization:null,customerbrand_name:l.customerBrand,additional_req:l.additionalRequirements,expectedorder_kgs:parseInt(l.orderQty),isreqnew_packing:l.isreqnew_packing&&"Yes"===l.isreqnew_packing?1:0,taskdesc:l.taskdesc,created_date:new Date,created_by:It.name,created_byuserid:It.id},console.log("Data is",i),st(!0),t.prev=23,t.next=26,he(i);case 26:t.sent&&(Dt({open:!0,message:"Quote Item created successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=33;break;case 30:t.prev=30,t.t1=t.catch(23),Dt({open:!0,message:t.t1.message,severity:"error"});case 33:return t.prev=33,st(!1),t.finish(33);case 36:case"end":return t.stop()}}),t,null,[[8,14],[23,30,33,36]])})));return function(){return t.apply(this,arguments)}}(),Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return null===e||void 0===e?void 0:e.filter((function(e){return e.value===t}))[0]},Gt=[{label:"Sample code",type:"autocomplete",labelprop:"label",value:Ht(ft,l.sampleId)||"",required:!0,error:null===b||void 0===b?void 0:b.sampleId,helperText:null===b||void 0===b?void 0:b.sampleId,options:ft||[],onChange:function(e,t){var a=wt?wt.find((function(e){return e.sample_code===(null===t||void 0===t?void 0:t.label)})):null,n=Object(nt.a)(Object(nt.a)({},l),{},{sampleId:null===t||void 0===t?void 0:t.value,coffeeType:null===a||void 0===a?void 0:a.coffee_tyoe});o(n)}},{label:"Coffee type",type:"input",disabled:!0,value:l.coffeeType||""},{label:"Customer brand name",type:"input",value:l.customerBrand||"",onChange:function(e){return At(e,"customerBrand")}}],Lt=[{label:"Packaging category",type:"autocomplete",labelprop:"label",required:!0,error:null===b||void 0===b?void 0:b.category,helperText:null===b||void 0===b?void 0:b.category,value:Ht(h,y)||"",options:h||[],onChange:function(e,t){C(null===t||void 0===t?void 0:t.value),N(0),ht([]),F(0),H(0),Ae([]),He([]),Ce([]),Ye([]),at([]),Fe(!0),xe(!0),ae(!0),Ne(!0),Qe(!0),Xe(!0),ge({type:"categoryTypes",category_id:null===t||void 0===t?void 0:t.value}).then((function(e){oe(Rl(e,"categorytype_name","categorytype_id")),e&&ae(!1)})),Et(null===t||void 0===t?void 0:t.value),qt(null===t||void 0===t?void 0:t.value),je(!1)}},{label:"Packaging type",type:"autocomplete",labelprop:"label",disabled:te,value:Ht(le,k)||"",options:le||[],onChange:function(e,t){N(null===t||void 0===t?void 0:t.value),ht([]),F(0),X(0),Y(0),Q(0),H(0),Ae([]),He([]),Ce([]),Ye([]),at([]),Fe(!0),xe(!0),Ne(!0),Qe(!0),Xe(!0),Et(y,null===t||void 0===t?void 0:t.value)}},{label:"Weight",type:"autocomplete",labelprop:"label",disabled:se,value:Ht(vt,I)||"",options:vt||[],onChange:function(e,t){A(null===t||void 0===t?void 0:t.value),xe(!0),X(0),He([]),Fe(!0),ge({type:"secondarypackings",category_id:y,categorytype_id:k,weight_id:null===t||void 0===t?void 0:t.value}).then((function(e){Ce(Rl(e,"secondary_name","secondary_id")),e&&xe(!1)})),Ft(y,k,null===t||void 0===t?void 0:t.value,q),2===y&&Rt(y,null===t||void 0===t?void 0:t.value)}},{label:"Secondary packaging",type:"autocomplete",labelprop:"label",disabled:Oe,value:Ht(_e,q)||"",options:_e,onChange:function(e,t){F(null===t||void 0===t?void 0:t.value),Q(0),at([]),Xe(!0),Rt(y),Ft(y,k,I,null===t||void 0===t?void 0:t.value),qt(y,k,I,null===t||void 0===t?void 0:t.value)}},{label:"No of secondary packs/master carton",type:"autocomplete",labelprop:"label",disabled:ke,value:Ht(Ie,B)||"",options:Ie||[],onChange:function(e,t){H(null===t||void 0===t?void 0:t.value),Rt(y),Mt(y)}},{label:"UPC",type:"autocomplete",labelprop:"label",disabled:qe,value:Ht(Be,Z)||"",options:Be,onChange:function(e,t){X(null===t||void 0===t?void 0:t.value),Q(0),at([]),Xe(!0),Rt(y,I)}},{label:"Carton type",type:"autocomplete",labelprop:"label",disabled:Ue,value:Ht(We,W)||"",options:We||[],onChange:function(e,t){Y(null===t||void 0===t?void 0:t.value),Mt(y)}},{label:"Cap type",type:"autocomplete",labelprop:"label",disabled:Ze,value:Ht(tt,U)||"",options:tt||[],onChange:function(e,t){Q(null===t||void 0===t?void 0:t.value)}},{label:(l.isreqnew_packing,"Is palletization required?"),type:"autocomplete",labelprop:"label",disabled:pe,required:!0,error:null===b||void 0===b?void 0:b.isPalletization,helperText:null===b||void 0===b?void 0:b.isPalletization,value:Ht([{label:"Yes",value:!0},{label:"No",value:!1}],l.isPalletization),options:[{label:"Yes",value:!0},{label:"No",value:!1}],onChange:Tt},{label:"Additional requirements",type:"input",value:l.additionalRequirements||"",multiline:!0,onChange:function(e){return At(e,"additionalRequirements")}}],Ut=[{label:"Expected order Qty(Kg)",type:"input",required:!0,error:null===b||void 0===b?void 0:b.orderQty,helperText:null===b||void 0===b?void 0:b.orderQty,value:l.orderQty||"",onChange:function(e){return At(e,"orderQty")}}],Qt=[{label:"Packaging category",type:"input",required:!0,error:null===b||void 0===b?void 0:b.category,helperText:null===b||void 0===b?void 0:b.category,value:y,onChange:function(e){return C(e.target.value)}},{label:"Packaging type",type:"input",labelprop:"label",value:k||"",onChange:function(e){return N(e.target.value)}},{label:"Weight",type:"input",labelprop:"label",value:I||"",onChange:function(e){return A(e.target.value)}},{label:"Secondary packaging",type:"input",labelprop:"label",value:q||"",onChange:function(e){return F(e.target.value)}},{label:"No of secondary packs/master carton",type:"input",labelprop:"label",value:B||"",onChange:function(e){return H(e.target.value)}},{label:"UPC",type:"input",value:Z||"",options:Be,onChange:function(e){return X(e.target.value)}},{label:"Carton type",type:"input",value:W||"",options:We||[],onChange:function(e){return Y(e.target.value)}},{label:"Cap type",type:"input",value:U||"",onChange:function(e){return Q(e.target.value)}},{label:(l.isreqnew_packing,"Is palletization required?"),type:"autocomplete",labelprop:"label",disabled:pe,required:!0,error:null===b||void 0===b?void 0:b.isPalletization,helperText:null===b||void 0===b?void 0:b.isPalletization,value:Ht([{label:"Yes",value:!0},{label:"No",value:!1}],l.isPalletization),options:[{label:"Yes",value:!0},{label:"No",value:!1}],onChange:Tt},{label:"Additional requirements",type:"input",value:l.additionalRequirements||"",multiline:!0,onChange:function(e){return At(e,"additionalRequirements")}}];return Object(n.useEffect)((function(){bt?(C(""),N(""),A(""),F(""),X(""),Y(""),Q(""),H("")):(C(null),N(null),A(null),F(0),X(0),Y(0),Q(0),H(0))}),[bt]),Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[Pt.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},Pt),{},{handleClose:function(){return Dt({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Sample information"})})}),Object(ot.jsx)(tn,{payload:Gt}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsxs)(m.a,{container:!0,md:12,xs:12,className:"item",alignItems:"center",justifyContent:"space-between",children:[Object(ot.jsx)(O.a,{children:"Packaging details"}),Object(ot.jsxs)(m.a,{container:!0,md:6,xs:6,alignItems:"center",justifyContent:"flex-end",children:[Object(ot.jsx)(O.a,{children:"Request New Packing Type"}),Object(ot.jsx)(Tl.a,{checked:bt,color:"secondary",onChange:function(){return pt((function(e){return!e}))}})]})]})}),Object(ot.jsx)(tn,{payload:bt?Qt:Lt}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Expected order quantity details"})})}),Object(ot.jsx)(tn,{payload:Ut}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:rt,label:rt?"Loading...":"Save",onClick:Bt})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})})]})]})},Hl=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .page-header":{width:"100%",marginBottom:15},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"},card:{boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)",marginBottom:5},modal:{position:"absolute",margin:"auto",top:"30%",left:"30%",width:700,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),Gl=function(e){var t=Hl(),a=Object(n.useState)({}),l=Object(c.a)(a,2),o=l[0],s=l[1],u=Object(n.useState)([]),b=Object(c.a)(u,2),p=b[0],j=b[1],v=Object(n.useState)(!1),h=Object(c.a)(v,2),g=h[0],f=(h[1],Object(n.useState)(!1)),y=Object(c.a)(f,2),C=y[0],w=y[1],S=Object(n.useState)(!1),k=Object(c.a)(S,2),N=k[0],P=k[1],D=Object(n.useState)(!1),I=Object(c.a)(D,2),A=I[0],E=I[1],M=Object(n.useState)(-1),R=Object(c.a)(M,2),B=R[0],H=R[1],G=Object(n.useState)(!1),L=Object(c.a)(G,2),U=L[0],Q=L[1],V=Object(n.useState)([]),z=Object(c.a)(V,2),W=z[0],Y=z[1],K=Object(n.useRef)(null),J=Object(n.useState)({open:!1,message:"",severity:""}),Z=Object(c.a)(J,2),X=Z[0],$=Z[1],ee=["New","Pricing","Expired","Customer Review","Approved","Rejected"],te=(0,Jt().getCurrentUserDetails)(),ae=te.id,ne=te.role,ie=function(){var t,a;console.log("Into this",e.id),de({type:"viewquote",quote_number:null===(t=e.id)||void 0===t?void 0:t.toString()}).then((function(e){Y(e.audit_log),s(e)})),(a={quote_id:e.id},q.post("".concat(T.apiUrl).concat(F.getQuoteItems),a).then((function(e){return e}))).then((function(e){j(null!==e&&void 0!==e?e:[])}))};Object(n.useEffect)((function(){A||ie()}),[A]);var le,oe=function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},re=[{type:"label",value:"Quote Number",bold:!0,sm:"6"},{type:"label",value:o.quote_autogennumber,sm:"6"},{type:"label",value:"Account Name",bold:!0,sm:"6"},{type:"label",value:o.accountname,sm:"6"},{type:"label",value:"Account Type",bold:!0,sm:"6"},{type:"label",value:o.accounttypename,sm:"6"},{type:"label",value:"Billing Address",bold:!0,sm:"6"},{type:"label",value:o.billing_address,sm:"6"},{type:"label",value:"Quote Status",bold:!0,sm:"6"},{type:"label",value:o.status,sm:"6"},{type:"label",value:"Payment Terms",bold:!0,sm:"6"},{type:"label",value:o.payment_terms,sm:"6"},{type:"label",value:"Final Client",bold:!0,sm:"6"},{type:"label",value:o.finalclientaccountname,sm:"6"},{type:"label",value:"Remarks from GMC",bold:!0,sm:"6"},{type:"label",value:o.remarks_gmc,sm:"6"}],ce=[{type:"label",value:"Contact Name",bold:!0,sm:"6"},{type:"label",value:o.contactname,sm:"6"},{type:"label",value:"Quote Creation Date",bold:!0,sm:"6"},{type:"label",value:oe(o.createddate),sm:"6"},{type:"label",value:"Incoterms",bold:!0,sm:"6"},{type:"label",value:o.incoterms,sm:"6"},{type:"label",value:"Remarks from Marketing",bold:!0,sm:"6"},{type:"label",value:o.remarks_marketing,sm:"6"},{type:"label",value:"Customer Currency",bold:!0,sm:"6"},{type:"label",value:o.currencyname,sm:"6"},{type:"label",value:"Pending With",bold:!0,sm:"6"},{type:"label",value:o.pending_withuser,sm:"6"}],se=[{type:"label",value:"Port Loading",bold:!0,sm:"6"},{type:"label",value:o.port_loading,sm:"6"},{type:"label",value:"Dipatch Time Period",bold:!0,sm:"6"},{type:"label",value:"From "+oe(o.fromdate)+" To "+oe(o.todate),sm:"6"},{type:"label",value:"Others (Specification)",bold:!0,sm:"6"},{type:"label",value:o.other_specification,sm:"6"}],ue=[{type:"label",value:"Destination Country",bold:!0,sm:"6"},{type:"label",value:null===o||void 0===o?void 0:o.destination_country,sm:"6"},{type:"label",value:"Destination Port",bold:!0,sm:"6"},{type:"label",value:o.destination_port,sm:"6"}],be=function(){w(!0)},pe=function(e,t){P(!0),H(t)},je=function(){Q(!U),e.back()},me=function(){var t=Object(r.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i={type:a,quote_id:null===e||void 0===e?void 0:e.id.toString(),updated_by:ae},q.post("".concat(T.apiUrl).concat(F.updateQuoteStatus),i).then((function(e){return e}));case 3:n=t.sent,console.log("Response",n),n&&(Q(!U),setTimeout((function(){je()}),2e3)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),$({open:!0,message:t.t0.message,severity:"error"});case 11:case"end":return t.stop()}var i}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),ve=[{"Quote Approved by GMC":"Pricing"},{New:"New"},{"Quote Expired":"Expired"},{"Quote Rejected":"Rejected"},{"Quote Rejected by GMC":"Pricing"},{"Validity Ext. Pending Approval":"Expired"},{"Bid Resubmitted to GMC":"Pricing"},{"Quote Approved":"Approved"},{"Quote Submitted":"Customer Review"},{"Pending with GMC":"Pricing"},{"Bid Submitted to GMC":"Pricing"},{"Quote Validity Ext. Rejected":"Expired"},{"Base Price Received":"Pricing"},{"Quote Validity Ext. Approved":"Expired"}],he=function(){var e=null===ve||void 0===ve?void 0:ve.find((function(e){return e[null===o||void 0===o?void 0:o.status]}));return(null!==e&&void 0!==(null===o||void 0===o?void 0:o.status)&&(null===ee||void 0===ee?void 0:ee.findIndex((function(t){return t===(null===e||void 0===e?void 0:e[null===o||void 0===o?void 0:o.status])}))))+1};return le=C?Object(ot.jsx)(Bl,{back:function(){w(!1),ie()},accountId:o.accountid,quoteId:e.id}):N?Object(ot.jsx)(Al,{back:function(){P(!1)},accountId:o.accountid,id:B,edit:function(e,t){return function(e,t){P(!1),E(!0),H(t)}(0,t)}}):A?Object(ot.jsx)(Fl,{back:function(){E(!1)},accountId:o.accountid,id:B,quoteId:e.id,status:null===o||void 0===o?void 0:o.status}):Object(ot.jsxs)(ot.Fragment,{children:[X.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},X),{},{handleClose:function(){return $({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(ua.a,{className:"page-header",children:[Object(ot.jsx)(an.a,{title:" Quotation Details",className:"cardHeader"}),Object(ot.jsxs)(xa.a,{children:[Object(ot.jsxs)(m.a,{container:!0,md:6,children:[Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Quotation No"}),Object(ot.jsx)(O.a,{children:o.quote_autogennumber})]}),Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Quote Creation"}),Object(ot.jsx)(O.a,{children:oe(o.createddate)})]})]}),Object(ot.jsx)(m.a,{container:!0,className:t.links,md:6,children:Object(ot.jsx)(m.a,{item:!0,md:3,xs:6,children:Object(ot.jsx)(Wi,{linkLabel:"Quote Item Information",body:function(){return Object(ot.jsxs)(x.a,{className:t.popover,children:[Object(ot.jsx)(m.a,{id:"top-row",container:!0,ref:K,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Quote Item Information"})})}),Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0}),"New"!==(null===o||void 0===o?void 0:o.status)?null:Object(ot.jsx)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:Object(ot.jsx)(Rn,{label:"Create Quote Item",variant:"extended",onClick:be,quoteId:e.id})})]}),Object(ot.jsx)(kl,{data:p,quoteItemDetails:function(e,t){return pe(0,t)}})]})},linkRef:K})})})]})]}),Object(ot.jsx)(ua.a,{className:"page-header",children:Object(ot.jsx)(xa.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,children:!1!==he()&&Object(ot.jsx)(dl,{activeStep:he(),steps:ee,stepClick:function(e){console.log("e::",e)}})})})})}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Quote Information"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:re})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:ce})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Dispatch Details"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:se})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:ue})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,ref:K,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Quote Item Information"})})}),Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0}),"New"!==(null===o||void 0===o?void 0:o.status)?null:Object(ot.jsx)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:Object(ot.jsx)(Rn,{label:"Create Quote Item",variant:"extended",onClick:be,quoteId:e.id})})]}),(null===p||void 0===p?void 0:p.length)>0&&Object(ot.jsx)(kl,{data:p,quoteItemDetails:function(e,t){return pe(0,t)}}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})}),Object(ot.jsx)(Il,{data:W}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Edit",onClick:function(t){return e.edit("edit_quote",e.id)}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})}),Object(ot.jsx)(m.a,{item:!0,children:"New"===(null===o||void 0===o?void 0:o.status)&&(null===p||void 0===p?void 0:p.length)>0&&null!==p&&void 0!==p&&p.reduce((function(e,t){return e&&!_.a.isEmpty(null===t||void 0===t?void 0:t.category)}),!0)?Object(ot.jsx)(Yt,{disabled:g,label:g?"Loading...":"Request Price",onClick:function(){return me("requestforprice")}}):"Base Price Received"===(null===o||void 0===o?void 0:o.status)&&(ne===Kt.managingDirector||ne===Kt.marketingExecutive)&&(null===p||void 0===p?void 0:p.length)>0&&null!==p&&void 0!==p&&p.reduce((function(e,t){return e&&!_.a.isEmpty(null===t||void 0===t?void 0:t.final_price)}),!0)?Object(ot.jsx)(Yt,{disabled:g,label:g?"Loading...":"Submit Quote",onClick:function(){return me("quotesubmit")}}):"Quote Submitted"===(null===o||void 0===o?void 0:o.status)&&(ne===Kt.managingDirector||ne===Kt.marketingExecutive)&&(null===p||void 0===p?void 0:p.length)>0&&null!==p&&void 0!==p&&p.reduce((function(e,t){return e&&!_.a.isEmpty(null===t||void 0===t?void 0:t.customer_approval)}),!0)?Object(ot.jsx)(Yt,{disabled:g,label:g?"Loading...":"Submit to GMC",onClick:function(){return me("bidsubmitted")}}):"Bid Submitted to GMC"===(null===o||void 0===o?void 0:o.status)&&(ne===Kt.managingDirector||ne===Kt.gmc)&&(null===p||void 0===p?void 0:p.length)>0&&null!==p&&void 0!==p&&p.reduce((function(e,t){return e&&!_.a.isEmpty(null===t||void 0===t?void 0:t.gms_approvalstatus)}),!0)?Object(ot.jsxs)(i.a.Fragment,{children:[Object(ot.jsx)(Yt,{disabled:g,label:g?"Loading...":"Approve",onClick:function(){return me("quoteapprovedbygmc")}}),Object(ot.jsx)(Yt,{disabled:g,label:g?"Loading...":"Reject",onClick:function(){return me("quoterejectedbygmc")}})]}):null})]}),Object(ot.jsx)(zt,{open:U,handleClose:je,body:function(){return Object(ot.jsxs)(x.a,{className:t.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Success"}),Object(ot.jsxs)("p",{children:["Request submitted for Quote number: ",e.id," and email sent successfully"]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Close",onClick:je})})})]})}})]}),Object(ot.jsx)(ot.Fragment,{children:le})},Ll=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .page-header":{width:"100%",marginBottom:15},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"},card:{boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)",marginBottom:5}}})),Ul=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return null===e||void 0===e||e.map((function(e){return null===n||void 0===n?void 0:n.push({label:null===e||void 0===e?void 0:e[t],value:(null===e||void 0===e?void 0:e[a])||(null===e||void 0===e?void 0:e[t])})})),n},Ql=function(e){var t=Ll(),a=(0,Jt().getCurrentUserDetails)(),i=null===a||void 0===a?void 0:a.role,l=null===a||void 0===a?void 0:a.id,o=Object(n.useState)({}),s=Object(c.a)(o,2),u=s[0],b=s[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),v=j[0],h=j[1],g=Object(n.useState)({}),x=Object(c.a)(g,2),f=x[0],y=x[1],C=Object(n.useState)([{}]),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)({}),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)([]),T=Object(c.a)(A,2),E=T[0],q=T[1],F=Object(n.useState)([]),M=Object(c.a)(F,2),R=M[0],B=M[1],H=Object(n.useState)([]),G=Object(c.a)(H,2),L=G[0],U=G[1],Q=Object(n.useState)([]),V=Object(c.a)(Q,2),z=V[0],W=V[1],Y=Object(n.useState)([]),K=Object(c.a)(Y,2),J=K[0],Z=K[1],X=Object(n.useState)([]),$=Object(c.a)(X,2),ee=$[0],ae=$[1],ne=Object(n.useState)([]),ie=Object(c.a)(ne,2),le=ie[0],oe=ie[1],re=Object(n.useState)([]),se=Object(c.a)(re,2),be=se[0],pe=se[1],je=Object(n.useState)(null),me=Object(c.a)(je,2),ve=me[0],he=me[1],Oe=Object(n.useState)([]),ge=Object(c.a)(Oe,2),xe=ge[0],fe=ge[1],ye=Object(n.useState)([]),_e=Object(c.a)(ye,2),Ce=_e[0],we=_e[1],Se=Object(n.useState)({open:!1,message:"",severity:""}),ke=Object(c.a)(Se,2),Ne=ke[0],Pe=ke[1];function De(e){return{label:null===e||void 0===e?void 0:e.address,value:null===e||void 0===e?void 0:e.billing_id}}Object(n.useEffect)((function(){te().then((function(e){return oe(Ul(e,"country","countryid"))})),de({type:"incoterms"}).then((function(e){return U(Ul(e,"incoterms","incotermsid"))})),de({type:"currencies"}).then((function(e){W(Ul(e,"currencyname","currencycode")),we(e)})),de({type:"loadingports"}).then((function(e){return Z(Ul(e,"portloading_name","id"))})),de({type:"destinationports"}).then((function(e){return ae(Ul(e,"destination_port","id"))})),ce({type:"Accounts"}).then((function(e){fe(e.map((function(e){return{label:null===e||void 0===e?void 0:e.username,value:null===e||void 0===e?void 0:e.userid}})))})),de(i!==Kt.managingDirector?{type:"accountdetailsforQuotation",createdbyuserid:l}:{type:"accountdetailsforQuotation"}).then((function(t){var a;k(t),q(Ul(t,"account_name","account_id")),B(Ul(t,"account_name","account_id")),de({type:"viewquote",quote_number:null===(a=e.id)||void 0===a?void 0:a.toString()}).then((function(e){var a=t.find((function(t){return t.account_id.toString()===e.accountid})),n=null!==a&&void 0!==a&&a.contact_details?Ul(a.contact_details,"contact_name","contact_id"):[];b(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{accountName:e.accountid||"",accountType:e.accounttypename||"",billingAddress:e.billing_address||"",contact:e.contactid||"",contactList:t,status:e.status||"",quoteAutoGenNumber:e.quote_autogennumber||"",terms:e.payment_terms||"",client:e.finalclientaccountid||"",createdDate:e.createddate,incoTerms:e.incotermsid||"",remarks:e.remarks_marketing||"",currencycode:e.currencycode||"",loadingPort:e.portloadingid||"",destinationPort:e.destinationid||"",portLoadingName:e.port_loading||"",destinationPortName:e.destination_port||"",dispatchFrom:e.fromdate,dispatchTo:e.todate,others:e.other_specification||"",destination_countryid:e.destination_countryid,pending_withuserid:null===e||void 0===e?void 0:e.pending_withuserid}}(e,n)),pe(e.audit_log),y((null===a||void 0===a?void 0:a.contact_details)||{}),he(null===e||void 0===e?void 0:e.billing_id)}))}))}),[]),Object(n.useEffect)((function(){null!==u&&void 0!==u&&u.accountName&&null!==u&&void 0!==u&&u.contact&&de({type:"billingaddressoncontacts",account_id:null===u||void 0===u?void 0:u.accountName.toString(),contact_id:null===u||void 0===u?void 0:u.contact.toString()}).then((function(e){var t=[],a=[];null===e||void 0===e||e.map((function(e){var n;return null===e||void 0===e||null===(n=e.billing_address)||void 0===n?void 0:n.map((function(e){return t.push(e),a.push(De(e)),null}))})),h(a);var n=_.a.cloneDeep(u);n.billingAddress=De((null===t||void 0===t?void 0:t.find((function(e){return null===e||void 0===e?void 0:e.primary_address})))||(null===t||void 0===t?void 0:t[0])),b(n)}))}),[f]),Object(n.useEffect)((function(){var e=_.a.cloneDeep(u);ve&&(e.billingAddress=null===v||void 0===v?void 0:v.find((function(e){return(null===e||void 0===e?void 0:e.value)===ve})),b(e))}),[ve,v]);var Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=null===e||void 0===e?void 0:e.filter((function(e){return e.value==t}))[0];return a},Ae=function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},Object(Ot.a)({},t,e.target.value));b(a),console.log(a)},Te=function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},Object(Ot.a)({},t,e));b(a),console.log(a)},Ee=function(e){var t=e?new Date(e):new Date;return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},qe=function(){var t=Object(r.a)(d.a.mark((function t(){var n,i,l,o,r,c,s,b,p,j,m,v;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i="Please enter valid details",l={},_.a.isEmpty(null===(n=u.accountName)||void 0===n?void 0:n.toString())&&(l=Object(nt.a)(Object(nt.a)({},l),{},{accountName:i})),_.a.isEmpty(u.incoTerms)&&(l=Object(nt.a)(Object(nt.a)({},l),{},{incoTerms:i})),_.a.isEmpty(u.currencycode)&&(l=Object(nt.a)(Object(nt.a)({},l),{},{currencycode:i})),u.loadingPort||(l=Object(nt.a)(Object(nt.a)({},l),{},{loadingPort:i})),u.dispatchFrom||(l=Object(nt.a)(Object(nt.a)({},l),{},{dispatchFrom:i})),u.dispatchTo||(l=Object(nt.a)(Object(nt.a)({},l),{},{dispatchTo:i})),_.a.isEmpty(l)){t.next=12;break}I(l),t.next=24;break;case 12:return m={update:!0,quoteid:e.id,modifieduserid:a.id,accountid:null===(o=u.accountName)||void 0===o?void 0:o.toString(),accounttypeid:u.accountTypeId,accounttypename:u.accountType,finalclientaccountid:(null===(r=u.client)||void 0===r?void 0:r.toString())||"0",incotermsid:u.incoTerms,modifieddate:new Date,fromdate:u.dispatchFrom,todate:u.dispatchTo,currencycode:u.currencycode,currencyid:null===Ce||void 0===Ce||null===(c=Ce.find((function(e){return(null===e||void 0===e?void 0:e.currencycode)===(null===u||void 0===u?void 0:u.currencycode)})))||void 0===c?void 0:c.currencyid,portloadingid:null===(s=u.loadingPort)||void 0===s?void 0:s.toString(),destinationid:(null===(b=u.destinationPort)||void 0===b?void 0:b.toString())||"0",isactive:1,payment_terms:u.terms,other_specification:u.others,remarks_marketing:u.remarks,destination_port:u.destinationPortName,port_loading:u.portLoadingName,destination_countryid:null===u||void 0===u?void 0:u.destination_countryid,destination_country:null===u||void 0===u?void 0:u.destination_country,status_id:"1",master_status:u.status,contactid:(null===(p=u.contact)||void 0===p?void 0:p.toString())||"1",billing_id:null===u||void 0===u||null===(j=u.billingAddress)||void 0===j?void 0:j.value,pending_withuserid:null===u||void 0===u?void 0:u.pending_withuserid},t.prev=13,t.next=16,ue(m);case 16:v=t.sent,console.log("Response",v),v&&(Pe({open:!0,message:"Quote updated successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(13),Pe({open:!0,message:t.t0.message,severity:"error"});case 24:case"end":return t.stop()}}),t,null,[[13,21]])})));return function(){return t.apply(this,arguments)}}(),Fe=[{label:"Account name *",type:"autocomplete",labelprop:"label",required:!0,disabled:!0,error:null===D||void 0===D?void 0:D.accountName,helperText:null===D||void 0===D?void 0:D.accountName,value:Ie(E,u.accountName)||"",options:E,onChange:function(e,t){var a=S.find((function(e){return e.account_id===(null===t||void 0===t?void 0:t.value)})),n=Object(nt.a)(Object(nt.a)({},u),{},{accountName:null===t||void 0===t?void 0:t.value,accountType:a.accounttype_name,accountTypeId:a.accounttype_id,billingAddress:a.billing_address,contactList:a.contact_details?Ul(a.contact_details,"contact_name","contact_id"):[]});b(n),y({})}},{label:"Contact name",type:"autocomplete",labelprop:"label",disabled:!0,value:Ie(u.contactList,u.contact)||[],options:u.contactList||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},{contact:null===t||void 0===t?void 0:t.value});y(t),b(a)}},{label:"Account type",type:"input",multiline:!0,required:!0,disabled:!0,rows:2,value:u.accountType||""},{label:"Quote creation date",type:"input",disabled:!0,value:Ee(u.creationDate)||Ee("")},{label:"Billing address",type:"autocomplete",options:v||[],multiline:!0,required:!0,rows:3,error:null===D||void 0===D?void 0:D.billingAddress,helperText:null===D||void 0===D?void 0:D.billingAddress,value:u.billingAddress||"",onChange:function(e,t){return function(e,t,a){var n=Object(nt.a)(Object(nt.a)({},u),{},Object(Ot.a)({},t,a));b(n)}(0,"billingAddress",t)}},{label:"Payment terms",type:"input",value:u.terms||"",onChange:function(e){return Ae(e,"terms")}},{label:"Incoterms *",type:"autocomplete",labelprop:"label",required:!0,error:null===D||void 0===D?void 0:D.incoTerms,helperText:null===D||void 0===D?void 0:D.incoTerms,value:Ie(L,u.incoTerms)||"",options:L,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},{incoTerms:null===t||void 0===t?void 0:t.value});b(a)}},{label:"Quote status",type:"input",disabled:!0,value:u.status||"New"},{label:"Remarks from marketing",type:"input",value:u.remarks||"",multiline:!0,onChange:function(e){return Ae(e,"remarks")}},{label:"Customer currency *",type:"autocomplete",labelprop:"label",value:Ie(z,null===u||void 0===u?void 0:u.currencycode)||"",required:!0,error:null===D||void 0===D?void 0:D.currencycode,helperText:null===D||void 0===D?void 0:D.currencycode,options:z,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},{currencycode:null===t||void 0===t?void 0:t.value});b(a)}},{label:"Final client",type:"autocomplete",labelprop:"label",value:Ie(R,u.client)||[],options:R,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},{client:null===t||void 0===t?void 0:t.value});b(a)}},{label:"Pending With",type:"autocomplete",labelprop:"label",value:Ie(xe,u.pending_withuserid)||[],options:xe,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},{pending_withuserid:null===t||void 0===t?void 0:t.value});b(a)}}],Me=[{label:"Port of loading *",type:"autocomplete",labelprop:"label",value:Ie(J,u.loadingPort)||[],required:!0,error:null===D||void 0===D?void 0:D.loadingPort,helperText:null===D||void 0===D?void 0:D.loadingPort,options:J,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},{loadingPort:null===t||void 0===t?void 0:t.value,portLoadingName:null===t||void 0===t?void 0:t.label});b(a)}},{label:"Destination country",type:"autocomplete",labelprop:"label",value:Ie(le,u.destination_countryid)||"",options:le,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},{destination_countryid:null===t||void 0===t?void 0:t.value,destination_country:null===t||void 0===t?void 0:t.label});b(a)}},{label:"Dispatch period from",type:"datePicker",value:u.dispatchFrom||null,required:!0,error:null===D||void 0===D?void 0:D.dispatchFrom,helperText:null===D||void 0===D?void 0:D.dispatchFrom,minDate:new Date,onChange:function(e){return Te(e,"dispatchFrom")},sm:3},{label:"Dispatch period to",type:"datePicker",value:u.dispatchTo||null,required:!0,error:null===D||void 0===D?void 0:D.dispatchTo,helperText:null===D||void 0===D?void 0:D.dispatchTo,minDate:new Date,onChange:function(e){return Te(e,"dispatchTo")},sm:3},{label:"Destination port",type:"autocomplete",labelprop:"label",value:Ie(ee,u.destinationPort)||"",options:ee,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},u),{},{destinationPort:null===t||void 0===t?void 0:t.value,destinationPortName:null===t||void 0===t?void 0:t.label});b(a)}},{label:"Others (specification)",type:"input",value:u.others||"",onChange:function(e){return Ae(e,"others")}}],Re=["New","Pricing","Expired","Customer Review","Approved","Rejected"],Be=[{"Quote Approved by GMC":"Pricing"},{New:"New"},{"Quote Expired":"Expired"},{"Quote Rejected":"Rejected"},{"Quote Rejected by GMC":"Pricing"},{"Validity Ext. Pending Approval":"Expired"},{"Bid Resubmitted to GMC":"Pricing"},{"Quote Approved":"Approved"},{"Quote Submitted":"Customer Review"},{"Pending with GMC":"Pricing"},{"Bid Submitted to GMC":"Pricing"},{"Quote Validity Ext. Rejected":"Expired"},{"Base Price Received":"Pricing"},{"Quote Validity Ext. Approved":"Expired"}],He=function(){var e=Be.find((function(e){return e[u.status]}));return(null!==e&&void 0!==u.status&&Re.findIndex((function(t){return t===e[null===u||void 0===u?void 0:u.status]})))+1};return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[Ne.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},Ne),{},{handleClose:function(){return Pe({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(ua.a,{className:"page-header",children:[Object(ot.jsx)(an.a,{title:" Quotation details",className:"cardHeader"}),Object(ot.jsx)(xa.a,{children:Object(ot.jsxs)(m.a,{container:!0,md:6,children:[Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Quotation no"}),Object(ot.jsx)(O.a,{children:u.quoteAutoGenNumber})]}),Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Quote creation"}),Object(ot.jsx)(O.a,{children:Ee(u.createddate)})]})]})})]}),Object(ot.jsx)(ua.a,{className:"page-header",children:Object(ot.jsx)(xa.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,children:!1!==He()&&Object(ot.jsx)(dl,{activeStep:He(),steps:Re,stepClick:function(e){console.log("e::",e)}})})})})}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Quote information"})})}),Object(ot.jsx)(tn,{payload:Fe}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Dispatch details"})})}),Object(ot.jsx)(tn,{payload:Me}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})}),Object(ot.jsx)(Il,{data:be}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Save",onClick:qe})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})})]})]})},Vl=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column","& #top-row":{marginTop:10,marginBottom:5}}}})),zl=function(e){var t=Vl(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)([]),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)({}),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)({open:!1,message:"",severity:""}),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)(!1),S=Object(c.a)(w,2),k=S[0],N=S[1];Object(n.useEffect)((function(){oe({type:"salutations"}).then((function(e){return p(function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(n){return a.push({label:n[e],value:n[t]||n[e]})})),a}(e,"salutation","id"))})),je({view:!0,contactid:e.id.toString()}).then((function(e){console.log("res::",e),o(e)}))}),[e.id]);var P=function(e,t){e.preventDefault();var a=e.target.value;o(Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,a)))},D=[{label:"Salutation",type:"autocomplete",labelprop:"label",value:l.salutationid?l.salutationid:"",options:b,onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{salutationid:t}))}},{label:"First name",type:"input",value:l.firstname||"",onChange:function(e){return P(e,"firstname")}},{label:"Last name",type:"input",value:l.lastname||"",onChange:function(e){return P(e,"lastname")}},{label:"Email",type:"input",value:l.email||"",onChange:function(e){return P(e,"email")}},{label:"Phone",type:"number",value:l.phone||"",error:null===h||void 0===h?void 0:h.phone,helperText:null===h||void 0===h?void 0:h.phone,onChange:function(e){return P(e,"phone")}},{label:"Mobile",type:"number",value:l.mobile||"",error:null===h||void 0===h?void 0:h.mobile,helperText:null===h||void 0===h?void 0:h.mobile,onChange:function(e){return P(e,"mobile")}},{label:"Current sales number",type:"input",value:l.current_sales_no||"",onChange:function(e){return P(e,"current_sales_no")}},{label:"Past sales number",type:"input",value:l.past_sales_no||"",onChange:function(e){return P(e,"past_sales_no")}}],I=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,o,r,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},n="Exceeded maximum length",!_.a.isEmpty(l.phone)&&l.phone.length>10&&(a=Object(nt.a)(Object(nt.a)({},a),{},{phone:n})),!_.a.isEmpty(l.mobile)&&l.mobile.length>10&&(a=Object(nt.a)(Object(nt.a)({},a),{},{mobile:n})),_.a.isEmpty(a)){t.next=8;break}g(a),t.next=24;break;case 8:return c={update:!0,contactid:e.id.toString(),salutationid:parseInt(null===(i=l.salutationid)||void 0===i?void 0:i.value),firstname:l.firstname||"",lastname:l.lastname||"",email:l.email||"",position:l.position||"",phone:(null===(o=l.phone)||void 0===o?void 0:o.toString())||"",mobile:(null===(r=l.mobile)||void 0===r?void 0:r.toString())||""},N(!0),t.prev=10,t.next=13,je(c);case 13:s=t.sent,console.log("Response",s),s&&(C({open:!0,message:"Contact updated successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(10),C({open:!0,message:t.t0.message,severity:"error"});case 21:return t.prev=21,N(!1),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[10,18,21,24]])})));return function(){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[y.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},y),{},{handleClose:function(){return C({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Contact details"})})}),Object(ot.jsx)(tn,{payload:D}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:k,label:k?"Loading...":"Save",onClick:I})})]})]})},Wl=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440},sortHeader:{cursor:"pointer"}}),Yl=[{id:"id",label:"Id"},{id:"country",label:"Country"},{id:"state",label:"State"},{id:"city",label:"City"},{id:"postalcode",label:"PostalCode"},{id:"street",label:"Street"},{id:"primary",label:"Primary"}];function Kl(e,t,a,n,i,l,o){return{id:e,country:t,state:a,city:n,postalcode:i,street:l,primary:o}}var Jl=function(e){var t=Wl(),a=Object(n.useState)({}),l=Object(c.a)(a,2),o=l[0],r=l[1],s=Object(n.useState)(""),d=Object(c.a)(s,2),u=d[0],b=d[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),v=j[0],h=j[1],g=Object(n.useState)([]),x=Object(c.a)(g,2),f=x[0],y=x[1],_=i.a.useState("asc"),C=Object(c.a)(_,2),w=C[0],S=C[1],k=i.a.useState(""),N=Object(c.a)(k,2),P=N[0],D=N[1],I=i.a.useState(0),A=Object(c.a)(I,2),T=A[0],E=A[1],q=i.a.useState(10),F=Object(c.a)(q,2),M=F[0],R=F[1],B=i.a.useState({}),H=Object(c.a)(B,2),G=H[0],L=H[1],U=i.a.useState({}),Q=Object(c.a)(U,2),V=Q[0],z=Q[1];function W(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function Y(e,t){return"desc"===e?function(e,a){return W(e,a,t)}:function(e,a){return-W(e,a,t)}}function K(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}Object(n.useEffect)((function(){je({view:!0,contactid:e.id.toString()}).then((function(e){if(null!==e){var t,a;r(e),b(e.accountid);var n=[],i={};null===e||void 0===e||null===(t=e.billinginfo)||void 0===t||t.map((function(e){n.push(Kl(e.billing_id,e.billing_country,e.billing_state,e.billing_city,e.billing_postalcode,e.billing_street,e.billing_primary)),!0===e.billing_primary&&(i={billing_city:e.billing_city,billing_country:e.billing_country,billing_id:e.billing_id,billing_postalcode:e.billing_postalcode,billing_primary:e.billing_primary,billing_state:e.billing_state,billing_street:e.billing_street})})),h(n),L(i);var l=[],o={};null===e||void 0===e||null===(a=e.shippinginfo)||void 0===a||a.map((function(e){l.push(Kl(e.shipping_id,e.shipping_country,e.shipping_state,e.shipping_city,e.shipping_postalcode,e.shipping_street,e.shipping_primary)),!0===e.shipping_primary&&(o={shipping_city:e.shipping_city,shipping_country:e.shipping_country,shipping_id:e.shipping_id,shipping_postalcode:e.shipping_postalcode,shipping_primary:e.shipping_primary,shipping_state:e.shipping_state,shipping_street:e.shipping_street})})),y(l),z(o)}}))}),[]);var J=function(e,t){S(P===t&&"asc"===w?"desc":"asc"),D(t)},Z=function(e,t){E(t)},X=function(e){R(+e.target.value),E(0)},$=[{type:"label",value:"Contact owner",bold:!0,sm:"6"},{type:"label",value:o.contactowner,sm:"6"},{type:"label",value:"First name",bold:!0,sm:"6"},{type:"label",value:o.firstname,sm:"6"},{type:"label",value:"Email",bold:!0,sm:"6"},{type:"label",value:o.email,sm:"6"},{type:"label",value:"Mobile",bold:!0,sm:"6"},{type:"label",value:o.mobile,sm:"6"},{type:"label",value:"Past sales number",bold:!0,sm:"6"},{type:"label",value:o.past_sales_no,sm:"6"}],ee=[{type:"label",value:"Last name",bold:!0,sm:"6"},{type:"label",value:o.lastname,sm:"6"},{type:"label",value:"Phone",bold:!0,sm:"6"},{type:"label",value:o.phone,sm:"6"},{type:"label",value:"Current sales number",bold:!0,sm:"6"},{type:"label",value:o.current_sales_no,sm:"6"}],te=[{type:"label",value:"Billing Id",bold:!0,sm:"6"},{type:"label",value:G.billing_id,sm:"6"},{type:"label",value:"Billing City",bold:!0,sm:"6"},{type:"label",value:G.billing_city,sm:"6"},{type:"label",value:"Billing Country",bold:!0,sm:"6"},{type:"label",value:G.billing_country,sm:"6"}],ae=[{type:"label",value:"Billing State",bold:!0,sm:"6"},{type:"label",value:G.billing_state,sm:"6"},{type:"label",value:"Billing Street",bold:!0,sm:"6"},{type:"label",value:G.billing_street,sm:"6"},{type:"label",value:"Billing Postal Code",bold:!0,sm:"6"},{type:"label",value:G.billing_postalcode,sm:"6"}],ne=[{type:"label",value:"Shipping Id",bold:!0,sm:"6"},{type:"label",value:V.shipping_id,sm:"6"},{type:"label",value:"Shipping City",bold:!0,sm:"6"},{type:"label",value:V.shipping_city,sm:"6"},{type:"label",value:"Shipping Country",bold:!0,sm:"6"},{type:"label",value:V.shipping_country,sm:"6"}],ie=[{type:"label",value:"Shipping State",bold:!0,sm:"6"},{type:"label",value:V.shipping_state,sm:"6"},{type:"label",value:"Shipping Street",bold:!0,sm:"6"},{type:"label",value:V.shipping_street,sm:"6"},{type:"label",value:"Shipping Postal Code",bold:!0,sm:"6"},{type:"label",value:V.shipping_postalcode,sm:"6"}];return Object(ot.jsx)(ot.Fragment,{children:Object(ot.jsxs)(Si,{value:"0",children:[Object(ot.jsxs)(ft.a,{label:"Contacts Information",index:"0",children:[Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Contact information"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:$})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:ee})})]}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Edit",onClick:function(t){return e.editContact("edit_contact",e.id)}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Billing information"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0}),Object(ot.jsx)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:Object(ot.jsx)(Rn,{label:"Add Billing Address",variant:"extended",onClick:function(t){return e.editContact("add_billing",{contactId:e.id,accountid:u})}})})]}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:12,container:!0,direction:"column",children:Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(Un,{classes:t,order:w,orderBy:P,onRequestSort:J,rowCount:v.length,headCells:Yl,selectedAdvancedFilters:e.selectedAdvancedFilters,clearAdvancedFilters:e.clearAdvancedFilters}),Object(ot.jsx)(dn.a,{children:v.length>0?K(v,Y(w,P)).slice(T*M,T*M+M).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Yl.map((function(a){var n=t[a.id];return Object(ot.jsx)(un.a,{align:a.align,children:"id"===a.id?Object(ot.jsx)("a",{href:"#",onClick:function(a){e.editContact("edit_billing",{contactId:e.id,accountid:u,data:t})},children:n}):"primary"===a.id?Object(ot.jsx)(Va,{checked:t.primary,name:t.primary,disabled:!0}):n},a.id)}))},a)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:v.length,rowsPerPage:M,page:T,onChangePage:Z,onChangeRowsPerPage:X})]})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Shipping information"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0}),Object(ot.jsx)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:Object(ot.jsx)(Rn,{label:"Add Shipping Address",variant:"extended",onClick:function(t){return e.editContact("add_shipping",{contactId:e.id,accountid:u})}})})]}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:12,container:!0,direction:"column",children:Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(Un,{classes:t,order:w,orderBy:P,onRequestSort:J,rowCount:f.length,headCells:Yl,selectedAdvancedFilters:e.selectedAdvancedFilters,clearAdvancedFilters:e.clearAdvancedFilters}),Object(ot.jsx)(dn.a,{children:f.length>0?K(f,Y(w,P)).slice(T*M,T*M+M).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Yl.map((function(a){var n=t[a.id];return Object(ot.jsx)(un.a,{align:a.align,children:"id"===a.id?Object(ot.jsx)("a",{href:"#",onClick:function(a){e.editContact("edit_shipping",{contactId:e.id,accountid:u,data:t})},children:n}):"primary"===a.id?Object(ot.jsx)(Va,{checked:t.primary,name:t.primary,disabled:!0}):n},a.id)}))},a)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:f.length,rowsPerPage:M,page:T,onChangePage:Z,onChangeRowsPerPage:X})]})})]})]}),Object(ot.jsxs)(ft.a,{label:"Billing Address",index:"2",children:[Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Billing information"})})}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:void 0===G.billing_id?"There is no any primary billing address.":Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:te})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:ae})})]})})]}),Object(ot.jsxs)(ft.a,{label:"Shipping Address",index:"3",children:[Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Shipping information"})}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:void 0===V.shipping_id?"There is no any primary shipping address.":Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:ne})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:ie})})]})})]})]})})},Zl=[{id:"number",label:"Quote Number"},{id:"status",label:"Status"},{id:"createdby",label:"Created By"},{id:"createddate",label:"Created Date"}];var Xl=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),$l=function(e){var t=Xl(),a=i.a.useState(0),n=Object(c.a)(a,2),l=n[0],o=n[1],r=i.a.useState(10),s=Object(c.a)(r,2),d=s[0],u=s[1],b=i.a.useState([]),p=Object(c.a)(b,2),j=p[0],m=p[1];i.a.useEffect((function(){console.log("Props Data",e.data);var t=[];e.data&&null!==e.data&&e.data.map((function(e){var a,n,i,l;t.push((a=e.quoteid,n=e.status,i=e.createdby,l=function(e){var t=e?new Date(e):new Date;return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()}(e.createddate),{number:a,status:n,createdby:i,createddate:l}))})),m(t)}),[e.data]);return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(pn.a,{children:Object(ot.jsx)(jn.a,{children:Zl.map((function(e){return Object(ot.jsx)(un.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ot.jsx)(dn.a,{children:j.length>0?j.length&&j.slice(l*d,l*d+d).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Zl.map((function(a){var n=t[a.id];return Object(ot.jsx)(un.a,{align:a.align,children:"number"===a.id?Object(ot.jsx)("a",{href:"#",onClick:function(n){var i,l,o;i=a.id,l=t.number,o=t.status,console.log(i),"number"===i&&e.quoteDetails("view_quote",l,o)},children:n}):n},a.id)}))},a)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:j.length,rowsPerPage:d,page:l,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){u(+e.target.value),o(0)}})]})},eo=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column","& #top-row":{marginTop:10,marginBottom:5}}}})),to=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=[];return e.map((function(e){return a.push({label:e[t],value:e.id||e[t]})})),a},ao=function(e){var t=eo(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)({}),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)([]),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)([]),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)({}),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)({open:!1,message:"",severity:""}),D=Object(c.a)(P,2),I=D[0],A=D[1],T=Object(n.useState)(!1),E=Object(c.a)(T,2),q=E[0],F=E[1];Object(n.useEffect)((function(){M()}),[]),Object(n.useEffect)((function(){var t={billing_id:e.data.id,billing_city:e.data.city,billing_country:{label:e.data.country,value:e.data.country},billing_postalcode:e.data.postalcode,billing_state:e.data.state,billing_street:e.data.street,billing_primary:e.data.primary};o(t);var a={};te().then((function(e){var n,i=to(e,"country");(a.country=i,""!==t.billing_country)&&ae({countryname:null===(n=t.billing_country)||void 0===n?void 0:n.value}).then((function(e){a.state=to(e,"state"),C({label:t.billing_state,value:t.billing_state}),""!==t.billing_state&&ne({statename:t.billing_state}).then((function(e){a.city=to(e,"city"),g({label:t.billing_city,value:t.billing_city})})).catch((function(e){return console.log("Get city error",e.message)}))})).catch((function(e){return console.log("Get state error",e.message)}));p(a)}))}),[e.data]);var M=function(){te().then((function(e){var t=to(e,"country");p(Object(nt.a)(Object(nt.a)({},b),{},{country:t}))}))},R=function(e,t){e.preventDefault();var a=e.target.value;o(Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,a)))},B=[{label:"Street name",type:"input",required:!0,value:l.billing_street?l.billing_street:"",error:null===k||void 0===k?void 0:k.billing_street,helperText:null===k||void 0===k?void 0:k.billing_street,onChange:function(e){return R(e,"billing_street")}},{label:"Country",type:"autocomplete",labelprop:"label",required:!0,error:null===k||void 0===k?void 0:k.billing_country,helperText:null===k||void 0===k?void 0:k.billing_country,value:l.billing_country?l.billing_country:"",options:b.country||[],onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{billing_country:t})),ae({countryname:t.value}).then((function(e){return p(Object(nt.a)(Object(nt.a)({},b),{},{state:to(e,"state")}))})).catch((function(e){return console.log("Get state error",e.message)}))}},{label:"Province/State",type:"autocomplete",labelprop:"label",required:!0,error:null===k||void 0===k?void 0:k.billing_state,helperText:null===k||void 0===k?void 0:k.billing_state,value:y||"",options:b.state||[],onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{billing_state:t.value})),C(t),ne({statename:t.value}).then((function(e){return p(Object(nt.a)(Object(nt.a)({},b),{},{city:to(e,"city")}))})).catch((function(e){return console.log("Get state error",e.message)}))}},{label:"City",type:"autocomplete",labelprop:"label",required:!0,error:null===k||void 0===k?void 0:k.billing_city,helperText:null===k||void 0===k?void 0:k.billing_city,value:h,options:b.city||[],onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{billing_city:t.value})),g(t)}},{label:"Postal code",type:"input",inputProps:{maxLength:6},value:l.billing_postalcode?l.billing_postalcode:"",onChange:function(e){return R(e,"billing_postalcode")}},{label:"Is Primary Billing Address",type:"checkbox",onChange:function(e){return H(e,"billing_primary")},checked:!!l.billing_primary&&l.billing_primary}],H=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.checked));o(a)},G=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,o,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},n="Please fill the field value.",_.a.isEmpty(h)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{billing_city:n})),_.a.isEmpty(l.billing_country)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{billing_country:n})),_.a.isEmpty(l.billing_street)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{billing_street:n})),_.a.isEmpty(y)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{billing_state:n})),_.a.isEmpty(a)){t.next=10;break}N(a),t.next=26;break;case 10:return o={contactbilling_update:!0,contactid:e.id.toString(),accountid:e.accountId.toString(),billinginfo:[{billing_id:l.billing_id,billing_city:null===h||void 0===h?void 0:h.value,billing_country:null===(i=l.billing_country)||void 0===i?void 0:i.value,billing_postalcode:l.billing_postalcode,billing_state:null===y||void 0===y?void 0:y.value,billing_street:l.billing_street,billing_primary:l.billing_primary}]},F(!0),t.prev=12,t.next=15,je(o);case 15:r=t.sent,console.log("Response",r),r&&(A({open:!0,message:"Contact updated successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(12),A({open:!0,message:t.t0.message,severity:"error"});case 23:return t.prev=23,F(!1),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[12,20,23,26]])})));return function(){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[I.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},I),{},{handleClose:function(){return A({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Billing details"})})}),Object(ot.jsx)(tn,{payload:B}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:q,label:q?"Loading...":"Save",onClick:G})})]})]})},no=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column","& #top-row":{marginTop:10,marginBottom:5}}}})),io=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=[];return e.map((function(e){return a.push({label:e[t],value:e.id||e[t]})})),a},lo=function(e){var t=no(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)({}),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)(!1),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)({}),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)({open:!1,message:"",severity:""}),S=Object(c.a)(w,2),k=S[0],N=S[1];Object(n.useEffect)((function(){P()}),[]);var P=function(){te().then((function(e){var t=io(e,"country");p(Object(nt.a)(Object(nt.a)({},b),{},{country:t}))}))},D=function(e,t){e.preventDefault();var a=e.target.value;o(Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,a)))},I=[{label:"Street name",type:"input",required:!0,value:l.billing_street,error:null===y||void 0===y?void 0:y.billing_street,helperText:null===y||void 0===y?void 0:y.billing_street,onChange:function(e){return D(e,"billing_street")}},{label:"Country",type:"autocomplete",labelprop:"label",required:!0,error:null===y||void 0===y?void 0:y.billing_country,helperText:null===y||void 0===y?void 0:y.billing_country,value:l.billing_country||"",options:b.country||[],onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{billing_country:t})),ae({countryname:t.value}).then((function(e){return p(Object(nt.a)(Object(nt.a)({},b),{},{state:io(e,"state")}))})).catch((function(e){return console.log("Get state error",e.message)}))}},{label:"Province/State",type:"autocomplete",labelprop:"label",required:!0,error:null===y||void 0===y?void 0:y.billing_state,helperText:null===y||void 0===y?void 0:y.billing_state,value:l.billing_state||"",options:b.state||[],onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{billing_state:t})),ne({statename:t.value}).then((function(e){return p(Object(nt.a)(Object(nt.a)({},b),{},{city:io(e,"city")}))})).catch((function(e){return console.log("Get state error",e.message)}))}},{label:"City",type:"autocomplete",labelprop:"label",required:!0,error:null===y||void 0===y?void 0:y.billing_city,helperText:null===y||void 0===y?void 0:y.billing_city,value:l.billing_city||"",options:b.city||[],onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{billing_city:t}))}},{label:"Postal code",type:"input",inputProps:{maxLength:6},value:l.billing_postalcode,onChange:function(e){return D(e,"billing_postalcode")}},{label:"Is Primary Billing Address",type:"checkbox",onChange:function(e){return function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.checked));o(a)}(e,"billing_primary")},checked:l.billing_primary}],A=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,o,r,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},n="Please fill the field value.",_.a.isEmpty(l.billing_city)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{billing_city:n})),_.a.isEmpty(l.billing_country)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{billing_country:n})),_.a.isEmpty(l.billing_street)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{billing_street:n})),_.a.isEmpty(l.billing_state)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{billing_state:n})),_.a.isEmpty(a)){t.next=10;break}C(a),t.next=26;break;case 10:return c={contactbilling_create:!0,contactid:e.id.toString(),accountid:e.accountId.toString(),billinginfo:[{billing_id:"",billing_city:null===(i=l.billing_city)||void 0===i?void 0:i.value,billing_country:null===(o=l.billing_country)||void 0===o?void 0:o.value,billing_postalcode:l.billing_postalcode,billing_state:null===(r=l.billing_state)||void 0===r?void 0:r.value,billing_street:l.billing_street,billing_primary:l.billing_primary}]},g(!0),t.prev=12,t.next=15,je(c);case 15:s=t.sent,console.log("Response",s),s&&(N({open:!0,message:"Contact updated successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(12),N({open:!0,message:t.t0.message,severity:"error"});case 23:return t.prev=23,g(!1),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[12,20,23,26]])})));return function(){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[k.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},k),{},{handleClose:function(){return N({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Billing details"})})}),Object(ot.jsx)(tn,{payload:I}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:h,label:h?"Loading ...":"Save",onClick:A})})]})]})},oo=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column","& #top-row":{marginTop:10,marginBottom:5}}}})),ro=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=[];return e.map((function(e){return a.push({label:e[t],value:e.id||e[t]})})),a},co=function(e){var t=oo(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)({}),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)([]),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)([]),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)({}),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)({open:!1,message:"",severity:""}),D=Object(c.a)(P,2),I=D[0],A=D[1],T=Object(n.useState)(!1),E=Object(c.a)(T,2),q=E[0],F=E[1];Object(n.useEffect)((function(){M()}),[]),Object(n.useEffect)((function(){var t={shipping_id:e.data.id,shipping_city:e.data.city,shipping_country:{label:e.data.country,value:e.data.country},shipping_postalcode:e.data.postalcode,shipping_state:e.data.state,shipping_street:e.data.street,shipping_primary:e.data.primary};o(t);var a={};te().then((function(e){var n,i=ro(e,"country");(a.country=i,""!==t.shipping_country)&&ae({countryname:null===(n=t.shipping_country)||void 0===n?void 0:n.value}).then((function(e){a.state=ro(e,"state"),C({label:t.shipping_state,value:t.shipping_state}),""!==t.shipping_state&&ne({statename:t.shipping_state}).then((function(e){a.city=ro(e,"city"),g({label:t.shipping_city,value:t.shipping_city})})).catch((function(e){return console.log("Get city error",e.message)}))})).catch((function(e){return console.log("Get state error",e.message)}));p(a)}))}),[e.data]);var M=function(){te().then((function(e){var t=ro(e,"country");p(Object(nt.a)(Object(nt.a)({},b),{},{country:t}))}))},R=function(e,t){e.preventDefault();var a=e.target.value;o(Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,a)))},B=[{label:"Street name",type:"input",required:!0,value:l.shipping_street?l.shipping_street:"",error:null===k||void 0===k?void 0:k.shipping_street,helperText:null===k||void 0===k?void 0:k.shipping_street,onChange:function(e){return R(e,"shipping_street")}},{label:"Country",type:"autocomplete",labelprop:"label",required:!0,error:null===k||void 0===k?void 0:k.shipping_country,helperText:null===k||void 0===k?void 0:k.shipping_country,value:l.shipping_country?l.shipping_country:"",options:b.country?b.country:[],onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{shipping_country:t})),ae({countryname:t.value}).then((function(e){return p(Object(nt.a)(Object(nt.a)({},b),{},{state:ro(e,"state")}))})).catch((function(e){return console.log("Get state error",e.message)}))}},{label:"Province/State",type:"autocomplete",labelprop:"label",required:!0,error:null===k||void 0===k?void 0:k.shipping_state,helperText:null===k||void 0===k?void 0:k.shipping_state,value:y,options:b.state||[],onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{shipping_state:t.value})),C(t),ne({statename:t.value}).then((function(e){return p(Object(nt.a)(Object(nt.a)({},b),{},{city:ro(e,"city")}))})).catch((function(e){return console.log("Get state error",e.message)}))}},{label:"City",type:"autocomplete",labelprop:"label",required:!0,error:null===k||void 0===k?void 0:k.shipping_city,helperText:null===k||void 0===k?void 0:k.shipping_city,value:h,options:b.city||[],onChange:function(e,t){g(t),o(Object(nt.a)(Object(nt.a)({},l),{},{shipping_city:t.value}))}},{label:"Postal code",type:"input",inputProps:{maxLength:6},value:l.shipping_postalcode?l.shipping_postalcode:"",onChange:function(e){return R(e,"shipping_postalcode")}},{label:"Is Primary Shipping Address",type:"checkbox",onChange:function(e){return H(e,"shipping_primary")},checked:!!l.shipping_primary&&l.shipping_primary}],H=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.checked));o(a)},G=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,o,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},n="Please fill the field value.",_.a.isEmpty(h)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{shipping_city:n})),_.a.isEmpty(l.shipping_country)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{shipping_country:n})),_.a.isEmpty(l.shipping_street)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{shipping_street:n})),_.a.isEmpty(y)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{shipping_state:n})),_.a.isEmpty(a)){t.next=10;break}N(a),t.next=26;break;case 10:return o={contactshipping_update:!0,contactid:e.id.toString(),accountid:e.accountId.toString(),shippinginfo:[{shipping_id:l.shipping_id,shipping_city:null===h||void 0===h?void 0:h.value,shipping_country:null===(i=l.shipping_country)||void 0===i?void 0:i.value,shipping_postalcode:l.shipping_postalcode,shipping_state:null===y||void 0===y?void 0:y.value,shipping_street:l.shipping_street,shipping_primary:l.shipping_primary}]},F(!0),t.prev=12,t.next=15,je(o);case 15:r=t.sent,console.log("Response",r),r&&(A({open:!0,message:"Contact updated successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(12),A({open:!0,message:t.t0.message,severity:"error"});case 23:return t.prev=23,F(!1),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[12,20,23,26]])})));return function(){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[I.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},I),{},{handleClose:function(){return A({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Shipping details"})})}),Object(ot.jsx)(tn,{payload:B}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:q,label:q?"Loading...":"Save",onClick:G})})]})]})},so=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column","& #top-row":{marginTop:10,marginBottom:5}}}})),uo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=[];return e.map((function(e){return a.push({label:e[t],value:e.id||e[t]})})),a},bo=function(e){var t=so(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)({}),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)({}),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)(!1),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)({open:!1,message:"",severity:""}),S=Object(c.a)(w,2),k=S[0],N=S[1];Object(n.useEffect)((function(){P()}),[]);var P=function(){te().then((function(e){var t=uo(e,"country");p(Object(nt.a)(Object(nt.a)({},b),{},{country:t}))}))},D=function(e,t){e.preventDefault();var a=e.target.value;o(Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,a)))},I=[{label:"Street name",type:"input",required:!0,value:l.shipping_street,error:null===h||void 0===h?void 0:h.shipping_street,helperText:null===h||void 0===h?void 0:h.shipping_street,onChange:function(e){return D(e,"shipping_street")}},{label:"Country",type:"autocomplete",labelprop:"label",required:!0,error:null===h||void 0===h?void 0:h.shipping_country,helperText:null===h||void 0===h?void 0:h.shipping_country,value:l.shipping_country||"",options:b.country||[],onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{shipping_country:t})),ae({countryname:t.value}).then((function(e){return p(Object(nt.a)(Object(nt.a)({},b),{},{state:uo(e,"state")}))})).catch((function(e){return console.log("Get state error",e.message)}))}},{label:"Province/State",type:"autocomplete",labelprop:"label",required:!0,error:null===h||void 0===h?void 0:h.shipping_state,helperText:null===h||void 0===h?void 0:h.shipping_state,value:l.shipping_state||"",options:b.state||[],onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{shipping_state:t})),ne({statename:t.value}).then((function(e){return p(Object(nt.a)(Object(nt.a)({},b),{},{city:uo(e,"city")}))})).catch((function(e){return console.log("Get state error",e.message)}))}},{label:"City",type:"autocomplete",labelprop:"label",required:!0,error:null===h||void 0===h?void 0:h.shipping_city,helperText:null===h||void 0===h?void 0:h.shipping_city,value:l.shipping_city||"",options:b.city||[],onChange:function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},{shipping_city:t}))}},{label:"Postal code",type:"input",inputProps:{maxLength:6},value:l.shipping_postalcode,onChange:function(e){return D(e,"shipping_postalcode")}},{label:"Is Primary Shipping Address",type:"checkbox",onChange:function(e){return function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.checked));o(a)}(e,"shipping_primary")},checked:l.shipping_primary}],A=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,o,r,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},n="Please fill the field value.",_.a.isEmpty(l.shipping_city)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{shipping_city:n})),_.a.isEmpty(l.shipping_country)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{shipping_country:n})),_.a.isEmpty(l.shipping_street)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{shipping_street:n})),_.a.isEmpty(l.shipping_state)&&(a=Object(nt.a)(Object(nt.a)({},a),{},{shipping_state:n})),_.a.isEmpty(a)){t.next=10;break}g(a),t.next=26;break;case 10:return c={contactshipping_create:!0,contactid:e.id.toString(),accountid:e.accountId.toString(),shippinginfo:[{shipping_id:"",shipping_city:null===(i=l.shipping_city)||void 0===i?void 0:i.value,shipping_country:null===(o=l.shipping_country)||void 0===o?void 0:o.value,shipping_postalcode:l.shipping_postalcode,shipping_state:null===(r=l.shipping_state)||void 0===r?void 0:r.value,shipping_street:l.shipping_street,shipping_primary:l.shipping_primary}]},C(!0),t.prev=12,t.next=15,je(c);case 15:s=t.sent,console.log("Response",s),s&&(N({open:!0,message:"Contact updated successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(12),N({open:!0,message:t.t0.message,severity:"error"});case 23:return t.prev=23,C(!1),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[12,20,23,26]])})));return function(){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[k.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},k),{},{handleClose:function(){return N({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Shipping details"})})}),Object(ot.jsx)(tn,{payload:I}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:y,label:y?"Loading ...":"Save",onClick:A})})]})]})},po=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column","& #top-row":{marginTop:10,marginBottom:5}},modal:{position:"absolute",margin:"auto",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:1e3,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),overflow:"scroll"}}})),jo=function(e){var t,a,i,l,o,s,u,b,p,j,v,h,g,f,y,C,w=po(),S=Object(n.useState)({}),k=Object(c.a)(S,2),N=k[0],P=k[1],D=Object(n.useState)({}),I=Object(c.a)(D,2),A=I[0],E=I[1],M=Object(n.useState)(null),R=Object(c.a)(M,2),B=R[0],H=R[1],G=Object(n.useState)(null),L=Object(c.a)(G,2),U=L[0],Q=L[1],V=Object(n.useState)(!1),z=Object(c.a)(V,2),K=z[0],J=z[1],Z=Object(n.useState)(!1),X=Object(c.a)(Z,2),$=X[0],ee=X[1],te=Object(n.useState)(!1),ae=Object(c.a)(te,2),ne=ae[0],ie=ae[1],le=Object(n.useState)(!1),oe=Object(c.a)(le,2),re=oe[0],se=oe[1],de=Object(n.useState)([]),ue=Object(c.a)(de,2),je=ue[0],me=ue[1],ve=Object(n.useState)(!1),he=Object(c.a)(ve,2),Oe=he[0],ge=he[1],xe=Object(n.useState)(-1),fe=Object(c.a)(xe,2),ye=fe[0],_e=fe[1],Ce=Object(n.useState)(!1),we=Object(c.a)(Ce,2),Se=we[0],ke=we[1],Ne=Object(n.useState)(!1),Pe=Object(c.a)(Ne,2),De=Pe[0],Ie=Pe[1],Ae=Object(n.useState)(-1),Te=Object(c.a)(Ae,2),Ee=Te[0],qe=Te[1],Fe=Object(n.useState)(!1),Me=Object(c.a)(Fe,2),Re=Me[0],Be=Me[1],He=Object(n.useState)(!1),Ge=Object(c.a)(He,2),Le=Ge[0],Ue=Ge[1],Qe=Object(n.useState)(!1),Ve=Object(c.a)(Qe,2),ze=Ve[0],We=Ve[1],Ye=Object(n.useState)(!1),Ke=Object(c.a)(Ye,2),Je=Ke[0],Ze=Ke[1],Xe=Object(n.useState)(!1),$e=Object(c.a)(Xe,2),et=$e[0],tt=$e[1],at=Object(n.useState)(!1),it=Object(c.a)(at,2),lt=it[0],rt=it[1],st=Object(n.useState)(""),dt=Object(c.a)(st,2),ut=dt[0],bt=dt[1],pt=Object(n.useState)(""),jt=Object(c.a)(pt,2),mt=jt[0],vt=jt[1],ht=Object(n.useState)(""),Ot=Object(c.a)(ht,2),gt=Ot[0],xt=Ot[1],yt=Object(n.useState)(!1),_t=Object(c.a)(yt,2),Ct=_t[0],wt=_t[1],St=Object(n.useState)(""),kt=Object(c.a)(St,2),Nt=kt[0],Pt=kt[1],Dt=Object(n.useState)(!1),It=Object(c.a)(Dt,2),At=It[0],Tt=It[1],Et=Object(n.useState)({open:!1,message:""}),qt=Object(c.a)(Et,2),Ft=qt[0],Mt=qt[1],Rt=Object(n.useState)(-1),Bt=Object(c.a)(Rt,2),Ht=Bt[0],Gt=Bt[1],Lt=localStorage.getItem("currentUserRole"),Ut=localStorage.getItem("currentUserId");function Qt(){return Vt.apply(this,arguments)}function Vt(){return(Vt=Object(r.a)(d.a.mark((function t(){var a,n,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W({filter:"accountid = ".concat(e.id)});case 2:return a=t.sent,E(a),t.next=6,Y({filter:"accountid = ".concat(e.id)});case 6:return n=t.sent,Q(n),t.next=10,be({filter:"accountid = ".concat(e.id)});case 10:i=t.sent,H(i);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}console.log("users are",je),Object(n.useEffect)((function(){pe({viewaccount:!0,accountid:e.id.toString()}).then((function(e){P(e)})),ce({type:"Accounts",loginuserid:Ut}).then((function(e){me(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;console.log("key");var a=[];return null===e||void 0===e||e.map((function(e){return a.push({label:e[t],value:e.userid||e[t]})})),a}(e,"username"))}))}),[]),Object(n.useEffect)((function(){Qt()}),[]);var Wt,Kt=function(){var t=Object(r.a)(d.a.mark((function t(a){var n,i,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!_.a.isEmpty(null===Nt||void 0===Nt?void 0:Nt.value)){t.next=5;break}return Mt({open:!0,severity:"error",message:"Please select a user to reassign"}),setTimeout((function(){Mt({open:!1,message:""})}),2e3),t.abrupt("return");case 5:return i={accountid:null===(n=e.id)||void 0===n?void 0:n.toString(),userid:null===Nt||void 0===Nt?void 0:Nt.value,loggedinuserid:Ut},Tt(!0),t.next=9,a=i,q.post("".concat(T.apiUrl).concat(F.reassignAccount),a).then((function(e){return e}));case 9:l=t.sent,console.log("Response",l),l&&("Account reassigned successfully",Mt({open:!0,message:"Account reassigned successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),Mt({open:!0,message:t.t0.message,severity:"error"});case 17:return t.prev=17,Tt(!1),t.finish(17);case 20:case"end":return t.stop()}var a}),t,null,[[0,14,17,20]])})));return function(e){return t.apply(this,arguments)}}(),Jt=[{type:"label",value:"Account owner",bold:!0,sm:"6"},{type:"label",value:N.accountowner,sm:"6"},{type:"label",value:"Account type",bold:!0,sm:"6"},{type:"label",value:null===(t=N.accounttypes)||void 0===t||null===(a=t.map((function(e){return e.accounttype})))||void 0===a?void 0:a.join(","),sm:"6"},{type:"label",value:"Phone",bold:!0,sm:"6"},{type:"label",value:N.phone,sm:"6"},{type:"label",value:"Fax",bold:!0,sm:"6"},{type:"label",value:N.fax,sm:"6"},{type:"label",value:"Approx. annual turnover ($) ",bold:!0,sm:"6"},{type:"label",value:N.approxannualrev,sm:"6"}],Zt=[{type:"label",value:"Account name",bold:!0,sm:"6"},{type:"label",value:N.accountname,sm:"6"},{type:"label",value:"Aliases",bold:!0,sm:"6"},{type:"label",value:N.aliases,sm:"6"},{type:"label",value:"Email",bold:!0,sm:"6"},{type:"label",value:N.email,sm:"6"},{type:"label",value:"Website",bold:!0,sm:"6"},{type:"label",value:N.website,sm:"6"},{type:"label",value:"Product segment",bold:!0,sm:"6"},{type:"label",value:null===(i=N.Productsegment)||void 0===i||null===(l=i.map((function(e){return e.productsegment})))||void 0===l?void 0:l.join(","),sm:"6"}],Xt=[{type:"label",value:"Street",bold:!0,sm:"6"},{type:"label",value:N.shippinginformation&&(null===(o=N.shippinginformation[0])||void 0===o?void 0:o.shipping_street),sm:"6"},{type:"label",value:"City",bold:!0,sm:"6"},{type:"label",value:N.shippinginformation&&(null===(s=N.shippinginformation[0])||void 0===s?void 0:s.shipping_city),sm:"6"},{type:"label",value:"Province/State",bold:!0,sm:"6"},{type:"label",value:N.shippinginformation&&(null===(u=N.shippinginformation[0])||void 0===u?void 0:u.shipping_state),sm:"6"},{type:"label",value:"Postal code",bold:!0,sm:"6"},{type:"label",value:N.shippinginformation&&(null===(b=N.shippinginformation[0])||void 0===b?void 0:b.shipping_postalcode),sm:"6"},{type:"label",value:"Country",bold:!0,sm:"6"},{type:"label",value:N.shippinginformation&&(null===(p=N.shippinginformation[0])||void 0===p?void 0:p.shipping_country),sm:"6"}],$t=[{type:"label",value:"Street",bold:!0,sm:"6"},{type:"label",value:N.billinginformation&&(null===(j=N.billinginformation[0])||void 0===j?void 0:j.billing_street),sm:"6"},{type:"label",value:"City",bold:!0,sm:"6"},{type:"label",value:N.billinginformation&&(null===(v=N.billinginformation[0])||void 0===v?void 0:v.billing_city),sm:"6"},{type:"label",value:"Province/State",bold:!0,sm:"6"},{type:"label",value:N.billinginformation&&(null===(h=N.billinginformation[0])||void 0===h?void 0:h.billing_state),sm:"6"},{type:"label",value:"Postal code",bold:!0,sm:"6"},{type:"label",value:N.billinginformation&&(null===(g=N.billinginformation[0])||void 0===g?void 0:g.billing_postalcode),sm:"6"},{type:"label",value:"Country",bold:!0,sm:"6"},{type:"label",value:N.billinginformation&&(null===(f=N.billinginformation[0])||void 0===f?void 0:f.billing_country),sm:"6"}],ea=[{type:"label",value:"Already in instant cofee business?",bold:!0,sm:"6"},{type:"label",value:N.profilesectioninfo&&1===N.profilesectioninfo[0].instcoffee?"Yes":"No",sm:"6"},{type:"label",value:"Coffee type interested in ?",bold:!0,sm:"6"},{type:"label",value:null===(y=N.coffeetypes)||void 0===y||null===(C=y.map((function(e){return e.coffeetype})))||void 0===C?void 0:C.join(","),sm:"6"}],ta=[{type:"label",value:"Do you have instant coffee manufacturing unit?",bold:!0,sm:"6"},{type:"label",value:N.profilesectioninfo&&1===N.profilesectioninfo[0].manfacunit?"Yes":"No",sm:"6"},{type:"label",value:"Other information",bold:!0,sm:"6"},{type:"label",value:N.otherinfo,sm:"6"}],aa=[{type:"label",value:"Shipping to continent",bold:!0,sm:"6"},{type:"label",value:N.shippingtocontinent,sm:"6"},{type:"label",value:"Shipping to country",bold:!0,sm:"6"},{type:"label",value:N.shippingtocountry,sm:"6"}],na=[{label:"Select users to assign",type:"autocomplete",labelprop:"label",required:!0,value:Nt,options:je,onChange:function(e,t){e.preventDefault(),Pt(t)}}];return console.log("User role is",Lt),K?Wt=Object(ot.jsx)(fl,{back:function(){Qt(),J(!1)},accountId:e.id}):$?(console.log("props.id::",e.id),Wt=Object(ot.jsx)(qi,{back:function(){Qt(),ee(!1)},showDetailsSample:function(){ee(!1),ke(!0)},accountId:e.id})):Wt=ne?Object(ot.jsx)(Cl,{back:function(){Qt(),ie(!1)},accountId:e.id}):re?Object(ot.jsx)(Jl,{back:function(){se(!1)},id:ye,editContact:function(e,t){return"edit_billing"===e?(a=t,se(!1),rt(!1),Ze(!1),We(!0),ge(!1),_e(a.contactId),bt(a.accountid),void xt(a.data)):"add_billing"===e?function(e,t){se(!1),rt(!1),We(!1),Ze(!0),ge(!1),_e(t.contactId),bt(t.accountid)}(0,t):"add_shipping"===e?function(e,t){se(!1),rt(!1),We(!1),Ze(!1),tt(!0),ge(!1),_e(t.contactId),bt(t.accountid)}(0,t):"edit_shipping"===e?function(e,t){se(!1),rt(!0),Ze(!1),We(!1),ge(!1),_e(t.contactId),bt(t.accountid),vt(t.data)}(0,t):function(e,t){se(!1),ge(!0),_e(t)}(0,t);var a}}):Oe?Object(ot.jsx)(zl,{back:function(){ge(!1)},id:ye}):Se?Object(ot.jsx)(hl,{back:function(){ke(!1)},id:Ee,editSample:function(e,t){return function(e,t){ke(!1),Ie(!0),qe(t)}(0,t)}}):De?Object(ot.jsx)(Qi,{back:function(){Ie(!1)},id:Ee}):ze?Object(ot.jsx)(ao,{back:function(){We(!1),se(!0)},id:ye,accountId:ut,data:gt}):Je?Object(ot.jsx)(lo,{back:function(){Ze(!1),se(!0)},id:ye,accountId:ut}):lt?Object(ot.jsx)(co,{back:function(){rt(!1),se(!0)},id:ye,accountId:ut,data:mt}):et?Object(ot.jsx)(bo,{back:function(){tt(!1),se(!0)},id:ye,accountId:ut}):Re?Object(ot.jsx)(Gl,{back:function(){Be(!1)},id:Ht,edit:function(e,t){return function(e,t){Ue(!0),Gt(t),Be(!1)}(0,t)}}):Le?Object(ot.jsx)(Ql,{back:function(){Ue(!1)},id:Ht}):Object(ot.jsxs)(ot.Fragment,{children:[Ft.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},Ft),{},{handleClose:function(){return Mt({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(Si,{value:"0",children:[Object(ot.jsxs)(ft.a,{label:"Accounts Information",index:"0",children:[Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Account information"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Jt})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Zt})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsxs)(m.a,{id:"top-row",xs:12,md:6,direction:"column",children:[Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Shipping address"})}),Object(ot.jsx)(tn,{payload:Xt})]}),Object(ot.jsxs)(m.a,{id:"top-row",xs:12,md:6,direction:"column",children:[Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Billing address"})}),Object(ot.jsx)(tn,{payload:$t})]})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Profile completion"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:ea})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:ta})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Shipping information"})})}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:12,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:aa})})}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Edit",onClick:function(){return e.editAccount("edit_account",e.id)}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})}),"Managing Director"===Lt?Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Re-Assign",onClick:function(){return wt(!0)}})}):null]}),Object(ot.jsx)(zt,{open:Ct,handleClose:function(){return wt(!Ct)},body:function(){return Object(ot.jsxs)(x.a,{className:w.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Select user"}),Object(ot.jsx)("h4",{children:"Select user to assign:"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{id:"top-row",xs:6,md:10,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:na})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:At?"Loading...":"Proceed",disabled:At,onClick:Kt})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:function(){return wt(!Ct)}})})]})]})}})]}),Object(ot.jsxs)(ft.a,{label:"Contact Information",index:"1",children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0}),Object(ot.jsx)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:Object(ot.jsx)(Rn,{onClick:function(){J(!0)},label:"Create Contact",variant:"extended"})})]}),Object(ot.jsx)(Pi,{data:A,contactDetails:function(e,t){return function(e,t){se(!0),_e(t)}(0,t)}})]}),Object(ot.jsxs)(ft.a,{label:"Sample Request Information",index:"2",children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0}),Object(ot.jsx)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:Object(ot.jsx)(Rn,{label:"Request Sample",onClick:function(){ee(!0)},variant:"extended"})})]}),Object(ot.jsx)(Ai,{data:B,sampleDetails:function(e,t){return function(e,t){ke(!0),qe(t)}(0,t)}})]}),Object(ot.jsxs)(ft.a,{label:"Quote Information",index:"3",children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0}),Object(ot.jsx)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:Object(ot.jsx)(Rn,{label:"Create Quote",onClick:function(){ie(!0)},variant:"extended"})})]}),Object(ot.jsx)($l,{data:U,quoteDetails:function(e,t,a){return function(e,t,a){Be(!0),Gt(t)}(0,t)}})]})]})]}),Object(ot.jsx)(ot.Fragment,{children:Wt})},mo=Object(g.a)((function(e){return{root:{paddingTop:e.spacing(3),minWidth:"100%"},formControl:{margin:e.spacing(1),marginTop:e.spacing(2),minWidth:120}}})),vo=function(){var e=(0,Jt().getCurrentUserDetails)(),t=null===e||void 0===e?void 0:e.role,a=null===e||void 0===e?void 0:e.id,l=i.a.useState(t===Kt.managingDirector?"all":"myaccounts"),o=Object(c.a)(l,2),s=o[0],u=o[1],b=mo(),p=Object(n.useState)(null),j=Object(c.a)(p,2),v=j[0],h=j[1],O=Object(n.useState)(!1),g=Object(c.a)(O,2),f=g[0],y=g[1],C=Object(n.useState)(!1),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)(-1),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)(""),T=Object(c.a)(A,2),E=T[0],q=T[1],F=Object(n.useState)(!1),M=Object(c.a)(F,2),R=M[0],B=M[1],H=function(){var e=Object(r.a)(d.a.mark((function e(n,i){var l,o,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l="",t===Kt.managingDirector&&"myaccounts"!==i||(l+="createdbyuserid = '".concat(a,"'")),"all"!==i&&"myaccounts"!==i&&(_.a.isEmpty(l)||(l+=" AND "),l+=" masterstatus = '".concat(i,"'")),_.a.isEmpty(n)||(_.a.isEmpty(l)||(l+=" AND "),l+="".concat(n)),o={filter:l,loggedinuserid:a},e.next=7,z(o);case 7:r=e.sent,h(r);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){H(E,s)}),[E,s]),Object(n.useEffect)((function(){H("","all")}),[f,S]);var G;return G=f?Object(ot.jsx)(jo,{back:function(){y(!1)},id:D,editAccount:function(e,t){return function(e,t){y(!1),k(!0),I(t)}(0,t)}}):S?Object(ot.jsx)(fi,{back:function(){k(!1)},id:D}):Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0,children:Object(ot.jsxs)(Da.a,{variant:"outlined",className:b.formControl,children:[Object(ot.jsx)(Ia.a,{htmlFor:"outlined-age-native-simple",children:"View"}),Object(ot.jsxs)(Aa.a,{native:!0,value:s,onChange:function(e){u(e.target.value),q(null)},label:"View",inputProps:{name:"view",id:"outlined-view-native-simple"},children:[t===Kt.managingDirector?Object(ot.jsx)("option",{"aria-label":"None",value:"all",children:"All Accounts"}):null,Object(ot.jsx)("option",{value:"myaccounts",children:"My Accounts"}),Object(ot.jsx)("option",{value:"Pending Approval",children:"Pending Approval"})]})]})}),Object(ot.jsx)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:null!==v&&Object(ot.jsx)(pi,{onClick:function(){B(!0)},label:"Export to excel"})})]}),!0===R&&Object(ot.jsx)(ui,{tableData:v,tableName:"Accounts"}),Object(ot.jsx)(Oi,{selectedAdvancedFilters:function(e){return q(e)},clearAdvancedFilters:function(){return q("")},data:v,accountDetails:function(e,t){return function(e,t){y(!0),I(t)}(0,t)}})]}),Object(ot.jsx)(x.a,{className:b.root,children:G})},ho=[{id:"accountname",label:"Account Name"},{id:"contactfirstname",label:"First Name"},{id:"contactlastname",label:"Last Name"},{id:"contactemail",label:"Email"},{id:"contactphone",label:"Phone"}];var Oo=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440},sortHeader:{cursor:"pointer"}}),go=function(e){var t=Oo(),a=i.a.useState(0),l=Object(c.a)(a,2),o=l[0],r=l[1],s=i.a.useState(10),d=Object(c.a)(s,2),u=d[0],b=d[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),m=j[0],v=j[1],h=i.a.useState("asc"),O=Object(c.a)(h,2),g=O[0],x=O[1],f=i.a.useState(""),y=Object(c.a)(f,2),_=y[0],C=y[1],w=[];function S(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}i.a.useEffect((function(){e.data&&e.data.map((function(e){var t,a,n,i,l,o;w.push((t=e.accountname,a=e.contactfirstname,n=e.contactlastname,i=e.contactemail,l=e.contactphone,o=e.contactid,{accountname:t,contactfirstname:a,contactlastname:n,contactemail:i,contactphone:l,contactid:o}))})),v(w)}),[e.data]);return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(Un,{classes:t,order:g,orderBy:_,onRequestSort:function(e,t){x(_===t&&"asc"===g?"desc":"asc"),C(t)},rowCount:m.length,headCells:ho,selectedAdvancedFilters:e.selectedAdvancedFilters,clearAdvancedFilters:e.clearAdvancedFilters}),Object(ot.jsx)(dn.a,{children:m.length>0?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(m,function(e,t){return"desc"===e?function(e,a){return S(e,a,t)}:function(e,a){return-S(e,a,t)}}(g,_)).slice(o*u,o*u+u).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:ho.map((function(a){var n=t[a.id];return Object(ot.jsx)(un.a,{align:a.align,children:"contactfirstname"===a.id?Object(ot.jsx)("a",{href:"#",onClick:function(a){var n;n=t.contactid,console.log(n),e.contactDetails("view_contact",n)},children:n}):n},a.id)}))},a)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:m.length,rowsPerPage:u,page:o,onChangePage:function(e,t){r(t)},onChangeRowsPerPage:function(e){b(+e.target.value),r(0)}})]})},xo=Object(g.a)((function(e){return{root:{paddingTop:e.spacing(3),minWidth:"100%"},formControl:{margin:e.spacing(1),marginTop:e.spacing(2),minWidth:120}}})),fo=function(e){var t=(0,Jt().getCurrentUserDetails)(),a=null===t||void 0===t?void 0:t.role,l=null===t||void 0===t?void 0:t.id,o=i.a.useState(a===Kt.managingDirector?"All Contacts":"My Contacts"),s=Object(c.a)(o,2),u=s[0],b=s[1],p=xo(),j=Object(n.useState)(null),v=Object(c.a)(j,2),h=v[0],O=v[1],g=Object(n.useState)(!1),f=Object(c.a)(g,2),y=f[0],C=f[1],w=Object(n.useState)(!1),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)(-1),D=Object(c.a)(P,2),I=D[0],A=D[1],T=Object(n.useState)(!1),E=Object(c.a)(T,2),q=E[0],F=E[1],M=Object(n.useState)(!1),R=Object(c.a)(M,2),B=R[0],H=R[1],G=Object(n.useState)(!1),L=Object(c.a)(G,2),U=L[0],Q=L[1],V=Object(n.useState)(!1),z=Object(c.a)(V,2),Y=z[0],K=z[1],J=Object(n.useState)(!1),Z=Object(c.a)(J,2),X=Z[0],$=Z[1],ee=Object(n.useState)(""),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],ie=Object(n.useState)(""),le=Object(c.a)(ie,2),oe=le[0],re=le[1],ce=Object(n.useState)(""),se=Object(c.a)(ce,2),de=se[0],ue=se[1],be=Object(n.useState)(""),pe=Object(c.a)(be,2),je=pe[0],me=pe[1],ve=function(){var e=Object(r.a)(d.a.mark((function e(t,n){var i,o,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="",a===Kt.managingDirector&&"My Contacts"!==n||(i+="createdbyuserid = '".concat(l,"'")),"All Contacts"!==n&&"My Contacts"!==n&&(_.a.isEmpty(i)||(i+=" AND "),i+=" status = '".concat(n,"'")),_.a.isEmpty(t)||(_.a.isEmpty(i)||(i+=" AND "),i+="".concat(t)),console.log("Filter string is",i),o={filter:i,loggedinuserid:l},e.next=8,W(o);case 8:r=e.sent,O(r);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){ve(je,u)}),[je,u]);var he;if(y)he=Object(ot.jsx)(Jl,{back:function(){C(!1)},id:I,editContact:function(e,t){return"edit_billing"===e?(a=t,C(!1),$(!1),Q(!1),H(!0),N(!1),A(a.contactId),ne(a.accountid),void ue(a.data)):"add_billing"===e?function(e,t){C(!1),$(!1),H(!1),Q(!0),N(!1),A(t.contactId),ne(t.accountid)}(0,t):"add_shipping"===e?function(e,t){C(!1),$(!1),H(!1),Q(!1),K(!0),N(!1),A(t.contactId),ne(t.accountid)}(0,t):"edit_shipping"===e?function(e,t){C(!1),$(!0),Q(!1),H(!1),N(!1),A(t.contactId),ne(t.accountid),re(t.data)}(0,t):function(e,t){C(!1),N(!0),A(t)}(0,t);var a}});else if(k)he=Object(ot.jsx)(zl,{back:function(){N(!1)},id:I});else if(B)he=Object(ot.jsx)(ao,{back:function(){C(!0),H(!1)},id:I,accountId:ae,data:de});else if(U)he=Object(ot.jsx)(lo,{back:function(){C(!0),Q(!1)},id:I,accountId:ae});else if(X)he=Object(ot.jsx)(co,{back:function(){C(!0),$(!1)},id:I,accountId:ae,data:oe});else{if(!Y)return Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0,children:Object(ot.jsxs)(Da.a,{variant:"outlined",className:p.formControl,children:[Object(ot.jsx)(Ia.a,{htmlFor:"outlined-age-native-simple",children:"View"}),Object(ot.jsxs)(Aa.a,{native:!0,value:u,onChange:function(e){b(e.target.value),me(null)},label:"View",inputProps:{name:"view",id:"outlined-view-native-simple"},children:[a===Kt.managingDirector?Object(ot.jsx)("option",{value:"All Contacts",children:"All contacts"}):null,Object(ot.jsx)("option",{value:"My Contacts",children:"My contacts"})]})]})}),Object(ot.jsx)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:null!==h&&Object(ot.jsx)(pi,{onClick:function(){F(!0)},label:"Export to excel"})})]}),!0===q&&Object(ot.jsx)(ui,{tableData:h,tableName:"Contacts"}),Object(ot.jsx)(go,{selectedAdvancedFilters:function(e){me(e)},clearAdvancedFilters:function(){return me("")},data:h,contactDetails:function(e,t){return function(e,t){C(!0),A(t)}(0,t)}})]});he=Object(ot.jsx)(bo,{back:function(){C(!0),K(!1)},id:I,accountId:ae})}return Object(ot.jsx)(x.a,{className:p.root,children:he})},yo=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column","& #top-row":{marginTop:10,marginBottom:5}}}})),_o=function(e){var t=e?new Date(e):new Date;return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},Co=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},wo=function(e){var t=(0,Jt().getCurrentUserDetails)(),a=null===t||void 0===t?void 0:t.role,i=null===t||void 0===t?void 0:t.id,l=yo(),o=Object(n.useState)({}),s=Object(c.a)(o,2),u=s[0],b=s[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),v=j[0],h=j[1],g=Object(n.useState)([]),x=Object(c.a)(g,2),f=x[0],y=x[1],C=Object(n.useState)({open:!1,message:"",severity:""}),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)(!1),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)([]),T=Object(c.a)(A,2),E=T[0],q=T[1];function F(){return F=Object(r.a)(d.a.mark((function e(){var t=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.length>0&&void 0!==t[0]?t[0]:{},de(a!==Kt.managingDirector?{type:"accountdetailsforsamplerequest",createdbyuserid:i}:{type:"accountdetailsforsamplerequest"}).then((function(e){h(null!==e?e:[])}));case 3:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}Object(n.useEffect)((function(){!function(){F.apply(this,arguments)}()}),[]);var M=function(){var e=Object(r.a)(d.a.mark((function e(t,a){var n,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=4;break}return e.abrupt("return");case 4:de({type:"shippingaddressoncontacts",account_id:null===u||void 0===u||null===(n=u.account)||void 0===n||null===(i=n.account_id)||void 0===i?void 0:i.toString(),contact_id:null===a||void 0===a||null===(l=a.contact_id)||void 0===l?void 0:l.toString()}).then((function(e){var t=[],n=[];null===e||void 0===e||e.map((function(e){var a;return null===e||void 0===e||null===(a=e.shipping_address)||void 0===a?void 0:a.map((function(e){return t.push(e),n.push(e),null}))})),q(n);var i=_.a.cloneDeep(u);i.address=(null===t||void 0===t?void 0:t.find((function(e){return null===e||void 0===e?void 0:e.primary_address})))||(null===t||void 0===t?void 0:t[0]),i.contact=a,i.contact_id=null===a||void 0===a?void 0:a.contact_id,b(i)}));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(r.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=4;break}return e.abrupt("return");case 4:y(null===a.contact_details?[]:a.contact_details),b(Object(nt.a)(Object(nt.a)({},u),{},{account:a,contact:"",contactList:a.contact_details}));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),B=[{label:"Record type",type:"input",disabled:!0,value:"CCL"},{label:"Account name",type:"autocomplete",labelprop:"account_name",value:u.account,options:v||[],onChange:R},{label:"Created date",type:"input",disabled:!0,value:_o(u.creationDate)||_o("")},{label:"Contact name",type:"autocomplete",labelprop:"contact_name",value:u.contact,options:f||[],onChange:M},{label:"Shipping address",type:"autocomplete",labelprop:"address",options:null!==E?E:[],value:u.address||"",onChange:function(e,t){t&&b(Object(nt.a)(Object(nt.a)({},u),{},{address:t}))}},{label:"Remarks",type:"input",multiline:!0,rows:3,value:u.remarks||"",onChange:function(e){return function(e,t){e.preventDefault();var a=e.target.value;b(Object(nt.a)(Object(nt.a)({},u),{},Object(Ot.a)({},t,a)))}(e,"remarks")}}],H=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,l,o,r,c,s,b,p,j,m;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:I(!0),console.log("sample::",u),console.log("Account names are",v),console.log("Contact Name are",f),console.log("all shippin",E),l=null===(a=v.find((function(e){var t,a;return(null===e||void 0===e?void 0:e.account_id)===(null===u||void 0===u||null===(t=u.account)||void 0===t||null===(a=t.account_id)||void 0===a?void 0:a.toString())})))||void 0===a?void 0:a.account_name,o=null===(n=f.find((function(e){var t;return(null===e||void 0===e?void 0:e.contact_id)===(null===u||void 0===u||null===(t=u.contact_id)||void 0===t?void 0:t.toString())})))||void 0===n?void 0:n.contact_name,r=null===(i=E.find((function(e){var t;return(null===e||void 0===e?void 0:e.shipping_id)===(null===u||void 0===u||null===(t=u.address)||void 0===t?void 0:t.shipping_id)})))||void 0===i?void 0:i.address,c=" Sample Request from ".concat(l),s=" A new sample is requested: \n Account Name: ".concat(l," \n Contact Name: ").concat(o," \n Shipping Address: ").concat(r,". \n Sample Requested by ").concat(localStorage.getItem("currentUserName")," on ").concat(Co()," "),b=0,p=["pkonidena@dignosolutions.com","shilpa.a@continental.coffee"];case 11:if(!(b<p.length)){t.next=28;break}return j=p[b],m={to_email:j,subject:c,message:s},t.prev=14,t.next=17,tt("https://c30j81s4jj.execute-api.ap-south-1.amazonaws.com/dev/",m);case 17:t.sent&&(k({open:!0,message:"Sample requested successfully"}),setTimeout((function(){I(!1),e.back()}),2e3)),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(14),I(!1),k({open:!0,message:t.t0.message,severity:"error"});case 25:b++,t.next=11;break;case 28:case"end":return t.stop()}}),t,null,[[14,21]])})));return function(){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:l.root,noValidate:!0,autoComplete:"off",children:[S.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},S),{},{handleClose:function(){return k({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Sample request information"})})}),Object(ot.jsx)(tn,{payload:B}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:D,label:D?"Loading ...":"Request Sample",onClick:H})})]})]})},So=Object(g.a)((function(e){return{root:{paddingTop:e.spacing(3),minWidth:"100%"},formControl:{margin:e.spacing(1),marginTop:e.spacing(2),minWidth:120}}})),ko=[{label:"All sample requests",value:"all"},{label:"My sample requests",value:"mysamples"},{label:"New sample requests",value:"New"},{label:"Pending with QC sample requests",value:"Pending with QC"},{label:"Dispatched to HO sample requests",value:"Samples Dispatched to HO"},{label:"Dispatched to customer sample requests",value:"Samples Dispatched to Customer"},{label:"Approved sample requests",value:"Approved"}],No=function(e){var t=(0,Jt().getCurrentUserDetails)(),a=null===t||void 0===t?void 0:t.role,l=null===t||void 0===t?void 0:t.id,o=i.a.useState(a===Kt.managingDirector?"all":"mysamples"),s=Object(c.a)(o,2),u=s[0],b=s[1],p=Object(n.useState)(""),j=Object(c.a)(p,2),v=j[0],h=j[1],O=So(),g=Object(n.useState)(null),f=Object(c.a)(g,2),y=f[0],C=f[1],w=Object(n.useState)(!1),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)(!1),D=Object(c.a)(P,2),I=D[0],A=D[1],T=Object(n.useState)(!1),E=Object(c.a)(T,2),q=E[0],F=E[1],M=Object(n.useState)(!1),R=Object(c.a)(M,2),B=R[0],H=R[1],G=Object(n.useState)(-1),L=Object(c.a)(G,2),U=L[0],Q=L[1],V=function(){var e=Object(r.a)(d.a.mark((function e(t,n){var i,o,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="",a===Kt.managingDirector&&"mysamples"!==n||(i+="createdbyuserid = '".concat(l,"'")),"all"!==n&&"mysamples"!==n&&(console.log("Filter ",i),_.a.isEmpty(i)||(i+=" AND "),i+=" status = '".concat(n,"'")),_.a.isEmpty(t)||(_.a.isEmpty(i)||(i+=" AND "),i+="".concat(t)),console.log("Filter string is",i),o={filter:i,loggedinuserid:l},e.next=8,be(o);case 8:r=e.sent,C(r);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){console.log("Came inside this"),q&&I||V(v,u)}),[u,v,q,I]);var z,W=function(){var e=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h("");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(k)z=Object(ot.jsx)(hl,{back:function(){N(!1)},id:U,editSample:function(e,t){return function(e,t){N(!1),F(!1),A(!0),Q(t)}(0,t)}});else if(I)z=Object(ot.jsx)(Qi,{back:function(){A(!1),N(!1)},id:U});else{if(!q)return Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0,children:Object(ot.jsxs)(Da.a,{variant:"outlined",className:O.formControl,children:[Object(ot.jsx)(Ia.a,{htmlFor:"outlined-age-native-simple",children:"View"}),Object(ot.jsx)(Aa.a,{native:!0,value:u,onChange:function(e){b(e.target.value),h("")},label:"View",inputProps:{name:"view",id:"outlined-view-native-simple"},children:ko.map((function(e,t){return"all"===(null===e||void 0===e?void 0:e.value)&&a!==Kt.managingDirector?null:Object(ot.jsx)("option",{value:e.value,children:e.label})}))})]})}),Object(ot.jsxs)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:[null!==y&&Object(ot.jsx)(pi,{onClick:function(){H(!0)},label:"Export to excel"}),Object(ot.jsx)(Rn,{onClick:function(){return F(!0)},label:"Sample Request",variant:"extended"})]})]}),!0===B&&Object(ot.jsx)(ui,{tableData:y,tableName:"Sample Request"}),Object(ot.jsx)(Ai,{selectedAdvancedFilters:function(e){return h(e)},clearAdvancedFilters:W,data:y,sampleDetails:function(e,t){return function(e,t){N(!0),Q(t)}(0,t)}})]});z=Object(ot.jsx)(wo,{back:function(){F(!1)},CreatedSample:function(){N(!0),F(!1),A(!1)}})}return Object(ot.jsx)(x.a,{className:O.root,children:z})};Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),Object(g.a)((function(e){return{root:{paddingTop:e.spacing(3),minWidth:"100%"},formControl:{margin:e.spacing(1),marginTop:e.spacing(2),minWidth:120},modal:{position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",margin:"auto",top:"50%",right:"50%",transform:"translate(50%, -50%)",width:500,backgroundColor:e.palette.background.paper,border:"1px solid #fefefe",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var Po=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .page-header":{width:"100%",marginBottom:15},"& .MuiAccordion-root":{width:"100%"},"& .dispatchTable":{maxHeight:"400px",overflowY:"auto"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"},modal:{position:"absolute",margin:"auto",top:"25%",left:"25%",width:700,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},otherModal:{marginTop:"8px",marginBottom:"8px"}}})),Do=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return e.map((function(e){return n.push({label:e[t],value:e[a]||e[t]})})),n},Io=function(e){var t,a=["Invoice","Packing List","Bill of Lading","Phytosanitory Certificate","Fumigation Certificate","Certificate of Origin","ICO Certificate of Origin","Weight Certificate","Quality Certificate","Inspection and Stuffing Certificate","Bill of Entry","Dispatch Note"],i=Po(),l=Object(n.useState)({}),o=Object(c.a)(l,2),s=o[0],u=o[1],b=Object(n.useState)({}),p=Object(c.a)(b,2),j=p[0],v=p[1],h=Object(n.useState)(null),g=Object(c.a)(h,2),f=g[0],y=g[1],C=Object(n.useState)(null),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)(!0),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)(!1),T=Object(c.a)(A,2),E=T[0],q=T[1],F=Object(n.useState)(null),M=Object(c.a)(F,2),R=M[0],B=M[1],H=Object(n.useState)([]),G=Object(c.a)(H,2),L=G[0],U=G[1],Q=Object(n.useState)([]),V=Object(c.a)(Q,2),z=V[0],W=V[1],Y=Object(n.useState)([]),K=Object(c.a)(Y,2),J=K[0],Z=K[1],X=Object(n.useState)([]),$=Object(c.a)(X,2),ee=$[0],te=$[1],ae=Object(n.useState)([]),ne=Object(c.a)(ae,2),ie=ne[0],le=ne[1],oe=Object(n.useState)([]),re=Object(c.a)(oe,2),ce=re[0],se=re[1],ue=Object(n.useState)([]),be=Object(c.a)(ue,2),pe=be[0],je=be[1],me=Object(n.useState)([]),ve=Object(c.a)(me,2),he=ve[0],Oe=ve[1],ge=Object(n.useState)([]),ye=Object(c.a)(ge,2),Ce=ye[0],we=ye[1],Pe=Object(n.useState)([]),De=Object(c.a)(Pe,2),Ie=De[0],Ae=De[1],Te=Object(n.useState)([]),Ee=Object(c.a)(Te,2),qe=Ee[0],Re=Ee[1],Be=Object(n.useState)([]),He=Object(c.a)(Be,2),Ge=He[0],Le=He[1],Ue=Object(n.useState)([]),Qe=Object(c.a)(Ue,2),Ve=Qe[0],ze=Qe[1],We=Object(n.useState)([]),Ye=Object(c.a)(We,2),Ke=Ye[0],Je=Ye[1],Ze=Object(n.useState)([]),Xe=Object(c.a)(Ze,2),$e=Xe[0],et=Xe[1],tt=Object(n.useState)([]),at=Object(c.a)(tt,2),it=at[0],lt=at[1],rt=Object(n.useState)([]),st=Object(c.a)(rt,2),dt=st[0],ut=st[1],bt=Object(n.useState)(""),pt=Object(c.a)(bt,2),jt=pt[0],mt=pt[1],vt=Object(n.useState)([]),ht=Object(c.a)(vt,2),gt=ht[0],xt=ht[1],ft=Object(n.useState)([]),yt=Object(c.a)(ft,2),_t=yt[0],Ct=yt[1],wt=Object(n.useState)([]),St=Object(c.a)(wt,2),kt=St[0],Nt=St[1],Pt=Object(n.useState)([]),Dt=Object(c.a)(Pt,2),It=Dt[0],At=Dt[1],Tt=Object(n.useState)([]),Et=Object(c.a)(Tt,2),qt=Et[0],Ft=Et[1],Mt=Object(n.useState)([]),Rt=Object(c.a)(Mt,2),Bt=Rt[0],Ht=Rt[1],Gt=Object(n.useState)([]),Lt=Object(c.a)(Gt,2),Ut=Lt[0],Qt=Lt[1],Vt=Object(n.useState)(!1),Wt=Object(c.a)(Vt,2),Kt=Wt[0],Zt=Wt[1],Xt=Object(n.useState)(!0),$t=Object(c.a)(Xt,2),ea=$t[0],ta=$t[1],aa=Object(n.useState)(!1),na=Object(c.a)(aa,2),ia=na[0],la=na[1],oa=Object(n.useState)(!1),ra=Object(c.a)(oa,2),ca=ra[0],sa=ra[1],da=Object(n.useState)(!1),ua=Object(c.a)(da,2),ba=ua[0],pa=ua[1],ja=Object(n.useState)(!1),ma=Object(c.a)(ja,2),va=ma[0],ha=ma[1],Oa=Object(n.useState)(!1),ga=Object(c.a)(Oa,2),xa=ga[0],fa=ga[1],ya=Object(n.useState)([]),_a=Object(c.a)(ya,2),Ca=_a[0],wa=_a[1],Sa=Object(n.useState)("0"),ka=Object(c.a)(Sa,2),Na=ka[0],Pa=ka[1],Da=Object(n.useState)("0"),Ia=Object(c.a)(Da,2),Aa=Ia[0],Ta=Ia[1],Ea=Object(n.useState)(!1),qa=Object(c.a)(Ea,2),Fa=qa[0],Ma=qa[1],Ra=Object(n.useState)([]),Ba=Object(c.a)(Ra,2),Ha=Ba[0],Ga=Ba[1],La=Object(n.useState)({}),Ua=Object(c.a)(La,2),Qa=Ua[0],Va=Ua[1],za=Object(n.useState)(a.map((function(e){return{doc_kind:e,required:!1}}))),Wa=Object(c.a)(za,2),Ya=Wa[0],Ka=Wa[1],Ja=Object(n.useState)({open:!1,message:"",severity:""}),Za=Object(c.a)(Ja,2),Xa=Za[0],$a=Za[1],en=Object(n.useState)("Please check and give mandatory fields to save"),an=Object(c.a)(en,2),rn=an[0],sn=an[1],dn=Object(n.useState)(!1),un=Object(c.a)(dn,2),bn=un[0],pn=un[1],jn=Jt().getCurrentUserDetails;Object(n.useEffect)((function(){xe({type:"posubcategory"}).then((function(e){Z(Do(e,"supplier_type_name","supplier_type_id"))})),de({type:"currencies"}).then((function(e){ut(Do(e,"currencyname","currencyid"));var t={};e.forEach((function(e,a){t[e.currencyid]=e.currencycode})),wa(t)})),fe({type:"containerTypes"}).then((function(e){return xt(Do(e,"conttype_name","conttype_name"))})),W(Do([{category:"GC",id:"GC"},{category:"ORM",id:"ORM"}],"category","id")),xe({type:"deliveryinfo"}).then((function(e){Re(e),ze(Do(e,"delivery_at_name","delivery_at_id"))})),xe({type:"billinginfo"}).then((function(e){Ae(e),Le(Do(e,"billing_at_name","billing_at_id"))})),te(Do([{advance:"Percentage",id:101},{advance:"Amount",id:102}],"advance","id")),Fe({type:"portLoadingDetails"}).then((function(e){Nt(Do(e,"Ports","Ports"))})),Fe({type:"originDetails"}).then((function(e){At(Do(e,"origin","origin"))})),Ft(Do([{id:"packing_forward_charges",label:"Packaging & Forwarding"},{id:"installation_charges",label:"Installation"},{id:"freight_charges",label:"Freight"},{id:"handling_charges",label:"Handling"},{id:"misc_charges",label:"Miscellaneous"},{id:"hamali_charges",label:"Hamali"},{id:"mandifee_charges",label:"Mandi Fee"},{id:"fulltax_charges",label:"Full Tax(Form Nill)"},{id:"insurance_charges",label:"Insurance"}],"label","id")),Ht(Do([{id:"By Sea",label:"By Sea"},{id:"By Air",label:"By Air"},{id:"By Road",label:"By Road"}],"label","id")),Qt(Do([{id:"By Supplier",label:"By Supplier"},{id:"By Self",label:"By Self"}],"label","id")),et(Do([{id:"Single",label:"Single"},{id:"Multiple",label:"Multiple"}],"label","id")),we(Do([{id:"Fixed",label:"Fixed"},{id:"Differential",label:"Differential"}],"label","id")),de({type:"incoterms"}).then((function(e){return Ct(Do(e,"incoterms","incotermsid"))}))}),[]);var mn=function(e,t){var a=Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({},t,e.target.value));u(a)},vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];null===e||void 0===e||e.forEach((function(e){e.po_createddt=e.po_createddt?wn(e.po_createddt):"",e.price=e.price?parseFloat(e.price).toFixed(2):""}))},hn=function(){var e=Object(r.a)(d.a.mark((function e(t,a){var n,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=5;break}return y(null),n=Object(nt.a)(Object(nt.a)({},s),{},{supplierName:"",supplierId:"",supplierAddress:""}),u(n),e.abrupt("return");case 5:y(a),k(null),i=Object(nt.a)(Object(nt.a)({},s),{},{gcType:"",gcCompositions:[],quotation:"",quotationDate:null}),Zt(!1),sa(!1),pa(!1),ha(!1),xe({type:"supplierinfo",supplier_id:a.supplier_id}).then((function(e){var t=Object(nt.a)(Object(nt.a)({},i),{},{supplierName:e.supplier_name,supplierId:e.supplier_id,supplierAddress:e.supplier_address,currency:"Domestic"===e.supplier_type?"HO-101":""});u(t),ke({type:"top3apprPosforselectedvendor",vendor_id:a.supplier_id,gcitem_id:""}).then((function(e){vn(e),se(e)}))}));case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),On=function(e,t){var a={};if("billingAt"===t){var n,i=Ie.find((function(t){return t.billing_at_id===e.target.value}));a=Object(nt.a)(Object(nt.a)({},s),{},(n={},Object(Ot.a)(n,t,e.target.value),Object(Ot.a)(n,"billingAddress",i.billing_at_address),n))}else if("deliveryAt"===t){var l,o=qe.find((function(t){return t.delivery_at_id===e.target.value}));a=Object(nt.a)(Object(nt.a)({},s),{},(l={},Object(Ot.a)(l,t,e.target.value),Object(Ot.a)(l,"deliveryAddress",o.delivery_at_address),l))}u(a)},xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{composition_name:"Density(Gm/Cc)",composition_rate:e.density},{composition_name:"Moisture (%)",composition_rate:e.moisture},{composition_name:"Browns (%)",composition_rate:e.browns},{composition_name:"Blacks (%)",composition_rate:e.blacks},{composition_name:"Broken & Bits (%)",composition_rate:e.brokenbits},{composition_name:"Insected Beans (%)",composition_rate:e.insectedbeans},{composition_name:"Bleached (%)",composition_rate:e.bleached},{composition_name:"Husk (%)",composition_rate:e.husk},{composition_name:"Sticks (%)",composition_rate:e.sticks},{composition_name:"Stones (%)",composition_rate:e.stones},{composition_name:"Beans retained on 5mm mesh during sieve analysis",composition_rate:e.beansretained}]},fn=function(e,t){var a=Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({},t,e));u(a)},yn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=t.reduce((function(e,t){return e+=parseFloat(t.rate||0)}),0),n=parseFloat(e.purchasePriceInr||0)*parseFloat(e.qty||0),i=parseFloat(e.cgst||0)+parseFloat(e.sgst||0)+parseFloat(e.igst||0),l=n+n*i/100;return l+parseFloat(a)},_n=function(e,t){var a=yn(Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({},t,e.target.value)),Ha),n=Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({totalPrice:a},t,e.target.value));u(n)},Cn=function(e,t){var a=yn(s,t),n=Object(nt.a)(Object(nt.a)({},s),{},{totalPrice:"1002"===s.type?a:parseFloat(void 0===s.purchasePrice?0:s.purchasePrice)*parseFloat(s.qty/1e3)+(e?parseFloat(e):0)});u(n)},wn=function(e){var t=new Date(e);return t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear()},Sn=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},kn=[{label:"PO date",type:"datePicker",required:!0,error:null===j||void 0===j?void 0:j.poDate,helperText:null===j||void 0===j?void 0:j.poDate,value:s.poDate?s.poDate:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}(),onChange:function(e){return fn(e,"poDate")},sm:12},{label:"PO category *",type:"select",value:s.category||"",required:!0,disabled:ea,error:null===j||void 0===j?void 0:j.category,helperText:null===j||void 0===j?void 0:j.category,options:z||[],onChange:function(e){return function(e,t){if(xe({type:"greencoffee",item_type:e.target.value,po_subcategory:"1002"===s.type?"Domestic":"Import"}).then((function(e){le(null===e?[]:e)})),void 0!==s.gcType&&""!==s.gcType)return mt(e.target.value),void fa(!0);var a,n={};n="ORM"===e.target.value?Object(nt.a)(Object(nt.a)({},s),{},(a={},Object(Ot.a)(a,t,e.target.value),Object(Ot.a)(a,"bookedTerminalRate",s.purchasePrice),Object(Ot.a)(a,"bookedDifferential",0),Object(Ot.a)(a,"fixedTerminalRate",s.purchasePrice),Object(Ot.a)(a,"fixedDifferential",0),a)):Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({},t,e.target.value)),u(n)}(e,"category")},sm:12}],Nn=[{label:"PO sub category *",type:"select",required:!0,error:null===j||void 0===j?void 0:j.type,helperText:null===j||void 0===j?void 0:j.type,value:s.type||"",options:J||[],onChange:function(e){return function(e,t){var a;xe({type:"greencoffee",item_type:s.category,po_subcategory:"1002"===e.target.value?"Domestic":"Import"}).then((function(e){le(null===e?[]:e)}));var n=(a={},Object(Ot.a)(a,t,e.target.value),Object(Ot.a)(a,"currency","1002"===e.target.value?"HO-101":""),Object(Ot.a)(a,"importCurrency","1001"===e.target.value?"HO-102":""),a);u(n),k(null),Zt(!1),sa(!1),pa(!1),ha(!1),xe({type:"allsuppliers",supplier_type_id:e.target.value}).then((function(e){e&&U(e)})),y(null),ta(!1),I(!1),"1001"===e.target.value?la(!0):la(!1)}(e,"type")},sm:12}],Pn=[{label:"Contract no",type:"input",value:s.contract,onChange:function(e){return mn(e,"contract")},sm:12}],Dn=[{label:"Supplier",type:"autocomplete",value:f,labelprop:"supplier_name",options:L||[],disabled:D,onChange:hn},{label:"Supplier id",type:"input",disabled:!0,required:!0,error:null===j||void 0===j?void 0:j.supplierId,helperText:null===j||void 0===j?void 0:j.supplierId,value:s.supplierId||""},{label:"Supplier name",type:"input",disabled:!0,value:s.supplierName||""},{label:"Supplier address",type:"input",disabled:!0,rows:3,multiline:!0,value:s.supplierAddress||""}],In=[{label:"Currency",type:"autocomplete",labelprop:"label",options:dt||[],value:s.currency||"",onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},s),{},{currency:t});u(a)}},{label:"Advance type",type:"select",value:s.advanceType||"",options:ee||[],onChange:function(e){return mn(e,"advanceType")}},{label:"Advance",type:"float",required:!0,error:null===j||void 0===j?void 0:j.advance,helperText:null===j||void 0===j?void 0:j.advance,value:s.advance||"",onChange:function(e){return mn(e,"advance")}},{label:"NO of days IOM can be generated from date of invoice",type:"number",required:!0,error:null===j||void 0===j?void 0:j.iom,helperText:null===j||void 0===j?void 0:j.iom,value:s.iom||"",onChange:function(e){return mn(e,"iom")}}],An=[{label:"Billing at *",type:"select",value:s.billingAt||"",options:Ge||[],required:!0,error:null===j||void 0===j?void 0:j.billingAt,helperText:null===j||void 0===j?void 0:j.billingAt,onChange:function(e){return On(e,"billingAt")}},{label:"Delivery at *",type:"select",value:s.deliveryAt||"",options:Ve||[],required:!0,error:null===j||void 0===j?void 0:j.deliveryAt,helperText:null===j||void 0===j?void 0:j.deliveryAt,onChange:function(e){return On(e,"deliveryAt")}},{label:"Billing address",type:"input",rows:4,multiline:!0,value:s.billingAddress||"",onChange:function(e){return mn(e,"billingAddress")}},{label:"Delivery address",type:"input",rows:4,multiline:!0,value:s.deliveryAddress||"",onChange:function(e){return mn(e,"deliveryAddress")}}],Tn=[{label:"Green coffee type",type:"autocomplete",labelprop:"item_name",value:S,options:ie||[],required:!0,error:null===j||void 0===j?void 0:j.gcType,helperText:null===j||void 0===j?void 0:j.gcType,onChange:function(e,t){var a;if(!t)return k(null),a=Object(nt.a)(Object(nt.a)({},s),{},{gcType:"",gcCompositions:[],quotation:"",quotationDate:null}),u(a),Zt(!1),sa(!1),pa(!1),void ha(!1);k(t),xe({type:"gccomposition",item_id:t.item_id}).then((function(e){a=Object(nt.a)(Object(nt.a)({},s),{},{gcType:t.item_id,gcCompositions:e?xn(e[0]):null,quotation:"",quotationDate:null,qty:"",price:"",dispatch:"",dispatchCount:""}),u(a)})),B(null),sa(!1),pa(!1),ha(!1),"speciality"===t.gc_type?Se({type:"approvedqtlines",gc_type:t.item_id,po_date:Sn()}).then((function(e){Je(e),Zt(!0)})):Zt(!1),ke({type:"top3apprPosforselectedvendor",vendor_id:s.supplierId,gcitem_id:t.item_id}).then((function(e){vn(e),se(e)})),ke({type:"top3apprPosforothervendor",vendor_id:s.supplierId,gcitem_id:t.item_id}).then((function(e){vn(e),je(e)})),Ne({type:"topmrinrecord",gcitem_id:t.item_id,po_date:s.poDate||new Date}).then((function(e){if(null!==e&&void 0!==e&&e.gcitem_id){var t=Object(nt.a)(Object(nt.a)({},e),{},{number:1});Oe([t])}else Oe(null)}))},md:12,sm:12,xs:12}],En=[{label:"Quotation no",type:"autocomplete",labelprop:"quotation_no",value:R,options:Ke||[],onChange:function(e,t){var a=yn(s,Ha);Me({type:"getBalqtyforPo",quotation_no:null===t||void 0===t?void 0:t.quotation_no}).then((function(e){var n=""===e.order_qty?null===t||void 0===t?void 0:t.qty:(null===t||void 0===t?void 0:t.qty)-e.order_qty;Pa(n);var i=Object(nt.a)(Object(nt.a)({},s),{},{quotation:null===t||void 0===t?void 0:t.quotation_no,quotationId:null===t||void 0===t?void 0:t.quotation_id,quotationDate:null===t||void 0===t?void 0:t.quotation_date,price:null===t||void 0===t?void 0:t.price,qty:n,grossPrice:parseFloat(void 0===s.purchasePriceInr?0:s.purchasePriceInr)*parseFloat(null===t||void 0===t?void 0:t.qty),totalPrice:"1002"===s.type?a:parseFloat(void 0===s.purchasePrice?0:s.purchasePrice)*parseFloat((null===t||void 0===t?void 0:t.qty)/1e3)+(s.rate?parseFloat(s.rate):0)});(null===t||void 0===t?void 0:t.qty)>0&&sa(!0),u(i),B(t)}))},md:12,sm:12,xs:12},{label:"Quotation date",type:"datePicker",value:s.quotationDate||null,disabled:!0,md:12,sm:12,xs:12},{label:"Price",type:"float",value:s.price||"",onChange:function(e){return mn(e,"price")},md:12,sm:12,xs:12}],qn=[{label:"Quantity(Kgs)*",type:"number",value:0===s.qty?"0":s.qty,error:null===j||void 0===j?void 0:j.qty,helperText:null===j||void 0===j?void 0:j.qty,onChange:function(e){return function(e,t){var a,n=yn(Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({},t,e.target.value)),Ha);if(""!==s.quotation)if(parseFloat(e.target.value)>parseFloat(Na)&&0!==parseFloat(Na))v(Object(nt.a)(Object(nt.a)({},j),{},{qty:"You cannot enter value more than ".concat(Na," for this PO")})),sn("You cannot enter value more than ".concat(Na," for this PO"));else if(parseFloat(e.target.value)!==parseFloat(Aa))v(Object(nt.a)(Object(nt.a)({},j),{},{qty:"Total Dispatch Quatity not matches Quantity entered"})),sn("Total Dispatch Quatity not matches Quantity entered");else if(j.qty){var i=Object(nt.a)({},j);delete i.qty,v(i),q(!1)}var l=Object(nt.a)(Object(nt.a)({},s),{},(a={},Object(Ot.a)(a,t,e.target.value),Object(Ot.a)(a,"grossPrice",parseFloat(void 0===s.purchasePriceInr?0:s.purchasePriceInr)*parseFloat(e.target.value)),Object(Ot.a)(a,"totalPrice","1002"===s.type?n:parseFloat(void 0===s.purchasePrice?0:s.purchasePrice)*parseFloat(e.target.value/1e3)+(s.rate?parseFloat(s.rate):0)),a));if(e.target.value>0?sa(!0):(l=Object(nt.a)(Object(nt.a)({},l),{},{dispatch:"",dispatchCount:""}),sa(!1),pa(!1),ha(!1)),u(l),it&&va){var o=null===it||void 0===it?void 0:it.map((function(e){return parseInt(e.dispatchqty)})).reduce((function(e,t){return e+t}),0);if(parseFloat(e.target.value)>parseFloat(o))v(Object(nt.a)(Object(nt.a)({},j),{},{qty:"Total Dispatch Quatity not matches Quantity entered"})),sn("Total Dispatch Quatity not matches Quantity entered");else if(parseFloat(s.qty)>parseFloat(Na)&&0!==parseFloat(Na))v(Object(nt.a)(Object(nt.a)({},j),{},{qty:"You cannot enter value more than ".concat(Na," for this PO")})),sn("You cannot enter value more than ".concat(Na," for this PO"));else if(j.qty){var r=Object(nt.a)({},j);delete r.qty,v(r)}}}(e,"qty")},md:12,sm:12,xs:12}],Fn=[{label:"Dispatch type*",type:"select",value:s.dispatch||"",options:$e||[],error:null===j||void 0===j?void 0:j.dispatch,helperText:null===j||void 0===j?void 0:j.dispatch,onChange:function(e){return function(e,t){var a=Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({},t,e.target.value));if("Multiple"===e.target.value)pa(!0);else{var n=[];n[0]={number:1,dispatch_quantity:0,date:new Date},lt(n),pa(!1),ha(!0)}u(a)}(e,"dispatch")},md:12,sm:12,xs:12}],Mn=[{label:"Dispatch count*",type:"number",value:s.dispatchCount||"",error:null===j||void 0===j?void 0:j.dispatchCount,helperText:null===j||void 0===j?void 0:j.dispatchCount,onChange:function(e){return function(e,t){var a=Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({},t,e.target.value));if(u(a),e.target.value>99||e.target.value<1)v({dispatchCount:"Please enter valid details: 1 - 99"});else{if(j.dispatchCount){var n=Object(nt.a)({},j);delete n.dispatchCount,v(n)}if(e.target.value<1)ha(!1);else{ha(!0);for(var i=[],l=0;l<e.target.value;l++)i[l]={number:l+1,dispatch_quantity:0,date:new Date};lt(i)}}}(e,"dispatchCount")},md:12,sm:12,xs:12}],Rn=[{label:"Taxes & Duties",type:"input",value:s.taxesDuties||"",onChange:function(e){return mn(e,"taxesDuties")}},{label:"Mode of transport",type:"input",value:s.modeOfTransport||"",onChange:function(e){return mn(e,"modeOfTransport")}},{label:"Transit insurance",type:"input",value:s.transitInsurance||"",onChange:function(e){return mn(e,"transitInsurance")}},{label:"Packing & Forwarding",type:"input",value:s.packing||"",onChange:function(e){return mn(e,"packing")}}],Bn=[{label:"Purchase type",type:"select",value:"1002"===s.type?"Fixed":s.purchaseType||"",options:Ce||[],disabled:"1002"===s.type,onChange:function(e){return mn(e,"purchaseType")}},{label:"Terminal month",type:"datePicker",value:s.terminalMonth||null,onChange:function(e){return fn(e,"terminalMonth")}}],Hn=[{label:"Booked terminal rate",type:"float",value:s.bookedTerminalRate,onChange:function(e){return mn(e,"bookedTerminalRate")}},{label:"Booked differential",type:"float",value:"Fixed"===s.purchaseType?"0":void 0===s.bookedDifferential?"":s.bookedDifferential,disabled:"Fixed"===s.purchaseType,onChange:function(e){return function(e,t){var a=parseFloat(e.target.value)+parseFloat(void 0===s.fixedTerminalRate?0:s.fixedTerminalRate),n=Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({purchasePrice:a,totalPrice:parseFloat(a)*parseFloat(void 0===s.qty?0:s.qty/1e3)+(s.rate?parseFloat(s.rate):0),poMargin:parseFloat(void 0===s.marketPrice?0:s.marketPrice)-parseFloat(a)},t,e.target.value));u(n)}(e,"bookedDifferential")}},{label:"Fixed terminal rate",type:"float",value:s.fixedTerminalRate,onChange:function(e){return function(e,t){var a=parseFloat(e.target.value)+parseFloat(void 0===s.bookedDifferential?0:s.bookedDifferential),n=parseFloat(e.target.value)+parseFloat(void 0===s.fixedDifferential?0:s.fixedDifferential),i=Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({purchasePrice:a,marketPrice:n,poMargin:parseFloat(n)-parseFloat(a),totalPrice:parseFloat(a)*parseFloat(void 0===s.qty?0:s.qty/1e3)+(s.rate?parseFloat(s.rate):0)},t,e.target.value));u(i)}(e,"fixedTerminalRate")}},{label:"Fixed differential",type:"float",value:"Fixed"===s.purchaseType?"0":void 0===s.fixedDifferential?"":s.fixedDifferential,disabled:"Fixed"===s.purchaseType,onChange:function(e){return function(e,t){var a=parseFloat(e.target.value)+parseFloat(void 0===s.fixedTerminalRate?0:s.fixedTerminalRate),n=Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({marketPrice:a,poMargin:parseFloat(a)-parseFloat(void 0===s.purchasePrice?0:s.purchasePrice)},t,e.target.value));u(n)}(e,"fixedDifferential")}},{label:"Purchase price"+("ORM"===s.category?Ca[s.importCurrency]?" ("+Ca[s.importCurrency]+"/MT)":"":" (USD/MT)"),type:"float",value:s.purchasePrice||"",required:!0,error:null===j||void 0===j?void 0:j.purchasePrice,helperText:null===j||void 0===j?void 0:j.purchasePrice,onChange:function(e){return function(e,t){var a=Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({poMargin:parseFloat(void 0===s.marketPrice?0:s.marketPrice)-parseFloat(e.target.value),totalPrice:parseFloat(e.target.value)*parseFloat(void 0===s.qty?0:s.qty/1e3)+(s.rate?parseFloat(s.rate):0)},t,e.target.value));u(a)}(e,"purchasePrice")}},{label:"Market price"+("ORM"===s.category?Ca[s.importCurrency]?" ("+Ca[s.importCurrency]+"/MT)":"":" (USD/MT)"),type:"float",value:s.marketPrice||"",required:!0,error:null===j||void 0===j?void 0:j.marketPrice,helperText:null===j||void 0===j?void 0:j.marketPrice,onChange:function(e){return function(e,t){var a=Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({poMargin:parseFloat(e.target.value)-parseFloat(void 0===s.purchasePrice?0:s.purchasePrice)},t,e.target.value));u(a)}(e,"marketPrice")}},{label:"PO margin",type:"float",value:s.poMargin||"",onChange:function(e){return mn(e,"poMargin")}},{label:"Total price"+("ORM"===s.category?Ca[s.importCurrency]?" ("+Ca[s.importCurrency]+"/MT)":"":" (USD/MT)"),type:"float",value:s.totalPrice||"",required:!0,error:null===j||void 0===j?void 0:j.totalPrice,helperText:null===j||void 0===j?void 0:j.totalPrice,onChange:function(e){return mn(e,"totalPrice")}}],Gn=[{label:"Fixation date",type:"datePicker",value:s.fixation||null,onChange:function(e){return fn(e,"fixation")}}],Ln=[{label:"Terminal (USD)",type:"float",value:s.terminalPrice||"",onChange:function(e){return mn(e,"terminalPrice")},sm:6},{label:"Purchase price (INR/KG)",type:"float",value:s.purchasePriceInr||"",onChange:function(e){return function(e,t){var a=yn(Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({},t,e.target.value)),Ha),n=Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({grossPrice:parseFloat(e.target.value)*parseFloat(void 0===s.qty?0:s.qty),totalPrice:a},t,e.target.value));u(n)}(e,"purchasePriceInr")},sm:6},{label:"Gross price (INR)",type:"float",value:s.grossPrice||"",onChange:function(e){return mn(e,"grossPrice")},sm:6},{label:"PO Value (INR)",type:"float",value:s.totalPrice||"",onChange:function(e){return mn(e,"totalPrice")},sm:6}],Un=[{label:"SGST (%)",type:"float",value:s.sgst,error:null===j||void 0===j?void 0:j.sgst,helperText:null===j||void 0===j?void 0:j.sgst,onChange:function(e){return _n(e,"sgst")}},{label:"CGST (%)",type:"float",value:s.cgst,error:null===j||void 0===j?void 0:j.cgst,helperText:null===j||void 0===j?void 0:j.cgst,onChange:function(e){return _n(e,"cgst")}},{label:"IGST (%)",type:"float",value:s.igst,onChange:function(e){return _n(e,"igst")}}],Qn=[{label:"Incoterm",type:"autocomplete",labelprop:"label",value:s.incoterm,options:_t||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},s),{},{incoterm:t});u(a)}},{label:"Origin",type:"autocomplete",labelprop:"label",value:s.origin,options:It||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},s),{},{origin:t});u(a)}},{label:"Port of loading",type:"autocomplete",labelprop:"label",value:s.portOfLoading,options:kt||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},s),{},{portOfLoading:t});u(a)}},{label:"Mode of transport",type:"autocomplete",labelprop:"label",value:s.mode_of_transport,options:Bt||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},s),{},{mode_of_transport:t});u(a)}},{label:"Insurance",type:"autocomplete",labelprop:"label",value:s.insurance,options:Ut||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},s),{},{insurance:t});u(a)}},{label:"Place of destination",type:"input",value:s.destination,onChange:function(e){return mn(e,"destination")}},{label:"Forwarding",type:"input",value:s.forwarding,onChange:function(e){return mn(e,"forwarding")}},{label:"Currency",type:"autocomplete",labelprop:"label",value:s.importCurrency,options:dt||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},s),{},{importCurrency:t});u(a)}},{label:"No of bags",type:"input",value:s.noofbags,onChange:function(e){return mn(e,"noofbags")}},{label:"Net weight",type:"input",value:s.netweight,onChange:function(e){return mn(e,"netweight")}},{label:"No of containers",type:"number",value:s.noofContainers,onChange:function(e){return mn(e,"noofContainers")}},{label:"Payment terms",type:"input",rows:3,multiline:!0,value:s.paymentTerms,onChange:function(e){return mn(e,"paymentTerms")}},{label:"Container type",type:"autocomplete",labelprop:"label",value:s.containerType,options:gt||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},s),{},{containerType:t});u(a)}},{label:"Comments",type:"input",rows:3,multiline:!0,value:s.comments,onChange:function(e){return mn(e,"comments")}}],Vn=[{label:"Comments",type:"input",rows:4,multiline:!0,value:s.comments||"",onChange:function(e){return mn(e,"comments")}}];console.log("Document section is",Ya);var zn=a.map((function(e){var t;return{label:e,type:"checkbox",checked:!(null===(t=Ya.find((function(t){return t.doc_kind===e})))||void 0===t||!t.required),onChange:function(){return function(e){var t;console.log("Came inside");var a=_.a.cloneDeep(Ya),n=a.findIndex((function(t){return t.doc_kind===e}));console.log("index is",n),a[n].required=!(null!==(t=a[n])&&void 0!==t&&t.required),Ka(a)}(e)}}})),Wn=[{label:"Other charges",type:"select",value:Qa.item,options:qt||[],onChange:function(e){return function(e,t){var a=qt.find((function(t){return t.value===e.target.value}));Va(Object(nt.a)(Object(nt.a)({},Qa),{},{item:e.target.value,label:a.label}))}(e)}},{label:"1002"===s.type?"Rate(INR)":"Rate",type:"number",value:Qa.rate,className:i.otherModal,onChange:function(e){return t=e,void Va(Object(nt.a)(Object(nt.a)({},Qa),{},{rate:t.target.value}));var t}}],Yn=[{label:"Other charges",type:"autocomplete",labelprop:"label",value:s.otherCharges,options:qt||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},s),{},{otherCharges:t});u(a)}},{label:"1002"===s.type?"Rate(INR)":"Rate",type:"number",value:s.rate,className:i.otherModal,onChange:function(e){return function(e,t){var a=yn(Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({},t,e.target.value)),Ha),n=Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({totalPrice:"1002"===s.type?a:parseFloat(void 0===s.purchasePrice?0:s.purchasePrice)*parseFloat(s.qty/1e3)+(e.target.value?parseFloat(e.target.value):0)},t,e.target.value));u(n)}(e,"rate")}}],Kn=[{id:"label",label:"Item"},{id:"rate",label:"Rate",type:"number"},{id:"delete",label:"Delete",isEditable:!0,type:"button",handler:{handleClick:function(e){var t=Object(Ol.a)(Ha);t.map((function(t,a){if(a===e){var n=Object(nt.a)({},s);delete s[t.name],u(n)}})),-1!==e&&(t.splice(e,1),Ga(t)),0===t.length?Cn(0,t):Cn(null===t||void 0===t?void 0:t.map((function(e){return parseInt(e.rate)})).reduce((function(e,t){return e+t}),0),t)}}}],Jn=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,l,o,r,c,u,b,p,m,h,O,g,x,f,y,C,w,S,k,N,P,D,I,A,T,E,F,M,R,B,H,G,L,U,Q;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Purchase details are",s),l="Please enter valid details",o=Object(nt.a)({},j),v(o),"1002"===s.type&&_.a.isEmpty(s.advance)?o=Object(nt.a)(Object(nt.a)({},o),{},{advance:l}):delete o.advance,"1002"===s.type&&_.a.isEmpty(s.cgst)&&!_.a.isEmpty(s.sgst)?o=Object(nt.a)(Object(nt.a)({},o),{},{cgst:l}):delete o.cgst,"1002"===s.type&&_.a.isEmpty(s.sgst)&&!_.a.isEmpty(s.cgst)?o=Object(nt.a)(Object(nt.a)({},o),{},{sgst:l}):delete o.sgst,"1002"!==s.type&&_.a.isEmpty(null===(a=s.marketPrice)||void 0===a?void 0:a.toString())?o=Object(nt.a)(Object(nt.a)({},o),{},{marketPrice:l}):delete o.marketPrice,"1002"!==s.type&&_.a.isEmpty(null===(n=s.purchasePrice)||void 0===n?void 0:n.toString())?o=Object(nt.a)(Object(nt.a)({},o),{},{purchasePrice:l}):delete o.purchasePrice,"1002"===s.type&&_.a.isEmpty(s.purchasePriceInr)?o=Object(nt.a)(Object(nt.a)({},o),{},{purchasePriceInr:l}):delete o.purchasePriceInr,"1002"!==s.type&&_.a.isEmpty(null===(i=s.totalPrice)||void 0===i?void 0:i.toString())?o=Object(nt.a)(Object(nt.a)({},o),{},{totalPrice:l}):delete o.totalPrice,_.a.isEmpty(s.type)?o=Object(nt.a)(Object(nt.a)({},o),{},{type:l}):delete o.type,!_.a.isEmpty(s.gcType)&&_.a.isEmpty(s.qty)?o=Object(nt.a)(Object(nt.a)({},o),{},{qty:l}):delete o.qty,_.a.isEmpty(s.gcType)?o=Object(nt.a)(Object(nt.a)({},o),{},{gcType:l}):delete o.gcType,_.a.isEmpty(s.category)?o=Object(nt.a)(Object(nt.a)({},o),{},{category:l}):delete o.category,_.a.isEmpty(s.dispatch)?o=Object(nt.a)(Object(nt.a)({},o),{},{dispatch:l}):delete o.dispatch,"Multiple"===s.dispatch&&_.a.isEmpty(s.dispatchCount)?o=Object(nt.a)(Object(nt.a)({},o),{},{dispatchCount:l}):delete o.dispatchCount,void 0===s.billingAt?o=Object(nt.a)(Object(nt.a)({},o),{},{billingAt:l}):delete o.billingAt,void 0===s.deliveryAt?o=Object(nt.a)(Object(nt.a)({},o),{},{deliveryAt:l}):delete o.deliveryAt,"1002"===s.type&&_.a.isEmpty(s.iom)?o=Object(nt.a)(Object(nt.a)({},o),{},{iom:l}):delete o.iom,void 0===s.supplierId?o=Object(nt.a)(Object(nt.a)({},o),{},{supplierId:l}):delete o.supplierId,_.a.isEmpty(o)){t.next=26;break}v(o),q(!0),t.next=44;break;case 26:return q(!1),it.forEach((function(e){e.dispatch_date=wn(e.date)})),U={po_create:!0,quotation_id:s.quotationId,emailid:JSON.parse(localStorage.getItem("preference")).name,place_of_destination:s.destination,delivery_at_id:null===(r=s.deliveryAt)||void 0===r?void 0:r.toString(),billing_at_id:null===(c=s.billingAt)||void 0===c?void 0:c.toString(),incoterms:null===(u=s.incoterm)||void 0===u?void 0:u.value,origin:null===(b=s.origin)||void 0===b?void 0:b.value,ports:null===(p=s.portOfLoading)||void 0===p?void 0:p.value,payment_terms:s.paymentTerms,container_type:null===(m=s.containerType)||void 0===m?void 0:m.value,payment_terms_days:s.iom,forwarding:s.forwarding,no_of_containers:null===(h=s.noofContainers)||void 0===h?void 0:h.toString(),no_of_bags:s.noofbags,net_weight:s.netweight,comments:s.comments,po_date:s.poDate||new Date,po_category:s.category,supplier_id:s.supplierId,quot_no:null===(O=s.quotation)||void 0===O?void 0:O.toString(),quot_price:null===(g=s.price)||void 0===g?void 0:g.toString(),quot_date:s.quotationDate||null,advance:null===(x=s.advance)||void 0===x?void 0:x.toString(),advance_type:null===(f=s.advanceType)||void 0===f?void 0:f.toString(),currency_id:"1002"===s.type?null===(y=s.currency)||void 0===y?void 0:y.value:null===(C=s.importCurrency)||void 0===C?void 0:C.value,taxes_duties:s.taxesDuties,mode_of_transport:"1002"===s.type?s.modeOfTransport:null===(w=s.mode_of_transport)||void 0===w?void 0:w.value,insurance:null===(S=s.insurance)||void 0===S?void 0:S.value,transit_insurance:s.transitInsurance,packing_forwarding:s.packing,dispatch_type:s.dispatch,dispatch_count:s.dispatchCount,item_dispatch:it,supplier_type:s.type,item_id:s.gcType,cgst:s.cgst,igst:s.igst,sgst:s.sgst,purchase_type:s.purchaseType,terminal_month:s.terminalMonth||null,fixation_date:s.fixation||null,terminalPrice:null===(k=s.terminalPrice)||void 0===k?void 0:k.toString(),marketPriceInr:null===(N=s.marketPriceInr)||void 0===N?void 0:N.toString(),purchasePriceInr:null===(P=s.purchasePriceInr)||void 0===P?void 0:P.toString(),grossPrice:null===(D=s.grossPrice)||void 0===D?void 0:D.toString(),totalPrice:null===(I=s.totalPrice)||void 0===I?void 0:I.toString(),booked_terminal_rate:null===(A=s.bookedTerminalRate)||void 0===A?void 0:A.toString(),booked_differential:null===(T=s.bookedDifferential)||void 0===T?void 0:T.toString(),fixed_terminal_rate:null===(E=s.fixedTerminalRate)||void 0===E?void 0:E.toString(),fixed_differential:null===(F=s.fixedDifferential)||void 0===F?void 0:F.toString(),purchase_price:null===(M=s.purchasePrice)||void 0===M?void 0:M.toString(),market_price:null===(R=s.marketPrice)||void 0===R?void 0:R.toString(),po_margin:null===(B=s.poMargin)||void 0===B?void 0:B.toString(),createduserid:jn().id,total_quantity:null===(H=s.qty)||void 0===H?void 0:H.toString(),contract:s.contract,otherCharges:null===(G=s.otherCharges)||void 0===G?void 0:G.value,rate:null===(L=s.rate)||void 0===L?void 0:L.toString(),packing_forward_charges:s.packing_forward_charges?s.packing_forward_charges.toString():"0",installation_charges:s.installation_charges?s.installation_charges.toString():"0",freight_charges:s.freight_charges?s.freight_charges.toString():"0",handling_charges:s.handling_charges?s.handling_charges.toString():"0",misc_charge:s.misc_charge?s.misc_charge.toString():"0",hamali_charge:s.hamali_charge?s.hamali_charge.toString():"0",mandifee_charges:s.mandifee_charges?s.mandifee_charges.toString():"0",fulltax_charges:s.fulltax_charges?s.fulltax_charges.toString():"0",insurance_charges:s.insurance_charges?s.insurance_charges.toString():"0",documentsection:Ya.length>0?Ya:null},pn(!0),t.prev=30,t.next=33,_e(U);case 33:Q=t.sent,console.log("Response",Q),Q&&($a({open:!0,message:"GC Purchase Order created successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=41;break;case 38:t.prev=38,t.t0=t.catch(30),$a({open:!0,message:t.t0.message,severity:"error"});case 41:return t.prev=41,pn(!1),t.finish(41);case 44:case"end":return t.stop()}}),t,null,[[30,38,41,44]])})));return function(){return t.apply(this,arguments)}}(),Zn=function(){var e=Object(r.a)(d.a.mark((function e(){var t,a,n,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(Ol.a)(Ha),(a=t.findIndex((function(e){return e.name===Qa.item})))>=0?t[a].rate=Qa.rate:t.push({name:Qa.item,label:Qa.label,rate:Qa.rate}),n=Object(nt.a)({},s),t.map((function(e,t){n[e.name]=e.rate})),i=yn(n,t),e.next=8,u(Object(nt.a)(Object(nt.a)({},n),{},{totalPrice:i}));case 8:Ga(t),Ma(!Fa);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:i.root,noValidate:!0,autoComplete:"off",children:[Xa.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},Xa),{},{handleClose:function(){return $a({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Purchase order information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{container:!0,md:12,xs:12,children:[Object(ot.jsx)(m.a,{item:!0,md:6,xs:12,children:Object(ot.jsx)(tn,{payload:kn})}),Object(ot.jsxs)(m.a,{item:!0,md:6,xs:12,children:[Object(ot.jsx)(tn,{payload:Nn}),ia&&Object(ot.jsx)(tn,{payload:Pn})]})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Vendor/Supplier information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:Dn})})]}),"1002"===s.type&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Currency & Advance information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:In})})]}),"1001"===s.type&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Currency & Incoterms"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:Qn})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Billing & Delivery information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:An})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Green coffee information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{container:!0,md:12,xs:12,children:[Object(ot.jsxs)(m.a,{item:!0,md:6,xs:12,children:[Object(ot.jsx)(tn,{payload:Tn}),Kt&&Object(ot.jsx)(tn,{payload:En}),s.gcType&&Object(ot.jsx)(tn,{payload:qn}),ca&&Object(ot.jsx)(tn,{payload:Fn}),ba&&Object(ot.jsx)(tn,{payload:Mn}),va&&Object(ot.jsx)(m.a,{item:!0,style:{marginTop:15},children:Object(ot.jsx)(gn,{rows:it,columns:[{id:"number",label:"SNo"},{id:"dispatch_quantity",label:"Dispatch quantity(Kgs)",type:"number",isEditable:!0},{id:"date",label:"Dispatch date",isEditable:!0,type:"date"}],hasTotal:!0,totalColId:"dispatch_quantity",onUpdate:function(e){if(Ta(e),parseFloat(s.qty)!==parseFloat(e))return v(Object(nt.a)(Object(nt.a)({},j),{},{qty:"Total Dispatch Quatity not matches Quantity entered"})),void sn("Total Dispatch Quatity not matches Quantity entered");if(parseFloat(s.qty)>parseFloat(Na)&&0!==parseFloat(Na))v(Object(nt.a)(Object(nt.a)({},j),{},{qty:"You cannot enter value more than ".concat(Na," for this PO")})),sn("You cannot enter value more than ".concat(Na," for this PO"));else if(j.qty){var t=Object(nt.a)({},j);delete t.qty,v(t),q(!1)}}})}),s.gcType&&Object(ot.jsx)(m.a,{item:!0,style:{marginTop:15,marginRight:30},children:Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Specification information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(gn,{rows:s.gcCompositions,columns:[{id:"composition_name",label:"Item"},{id:"composition_rate",label:"Composition"}],hasTotal:!1})})]})})]}),Object(ot.jsxs)(m.a,{item:!0,md:6,xs:12,children:[s.gcType&&Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",style:{marginRight:25},children:Object(ot.jsx)(O.a,{children:"Historical price data for selected vendor"})}),Object(ot.jsx)(gn,{rows:ce,columns:[{id:"po_no",label:"PO NO"},{id:"po_createddt",label:"PO date"},{id:"vendor_name",label:"Vendor"},{id:"price",label:"Price"}]})]}),s.gcType&&Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",style:{marginRight:25},children:Object(ot.jsx)(O.a,{children:"Historical price data for other vendors"})}),Object(ot.jsx)(gn,{rows:pe,columns:[{id:"po_no",label:"PO NO"},{id:"po_createddt",label:"PO date"},{id:"vendor_name",label:"Vendor"},{id:"price",label:"Price"}]})]})]})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Price information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,xs:12,children:Object(ot.jsxs)(m.a,{item:!0,md:12,xs:12,children:[Object(ot.jsx)(tn,{payload:Bn}),"1001"===s.type&&Object(ot.jsx)(tn,{payload:Hn}),"Differential"===(null===(t=s.purchaseType)||void 0===t?void 0:t.value)&&Object(ot.jsx)(tn,{payload:Gn}),"1002"===s.type&&Object(ot.jsx)(tn,{payload:Ln})]})})})]}),s.gcType&&"1002"===s.type&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Previous tax information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(gn,{rows:he,columns:[{id:"number",label:"SNo"},{id:"mrin_date",label:"MRIN date"},{id:"cgst_per",label:"Tax (%)"}]})})]}),"1002"===s.type&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Tax information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:Un})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Other charges"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{item:!0,md:12,xs:12,children:["1002"===s.type&&Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)(m.a,{md:12,xs:12,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:Object(ot.jsx)(Yt,{label:"Add Other Charges",onClick:function(){return Ma(!Fa)}})}),Object(ot.jsx)(gn,{rows:Ha,columns:Kn,hasTotal:!0,totalColId:"rate",onUpdate:Cn})]}),"1001"===s.type&&Object(ot.jsx)(tn,{payload:Yn}),"1002"===s.type&&Object(ot.jsx)(tn,{payload:Vn})]})})]}),"1001"!==s.type&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Other information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:Rn})})]}),"1001"===s.type&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Documents Required"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:zn})})]}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:bn,label:bn?"Loading...":"Save",onClick:Jn})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})})]}),Object(ot.jsx)(zt,{open:E,handleClose:function(){return q(!E)},body:function(){return Object(ot.jsxs)(x.a,{className:i.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Validation"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{id:"top-row",xs:6,md:10,container:!0,direction:"column",children:rn})}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Ok",onClick:function(){return q(!E)}})})})]})}}),Object(ot.jsx)(zt,{open:xa,handleClose:function(){return fa(!xa)},body:function(){return Object(ot.jsxs)(x.a,{className:i.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Confirmation"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsxs)(m.a,{id:"top-row",xs:6,md:10,container:!0,direction:"column",children:["If you change PO Category, then Green Coffee Details will reset. ",Object(ot.jsx)("br",{}),Object(ot.jsx)("br",{}),"Are You want to change PO category?"]})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Yes",onClick:function(){return function(){k(null);var e={};e="ORM"===jt?Object(nt.a)(Object(nt.a)({},s),{},{category:jt,bookedTerminalRate:s.purchasePrice,bookedDifferential:0,fixedTerminalRate:s.purchasePrice,fixedDifferential:0,gcType:"",gcCompositions:[],quotation:"",quotationDate:null}):Object(nt.a)(Object(nt.a)({},s),{},{category:jt,gcType:"",gcCompositions:[],quotation:"",quotationDate:null}),u(e),Zt(!1),sa(!1),pa(!1),ha(!1),fa(!xa)}()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"No",onClick:function(){return fa(!xa)}})})]})]})}}),Object(ot.jsx)(zt,{open:Fa,handleClose:function(){return Ma(!Fa)},body:function(){return Object(ot.jsxs)(x.a,{className:i.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Other Charges"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{id:"top-row",xs:6,md:12,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Wn})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Add",onClick:Zn})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:function(){return Ma(!Fa)}})})]})]})}})]})},Ao=[{id:"dispatchNo",label:"Dispatch Detail"},{id:"qty",label:"Quantity"},{id:"date",label:"Date"},{id:"delivered_quantity",label:"Delivered"},{id:"balance_quantity",label:"Balance"}];var To=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440},button:{background:"none",textDecoration:"underline",border:"none",cursor:"pointer",color:"rgb(85, 26, 139)"}}),Eo=function(e){var t=To(),a=i.a.useState(0),n=Object(c.a)(a,2),l=n[0],o=n[1],r=i.a.useState(10),s=Object(c.a)(r,2),d=s[0],u=s[1],b=[];i.a.useEffect((function(){console.log("Props Data",e.data)}),[e.data]),e.data&&e.data.map((function(t){var a,n,i,l,o,r;null===(a=e.mrin)||void 0===a||a.filter((function(e){return e.dispatch===t.dispatch_id}));b.push((n=t.dispatch_id,i=t.dispatch_quantity,l=t.dispatch_date,o=t.delivered_quantity,r=t.balance_quantity,{dispatchNo:n,qty:i,date:l,delivered_quantity:o,balance_quantity:r}))}));return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(pn.a,{children:Object(ot.jsx)(jn.a,{children:Ao.map((function(e){return Object(ot.jsx)(un.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ot.jsxs)(dn.a,{children:[b.length>0&&b.slice(l*d,l*d+d).map((function(a,n){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Ao.map((function(n,i){var l=a[n.id]?a[n.id]:"-";return Object(ot.jsx)(un.a,{align:n.align,children:i?l:Object(ot.jsx)("button",{className:t.button,onClick:function(t){return function(t,a){return t.preventDefault(),e.dispatchDetails("dispatch_details",a),!1}(t,a)},children:l})},n.id)}))},a.code)})),0===b.length&&Object(ot.jsx)("p",{children:Object(ot.jsx)("b",{children:"No Records to Display."})})]})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:b.length,rowsPerPage:d,page:l,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){u(+e.target.value),o(0)}})]})},qo=function(e){var t=e.purchaseDetails,a=e.activeStep,i=Object(n.useState)({}),l=Object(c.a)(i,2),o=l[0],s=l[1],u=Object(n.useState)([]),b=Object(c.a)(u,2),p=b[0],j=b[1],v=Object(n.useState)(!1),h=Object(c.a)(v,2),g=h[0],x=h[1],f=Object(n.useState)([]),y=Object(c.a)(f,2),_=y[0],C=y[1],w=Object(n.useState)({open:!1,message:"",severity:""}),S=Object(c.a)(w,2),k=S[0],N=S[1],P=function(e){var t=[];Re({type:"getDocumentsOnPo",po_id:e}).then((function(e){null===e||void 0===e||e.map((function(e){return t.push({upload:!(null===e||void 0===e||!e.file_name),file_name:null===e||void 0===e?void 0:e.file_name,document_name:null===e||void 0===e?void 0:e.document_name,doc_kind:null===e||void 0===e?void 0:e.doc_kind,required:null===e||void 0===e?void 0:e.required,docid:null===e||void 0===e?void 0:e.docid,dispatchid:null===e||void 0===e?void 0:e.dispatchid}),null})),C(t)}))},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{composition_name:"Density(Gm/Cc)",composition_rate:e.density},{composition_name:"Moisture (%)",composition_rate:e.moisture},{composition_name:"Browns (%)",composition_rate:e.browns},{composition_name:"Blacks (%)",composition_rate:e.blacks},{composition_name:"Broken & Bits (%)",composition_rate:e.brokenbits},{composition_name:"Insected beans (%)",composition_rate:e.insectedbeans},{composition_name:"Bleached (%)",composition_rate:e.bleached},{composition_name:"Husk (%)",composition_rate:e.husk},{composition_name:"Sticks (%)",composition_rate:e.sticks},{composition_name:"Stones (%)",composition_rate:e.stones},{composition_name:"Beans retained on 5mm mesh during sieve analysis",composition_rate:e.beansretained}]},I=function(){var e=Object(r.a)(d.a.mark((function e(a,n,i,l,o,r){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Re({type:"uploadDocument",document_name:l,po_id:t.poid,document_content:n,doc_kind:i,docid:o,dispatchid:r,updatedBy:localStorage.getItem("currentUserId")});case 5:c=e.sent,console.log("Response",c),c&&(N({open:!0,message:"File uploaded successfully"}),P(t.poid),x((function(e){return!e}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),N({open:!0,message:e.t0.message,severity:"error"});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a,n,i,l,o){return e.apply(this,arguments)}}(),A=function(){var e=Object(r.a)(d.a.mark((function e(a,n,i,l){var o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re({type:"removeDocument",file_name:n,docid:i,dispatchid:l});case 3:o=e.sent,console.log("Response",o),o&&(N({open:!0,message:"File deleted successfully"}),P(t.poid)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),N({open:!0,message:e.t0.message,severity:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n,i){return e.apply(this,arguments)}}(),E=function(){var e=Object(r.a)(d.a.mark((function e(t,a,n,i,l){var o,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re({type:"downloadDocument",file_name:a,docid:i,dispatchid:l});case 3:(o=e.sent)&&(r="data:application/pdf;base64,".concat(o.fileData),(c=document.createElement("a")).href=r,c.download=n,c.click(),N({open:!0,message:"File downloaded successfully"})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),N({open:!0,message:e.t0.message,severity:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n,i,l){return e.apply(this,arguments)}}(),M=function(){var a=Object(r.a)(d.a.mark((function a(){var n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:Ee({type:"viewmrinsondispatch",dispatch_id:e.details.dispatchNo}).then((function(e){j(e||null)})),(i={dispatch_id:e.details.dispatchNo},q.post("".concat(T.apiUrl).concat(F.getDispatchDetails),i).then((function(e){return e}))).then((function(e){e.expected_composition&&(e.expected_composition=D(e.expected_composition[0])),e.vendor_composition&&(e.vendor_composition=D(e.vendor_composition[0])),s(e)})),n=[],Re({type:"getDocumentsOnPo",po_id:null===t||void 0===t?void 0:t.poid}).then((function(e){null===e||void 0===e||e.map((function(e){return n.push({upload:!(null===e||void 0===e||!e.file_name),file_name:null===e||void 0===e?void 0:e.file_name,document_name:null===e||void 0===e?void 0:e.document_name,doc_kind:null===e||void 0===e?void 0:e.doc_kind,required:null===e||void 0===e?void 0:e.required,docid:null===e||void 0===e?void 0:e.docid,dispatchid:null===e||void 0===e?void 0:e.dispatchid})})),C(n)}));case 4:case"end":return a.stop()}var i}),a)})));return function(){return a.apply(this,arguments)}}();Object(n.useEffect)((function(){M()}),[e.details,null===t||void 0===t?void 0:t.poid]);var R=[{id:"composition_name",label:"Item"},{id:"composition_rate",label:"Composition"}];return Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(ua.a,{className:"page-header",children:[Object(ot.jsx)(an.a,{title:" Dispatch Details",className:"cardHeader"}),Object(ot.jsx)(xa.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsxs)(m.a,{container:!0,md:8,children:[Object(ot.jsxs)(m.a,{item:!0,md:2,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Dispatch no"}),Object(ot.jsx)(O.a,{children:o.dispatch_id})]}),Object(ot.jsxs)(m.a,{item:!0,md:2,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Dispatch date"}),Object(ot.jsx)(O.a,{children:o.dispatch_date})]}),Object(ot.jsxs)(m.a,{item:!0,md:2,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Quantity"}),Object(ot.jsx)(O.a,{children:o.dispatch_quantity})]}),Object(ot.jsxs)(m.a,{item:!0,md:2,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Delivered"}),Object(ot.jsx)(O.a,{children:o.delivered_quantity||"-"})]}),Object(ot.jsxs)(m.a,{item:!0,md:2,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Balance"}),Object(ot.jsx)(O.a,{children:o.balance_quantity||"-"})]})]})})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Specification information"})})})}),Object(ot.jsxs)(on.a,{children:[Object(ot.jsx)(m.a,{item:!0,md:6,xs:6,children:Object(ot.jsxs)(m.a,{item:!0,md:12,xs:12,style:{marginRight:25},children:[Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Expected order specification information"})}),Object(ot.jsx)(gn,{rows:o.expected_composition?o.expected_composition:null,columns:R,hasTotal:!1})]})}),Object(ot.jsxs)(m.a,{item:!0,md:6,xs:6,children:[Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Dispatch specification information"})}),Object(ot.jsx)(gn,{rows:o.vendor_composition?o.vendor_composition:null,columns:R,hasTotal:!1})]})]})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"MRIN information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(gn,{rows:p,columns:[{id:"mrindate",label:"Date"},{id:"mrin_id",label:"MRIN"},{id:"dispatch_id",label:"Dispatch"},{id:"expected_quantity",label:"Expected(Kgs)"},{id:"delivered_quantity",label:"Delivered(Kgs)"},{id:"balance_quantity",label:"Balance Quantity(Kgs)"},{id:"related_detid",label:"Parent dispatch"},{id:"apStatus",label:"AP Status"},{id:"qcStatus",label:"QC Status"}]})})]}),"1001"===t.supplier_type_id&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsxs)(m.a,{container:!0,className:"item",md:12,xs:12,direction:"row",alignItems:"center",justifyContent:"space-between",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(O.a,{style:{fontSize:"1.2rem"},children:"Document information"})}),a>=2?Object(ot.jsx)(Yt,{label:g?"Done":"Edit",onClick:function(e){e.stopPropagation(),x((function(e){return!e}))}}):null]})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(_n,{data:_.filter((function(t){var a,n;return console.log("doc, dip",t,null===e||void 0===e||null===(a=e.details)||void 0===a?void 0:a.dispatchNo),(null===t||void 0===t?void 0:t.dispatchid)===(null===e||void 0===e||null===(n=e.details)||void 0===n?void 0:n.dispatchNo)})),edit:g,details:!g,downloadFile:function(e,t,a,n,i){return E(e,t,a,n,i)},uploadFile:function(e,t,a,n,i,l){return I(e,t,a,n,i,l)},deleteFile:A})})]}),Object(ot.jsx)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:e.back})})}),k.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},k),{},{handleClose:function(){return N({open:!1,message:"",severity:""})}}))]})},Fo=[{id:"description",label:"Description"},{id:"createdby",label:"Created By"},{id:"createddate",label:"Created Date"},{id:"modifiedby",label:"Modified By"},{id:"modifieddate",label:"Modified Date"}],Mo=function(e){var t=new Date(e);return e?t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear():""};var Ro=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),Bo=function(e){var t=Ro(),a=i.a.useState(0),n=Object(c.a)(a,2),l=n[0],o=n[1],r=i.a.useState(10),s=Object(c.a)(r,2),d=s[0],u=s[1],b=[];i.a.useEffect((function(){console.log("Props Data",e.data)}),[e.data]),e.data&&e.data.map((function(e){var t,a,n,i,l;b.push((t=e.description,a=e.createduserid,n=Mo(e.createddate),i=e.modifieduserid,l=Mo(e.modifieddate),{description:t,createdby:a,createddate:n,modifiedby:i,modifieddate:l}))}));return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(pn.a,{children:Object(ot.jsx)(jn.a,{children:Fo.map((function(e){return Object(ot.jsx)(un.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ot.jsxs)(dn.a,{children:[b.length>0&&b.slice(l*d,l*d+d).map((function(e,t){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Fo.map((function(t,a){var n=e[t.id];return Object(ot.jsx)(un.a,{align:t.align,children:n},t.id)}))},e.code)})),0===b.length&&Object(ot.jsx)("p",{children:"No Records to Display."})]})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:b.length,rowsPerPage:d,page:l,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){u(+e.target.value),o(0)}})]})},Ho=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .page-header":{width:"100%",marginBottom:15},"& .MuiAccordion-root":{width:"100%"},"& .dispatchTable":{maxHeight:"400px",overflowY:"auto"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"},modal:{position:"absolute",margin:"auto",top:"25%",left:"25%",width:700,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},otherModal:{marginTop:"8px",marginBottom:"8px"}}})),Go=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return e.map((function(e){return n.push({label:e[t],value:e[a]||e[t]})})),n},Lo=function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},Uo=function(e){var t,a,l,o,s,u,b,p,j=Ho(),v=Object(n.useState)({}),h=Object(c.a)(v,2),g=h[0],f=h[1],y=Object(n.useState)({}),C=Object(c.a)(y,2),w=C[0],S=C[1],k=Object(n.useState)(!1),N=Object(c.a)(k,2),P=N[0],D=N[1],I=Object(n.useState)(null),A=Object(c.a)(I,2),T=A[0],E=A[1],q=Object(n.useState)(null),F=Object(c.a)(q,2),M=F[0],R=F[1],B=Object(n.useState)(!0),H=Object(c.a)(B,2),G=H[0],L=H[1],U=Object(n.useState)(null),Q=Object(c.a)(U,2),V=Q[0],z=Q[1],W=Object(n.useState)([]),Y=Object(c.a)(W,2),K=Y[0],J=Y[1],Z=Object(n.useState)([]),X=Object(c.a)(Z,2),$=X[0],ee=X[1],te=Object(n.useState)([]),ae=Object(c.a)(te,2),ne=ae[0],ie=ae[1],le=Object(n.useState)([]),oe=Object(c.a)(le,2),re=oe[0],ce=oe[1],se=Object(n.useState)([]),ue=Object(c.a)(se,2),be=ue[0],pe=ue[1],je=Object(n.useState)([]),me=Object(c.a)(je,2),ve=me[0],he=me[1],Oe=Object(n.useState)([]),ge=Object(c.a)(Oe,2),ye=ge[0],_e=ge[1],De=Object(n.useState)([]),Ie=Object(c.a)(De,2),Ae=Ie[0],Te=Ie[1],qe=Object(n.useState)([]),Be=Object(c.a)(qe,2),He=Be[0],Ge=Be[1],Le=Object(n.useState)([]),Ue=Object(c.a)(Le,2),Qe=Ue[0],Ve=Ue[1],ze=Object(n.useState)([]),We=Object(c.a)(ze,2),Ye=We[0],Ke=We[1],Je=Object(n.useState)([]),Ze=Object(c.a)(Je,2),Xe=Ze[0],$e=Ze[1],et=Object(n.useState)([]),tt=Object(c.a)(et,2),at=tt[0],it=tt[1],lt=Object(n.useState)([]),rt=Object(c.a)(lt,2),st=rt[0],dt=rt[1],ut=Object(n.useState)([]),bt=Object(c.a)(ut,2),pt=bt[0],jt=bt[1],mt=Object(n.useState)([]),vt=Object(c.a)(mt,2),ht=vt[0],gt=vt[1],xt=Object(n.useState)([]),ft=Object(c.a)(xt,2),yt=ft[0],_t=ft[1],Ct=Object(n.useState)([]),wt=Object(c.a)(Ct,2),St=wt[0],kt=wt[1],Nt=Object(n.useState)([]),Pt=Object(c.a)(Nt,2),Dt=Pt[0],It=Pt[1],At=Object(n.useState)([]),Tt=Object(c.a)(At,2),Et=Tt[0],qt=Tt[1],Ft=Object(n.useState)([]),Mt=Object(c.a)(Ft,2),Rt=Mt[0],Bt=Mt[1],Ht=Object(n.useState)([]),Gt=Object(c.a)(Ht,2),Lt=Gt[0],Ut=Gt[1],Qt=Object(n.useState)([]),Vt=Object(c.a)(Qt,2),Wt=Vt[0],Kt=Vt[1],Jt=Object(n.useState)([]),Zt=Object(c.a)(Jt,2),Xt=Zt[0],$t=Zt[1],ea=Object(n.useState)([]),ta=Object(c.a)(ea,2),aa=ta[0],na=ta[1],ia=Object(n.useState)([]),la=Object(c.a)(ia,2),oa=la[0],ra=la[1],ca=Object(n.useState)([]),sa=Object(c.a)(ca,2),da=sa[0],ba=sa[1],pa=Object(n.useRef)(null),ja=Object(n.useState)(!1),ma=Object(c.a)(ja,2),va=ma[0],ha=ma[1],Oa=Object(n.useState)(!1),ga=Object(c.a)(Oa,2),fa=ga[0],ya=ga[1],_a=Object(n.useState)(!1),Ca=Object(c.a)(_a,2),wa=Ca[0],Sa=Ca[1],ka=Object(n.useState)(!1),Na=Object(c.a)(ka,2),Pa=Na[0],Da=Na[1],Ia=Object(n.useState)(!1),Aa=Object(c.a)(Ia,2),Ta=Aa[0],Ea=Aa[1],qa=Object(n.useState)(!1),Fa=Object(c.a)(qa,2),Ma=Fa[0],Ra=Fa[1],Ba=Object(n.useState)({}),Ha=Object(c.a)(Ba,2),Ga=Ha[0],La=Ha[1],Ua=Object(n.useState)([]),Qa=Object(c.a)(Ua,2),Va=Qa[0],za=Qa[1],Wa=Object(n.useState)("0"),Ya=Object(c.a)(Wa,2),Ka=Ya[0],Ja=Ya[1],Za=Object(n.useState)({open:!1,message:"",severity:""}),Xa=Object(c.a)(Za,2),$a=Xa[0],en=Xa[1],rn=i.a.useState(-1),sn=Object(c.a)(rn,2),dn=sn[0],un=sn[1],bn=Object(n.useState)("100%"),pn=Object(c.a)(bn,2),jn=pn[0],mn=pn[1],vn=Object(n.useState)("Please check and give mandatory fields to save"),hn=Object(c.a)(vn,2),On=hn[0],xn=hn[1],fn=Object(n.useState)("0"),yn=Object(c.a)(fn,2),_n=yn[0],Cn=yn[1],wn=Object(n.useState)(!1),Sn=Object(c.a)(wn,2),kn=Sn[0],Nn=Sn[1],Pn=Object(n.useState)([]),Dn=Object(c.a)(Pn,2),In=Dn[0],An=Dn[1],Tn=Object(n.useState)({}),En=Object(c.a)(Tn,2),qn=En[0],Fn=En[1],Mn=Object(n.useState)(!1),Rn=Object(c.a)(Mn,2),Bn=Rn[0],Hn=Rn[1],Gn=["Invoice","Packing List","Bill of Lading","Phytosanitory Certificate","Fumigation Certificate","Certificate of Origin","ICO Certificate of Origin","Weight Certificate","Quality Certificate","Inspection and Stuffing Certificate","Bill of Entry","Dispatch Note"];Object(n.useEffect)((function(){var t,a;xe({type:"posubcategory"}).then((function(e){ie(Go(e,"supplier_type_name","supplier_type_id"))})),de({type:"currencies"}).then((function(e){kt(Go(e,"currencyname","currencyid"));var t={};e.forEach((function(e,a){t[e.currencyid]=e.currencycode})),It(t)})),fe({type:"containerTypes"}).then((function(e){return qt(Go(e,"conttype_name","conttype_name"))})),ee(Go([{category:"GC",id:"GC"},{category:"ORM",id:"ORM"}],"category","id")),xe({type:"deliveryinfo"}).then((function(e){Ke(e),it(Go(e,"delivery_at_name","delivery_at_id"))})),xe({type:"billinginfo"}).then((function(e){Ve(e),$e(Go(e,"billing_at_name","billing_at_id"))})),ce(Go([{advance:"Percentage",id:101},{advance:"Amount",id:102}],"advance","id")),Fe({type:"portLoadingDetails"}).then((function(e){Ut(Go(e,"Ports","Ports"))})),Fe({type:"originDetails"}).then((function(e){Kt(Go(e,"origin","origin"))})),ra(Go([{id:"packing_forward_charges",label:"Packaging & Forwarding"},{id:"installation_charges",label:"Installation"},{id:"freight_charges",label:"Freight"},{id:"handling_charges",label:"Handling"},{id:"misc_charges",label:"Miscellaneous"},{id:"hamali_charges",label:"Hamali"},{id:"mandifee_charges",label:"Mandi Fee"},{id:"fulltax_charges",label:"Full Tax(Form Nill)"},{id:"insurance_charges",label:"Insurance"}],"label","id")),$t(Go([{id:"By Sea",label:"By Sea"},{id:"By Air",label:"By Air"},{id:"By Road",label:"By Road"}],"label","id")),na(Go([{id:"By Supplier",label:"By Supplier"},{id:"By Self",label:"By Self"}],"label","id")),jt(Go([{id:"Single",label:"Single"},{id:"Multiple",label:"Multiple"}],"label","id")),Ge(Go([{id:"Fixed",label:"Fixed"},{id:"Differential",label:"Differential"}],"label","id")),de({type:"incoterms"}).then((function(e){return Bt(Go(e,"incoterms","incotermsid"))})),Ee({type:"mrinsonponoforview",po_no:null===(t=e.id)||void 0===t?void 0:t.toString()}).then((function(e){_t(e)})),Pe({po_no:null===(a=e.id)||void 0===a?void 0:a.toString()}).then((function(e){var t;f(Object(nt.a)(Object(nt.a)({},e),{},{currency_id:{label:e.currency_name,value:e.currency_id},gcCompositions:e?Vn(e):null,advance_type:"Amount"===e.advance_type?"102":"101",po_qty:e.total_quantity,incotermsid:{label:e.incoterms,value:e.incotermsid},origin:{label:e.origin,value:e.origin},ports:{label:e.ports,value:e.ports},mode_of_transport:"1002"===(null===e||void 0===e?void 0:e.supplier_type_id)?e.mode_of_transport:{label:e.mode_of_transport,value:e.mode_of_transport},insurance:{label:e.insurance,value:e.insurance},container_type:{label:e.container_type,value:e.container_type},otherCharges:{label:e.otherCharges,value:e.otherCharges}}));var a,n=[];if([{id:"packing_forward_charges",label:"Packaging & Forwarding"},{id:"installation_charges",label:"Installation"},{id:"freight_charges",label:"Freight"},{id:"handling_charges",label:"Handling"},{id:"misc_charges",label:"Miscellaneous"},{id:"hamali_charges",label:"Hamali"},{id:"mandifee_charges",label:"Mandi Fee"},{id:"fulltax_charges",label:"Full Tax(Form Nill)"},{id:"insurance_charges",label:"Insurance"}].map((function(t,a){""!==e[t.id]&&n.push({name:t.id,label:t.label,rate:e[t.id]})})),An(n),"1001"===e.supplier_type_id&&ya(!0),un(parseInt(e.status)-1),"4"===e.status||"3"===e.status){var i,l=null===(i=e.item_dispatch)||void 0===i?void 0:i.map((function(e){return e.delivered_quantity?parseInt(e.delivered_quantity):0})).reduce((function(e,t){return e+t}),0);mn(l/e.total_quantity*100+"%")}xe({type:"allsuppliers",supplier_type_id:e.supplier_type_id}).then((function(t){J(t),E({supplier_id:e.supplier_id,supplier_name:e.supplier_name}),L(!1)})),xe({item_type:"GC",type:"greencoffee"}).then((function(t){pe(null===t?[]:t),R({item_id:e.item_id,item_name:e.item_name}),"speciality"===e.coffee_type?Se({type:"approvedqtlines",gc_type:e.item_id,po_date:zn(g.po_date||new Date)}).then((function(t){dt(t),z(null===t||void 0===t?void 0:t.find((function(t){return t.qtline_item===e.quot_no}))),ha(!0)})):ha(!1),Sa(!0),Da(!0),Ea(!0),ke({type:"top3apprPosforselectedvendor",vendor_id:e.supplier_id,gcitem_id:e.item_id}).then((function(e){he(e)})),ke({type:"top3apprPosforothervendor",vendor_id:e.supplier_id,gcitem_id:e.item_id}).then((function(e){_e(e)})),Ne({type:"topmrinrecord",gcitem_id:e.item_id,po_date:e.po_date}).then((function(e){if(null!==e&&void 0!==e&&e.gcitem_id){var t=Object(nt.a)(Object(nt.a)({},e),{},{number:1});Te([t])}else Te(null)})),za(e.audit_log_gc_po)})),(null===(t=e.item_dispatch)||void 0===t?void 0:t.length)>0?(e.item_dispatch.forEach((function(e,t){var a;e.number=++t;var n=null===(a=e.dispatch_date)||void 0===a?void 0:a.split("-");n&&(e.date=new Date(n[2],n[1],n[0]))})),gt(e.item_dispatch)):gt(null),a=e.poid,Re({type:"getDocumentsOnPo",po_id:a}).then((function(e){var t=[];null===Gn||void 0===Gn||Gn.map((function(a){var n,i,l,o,r,c,s=null===e||void 0===e?void 0:e.findIndex((function(e){return(null===e||void 0===e?void 0:e.doc_kind)===a}));return s>-1?t.push({upload:!(null===(n=e[s])||void 0===n||!n.file_name),file_name:null===(i=e[s])||void 0===i?void 0:i.file_name,document_name:null===(l=e[s])||void 0===l?void 0:l.document_name,doc_kind:null===(o=e[s])||void 0===o?void 0:o.doc_kind,required:null===(r=e[s])||void 0===r?void 0:r.required,docid:null===(c=e[s])||void 0===c?void 0:c.docid}):t.push({upload:!1,file_name:"",document_name:"",doc_kind:a,required:!1,docid:null}),null})),console.log("Documents are",t),ba(t)}))}))}),[]);var Ln,Un=function(e,t){var a=Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({},t,e.target.value));f(a)},Qn=function(e,t){var a={};if("billing_at_id"===t){var n,i=Qe.find((function(t){return t.billing_at_id===e.target.value}));a=Object(nt.a)(Object(nt.a)({},g),{},(n={},Object(Ot.a)(n,t,e.target.value),Object(Ot.a)(n,"billing_at_address",i.billing_at_address),n))}else if("delivery_at_id"===t){var l,o=Ye.find((function(t){return t.delivery_at_id===e.target.value}));a=Object(nt.a)(Object(nt.a)({},g),{},(l={},Object(Ot.a)(l,t,e.target.value),Object(Ot.a)(l,"delivery_at_address",o.delivery_at_address),l))}f(a)},Vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{composition_name:"Density(Gm/Cc)",composition_rate:e.density},{composition_name:"Moisture (%)",composition_rate:e.moisture},{composition_name:"Browns (%)",composition_rate:e.browns},{composition_name:"Blacks (%)",composition_rate:e.blacks},{composition_name:"Broken & Bits (%)",composition_rate:e.brokenbits},{composition_name:"Insected Beans (%)",composition_rate:e.insectedbeans},{composition_name:"Bleached (%)",composition_rate:e.bleached},{composition_name:"Husk (%)",composition_rate:e.husk},{composition_name:"Sticks (%)",composition_rate:e.sticks},{composition_name:"Stones (%)",composition_rate:e.stones},{composition_name:"Beans retained on 5mm mesh during sieve analysis",composition_rate:e.beansretained}]},zn=function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},Wn=function(e,t){var a=Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({},t,e));f(a)},Yn=function(e,t){var a=fi(Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({},t,e.target.value)),In),n=Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({totalPrice:a},t,e.target.value));f(n)},Kn=function(e,t){var a=fi(g,t),n=Object(nt.a)(Object(nt.a)({},g),{},{totalPrice:"1002"===g.supplier_type_id?a:parseFloat(void 0===g.purchase_price?0:g.purchase_price)*parseFloat(g.qty/1e3)+(e?parseFloat(e):0)});f(n)},Jn=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,l,o,r,c,s,u,b,p,j,m,v,h,O,x,f,y,C,k,N,P,I,A,T,E,q,F,M,R,B,H,G;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l="Please enter valid details",o=Object(nt.a)({},w),"1002"===g.supplier_type_id&&_.a.isEmpty(g.advance)?o=Object(nt.a)(Object(nt.a)({},o),{},{advance:l}):delete o.advance,"1002"===g.supplier_type_id&&_.a.isEmpty(g.cgst)&&!_.a.isEmpty(g.sgst)?o=Object(nt.a)(Object(nt.a)({},o),{},{cgst:l}):delete o.cgst,"1002"===g.supplier_type_id&&_.a.isEmpty(g.sgst)&&!_.a.isEmpty(g.cgst)?o=Object(nt.a)(Object(nt.a)({},o),{},{sgst:l}):delete o.sgst,"1001"===g.supplier_type_id&&_.a.isEmpty(null===(a=g.market_price)||void 0===a?void 0:a.toString())?o=Object(nt.a)(Object(nt.a)({},o),{},{market_price:l}):delete o.market_price,"1001"===g.supplier_type_id&&_.a.isEmpty(null===(n=g.purchase_price)||void 0===n?void 0:n.toString())?o=Object(nt.a)(Object(nt.a)({},o),{},{purchase_price:l}):delete o.purchase_price,"1002"===g.supplier_type_id&&_.a.isEmpty(null===(i=g.purchasePriceInr)||void 0===i?void 0:i.toString())?o=Object(nt.a)(Object(nt.a)({},o),{},{purchasePriceInr:l}):delete o.purchasePriceInr,_.a.isEmpty(g.supplier_type_id)?o=Object(nt.a)(Object(nt.a)({},o),{},{supplier_type_id:l}):delete o.supplier_type_id,_.a.isEmpty(g.po_category)?o=Object(nt.a)(Object(nt.a)({},o),{},{po_category:l}):delete o.po_category,"1"===g.status&&"2"===g.status&&_.a.isEmpty(g.dispatch_type)?o=Object(nt.a)(Object(nt.a)({},o),{},{dispatch_type:l}):delete o.dispatch_type,"1"===g.status&&"2"===g.status&&"Multiple"===g.dispatch_type&&_.a.isEmpty(g.dispatch_count)?o=Object(nt.a)(Object(nt.a)({},o),{},{dispatch_count:l}):delete o.dispatch_count,void 0===g.billing_at_id?o=Object(nt.a)(Object(nt.a)({},o),{},{billing_at_id:l}):delete o.billing_at_id,void 0===g.delivery_at_id?o=Object(nt.a)(Object(nt.a)({},o),{},{delivery_at_id:l}):delete o.delivery_at_id,"1002"===g.supplier_type_id&&_.a.isEmpty(g.payment_terms_days)?o=Object(nt.a)(Object(nt.a)({},o),{},{payment_terms_days:l}):delete o.payment_terms_days,void 0===g.supplier_id?o=Object(nt.a)(Object(nt.a)({},o),{},{supplier_id:l}):delete o.supplier_id,_.a.isEmpty(o)){t.next=21;break}S(o),D(!0),t.next=36;break;case 21:return G={createduserid:localStorage.getItem("currentUserId"),po_update:!0,emailid:JSON.parse(localStorage.getItem("preference")).name,po_no:g.po_no,quotation_id:g.quotation_id,place_of_destination:g.place_of_destination,delivery_at_id:null===(r=g.delivery_at_id)||void 0===r?void 0:r.toString(),billing_at_id:null===(c=g.billing_at_id)||void 0===c?void 0:c.toString(),incoterms:null===(s=g.incotermsid)||void 0===s?void 0:s.value,origin:null===(u=g.origin)||void 0===u?void 0:u.value,ports:null===(b=g.ports)||void 0===b?void 0:b.value,payment_terms:g.payment_terms,container_type:null===(p=g.container_type)||void 0===p?void 0:p.value,payment_terms_days:g.payment_terms_days,forwarding:g.forwarding,no_of_bags:g.no_of_bags,net_weight:g.net_weight,no_of_containers:null===(j=g.no_of_containers)||void 0===j?void 0:j.toString(),comments:g.comments,po_date:g.po_date,po_category:g.po_category,supplier_id:g.supplier_id,quot_no:g.quot_no,quot_price:null===(m=g.quot_price)||void 0===m?void 0:m.toString(),quot_date:g.quot_date||null,advance:null===(v=g.advance)||void 0===v?void 0:v.toString(),advance_type:null===(h=g.advance_type)||void 0===h?void 0:h.toString(),currency_id:null===(O=g.currency_id)||void 0===O?void 0:O.value,taxes_duties:g.taxes_duties,mode_of_transport:null===(x=g.mode_of_transport)||void 0===x?void 0:x.value,insurance:null===(f=g.insurance)||void 0===f?void 0:f.value,transit_insurance:g.transit_insurance,packing_forwarding:g.packing_forwarding,supplier_type:g.supplier_type_id,cgst:g.cgst,igst:g.igst,sgst:g.sgst,purchase_type:g.purchase_type,terminal_month:g.terminal_month||null,fixation_date:g.fixation||null,booked_terminal_rate:null===(y=g.booked_terminal_rate)||void 0===y?void 0:y.toString(),booked_differential:null===(C=g.booked_differential)||void 0===C?void 0:C.toString(),fixed_terminal_rate:null===(k=g.fixed_terminal_rate)||void 0===k?void 0:k.toString(),fixed_differential:null===(N=g.fixed_differential)||void 0===N?void 0:N.toString(),purchase_price:null===(P=g.purchase_price)||void 0===P?void 0:P.toString(),market_price:null===(I=g.market_price)||void 0===I?void 0:I.toString(),po_margin:null===(A=g.po_margin)||void 0===A?void 0:A.toString(),terminalPrice:null===(T=g.terminalPrice)||void 0===T?void 0:T.toString(),marketPriceInr:null===(E=g.marketPriceInr)||void 0===E?void 0:E.toString(),purchasePriceInr:null===(q=g.purchasePriceInr)||void 0===q?void 0:q.toString(),totalPrice:null===(F=g.totalPrice)||void 0===F?void 0:F.toString(),grossPrice:null===(M=g.grossPrice)||void 0===M?void 0:M.toString(),total_quantity:null===(R=g.po_qty)||void 0===R?void 0:R.toString(),contract:g.contract,otherCharges:null===(B=g.otherCharges)||void 0===B?void 0:B.value,rate:null===(H=g.rate)||void 0===H?void 0:H.toString(),dispatch_type:g.dispatch_type,dispatch_count:g.dispatch_count,item_dispatch:ht,item_id:g.item_id,poid:null===g||void 0===g?void 0:g.poid,packing_forward_charges:g.packing_forward_charges?g.packing_forward_charges.toString():"",installation_charges:g.installation_charges?g.installation_charges.toString():"",freight_charges:g.freight_charges?g.freight_charges.toString():"",handling_charges:g.handling_charges?g.handling_charges.toString():"",misc_charge:g.misc_charge?g.misc_charge.toString():"",hamali_charge:g.hamali_charge?g.hamali_charge.toString():"",mandifee_charges:g.mandifee_charges?g.mandifee_charges.toString():"",fulltax_charges:g.fulltax_charges?g.fulltax_charges.toString():"",insurance_charges:g.insurance_charges?g.insurance_charges.toString():"",documentsection:da.length>0?da:null},Hn(!0),t.prev=23,t.next=26,Ce(G);case 26:t.sent&&(en({open:!0,message:"GC Purchase Order updated successfully"}),setTimeout((function(){e.back("purchase_edit","allpos")}),2e3)),t.next=33;break;case 30:t.prev=30,t.t0=t.catch(23),en({open:!0,message:t.t0.message,severity:"error"});case 33:return t.prev=33,Hn(!1),t.finish(33);case 36:case"end":return t.stop()}}),t,null,[[23,30,33,36]])})));return function(){return t.apply(this,arguments)}}(),Zn=[{label:"PO date",type:"datePicker",required:!0,disabled:!0,error:null===w||void 0===w?void 0:w.po_date,helperText:null===w||void 0===w?void 0:w.po_date,value:g.po_date||new Date,maxDate:new Date,onChange:function(e){return Wn(e,"po_date")},sm:12},{label:"PO category *",type:"select",value:g.po_category||"",required:!0,disabled:!0,error:null===w||void 0===w?void 0:w.po_category,helperText:null===w||void 0===w?void 0:w.po_category,options:$||[],onChange:function(e){return function(e,t){var a,n={};n="ORM"===e.target.value?Object(nt.a)(Object(nt.a)({},g),{},(a={},Object(Ot.a)(a,t,e.target.value),Object(Ot.a)(a,"booked_terminal_rate",g.purchase_price),Object(Ot.a)(a,"booked_differential",0),Object(Ot.a)(a,"fixed_terminal_rate",g.purchase_price),Object(Ot.a)(a,"fixed_differential",0),a)):Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({},t,e.target.value)),f(n)}(e,"po_category")},sm:12}],Xn=[{label:"PO sub category *",type:"select",required:!0,disabled:!0,error:null===w||void 0===w?void 0:w.supplier_type_id,helperText:null===w||void 0===w?void 0:w.supplier_type_id,value:g.supplier_type_id||"",options:ne||[],onChange:function(e){return function(e,t){var a;xe({type:"allsuppliers",supplier_type_id:e.target.value}).then((function(e){J(e)}));var n=Object(nt.a)(Object(nt.a)({},g),{},(a={},Object(Ot.a)(a,t,e.target.value),Object(Ot.a)(a,"supplier_name",""),Object(Ot.a)(a,"supplier_id",""),Object(Ot.a)(a,"supplier_address",""),a));f(n),E(null),L(!1)}(e,"supplier_type_id")},sm:12}],$n=[{label:"Contract no",type:"input",value:g.contract,onChange:function(e){return Un(e,"contract")},sm:12}],ei=[{label:"Supplier",type:"autocomplete",value:T,labelprop:"supplier_name",options:K||[],disabled:!!(G||parseInt(g.status)>=3),onChange:function(e,t){if(t)E(t),xe({type:"supplierinfo",supplier_id:t.supplier_id}).then((function(e){var a=Object(nt.a)(Object(nt.a)({},g),{},{supplier_name:e.supplier_name,supplier_id:e.supplier_id,supplier_address:e.supplier_address,currency_id:"Domestic"===e.supplier_type?"HO-101":""});f(a),ke({type:"top3apprPosforselectedvendor",vendor_id:t.supplier_id,gcitem_id:g.item_id}).then((function(e){he(e)}))}));else{E(null);var a=Object(nt.a)(Object(nt.a)({},g),{},{supplier_name:"",supplier_id:"",supplier_address:""});f(a)}}},{label:"Supplier id",type:"input",disabled:!0,required:!0,error:null===w||void 0===w?void 0:w.supplier_id,helperText:null===w||void 0===w?void 0:w.supplier_id,value:g.supplier_id||""},{label:"Supplier name",type:"input",disabled:!0,value:g.supplier_name||""},{label:"Supplier address",type:"input",disabled:!0,rows:3,multiline:!0,value:g.supplier_address||""}],ti=Gn.map((function(e){var t;return{label:e,type:"checkbox",checked:!(null===(t=da.find((function(t){return t.doc_kind===e})))||void 0===t||!t.required),onChange:function(){return function(e){var t,a=_.a.cloneDeep(da),n=a.findIndex((function(t){return t.doc_kind===e}));n>-1&&(a[n].required=!(null!==(t=a[n])&&void 0!==t&&t.required)),ba(a)}(e)}}})),ai=function(e,t){var a=Object(nt.a)(Object(nt.a)({},g),{},{currency_id:t});f(a)},ni=[{label:"Currency",type:"autocomplete",labelprop:"label",options:St||[],value:g.currency_id,onChange:ai},{label:"Advance type",type:"select",value:g.advance_type||"",options:re||[],onChange:function(e){return Un(e,"advance_type")}},{label:"Advance",type:"float",required:!0,error:null===w||void 0===w?void 0:w.advance,helperText:null===w||void 0===w?void 0:w.advance,value:g.advance||"",onChange:function(e){return Un(e,"advance")}},{label:"No of days IOM can be generated from date of invoice",type:"number",required:!0,error:null===w||void 0===w?void 0:w.payment_terms_days,helperText:null===w||void 0===w?void 0:w.payment_terms_days,value:g.payment_terms_days||"",onChange:function(e){return Un(e,"payment_terms_days")}}],ii=[{label:"Billing at *",type:"select",value:g.billing_at_id||"",options:Xe||[],required:!0,error:null===w||void 0===w?void 0:w.billing_at_id,helperText:null===w||void 0===w?void 0:w.billing_at_id,onChange:function(e){return Qn(e,"billing_at_id")}},{label:"Delivery at *",type:"select",value:g.delivery_at_id||"",options:at||[],required:!0,error:null===w||void 0===w?void 0:w.delivery_at_id,helperText:null===w||void 0===w?void 0:w.delivery_at_id,onChange:function(e){return Qn(e,"delivery_at_id")}},{label:"Billing address",type:"input",rows:4,multiline:!0,value:g.billing_at_address||"",onChange:function(e){return Un(e,"billing_at_address")}},{label:"Delivery address",type:"input",rows:4,multiline:!0,value:g.delivery_at_address||"",onChange:function(e){return Un(e,"delivery_at_address")}}],li=[{label:"Green coffee Type",type:"autocomplete",labelprop:"item_name",value:M,options:be||[],onChange:function(e,t){var a;if(!t)return a=Object(nt.a)(Object(nt.a)({},g),{},{item_id:"",gcCompositions:[],quot_no:"",quot_date:null}),f(a),ha(!1),Sa(!1),Da(!1),void Ea(!1);R({item_id:t.item_id,item_name:t.item_name}),xe({type:"gccomposition",item_id:t.item_id}).then((function(e){a=Object(nt.a)(Object(nt.a)({},g),{},{item_id:t.item_id,gcCompositions:e?Vn(e[0]):null,quot_no:"",quot_date:null,po_qty:"",quot_price:"",dispatch_type:"",dispatch_count:""}),f(a)})),z(null),Sa(!1),Da(!1),Ea(!1),"speciality"===t.gc_type?Se({type:"approvedqtlines",gc_type:t.item_id,po_date:zn(g.po_date||new Date)}).then((function(e){dt(e),ha(!0)})):ha(!1),ke({type:"top3apprPosforselectedvendor",vendor_id:g.supplier_id,gcitem_id:t.item_id}).then((function(e){he(e)})),ke({type:"top3apprPosforothervendor",vendor_id:g.supplier_id,gcitem_id:t.item_id}).then((function(e){_e(e)})),Ne({type:"topmrinrecord",gcitem_id:t.item_id,po_date:g.po_date||new Date}).then((function(e){if(null!==e&&void 0!==e&&e.gcitem_id){var t=Object(nt.a)(Object(nt.a)({},e),{},{number:1});Te([t])}else Te(null)}))},disabled:"1"!==g.status&&"2"!==g.status,required:!0,error:null===w||void 0===w?void 0:w.gcType,helperText:null===w||void 0===w?void 0:w.gcType,md:12,sm:12,xs:12}],oi=[{label:"Quotation no",type:"autocomplete",labelprop:"quotation_no",value:V,options:st||[],onChange:function(e,t){var a=fi(g,In);Me({type:"getBalqtyforPo",quotation_no:null===t||void 0===t?void 0:t.quotation_no}).then((function(e){var n=""===e.order_qty?null===t||void 0===t?void 0:t.qty:(null===t||void 0===t?void 0:t.qty)-e.order_qty;Ja(null===t||void 0===t?void 0:t.qty);var i=Object(nt.a)(Object(nt.a)({},g),{},{quot_no:null===t||void 0===t?void 0:t.quotation_no,quotation_id:null===t||void 0===t?void 0:t.quotation_id,quot_date:null===t||void 0===t?void 0:t.quotation_date,quot_price:null===t||void 0===t?void 0:t.price,po_qty:n,grossPrice:parseFloat(void 0===g.purchasePriceInr?0:g.purchasePriceInr)*parseFloat(null===t||void 0===t?void 0:t.qty),totalPrice:"1002"===g.supplier_type_id?a:parseFloat(void 0===g.purchase_price?0:g.purchase_price)*parseFloat(null===t||void 0===t?void 0:t.qty)+(g.rate?parseFloat(g.rate):0)});(null===t||void 0===t?void 0:t.qty)>0&&Sa(!0),f(i),z(t)}))},disabled:"1"!==g.status&&"2"!==g.status,md:12,sm:12,xs:12},{label:"Quotation date",type:"datePicker",value:g.quot_date||null,onChange:function(e){return Wn(e,"quot_date")},disabled:!0,md:12,sm:12,xs:12},{label:"Price",type:"float",value:g.quot_price||"",onChange:function(e){return Un(e,"quot_price")},disabled:!0,md:12,sm:12,xs:12}],ri=[{label:"Quantity(Kgs)",type:"number",value:g.po_qty||"",error:null===w||void 0===w?void 0:w.po_qty,helperText:null===w||void 0===w?void 0:w.po_qty,onChange:function(e){return function(e,t){var a,n=fi(Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({},t,e.target.value)),In);if(0!==parseFloat(Ka)&&parseFloat(e.target.value)>parseFloat(Ka))S(Object(nt.a)(Object(nt.a)({},w),{},{qty:"You cannot enter value more than ".concat(Ka," for this PO")})),xn("You cannot enter value more than ".concat(Ka," for this PO"));else if(parseFloat(e.target.value)!==parseFloat(_n))S(Object(nt.a)(Object(nt.a)({},w),{},{po_qty:"Total Dispatch Quatity not matches Quantity entered"})),xn("Total Dispatch Quatity not matches Quantity entered");else if(w.po_qty){var i=Object(nt.a)({},w);delete i.po_qty,S(i)}var l=Object(nt.a)(Object(nt.a)({},g),{},(a={},Object(Ot.a)(a,t,e.target.value),Object(Ot.a)(a,"grossPrice",parseFloat(void 0===g.purchasePriceInr?0:g.purchasePriceInr)*parseFloat(e.target.value)),Object(Ot.a)(a,"totalPrice","1002"===g.supplier_type_id?n:parseFloat(void 0===g.purchase_price?0:g.purchase_price)*parseFloat(e.target.value)+(g.rate?parseFloat(g.rate):0)),a));if(e.target.value>0?Sa(!0):(l=Object(nt.a)(Object(nt.a)({},l),{},{dispatch_type:"",dispatch_count:""}),Sa(!1),Da(!1),Ea(!1)),f(l),ht){var o=null===ht||void 0===ht?void 0:ht.map((function(e){return parseInt(e.dispatchqty)})).reduce((function(e,t){return e+t}),0);if(parseFloat(e.target.value)>parseFloat(o))S(Object(nt.a)(Object(nt.a)({},w),{},{qty:"Total Dispatch Quatity not matches Quantity entered"})),xn("Total Dispatch Quatity not matches Quantity entered");else if(parseFloat(g.qty)>parseFloat(Ka)&&0!==parseFloat(Ka))S(Object(nt.a)(Object(nt.a)({},w),{},{qty:"You cannot enter value more than ".concat(Ka," for this PO")})),xn("You cannot enter value more than ".concat(Ka," for this PO"));else if(w.qty){var r=Object(nt.a)({},w);delete r.qty,S(r)}}}(e,"po_qty")},disabled:"1"!==g.status&&"2"!==g.status,md:12,sm:12,xs:12}],ci=[{label:"Dispatch type*",type:"select",value:""===(null===g||void 0===g?void 0:g.dispatch_type)?(null===(t=g.item_dispatch)||void 0===t?void 0:t.length)>1?"Multiple":"Single":g.dispatch_type,options:pt||[],error:null===w||void 0===w?void 0:w.dispatch_type,helperText:null===w||void 0===w?void 0:w.dispatch_type,onChange:function(e){return function(e,t){var a=Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({},t,e.target.value));if("Multiple"===e.target.value)Da(!0);else{var n=[];n[0]={number:1,dispatch_quantity:0,date:new Date},gt(n),Da(!1),Ea(!0)}f(a)}(e,"dispatch_type")},disabled:"1"!==g.status&&"2"!==g.status,md:12,sm:12,xs:12}],si=[{label:"Dispatch count*",type:"number",value:""===g.dispatch_count?null===(a=g.item_dispatch)||void 0===a?void 0:a.length:g.dispatch_count,error:null===w||void 0===w?void 0:w.dispatch_count,helperText:null===w||void 0===w?void 0:w.dispatch_count,onChange:function(e){return function(e,t){var a=Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({},t,e.target.value));if(f(a),e.target.value>99||e.target.value<1)S({dispatch_count:"Please enter valid details: 1 - 99"});else{if(w.dispatch_count){var n=Object(nt.a)({},w);delete n.dispatch_count,S(n)}if(e.target.value<1)Ea(!1);else{Ea(!0);for(var i=[],l=0;l<e.target.value;l++)i[l]={number:l+1,dispatchqty:0,dispatchdate:new Date};gt(i)}}}(e,"dispatch_count")},disabled:"1"!==g.status&&"2"!==g.status,md:12,sm:12,xs:12}],di=[{label:"Taxes & Duties",type:"input",value:g.taxes_duties||"",onChange:function(e){return Un(e,"taxes_duties")}},{label:"Mode of transport",type:"input",value:g.mode_of_transport||"",onChange:function(e){return Un(e,"mode_of_transport")}},{label:"Transit insurance",type:"input",value:g.transit_insurance||"",onChange:function(e){return Un(e,"transit_insurance")}},{label:"Packing & Forwarding",type:"input",value:g.packing_forwarding||"",onChange:function(e){return Un(e,"packing_forwarding")}}],ui=[{label:"Purchase type",type:"select",value:"1002"===g.supplier_type_id?"Fixed":g.purchase_type||"",options:He||[],disabled:"1002"===g.supplier_type_id,onChange:function(e){return Un(e,"purchase_type")}},{label:"Terminal month",type:"datePicker",value:g.terminal_month||null,onChange:function(e){return Wn(e,"terminal_month")}}],bi=[{label:"Fixation date",type:"datePicker",value:g.fixation||null,onChange:function(e){return Wn(e,"fixation")}}],pi=[{label:"Booked terminal Rate",type:"float",value:void 0===g.booked_terminal_rate?"":g.booked_terminal_rate,onChange:function(e){return Un(e,"booked_terminal_rate")}},{label:"Booked differential",type:"float",value:"Fixed"===g.purchase_type?"0":void 0===g.booked_differential?"":g.booked_differential,disabled:"Fixed"===g.purchase_type,onChange:function(e){return function(e,t){var a=parseFloat(e.target.value)+parseFloat(void 0===g.fixed_terminal_rate?0:g.fixed_terminal_rate),n=Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({purchase_price:a,totalPrice:parseFloat(a)*parseFloat(void 0===g.po_qty?0:g.po_qty)+(g.rate?parseFloat(g.rate):0),po_margin:parseFloat(void 0===g.market_price?0:g.market_price)-parseFloat(a)},t,e.target.value));f(n)}(e,"booked_differential")}},{label:"Fixed terminal Rate",type:"float",value:void 0===g.fixed_terminal_rate?"":g.fixed_terminal_rate,onChange:function(e){return function(e,t){var a=parseFloat(e.target.value)+parseFloat(void 0===g.booked_differential?0:g.booked_differential),n=parseFloat(e.target.value)+parseFloat(void 0===g.fixed_differential?0:g.fixed_differential),i=Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({purchase_price:a,market_price:n,po_margin:parseFloat(n)-parseFloat(a),totalPrice:parseFloat(a)*parseFloat(void 0===g.po_qty?0:g.po_qty)+(g.rate?parseFloat(g.rate):0)},t,e.target.value));f(i)}(e,"fixed_terminal_rate")}},{label:"Fixed differential",type:"float",value:"Fixed"===g.purchase_type?"0":void 0===g.fixed_differential?"":g.fixed_differential,disabled:"Fixed"===g.purchase_type,onChange:function(e){return function(e,t){var a=parseFloat(e.target.value)+parseFloat(void 0===g.fixed_terminal_rate?0:g.fixed_terminal_rate),n=Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({market_price:a,po_margin:parseFloat(a)-parseFloat(void 0===g.purchase_price?0:g.purchase_price)},t,e.target.value));f(n)}(e,"fixed_differential")}},{label:"Purchase price"+("ORM"===g.po_category?Dt[null===(l=g.currency_id)||void 0===l?void 0:l.value]?" ("+Dt[null===(o=g.currency_id)||void 0===o?void 0:o.value]+"/MT)":"":" (USD/MT)"),type:"float",value:g.purchase_price||"",required:!0,error:null===w||void 0===w?void 0:w.purchase_price,helperText:null===w||void 0===w?void 0:w.purchase_price,onChange:function(e){return function(e,t){var a=Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({po_margin:parseFloat(void 0===g.market_price?0:g.market_price)-parseFloat(e.target.value),totalPrice:parseFloat(e.target.value)*parseFloat(void 0===g.po_qty?0:g.po_qty)+(g.rate?parseFloat(g.rate):0)},t,e.target.value));f(a)}(e,"purchase_price")}},{label:"Market price"+("ORM"===g.po_category?Dt[null===(s=g.currency_id)||void 0===s?void 0:s.value]?" ("+Dt[null===(u=g.currency_id)||void 0===u?void 0:u.value]+"/MT)":"":" (USD/MT)"),type:"float",value:g.market_price||"",required:!0,error:null===w||void 0===w?void 0:w.market_price,helperText:null===w||void 0===w?void 0:w.market_price,onChange:function(e){return function(e,t){var a=Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({po_margin:parseFloat(e.target.value)-parseFloat(void 0===g.purchase_price?0:g.purchase_price)},t,e.target.value));f(a)}(e,"market_price")}},{label:"PO margin",type:"float",value:g.po_margin||"",onChange:function(e){return Un(e,"po_margin")}},{label:"Total price"+("ORM"===g.po_category?Dt[null===(b=g.currency_id)||void 0===b?void 0:b.value]?" ("+Dt[null===(p=g.currency_id)||void 0===p?void 0:p.value]+"/MT)":"":" (USD/MT)"),type:"float",value:g.totalPrice||"",required:!0,error:null===w||void 0===w?void 0:w.totalPrice,helperText:null===w||void 0===w?void 0:w.totalPrice,onChange:function(e){return Un(e,"totalPrice")}}],ji=[{label:"Terminal (USD)",type:"float",value:g.terminalPrice||"",onChange:function(e){return Un(e,"terminalPrice")}},{label:"Purchase price (INR/KG)*",type:"float",required:!0,error:null===w||void 0===w?void 0:w.purchasePriceInr,helperText:null===w||void 0===w?void 0:w.purchasePriceInr,value:g.purchasePriceInr||"",onChange:function(e){return function(e,t){var a=fi(Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({},t,e.target.value)),In),n=Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({grossPrice:parseFloat(e.target.value)*parseFloat(void 0===g.po_qty?0:g.po_qty),totalPrice:a},t,e.target.value));f(n)}(e,"purchasePriceInr")}},{label:"Gross price (INR)",type:"float",value:g.grossPrice||"",onChange:function(e){return Un(e,"grossPrice")}},{label:"PO Value (INR)",type:"float",value:g.totalPrice||"",onChange:function(e){return Un(e,"totalPrice")}}],mi=[{label:"SGST (%)",type:"float",value:g.sgst,error:null===w||void 0===w?void 0:w.sgst,helperText:null===w||void 0===w?void 0:w.sgst,onChange:function(e){return Yn(e,"sgst")}},{label:"CGST (%)",type:"float",value:g.cgst,error:null===w||void 0===w?void 0:w.cgst,helperText:null===w||void 0===w?void 0:w.cgst,onChange:function(e){return Yn(e,"cgst")}},{label:"IGST (%)",type:"float",value:g.igst,onChange:function(e){return Yn(e,"igst")}}],vi=[{label:"Incoterm",type:"autocomplete",labelprop:"label",value:g.incotermsid,options:Rt||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},g),{},{incotermsid:t});f(a)}},{label:"Origin",type:"autocomplete",labelprop:"label",value:g.origin,options:Wt||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},g),{},{origin:t});f(a)}},{label:"Port of loading",type:"autocomplete",labelprop:"label",value:g.ports,options:Lt||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},g),{},{ports:t});f(a)}},{label:"Mode of transport",type:"autocomplete",labelprop:"label",value:g.mode_of_transport,options:Xt||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},g),{},{mode_of_transport:t});f(a)}},{label:"Insurance",type:"autocomplete",labelprop:"label",value:g.insurance,options:aa||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},g),{},{insurance:t});f(a)}},{label:"Place of destination",type:"input",value:g.place_of_destination,onChange:function(e){return Un(e,"place_of_destination")}},{label:"Forwarding",type:"input",value:g.forwarding,onChange:function(e){return Un(e,"forwarding")}},{label:"Currency",type:"autocomplete",labelprop:"label",value:g.currency_id,options:St||[],onChange:ai},{label:"No of bags",type:"input",value:g.no_of_bags,onChange:function(e){return Un(e,"no_of_bags")}},{label:"Net weight",type:"input",value:g.net_weight,onChange:function(e){return Un(e,"net_weight")}},{label:"No of containers",type:"number",value:g.no_of_containers,onChange:function(e){return Un(e,"no_of_containers")}},{label:"Payment terms",type:"input",rows:3,multiline:!0,value:g.payment_terms,onChange:function(e){return Un(e,"payment_terms")}},{label:"Container type",type:"autocomplete",labelprop:"label",value:g.container_type,options:Et||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},g),{},{container_type:t});f(a)}},{label:"Comments",type:"input",rows:3,multiline:!0,value:g.comments,onChange:function(e){return Un(e,"comments")}}],hi=[{label:"Other charges",type:"autocomplete",labelprop:"label",value:qn.item||"",options:oa||[],onChange:function(e,t){Fn(Object(nt.a)(Object(nt.a)({},qn),{},{item:t,label:t.label}))},sm:6},{label:"1002"===g.supplier_type_id?"Rate(INR)":"Rate",type:"number",value:qn.rate||"",className:j.otherModal,onChange:function(e){return t=e,void Fn(Object(nt.a)(Object(nt.a)({},qn),{},{rate:t.target.value}));var t},sm:6}],Oi=[{label:"Other charges",type:"autocomplete",labelprop:"label",value:g.otherCharges||"",options:oa||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},g),{},{otherCharges:t});f(a)},sm:6},{label:"1002"===g.supplier_type_id?"Rate(INR)":"Rate",type:"number",value:g.rate||"",className:j.otherModal,onChange:function(e){return function(e,t){var a=fi(Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({},t,e.target.value)),In),n=Object(nt.a)(Object(nt.a)({},g),{},Object(Ot.a)({totalPrice:"1002"===g.supplier_type_id?a:parseFloat(void 0===g.purchase_price?0:g.purchase_price)*parseFloat(e.target.value)+(g.rate?parseFloat(g.rate):0)},t,e.target.value));f(n)}(e,"rate")},sm:6}],gi=[{label:"Comments",type:"input",rows:4,multiline:!0,value:g.comments||"",onChange:function(e){return Un(e,"comments")},md:6,sm:6,xs:6}],xi=[{id:"label",label:"Item"},{id:"rate",label:"Rate",type:"number"},{id:"delete",label:"Delete",isEditable:!0,type:"button",handler:{handleClick:function(e){var t=Object(Ol.a)(In);t.map((function(t,a){if(a===e){var n=Object(nt.a)({},g);delete g[t.name],f(n)}})),-1!==e&&(t.splice(e,1),An(t)),0===t.length?Kn(0,t):Kn(null===t||void 0===t?void 0:t.map((function(e){return parseInt(e.rate)})).reduce((function(e,t){return e+t}),0),t)}}}],fi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=t.reduce((function(e,t){return e+=parseFloat(t.rate||0)}),0),n=parseFloat(e.purchasePriceInr||0)*parseFloat(e.po_qty||0),i=parseFloat(e.cgst||0)+parseFloat(e.sgst||0)+parseFloat(e.igst||0),l=n+n*i/100;return l+parseFloat(a)},yi=function(){var e=Object(r.a)(d.a.mark((function e(){var t,a,n,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(Ol.a)(In),(a=t.findIndex((function(e){var t;return e.name===(null===(t=qn.item)||void 0===t?void 0:t.value)})))>=0?t[a].rate=qn.rate:t.push({name:null===(n=qn.item)||void 0===n?void 0:n.value,label:qn.label,rate:qn.rate}),i=Object(nt.a)({},g),t.map((function(e,t){i[e.name]=e.rate})),l=fi(i,t),e.next=8,f(Object(nt.a)(Object(nt.a)({},i),{},{totalPrice:l}));case 8:An(t),Nn(!kn);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_i=function(){var t=Object(r.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=1===parseInt(g.status)?"changeToPendingStatus":3===parseInt(g.status)?"changeToclosedStatus":"changeToInprogessStatus",t.next=4,we({type:n,emailid:JSON.parse(localStorage.getItem("preference")).name,po_id:g.poid});case 4:t.sent&&(en({open:!0,message:1===parseInt(g.status)?"PO sent for request approval":3===parseInt(g.status)?"PO closed successfully":"PO approved successfully"}),setTimeout((function(){e.back("purchase_edit",1===parseInt(g.status)?"pendingwithapprovalpos":3===parseInt(g.status)?"closedpos":"inprogresspos")}),2e3)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),en({open:!0,message:t.t0.message,severity:"error"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),Ci=function(){var e=Object(r.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,we({notify_email:!0,vendor_email:JSON.parse(localStorage.getItem("preference")).name,po_id:g.poid});case 3:e.sent&&en({open:!0,message:"Email Sent Successfully"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),en({open:!0,message:e.t0.message,severity:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),wi=function(e,t){Ra(!0),La(t)};return Ln=Ma?Object(ot.jsx)(qo,{details:Ga,expComposition:g.gcCompositions,back:function(e,t){Ra(!1)}}):Object(ot.jsxs)("form",{className:j.root,noValidate:!0,autoComplete:"off",children:[$a.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},$a),{},{handleClose:function(){return en({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(ua.a,{className:"page-header",children:[Object(ot.jsx)(an.a,{title:" Purchase Order Details",className:"cardHeader"}),Object(ot.jsxs)(xa.a,{children:[Object(ot.jsxs)(m.a,{container:!0,md:12,children:[Object(ot.jsxs)(m.a,{container:!0,md:8,children:[Object(ot.jsxs)(m.a,{item:!0,md:4,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"PO no"}),Object(ot.jsx)(O.a,{children:e.id})]}),Object(ot.jsxs)(m.a,{item:!0,md:4,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"PO date"}),Object(ot.jsx)(O.a,{children:Lo(null===g||void 0===g?void 0:g.po_date)})]}),Object(ot.jsxs)(m.a,{item:!0,md:4,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"PO category"}),Object(ot.jsx)(O.a,{children:null===g||void 0===g?void 0:g.po_category})]})]}),1===parseInt(g.status)&&Object(ot.jsx)(m.a,{container:!0,md:4,justify:"flex-end",style:{display:"flex"},children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Request Approval",onClick:_i})})}),2===parseInt(g.status)&&Object(ot.jsx)(m.a,{container:!0,md:4,justify:"flex-end",style:{display:"flex"},children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Approve",onClick:_i})})}),(3===parseInt(g.status)||4===parseInt(g.status))&&Object(ot.jsx)(m.a,{container:!0,md:2,justify:"flex-end",style:{display:"flex"},children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Send Email",onClick:Ci})})}),4===parseInt(g.status)&&"100%"===jn&&Object(ot.jsx)(m.a,{container:!0,md:2,justify:"flex-end",style:{display:"flex"},children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Close Order",onClick:_i})})})]}),Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsx)(m.a,{item:!0,md:3,xs:6,children:Object(ot.jsx)(Wi,{linkLabel:"Dispatch information",body:function(){return Object(ot.jsxs)(x.a,{className:j.popover,children:[Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Dispatch information"})})}),Object(ot.jsx)(Eo,{data:ht,mrin:yt,dispatchDetails:function(e,t){return wi(e,t)}})]})},linkRef:pa})})})]})]}),Object(ot.jsx)(ua.a,{className:"page-header",children:Object(ot.jsx)(xa.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,children:-1!==dn?Object(ot.jsx)(dl,{activeStep:dn,completeStep:dn,steps:["Req Approval","Approve","In Progress","Shipped","Close Order"],activeStepProgress:jn}):"Loading ..."})})})}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Purchase order information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{container:!0,md:12,xs:12,children:[Object(ot.jsx)(m.a,{item:!0,md:6,xs:12,children:Object(ot.jsx)(tn,{payload:Zn})}),Object(ot.jsxs)(m.a,{item:!0,md:6,xs:12,children:[Object(ot.jsx)(tn,{payload:Xn}),fa&&Object(ot.jsx)(tn,{payload:$n})]})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Vendor/Supplier information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:ei})})]}),"1002"===g.supplier_type_id&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Currency & Advance information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:ni})})]}),"1001"===g.supplier_type_id&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Currency & Incoterms"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:vi})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Billing & Delivery information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:ii})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Green coffee information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{container:!0,md:12,xs:12,children:[Object(ot.jsxs)(m.a,{item:!0,md:6,xs:6,children:[Object(ot.jsx)(tn,{payload:li}),va&&Object(ot.jsx)(tn,{payload:oi}),g.item_id&&Object(ot.jsx)(tn,{payload:ri}),wa&&Object(ot.jsx)(tn,{payload:ci}),Pa&&Object(ot.jsx)(tn,{payload:si}),Ta&&Object(ot.jsx)(m.a,{item:!0,style:{marginTop:15},children:Object(ot.jsx)(gn,{rows:ht,columns:"1"===g.status||"2"===g.status?[{id:"number",label:"SNo"},{id:"dispatch_quantity",label:"Dispatch Quantity(Kgs)",isEditable:!0,type:"number"},{id:"date",label:"Dispatch Date",isEditable:!0,type:"date"}]:[{id:"number",label:"SNo"},{id:"dispatch_quantity",label:"Dispatch Quantity(Kgs)"},{id:"dispatch_date",label:"Dispatch Date"}],hasTotal:"1"===g.status||"2"===g.status,totalColId:"dispatch_quantity",onUpdate:function(e){if(Cn(e),parseFloat(g.po_qty)!==e)return S(Object(nt.a)(Object(nt.a)({},w),{},{po_qty:"Total Dispatch Quatity not matches Quantity entered"})),void xn("Total Dispatch Quatity not matches Quantity entered");if(w.po_qty){var t=Object(nt.a)({},w);delete t.po_qty,S(t)}}})}),g.gcType&&Object(ot.jsx)(m.a,{item:!0,style:{marginTop:15,marginRight:30},children:Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Specification information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(gn,{rows:g.gcCompositions,columns:[{id:"composition_name",label:"Item"},{id:"composition_rate",label:"Composition"}],hasTotal:!1})})]})})]}),Object(ot.jsxs)(m.a,{item:!0,md:6,xs:6,children:[g.item_id&&Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",style:{marginRight:25},children:Object(ot.jsx)(O.a,{children:"Historical price data for selected vendor"})}),Object(ot.jsx)(gn,{rows:ve,columns:[{id:"po_no",label:"PO NO"},{id:"po_createddt",label:"PO Date"},{id:"vendor_name",label:"Vendor"},{id:"price",label:"Price"}]})]}),g.item_id&&Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",style:{marginRight:25},children:Object(ot.jsx)(O.a,{children:"Historical price data for other vendors"})}),Object(ot.jsx)(gn,{rows:ye,columns:[{id:"po_no",label:"PO NO"},{id:"po_createddt",label:"PO Date"},{id:"vendor_name",label:"Vendor"},{id:"price",label:"Price"}]})]})]})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,ref:pa,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"MRIN information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(gn,{rows:yt,columns:[{id:"mrin_date",label:"Date"},{id:"mrin_no",label:"MRIN"},{id:"dispatch",label:"Dispatch"},{id:"expectedqty",label:"Expected(Kgs)"},{id:"deliveredqty",label:"Delivered(Kgs)"},{id:"balance_quantity",label:"Balance Quantity(Kgs)"},{id:"related_detid",label:"Parent dispatch"},{id:"apStatus",label:"AP Status"},{id:"qcStatus",label:"QC Status"}]})})]}),g.item_id&&"1002"===g.supplier_type_id&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Previous tax information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(gn,{rows:Ae,columns:[{id:"number",label:"SNo"},{id:"mrin_date",label:"MRIN Date"},{id:"cgst_per",label:"Tax (%)"}]})})]}),"1002"===g.supplier_type_id&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Tax information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:mi})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Other charges"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{item:!0,md:12,xs:12,children:["1002"===g.supplier_type_id&&Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)(m.a,{md:12,xs:12,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:Object(ot.jsx)(Yt,{label:"Add Other Charges",onClick:function(){return Nn(!kn)}})}),Object(ot.jsx)(gn,{rows:In,columns:xi,hasTotal:!0,totalColId:"rate",onUpdate:Kn})]}),"1001"===g.supplier_type_id&&Object(ot.jsx)(tn,{payload:Oi}),"1002"===g.supplier_type_id&&Object(ot.jsx)(tn,{payload:gi})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Price information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,xs:12,children:Object(ot.jsxs)(m.a,{item:!0,md:12,xs:12,children:[Object(ot.jsx)(tn,{payload:ui}),"1001"===g.supplier_type_id&&Object(ot.jsx)(tn,{payload:pi}),"Differential"===g.purchase_type&&Object(ot.jsx)(tn,{payload:bi}),"1002"===g.supplier_type_id&&Object(ot.jsx)(tn,{payload:ji})]})})})]}),"1001"!==g.supplier_type_id&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Other information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:di})})]}),"1001"===g.supplier_type_id&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Documents Required"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:ti})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(Bo,{data:Va})})]}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:Bn,label:Bn?"Loading...":"Save",onClick:Jn})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})})]}),Object(ot.jsx)(zt,{open:P,handleClose:function(){return D(!P)},body:function(){return Object(ot.jsxs)(x.a,{className:j.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Validation"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{id:"top-row",xs:6,md:10,container:!0,direction:"column",children:On})}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Ok",onClick:function(){return D(!P)}})})})]})}}),Object(ot.jsx)(zt,{open:kn,handleClose:function(){return Nn(!kn)},body:function(){return Object(ot.jsxs)(x.a,{className:j.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Other Charges"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{id:"top-row",xs:6,md:12,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:hi})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Add",onClick:yi})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:function(){return Nn(!kn)}})})]})]})}})]}),Object(ot.jsx)(ot.Fragment,{children:Ln})},Qo=a(17),Vo=a.p+"static/media/logo_pdf.bab40af5.png",zo=a(287),Wo=function(e){return Jo(e)+$o(e)};function Yo(e){var t,a=null===e||void 0===e?void 0:e.toString().split(".");return(null===a||void 0===a?void 0:a.length)>0?(null===(t=a[0])||void 0===t?void 0:t.replace(/\B(?=(\d{3})+(?!\d))/g,","))+(a[1]?"."+a[1]:""):a}var Ko=function(e){var t;return null===e||void 0===e||null===(t=e.item_dispatch)||void 0===t?void 0:t.reduce((function(e,t){return e+parseInt(t.dispatch_quantity)}),0)},Jo=function(e){var t=Ko(e);return(null===e||void 0===e?void 0:e.purchasePriceInr)*t},Zo=function(e){return!_.a.isEmpty(e)&&""!==e.trim()},Xo=function(e){var t=Jo(e),a=$o(e);return t+[e.cgst,e.igst,e.sgst].reduce((function(e,t){return Zo(t)?e+parseFloat(t):e}),0)/100*t+a},$o=function(e){var t=["packing_forward_charges","installation_charges","freight_charges","handling_charges","misc_charges","hamali_charges","mandifee_charges","fulltax_charges","insurance_charges"];return null===t||void 0===t?void 0:t.reduce((function(t,a){return Zo(e[a])?t+parseFloat(e[a]):t}),0)},er=function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},tr=function(e){return Object(ot.jsx)(Qo.Text,{style:[or.textregular,e.style],children:e.children})},ar=function(e){return Object(ot.jsxs)(Qo.View,{style:[{display:"flex",flexDirection:"row"},e.style],children:[Object(ot.jsx)(tr,{style:{marginRight:"10px",fontFamily:"Helvetica-Bold",flex:1},children:e.label}),Object(ot.jsx)(tr,{style:{flex:1},children:e.value})]})},nr=function(e){return Object(ot.jsxs)(Qo.View,{style:{display:"flex",flexDirection:"row"},children:[Object(ot.jsx)(tr,{style:[{marginRight:15,lineHeight:1.5,fontFamily:"Times-Bold",fontSize:"10px"},e.numStyle],children:e.number}),Object(ot.jsxs)(tr,{style:{marginRight:20,textAlign:"justify",lineHeight:1.5,fontFamily:"Times-Roman",fontSize:"10px"},children:[Object(ot.jsxs)(tr,{style:[{fontFamily:"Times-Bold",marginRight:10,lineHeight:1.5,fontSize:"10px"},e.underline?{textDecoration:"underline"}:null],children:[e.label," "]})," "," ",e.value]})]})},ir=function(e){return Object(ot.jsxs)(Qo.View,{style:{display:"flex",flexDirection:"row",marginHorizontal:5,marginBottom:5},children:[Object(ot.jsx)(tr,{style:{marginRight:20,width:100,fontFamily:"Helvetica-Bold",fontSize:"9px"},children:e.label}),Object(ot.jsx)(tr,{style:{marginRight:20,borderLeft:"1px dashed black",paddingLeft:5},children:e.value})]})},lr=function(e){var t=e.data,a=(e.maximumDays,e.purchaseDetails);return Object(ot.jsxs)(Qo.View,{style:or.table,children:[Object(ot.jsxs)(Qo.View,{style:[or.row,or.bold,or.headerTable],children:[Object(ot.jsx)(tr,{style:[or.row1,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"SNO"}),Object(ot.jsx)(tr,{style:[or.row2,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"DESCRIPTION"}),Object(ot.jsx)(tr,{style:[or.row3,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"UNIT"}),Object(ot.jsx)(tr,{style:[or.row4,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"QUANTITY"}),Object(ot.jsx)(tr,{style:[or.row5,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"RATE(INR)"}),Object(ot.jsx)(tr,{style:[or.row6,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"TAX STRUCTURE"}),Object(ot.jsx)(tr,{style:[or.row7,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"AMOUNT(INR)"})]}),t.map((function(e,t){return Object(ot.jsxs)(Qo.View,{style:or.row,wrap:!1,children:[Object(ot.jsx)(tr,{style:or.row1,children:e.sno}),Object(ot.jsxs)(tr,{style:or.row2,children:[e.description,Object(ot.jsxs)(Qo.View,{style:or.table,children:[Object(ot.jsx)(tr,{style:or.row2,children:"DISPATCH QUANTITY"}),Object(ot.jsxs)(Qo.View,{style:[or.row,or.bold,or.headerTable],children:[Object(ot.jsx)(tr,{style:[or.row1,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"DATE"}),Object(ot.jsx)(tr,{style:[or.row1,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"QUANTITY"}),Object(ot.jsxs)(Qo.View,{style:or.row,wrap:!1,children:[Object(ot.jsx)(tr,{style:or.row1,children:"item.dispatch_date"}),Object(ot.jsx)(tr,{style:or.row2,children:"item.dispatch_quantity"})]},t)]})]})]}),Object(ot.jsx)(tr,{style:or.row3,children:e.unit}),Object(ot.jsx)(tr,{style:or.row4,children:e.quantity}),Object(ot.jsx)(tr,{style:or.row5,children:e.rate}),Object(ot.jsxs)(Qo.View,{style:or.row6,children:[e.cgst?Object(ot.jsxs)(Qo.View,{style:{flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[Object(ot.jsx)(tr,{children:"CGST@"}),Object(ot.jsx)(tr,{children:e.cgst})]}):null,e.sgst?Object(ot.jsxs)(Qo.View,{style:{flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[Object(ot.jsx)(tr,{children:"SGST@"}),Object(ot.jsx)(tr,{children:e.sgst})]}):null,_.a.isEmpty(e.igst)?null:Object(ot.jsxs)(Qo.View,{style:{flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[Object(ot.jsx)(tr,{children:"IGST@"}),Object(ot.jsx)(tr,{children:e.igst})]})]}),Object(ot.jsx)(tr,{style:or.row7,children:e.amount})]},t)})),Object(ot.jsxs)(Qo.View,{style:[or.row,{padding:5,justifyContent:"space-between",alignItems:"center"}],children:[Object(ot.jsx)(Qo.View,{style:{width:"40%"}}),Object(ot.jsxs)(Qo.View,{style:{width:"40%",paddingLeft:20,flexDirection:"column"},children:[Object(ot.jsxs)(Qo.View,{style:{flexDirection:"row"},children:[Object(ot.jsx)(Qo.View,{style:{flex:1,marginBottom:10},children:Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold"},children:"GROSS VALUE"})}),Object(ot.jsx)(Qo.View,{style:{flex:1},children:Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold",textAlign:"right"},children:Yo(parseFloat(Wo(a)).toFixed(4))})})]}),Object(ot.jsxs)(Qo.View,{style:{flexDirection:"row",marginBottom:10},children:[Object(ot.jsx)(Qo.View,{style:{flex:1},children:Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold",textDecoration:"underline"},children:"TAXES VALUATION"})}),Object(ot.jsx)(Qo.View,{style:{flex:1}})]}),null!==a&&void 0!==a&&a.cgst?Object(ot.jsxs)(Qo.View,{style:{flexDirection:"row"},children:[Object(ot.jsx)(Qo.View,{style:{flex:1},children:Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica"},children:"CGST"})}),Object(ot.jsx)(Qo.View,{style:{flex:1,justifyContent:"flex-end"},children:Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica",textAlign:"right"},children:""===a.cgst?0:Yo(a.cgst/100*Wo(a))})})]}):null,null!==a&&void 0!==a&&a.sgst?Object(ot.jsxs)(Qo.View,{style:{flexDirection:"row"},children:[Object(ot.jsx)(Qo.View,{style:{flex:1},children:Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica"},children:"SGST"})}),Object(ot.jsx)(Qo.View,{style:{flex:1,justifyContent:"flex-end"},children:Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica",textAlign:"right"},children:""===a.sgst?0:Yo(a.sgst/100*Wo(a))})})]}):null,null!==a&&void 0!==a&&a.igst?Object(ot.jsxs)(Qo.View,{style:{flexDirection:"row",marginBottom:10},children:[Object(ot.jsx)(Qo.View,{style:{flex:1},children:Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica"},children:"IGST"})}),Object(ot.jsx)(Qo.View,{style:{flex:1,justifyContent:"flex-end"},children:Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica",textAlign:"right"},children:""===a.igst?0:Yo(a.igst/100*Wo(a))})})]}):null,Object(ot.jsxs)(Qo.View,{style:{flexDirection:"row"},children:[Object(ot.jsx)(Qo.View,{style:{flex:1},children:Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold"},children:"TAX VALUE"})}),Object(ot.jsx)(Qo.View,{style:{flex:1},children:Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold",textAlign:"right"},children:Yo(parseFloat(a.igst/100*Wo(a))+parseFloat(a.cgst/100*Wo(a))+parseFloat(a.sgst/100*Wo(a)))})})]})]})]}),Object(ot.jsxs)(Qo.View,{style:[or.row,{padding:5,justifyContent:"space-between",alignItems:"center"}],children:[Object(ot.jsx)(Qo.View,{style:{width:"40%"},children:Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold"},children:isNaN(Xo(a))?" - ":"(Indian Rupees "+zo(Xo(a))+" Only) "})}),Object(ot.jsxs)(Qo.View,{style:{width:"40%",paddingLeft:20,flexDirection:"row"},children:[Object(ot.jsx)(Qo.View,{style:{flex:1},children:Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold"},children:"NET VALUE"})}),Object(ot.jsx)(Qo.View,{style:{flex:1},children:Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold",textAlign:"right"},children:Yo(Xo(a).toFixed(4))})})]})]}),Object(ot.jsx)(Qo.View,{style:[or.row,{padding:5}],children:Object(ot.jsx)(tr,{style:{textAlign:"center",fontFamily:"Helvetica-Oblique",fontWeight:800},children:'"We are liable to deduct TDS as per section 194Q of Income Tax Act, 1961 on purchases made from you. Therefore, you are requested not to collect Tax under section 206C(1H)."'})})]})},or=Qo.StyleSheet.create({page:{flexDirection:"row",backgroundColor:"#E4E4E4"},section:{padding:10,paddingBottom:40},header:{display:"flex",flexDirection:"row"},text:{fontSize:"10px",textAlign:"center",fontWeight:"light"},podetails:{display:"flex",flexDirection:"column",marginVertical:5,justifyContent:"center"},textregular:{fontSize:"8px",lineHeight:1.5,fontFamily:"Helvetica"},description:{paddingHorizontal:5},table:{width:"100%",marginVertical:5,border:"1px solid black"},row:{display:"flex",flexDirection:"row",borderTop:"1px solid black"},headerTable:{borderTop:"none"},bold:{fontFamily:"Helvetica-Bold"},row1:{width:"5%",borderRight:"1px solid black",paddingVertical:8,textAlign:"center"},row2:{width:"35%",borderRight:"1px solid black",paddingVertical:8,textAlign:"center"},row3:{width:"5%",borderRight:"1px solid black",paddingVertical:8,textAlign:"center"},row4:{width:"15%",borderRight:"1px solid black",paddingVertical:8,textAlign:"center"},row5:{width:"10%",borderRight:"1px solid black",paddingVertical:8,textAlign:"center"},row6:{width:"15%",borderRight:"1px solid black",paddingVertical:8,textAlign:"center"},row7:{width:"15%",paddingVertical:8,textAlign:"right",marginRight:5}}),rr=function(e){var t,a,n,i,l,o,r,c,s,d,u,b,p,j=e.purchaseDetails;return Object(ot.jsxs)(Qo.Document,{children:[Object(ot.jsxs)(Qo.Page,{style:or.section,size:"A4",children:[Object(ot.jsxs)(Qo.View,{style:or.header,children:[Object(ot.jsx)(Qo.View,{style:{marginHorizontal:"4px"},children:Object(ot.jsx)(Qo.Image,{src:Vo,style:{height:"100px",width:"70px"},alt:"logo"})}),Object(ot.jsxs)(Qo.View,{style:{display:"flex",flexDirection:"column",padding:"5px"},children:[Object(ot.jsxs)(Qo.Text,{style:{fontSize:"18px"},children:["CCL PRODUCTS (INDIA) LIMITED."," "]}),Object(ot.jsx)(Qo.Text,{style:[or.text,{fontFamily:"Helvetica-Bold",fontSize:"9px",marginVertical:10}],children:"(Formerly - CONTINENTAL COFFEE LTD.)"}),Object(ot.jsxs)(Qo.View,{style:{width:"90%"},children:[Object(ot.jsx)(tr,{children:null===j||void 0===j?void 0:j.delivery_at_addressline1}),Object(ot.jsx)(tr,{children:[null===j||void 0===j?void 0:j.delivery_at_addressline2,null===j||void 0===j?void 0:j.delivery_zipcode].filter(Boolean).join(", ")}),Object(ot.jsx)(tr,{children:[null===j||void 0===j?void 0:j.delivery_state,null===j||void 0===j?void 0:j.delivery_country].filter(Boolean).join(", ")}),Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold"},children:_.a.upperCase(null===j||void 0===j?void 0:j.delivery_at_gstno)})]})]}),Object(ot.jsx)(Qo.View,{})]}),Object(ot.jsxs)(Qo.View,{style:or.podetails,children:[Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold",fontSize:10,alignSelf:"center"},children:"PURCHASE ORDER"}),Object(ot.jsxs)(Qo.View,{style:{flexDirection:"row",display:"flex",marginVertical:3},children:[Object(ot.jsx)(Qo.View,{style:{flex:1,border:"1px solid black",borderLeft:"none",padding:5},children:Object(ot.jsxs)(Qo.View,{style:{width:"70%",display:"flex"},children:[Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold"},children:"TO,"}),Object(ot.jsx)(tr,{style:{fontSize:"8px"},children:_.a.upperCase(null===j||void 0===j?void 0:j.supplier_name)}),Object(ot.jsx)(Qo.View,{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:Object(ot.jsx)(tr,{style:{textTransform:"capitalize",lineHeight:"1.3",fontSize:"8px"},children:null===j||void 0===j||null===(t=j.supplier_address)||void 0===t||null===(a=t.split(","))||void 0===a?void 0:a.map((function(e,t){if(""!==e)return Object(ot.jsxs)(ot.Fragment,{children:[e.includes("GST NO")||e.includes("PAN NO")?Object(ot.jsx)(Qo.Text,{style:[or.textregular,{textTransform:"uppercase",width:"auto",lineHeight:"1.3",fontFamily:"Helvetica-Bold"}],children:e+","}):Object(ot.jsxs)(Qo.Text,{style:{textTransform:"capitalize",lineHeight:"1.3",fontSize:"8px"},children:[" ",e+","," "]}),t>=j.supplier_address.split(",").length-4&&"\n"]})}))})})]})}),Object(ot.jsxs)(Qo.View,{style:{flex:1,border:"1px solid black",borderLeft:"none",borderRight:"none",padding:10},children:[Object(ot.jsx)(ar,{label:"P.O.NO",value:e.id}),Object(ot.jsx)(ar,{label:"Date",value:er(null===j||void 0===j?void 0:j.po_date),style:{marginBottom:5}}),Object(ot.jsx)(ar,{label:"Your Quotation No",value:null===j||void 0===j?void 0:j.quot_no}),Object(ot.jsx)(ar,{label:"Dated",value:er(null===j||void 0===j?void 0:j.quot_date)})]})]})]}),Object(ot.jsxs)(Qo.View,{style:or.description,children:[Object(ot.jsx)(tr,{style:{fontSize:"9px",lineHeight:1.2},children:"Dear Sir (s),"}),Object(ot.jsx)(tr,{style:{textIndent:"50px",fontSize:"9px",lineHeight:1.2},children:"Please arrange to supply us the following items against this order in accordance with the terms and conditions mentioned below:"})]}),Object(ot.jsx)(Qo.View,{children:Object(ot.jsx)(lr,{data:[{sno:1,description:null===j||void 0===j?void 0:j.item_name,unit:"KGS",quantity:Yo(Ko(j)),rate:Yo(parseFloat(null===j||void 0===j?void 0:j.purchasePriceInr)),cgst:_.a.isEmpty(null===j||void 0===j?void 0:j.cgst)?null:null===(n=parseFloat(null===j||void 0===j?void 0:j.cgst))||void 0===n?void 0:n.toFixed(2),sgst:_.a.isEmpty(null===j||void 0===j?void 0:j.sgst)?null:null===(i=parseFloat(null===j||void 0===j?void 0:j.sgst))||void 0===i?void 0:i.toFixed(2),igst:_.a.isEmpty(null===j||void 0===j?void 0:j.igst)?null:null===(l=parseFloat(null===j||void 0===j?void 0:j.igst))||void 0===l?void 0:l.toFixed(2),amount:Yo(Jo(j).toFixed(4))}],purchaseDetails:j})}),Object(ot.jsxs)(Qo.View,{children:[Object(ot.jsx)(ir,{label:"Mode of Transport",value:null===j||void 0===j?void 0:j.mode_of_transport}),Object(ot.jsx)(ir,{label:"Delivery Terms",value:Zo(j.advance)&&0!==parseFloat(j.advance)?"".concat(parseFloat(j.advance).toFixed(2),"\n                        ").concat("Percentage"===j.advance_type?"%":""," :"):null}),Object(ot.jsx)(ir,{label:"Terms of Payment",value:Zo(j.payment_terms_days)&&j.payment_terms_days+" WORKING DAYS FROM DATE OF INVOICE"}),Object(ot.jsx)(ir,{label:"Transit Insurance",value:null===j||void 0===j?void 0:j.transit_insurance}),Object(ot.jsx)(ir,{label:"Packing",value:null===j||void 0===j?void 0:j.packing_forwarding})]}),Object(ot.jsxs)(Qo.View,{style:{display:"flex",flexDirection:"row",width:"100%"},children:[Object(ot.jsxs)(Qo.View,{style:{width:"40%"},children:[Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold",borderBottom:"1px dashed black",margin:5},children:"Billing Address"}),Object(ot.jsx)(tr,{style:{marginHorizontal:5},children:null===j||void 0===j?void 0:j.billing_at_addressline1}),Object(ot.jsx)(tr,{style:{marginHorizontal:5},children:null===(o=[null===j||void 0===j?void 0:j.billing_at_addressline2,null===j||void 0===j?void 0:j.billing_zipcode])||void 0===o||null===(r=o.filter(Boolean))||void 0===r?void 0:r.join(", ")}),Object(ot.jsx)(tr,{style:{marginHorizontal:5},children:null===(c=[null===j||void 0===j?void 0:j.billing_state,null===j||void 0===j?void 0:j.billing_country])||void 0===c||null===(s=c.filter(Boolean))||void 0===s?void 0:s.join(", ")}),Object(ot.jsx)(tr,{style:{marginHorizontal:5,fontFamily:"Helvetica-Bold"},children:_.a.upperCase(null===j||void 0===j?void 0:j.billing_at_gstno)})]}),Object(ot.jsx)(Qo.View,{style:{width:"20%"}}),Object(ot.jsxs)(Qo.View,{style:{width:"40%"},children:[Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold",borderBottom:"1px dashed black",margin:5},children:"Delivery Address"}),Object(ot.jsx)(tr,{style:{marginHorizontal:5},children:null===j||void 0===j?void 0:j.delivery_at_addressline1}),Object(ot.jsx)(tr,{style:{marginHorizontal:5},children:null===(d=[null===j||void 0===j?void 0:j.delivery_at_addressline2,null===j||void 0===j?void 0:j.delivery_zipcode])||void 0===d||null===(u=d.filter(Boolean))||void 0===u?void 0:u.join(", ")}),Object(ot.jsx)(tr,{style:{marginHorizontal:5},children:null===(b=[null===j||void 0===j?void 0:j.delivery_state,null===j||void 0===j?void 0:j.delivery_country])||void 0===b||null===(p=b.filter(Boolean))||void 0===p?void 0:p.join(", ")}),Object(ot.jsx)(tr,{style:{marginHorizontal:5,fontFamily:"Helvetica-Bold"},children:_.a.upperCase(null===j||void 0===j?void 0:j.delivery_at_gstno)})]})]}),Object(ot.jsxs)(Qo.View,{style:{alignSelf:"flex-end",justifyContent:"center",alignItems:"center",marginTop:"10px"},children:[Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold",fontSize:"10px"},children:"For CCL PRODUCTS (INDIA) LTD"}),Object(ot.jsx)(tr,{style:{marginTop:40,fontFamily:"Helvetica-Bold"},children:"Authorised Signatory"})]}),Object(ot.jsxs)(Qo.View,{fixed:!0,style:{position:"absolute",bottom:10,left:10,display:"flex",flexDirection:"column",width:"100%"},children:[Object(ot.jsx)(Qo.View,{style:{borderTop:"1px dashed black",padding:5},children:Object(ot.jsx)(tr,{style:{textAlign:"center",fontSize:8},children:"THIS IS ELECTRONICALLY APPROVED. SIGNATURE NOT REQUIRED"})}),Object(ot.jsxs)(Qo.View,{style:{flexDirection:"row",borderTop:"2px solid black",padding:5},children:[Object(ot.jsx)(Qo.View,{style:{flex:2},children:Object(ot.jsx)(tr,{children:'Corporate Office: 7-1-24/2/D. "GreenDale" Ameerpet, Hyderabad, Telangana - 500 016Tel : (040) 23730855.'})}),Object(ot.jsxs)(Qo.View,{style:{flex:1,paddingLeft:20},children:[Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold"},children:"PAN No: AAACC9552G"}),Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold"},children:"CIN No: L15110AP1961PLC000874"})]})]})]})]}),Object(ot.jsxs)(Qo.Page,{style:or.section,children:[Object(ot.jsx)(tr,{style:{textAlign:"center",fontFamily:"Times-Bold",textDecoration:"underline",marginBottom:10,fontSize:"10px"},children:"TERMS & CONDITIONS"}),Object(ot.jsxs)(Qo.View,{style:{padding:10},children:[Object(ot.jsxs)(tr,{style:{fontFamily:"Times-Bold",fontSize:"10px"},children:["1.","  "," Definitions"]}),Object(ot.jsxs)(Qo.View,{style:{paddingHorizontal:20},children:[Object(ot.jsx)(nr,{number:"(a)",underline:!0,numStyle:{marginRight:10},label:"CCL",value:"shall refer to CCL Products (India) Limited;"}),Object(ot.jsx)(nr,{number:"(b)",underline:!0,numStyle:{marginRight:10},label:"Defect",value:" means   any   defect,   deficiency,      error,      failure,      flaw,      omission,      damage,      fault,   inadequacy   or   discrepancy   in   the workmanship or in the Goods or any part or component thereof;"}),Object(ot.jsx)(nr,{number:"(c)",underline:!0,numStyle:{marginRight:10},label:"Goods",value:"shall  refer  to  any  and  all  the  goods,  materials,    equipment,    supplies,    spares,  components  that  are  to  be  supplied by the Supplier under the PO;"}),Object(ot.jsx)(nr,{number:"(d)",underline:!0,numStyle:{marginRight:10},label:"PO",value:"shall refer to the document titled Purchase Order to which these Terms & Conditions are attached;"}),Object(ot.jsx)(nr,{number:"(e)",underline:!0,numStyle:{marginRight:10},label:"Supplier",value:" shall  refer  to  the  supplier  as  identified  on  the  face  of  the  PO  or  shall  refer  to  the  party  to  whom  the  PO  is addressed, and shall include its successors and permitted assigns;"}),Object(ot.jsx)(nr,{number:"(f)",underline:!0,numStyle:{marginRight:10},label:"Terms & Conditions",value:"shall refer to this Terms & Conditions document."})]}),Object(ot.jsx)(nr,{number:"2.",label:"Acceptance.",value:"Any of the following shall constitute Supplier's unqualified acceptance of this PO: (a)acknowledgement of PO; (b) furnishing of any Goods or the rendering of any services pursuant to this PO; or (c) acceptance of any payment. No modification of or release from this Terms & Conditions document shall be binding unless agreed to in writing by both parties."}),Object(ot.jsx)(nr,{number:"3.",label:"PO Identification.",value:" The PO number must appear on all invoices and correspondence."}),Object(ot.jsx)(nr,{number:"4.",label:"Delivery.",value:" Delivery   must   be   completed   within   the   delivery   schedule   stated   on   the   PO.   CCL   reserves   the   right   to   cancel this  PO  without  liability  and  to  charge  the  Supplier  with  any  loss  incurred  as  a  result  of  Supplier's  failure  to  make  the delivery within the delivery schedule specified."}),Object(ot.jsx)(nr,{number:"5.",label:"Packaging.",value:"  Supplier   must   provide   proper   and   adequate   packaging   in   accordance   with   best   commercial   practice,   to ensure   that   the   Goods   in   transit   will   be   free   of   damage.   Packaging   must   be   adequate   to   allow   for   rough   handling, exposure to extreme temperatures, with consideration for the type of Goods and transportation mode."}),Object(ot.jsx)(nr,{number:"6.",label:"Inspection   and   Acceptance.",value:"   CCL   shall   have   30   calendar   days   after   proper   receipt   of   the   Goods   to   inspect   them   and either   accept   or   reject   them   as   non-conforming   with   this   PO.   Based   on   the   inspection,   CCL   may   reject   the   entire delivery.   Supplier   agrees   that   CCL's   payment   under   this   PO   shall   not   be   deemed   acceptance   of   any   Goods   delivered hereunder.    CCL's  right  to  reject  the  Goods  shall  not  be  limited  or  waived  by  the  Goods  having  been  previously  inspected or  tested  by  CCL  prior  to  delivery.  The  Supplier  agrees  that  any  acceptance  by  CCL  does  not  release  the  Supplier  from any   warranty   or   other   obligations   under   this   Contract.   If   the   Goods   are   rejected   by   CCL,   Supplier   shall   (a)   repair   the defects identified by CCL; (b) replace the Goods; or (c) return all payments made by CCL, at the sole discretion of CCL."}),Object(ot.jsx)(nr,{number:"7.",label:"Title  and  risk  of  loss.",value:" Title  to  the  Goods  shall  pass  when  they  are  delivered  and  accepted  by  CCL.  Risk  of  loss,  injury, or destruction of the Goods shall be borne by Supplier until title passes to CCL. "}),Object(ot.jsx)(nr,{number:"8.",label:"Warranties.",value:"   Supplier    represents    and    warrants    that:    (a)    the    Goods    are    conforming    to    the    specifications,    drawings, samples,   or   other   descriptions   furnished,   approved   or   specified   by   CCL   and   are   free   from   Defects.   Unless   provided otherwise  in  the  PO,  this  warranty  shall  remain  valid  for  twelve  (12)  months  after  the  Goods  have  been  delivered  to  and accepted  at  the  final  destination.  CCL's  continued  use  of  such  Goods  after  notifying  Supplier  of  their  Defect  or  failure  to conform   will   not   be   considered   a   waiver   of   Supplier's   warranty.   (b)   it   has   full   title   to   the   Goods   and   is   a   company financially    sound    and    duly    licensed,    with    adequate    human    resources,    equipment,    competence,    expertise    and    skills necessary   to   carry   out   fully   and   satisfactorily,   within   the   stipulated   completion   period,   the   delivery   of   the   Goods   in accordance  with  this  PO;  (c)  it  shall  comply  with  all  applicable  laws,  ordinances,   rules   and   regulations   when   performing its  obligations  under  this  PO;  (d)  in  all  circumstances  it  shall  act  in  the  best  interests  of  CCL;  (e)  it  has  not  misrepresented or concealed any material facts in the procuring of this PO."}),Object(ot.jsx)(nr,{number:"9.",label:"Indemnification.",value:"   The   Supplier   shall   at   all   times   defend,   indemnify,   and   hold   harmless   CCL,   its   officers,   employees,      and agents    from    and    against    all    losses,    costs,    damages    and    expenses    (including    legal    fees    and    costs),    claims,    suits, proceedings,  demands  and  liabilities  of  any  kind  or  nature  to  the  extent  arising  out  of  or  resulting  from  breach  of  the  PO or  the  Terms  &  Conditions,  or  acts  or  omissions  of  the  Supplier  or  its  employees,  officers,  agents  or  subcontractors,  in  the performance of its obligations. "}),Object(ot.jsx)(nr,{number:"10.",label:"Independent   Contractor.",value:"  The   Supplier   shall   supply   Goods   pursuant   to   this   PO   as   an   independent   contractor   and   not   as an employee, partner, or agent of CCL."}),Object(ot.jsx)(nr,{number:"11.",label:"Audit.",value:"  The   Supplier   agrees   to   maintain   records,   in   accordance   with   sound   and   generally   accepted   accounting   procedures, of   all   direct   and   indirect   costs   of   whatever   nature   involving   transactions   related   to   the   PO.   The   Supplier   shall   make   all such   records   available   to   CCL   or   the   CCL's   designated   representative   at   all   reasonable   times,   for   inspection,   audit,      or reproduction  for  the  purpose  of  verifying  services  or  quantities  delivered,  or  the  right  of  Supplier  to  any  price  adjustment or extra charge claimed under this PO."}),Object(ot.jsx)(nr,{number:"12.",label:"Invoices.",value:" Supplier  shall  raise  proper  invoices  upon  CCL  as  per  the  applicable  laws.  If  it  is  a  zero  rated  supply,  valid  LUT number  shall  be  mentioned  in  the  invoice.  If  LUT  No.  has  not  been  allotted  and  has  been  applied  for,  acknowledgement copy  of  having  applied  for  LUT  shall  be  annexed  along  with  invoice.  All  invoices  shall  be  duly  accompanied  by  such  other supporting documents as may be specified by CCL."}),Object(ot.jsx)(nr,{number:"13.",label:"Right to Set-off:",value:" CCL shall have right to set-off or deduct any amounts due from the Supplier to CCL"}),Object(ot.jsx)(nr,{number:"14.",label:"Assignment  and  Subcontracting.",value:" The  Supplier  shall  not  assign  or  subcontract  its  obligations  or  any  work  under  the  PO in  part  or  all,  unless  agreed  upon  in  writing  in  advance  by  CCL.  Any  subcontract  entered   into   by   the   Supplier   without approval in writing by the CCL may be cause for termination of the PO. "}),Object(ot.jsx)(nr,{number:"15.",label:"Governing  Law   and   Jurisdiction. ",value:"  The   PO   and   the  Terms   &   Conditions   shall   be   governed   in   accordance   with   the   laws of India and shall be subject to the exclusive jurisdiction of the courts in Hyderabad, Telangana."}),Object(ot.jsx)(nr,{number:"16.",label:"Waiver.",value:"Failure  by  either  Party  to  insist  in  any  one  or  more  instances  on  a  strict  performance  of  any  of  the  provisions  of the  PO  or  the  Terms  &  Conditions  shall  not  constitute  a  waiver  or  relinquishment  of  the  right  to  enforce  the  provisions  of this PO or the Terms & Conditions in future instances, but this right shall continue and remain in full force and effect. 17.No Lien. Supplier shall not create any lien on the Goods for any reason whatsoever."}),Object(ot.jsx)(nr,{number:"17.",label:"No Lien.",value:"Supplier shall not create any lien on the Goods for any reason whatsoever."}),Object(ot.jsx)(nr,{number:"18.",label:"Binding   nature.",value:"This   Terms   &   Conditions   document   contains   the   entire   and   only   understanding   between   the   parties respecting the subject matter hereof and supersedes all prior agreements and understandings."}),Object(ot.jsx)(nr,{number:"19.",label:"Time is of the Essence",value:"  Time is of the essence with respect to every duty required to be performed by either party."}),Object(ot.jsx)(nr,{number:"20.",label:"Headings;    Emphasis.",value:"   Headings    in    this    lease    for    convenience    only.    Unless    otherwise    expressed,    headings,    bold, italicized   or   underlined   letters,   numerals,   or   characters   have   no   greater   significance   than   plain   text   letters,   numerals,      or characters."}),Object(ot.jsx)(nr,{number:"21.",label:"Interpretation.",value:" The  terms  laid  down  under  this  Terms  &  Conditions  document  shall  be  in  addition  to  the  terms  of  the PO.  If  any  provisions  of  this  Terms  &  Conditions  are  held  or  deemed  unenforceable  or  too  broad  to  permit  enforcement of  such  provision  to  its  full  extent,  then  such  provision  shall  be  enforced  to  the  maximum  extent  permitted  by  applicable law. Nothing contained herein shall limit either party\u2019s right to available remedies in law or equity against the other party."}),Object(ot.jsx)(nr,{number:"22.",label:"Termination.",value:" Termination   of   the   PO   for   any   reason   shall   constitute   valid   termination   of   this   Terms   &   Conditions document."}),Object(ot.jsx)(nr,{number:"23.",label:"Survival.",value:"  The   obligations   under   this   Terms   &   Conditions   document   which   by   implication   are   intended   to   survive   shall survive  the  termination  or  expiry  of  PO  and  the  Terms  &  Conditions.  In  addition,  clause  6,    7,    8,    9,    14,    15  shall  survive  the termination or expiration of the PO and the Terms & Conditions."})]}),Object(ot.jsxs)(Qo.View,{fixed:!0,style:{position:"absolute",bottom:10,left:10,display:"flex",flexDirection:"row",borderTop:"2px solid black",padding:5,width:"100%"},children:[Object(ot.jsx)(Qo.View,{style:{flex:2},children:Object(ot.jsx)(tr,{children:'Corporate Office: 7-1-24/2/D. "GreenDale" Ameerpet, Hyderabad, Telangana - 500 016 Tel : (040) 23730855.'})}),Object(ot.jsxs)(Qo.View,{style:{flex:1,paddingLeft:20},children:[Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold"},children:"PAN No: AAASKCMAC"}),Object(ot.jsx)(tr,{style:{fontFamily:"Helvetica-Bold"},children:"CIN No: LASACOACKASCOK1212AS"})]})]})]})]})},cr=Qo.StyleSheet.create({page:{flexDirection:"row"},section:{paddingHorizontal:20,paddingVertical:30,paddingBottom:40},header:{display:"flex",flexDirection:"row",borderBottom:"1px solid #000"},text:{fontSize:"10px",textAlign:"center",fontWeight:"light"},podetails:{display:"flex",flexDirection:"column",marginVertical:5,justifyContent:"center"},textregular:{fontSize:"8px",lineHeight:1.3},description:{paddingHorizontal:5},table:{width:"100%",marginVertical:5,border:"1px solid black"},row:{display:"flex",flexDirection:"row",borderTop:"1px solid black"},headerTable:{borderTop:"none"},bold:{fontFamily:"Helvetica-Bold"},row21:{width:"20%",borderRight:"1px solid black",paddingVertical:5,textAlign:"center"},row22:{width:"20%",borderRight:"1px solid black",paddingVertical:5,textAlign:"center"},row23:{width:"20%",borderRight:"1px solid black",paddingVertical:5,textAlign:"center"},row24:{width:"40%",borderRight:"1px solid black",paddingVertical:5,textAlign:"center"},row1:{width:"50%",borderRight:"1px solid black",paddingVertical:8,textAlign:"center"},row2:{width:"10%",borderRight:"1px solid black",paddingVertical:8,textAlign:"center"},row3:{width:"10%",borderRight:"1px solid black",paddingVertical:8,textAlign:"center"},row4:{width:"10%",borderRight:"1px solid black",paddingVertical:8,textAlign:"center"},row5:{width:"10%",borderRight:"1px solid black",paddingVertical:8,textAlign:"center"},row6:{width:"10%",borderRight:"1px solid black",paddingVertical:8,textAlign:"center"}}),sr=function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},dr=["January","February","March","April","May","June","July","August","September","October","November","December"],ur=function(e){var t=new Date(e);return t.getDate()+" "+dr[t.getMonth()]+" "+t.getFullYear()},br=["Jan","Feb","March","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],pr=function(e){var t=new Date(e);return br[t.getMonth()+1]+"-"+t.getFullYear()},jr=function(e){return Object(ot.jsx)(Qo.Text,{style:[cr.textregular,e.style],children:e.children})},mr=function(e){return Object(ot.jsxs)(Qo.View,{style:[{display:"flex",flexDirection:"row"},e.style],children:[Object(ot.jsx)(jr,{style:{marginRight:"10px",fontFamily:"Helvetica-Bold",flex:1,lineHeight:"1.5"},children:e.label}),Object(ot.jsx)(jr,{style:{flex:1,lineHeight:"1.5"},children:e.value})]})},vr=function(e){return Object(ot.jsxs)(Qo.View,{style:{display:"flex",flexDirection:"row",marginVertical:5},children:[Object(ot.jsx)(jr,{style:{marginRight:20,lineHeight:1.3,fontWeight:"600",width:"25%",fontFamily:"Helvetica-Bold"},children:e.label}),Object(ot.jsx)(jr,{style:{marginRight:20,lineHeight:1.3,paddingLeft:5,width:"75%"},children:e.value})]})},hr=function(e){return Object(ot.jsxs)(Qo.View,{style:{display:"flex",flexDirection:"row",marginLeft:10},children:[Object(ot.jsx)(jr,{style:{fontFamily:"Helvetica-Bold",lineHeight:1.3,textAlign:"center",marginRight:5},children:e.label}),Object(ot.jsx)(jr,{style:{marginTop:"0px",lineHeight:1.3,fontSize:"8px"},children:e.value})]})},Or=function(e){var t,a=Object(Ol.a)(new Set(null===(t=e.filter((function(e){return e.requiredx})))||void 0===t?void 0:t.map((function(e){return null===e||void 0===e?void 0:e.doc_kind}))));return null===a||void 0===a?void 0:a.map((function(e,t){return Object(ot.jsx)(hr,{label:t+1,value:_.a.toUpper(e)})}))},gr=function(e){var t=e.data;e.maximumDays;return Object(ot.jsxs)(Qo.View,{style:cr.table,children:[Object(ot.jsxs)(Qo.View,{style:[cr.row,cr.bold,cr.headerTable],children:[Object(ot.jsx)(jr,{style:[cr.row1,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"QUALITY"}),Object(ot.jsx)(jr,{style:[cr.row2,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"BAGS / NOS"}),Object(ot.jsx)(jr,{style:[cr.row3,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"BAGS WT"}),Object(ot.jsx)(jr,{style:[cr.row4,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"BAGS WT KGS"}),Object(ot.jsx)(jr,{style:[cr.row5,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"RATE / KG USD"}),Object(ot.jsx)(jr,{style:[cr.row6,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"AMOUNT USD"})]}),t.map((function(e,t){return Object(ot.jsxs)(Qo.View,{style:cr.row,wrap:!1,children:[Object(ot.jsx)(jr,{style:cr.row1,children:e.quality}),Object(ot.jsx)(jr,{style:cr.row2,children:e.bags}),Object(ot.jsx)(jr,{style:cr.row3,children:e.wt}),Object(ot.jsx)(jr,{style:cr.row4,children:e.netkgs}),Object(ot.jsx)(jr,{style:cr.row5,children:e.ratekgs}),Object(ot.jsx)(jr,{style:cr.row6,children:e.amount})]},t)}))]})},xr=function(e){var t=e.data;e.maximumDays;return Object(ot.jsxs)(Qo.View,{style:cr.table,children:[Object(ot.jsxs)(Qo.View,{style:[cr.row,cr.bold,cr.headerTable],children:[Object(ot.jsx)(jr,{style:[cr.row21,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"CONTRACT NO"}),Object(ot.jsx)(jr,{style:[cr.row22,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"ORIGIN"}),Object(ot.jsx)(jr,{style:[cr.row23,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"NO OF CONTAINER"}),Object(ot.jsx)(jr,{style:[cr.row24,{textAlign:"center",fontFamily:"Helvetica-Bold",paddingHorizontal:"5",display:"flex",textWrap:"wrap",fontSize:8}],children:"SHIPMENT"})]}),t.map((function(e,t){return Object(ot.jsxs)(Qo.View,{style:cr.row,wrap:!1,children:[Object(ot.jsx)(jr,{style:cr.row21,children:e.contract}),Object(ot.jsx)(jr,{style:cr.row22,children:e.origin}),Object(ot.jsx)(jr,{style:cr.row23,children:e.container}),Object(ot.jsx)(jr,{style:cr.row24,children:e.shipment})]},t)}))]})},fr=function(e){var t,a,n,i=e.purchaseDetails,l=e.documents;return Object(ot.jsx)(Qo.Document,{children:Object(ot.jsxs)(Qo.Page,{style:cr.section,size:"A4",children:[Object(ot.jsxs)(Qo.View,{style:cr.header,children:[Object(ot.jsx)(Qo.View,{style:{marginHorizontal:"4px"},children:Object(ot.jsx)(Qo.Image,{src:Vo,style:{height:"60px",width:"60px"},alt:"logo"})}),Object(ot.jsxs)(Qo.View,{style:{padding:"5px",width:"90%",margin:"0 auto",alignItems:"center"},children:[Object(ot.jsx)(Qo.Text,{style:{fontSize:"15px",fontFamily:"Helvetica-Bold",width:"100%",textAlign:"center",marginBottom:5},children:"CCL PRODUCTS (INDIA) LIMITED "}),Object(ot.jsxs)(Qo.View,{style:{width:"80%",whiteSpace:"pre-line"},children:[Object(ot.jsx)(jr,{style:{fontFamily:"Helvetica-Bold",textAlign:"center",fontSize:"10px"},children:_.a.upperCase(null===i||void 0===i?void 0:i.delivery_at_addressline1)}),Object(ot.jsx)(jr,{style:{fontFamily:"Helvetica-Bold",textAlign:"center",fontSize:"10px"},children:null===(t=[_.a.upperCase(null===i||void 0===i?void 0:i.delivery_at_addressline2),_.a.upperCase(null===i||void 0===i?void 0:i.delivery_zipcode)])||void 0===t?void 0:t.filter(Boolean).join(", ")}),Object(ot.jsx)(jr,{style:{fontFamily:"Helvetica-Bold",textAlign:"center",fontSize:"10px"},children:null===(a=[_.a.upperCase(null===i||void 0===i?void 0:i.delivery_state),_.a.upperCase(null===i||void 0===i?void 0:i.delivery_country)])||void 0===a?void 0:a.filter(Boolean).join(", ")})]}),Object(ot.jsx)(Qo.Text,{style:[cr.text,{fontFamily:"Helvetica-Bold",textAlign:"center"}],children:"CIN : L15110AP1961PLC000874"})]}),Object(ot.jsx)(Qo.View,{})]}),Object(ot.jsxs)(Qo.View,{style:cr.podetails,children:[Object(ot.jsx)(Qo.Text,{style:{fontFamily:"Helvetica-Bold",alignSelf:"center",letterSpacing:"8px",textDecoration:"underline",marginBottom:5},children:"CONTRACT"}),Object(ot.jsxs)(Qo.View,{style:{flexDirection:"row",display:"flex",marginVertical:3},children:[Object(ot.jsxs)(Qo.View,{style:{flex:1,padding:5},children:[Object(ot.jsx)(Qo.Text,{style:[cr.textregular,{textTransform:"uppercase",width:"auto",lineHeight:"1.3",fontFamily:"Helvetica-Bold",textDecoration:"underline"}],children:"SELLER / EXPORTER"}),Object(ot.jsx)(jr,{style:{textTransform:"capitalize",lineHeight:"1.3",marginTop:"10px"},children:_.a.upperCase(i.supplier_name)}),Object(ot.jsx)(Qo.View,{style:{display:"flex",flexDirection:"row",width:"60%"},children:Object(ot.jsx)(jr,{style:{textTransform:"capitalize",lineHeight:"1.3",fontSize:"8px"},children:null===i||void 0===i||null===(n=i.supplier_address.split(","))||void 0===n?void 0:n.map((function(e,t){if(""!==e)return Object(ot.jsxs)(ot.Fragment,{children:[e.includes("GST NO")||e.includes("PAN NO")?Object(ot.jsx)(Qo.Text,{style:[cr.textregular,{textTransform:"uppercase",width:"auto",lineHeight:"1.3",fontFamily:"Helvetica-Bold"}],children:e+","}):Object(ot.jsxs)(Qo.Text,{style:{textTransform:"capitalize",lineHeight:"1.3",fontSize:"8px"},children:[" ",e+","," "]}),t>=i.supplier_address.split(",").length-4&&"\n"]})}))})}),Object(ot.jsx)(jr,{children:null===i||void 0===i?void 0:i.supplier_email})]}),Object(ot.jsxs)(Qo.View,{style:{flex:1,paddingLeft:80},children:[Object(ot.jsx)(mr,{label:"CONTRACT NO",value:i.contract?i.contract:"-"}),Object(ot.jsxs)(Qo.View,{style:{lineHeight:"1.3",display:"flex",flexDirection:"row",marginBottom:"10px"},children:[Object(ot.jsx)(jr,{style:{marginRight:"10px",fontFamily:"Helvetica-Bold",flex:1},children:"CONTRACT DATE"}),Object(ot.jsx)(jr,{style:{flex:1},children:i.po_date?sr(i.po_date):"-"})]}),Object(ot.jsx)(mr,{label:"CONTRACT TYPE",value:"C&F"}),Object(ot.jsx)(mr,{label:"FORWARDING",value:i.forwarding?i.forwarding:"-"}),Object(ot.jsx)(mr,{label:"PORT OF LOADING",value:i.ports?i.ports:"-"}),Object(ot.jsx)(mr,{label:"DESTINATION",value:i.place_of_destination?i.place_of_destination:"-"}),Object(ot.jsx)(mr,{label:"INSURENCE",value:i.insurance?i.insurance:"-"})]})]})]}),Object(ot.jsxs)(Qo.View,{style:cr.description,children:[Object(ot.jsx)(Qo.Text,{style:[cr.textregular,{textTransform:"uppercase",width:"auto",lineHeight:"1.3",fontFamily:"Helvetica-Bold",textDecoration:"underline"}],children:"SHIPPER DETAILS"}),Object(ot.jsx)(Qo.Text,{style:[cr.textregular,{textTransform:"uppercase",marginTop:"10px",width:"auto",lineHeight:"1.3",fontWeight:"300"}],children:"PT SARIMKMUR TUNGAL MANDARI"})]}),Object(ot.jsxs)(Qo.View,{children:[Object(ot.jsx)(Qo.Text,{style:[cr.textregular,{textTransform:"uppercase",marginTop:"15px",marginBottom:"3px",width:"auto",lineHeight:"1.3",fontFamily:"Helvetica-Bold",textDecoration:"underline"}],children:"PRODUCT: GREEN COFFEE BEANS"}),Object(ot.jsx)(gr,{data:[{quality:null===i||void 0===i?void 0:i.item_name,bags:null===i||void 0===i?void 0:i.no_of_bags,wt:null===i||void 0===i?void 0:i.total_quantity,netkgs:null===i||void 0===i?void 0:i.net_weight,ratekgs:null===i||void 0===i?void 0:i.purchase_price,amount:null===i||void 0===i?void 0:i.totalPrice}]})]}),Object(ot.jsxs)(Qo.View,{children:[Object(ot.jsx)(Qo.Text,{style:[cr.textregular,{textTransform:"uppercase",marginTop:"15px",marginBottom:"3px",width:"auto",lineHeight:"1.3",fontFamily:"Helvetica-Bold",textDecoration:"underline"}],children:"SHIPMENT"}),Object(ot.jsx)(xr,{data:[{contract:i.contract,origin:i.origin,container:""===i.no_of_containers?parseInt(i.no_of_containers):"0 X "+i.container_type===""?parseInt(i.container_type):0,shipment:pr(i.po_date)}]})]}),Object(ot.jsxs)(Qo.View,{style:{width:"70%"},children:[Object(ot.jsx)(vr,{label:"PAYMENT TERMS",value:i.payment_terms}),Object(ot.jsx)(vr,{label:"SPECIAL CLAUSES",value:i.comments}),Object(ot.jsx)(vr,{label:"OTHER TERMS",value:"shipment in ".concat(i.no_of_bags," kg bags")})]}),Object(ot.jsxs)(Qo.View,{children:[Object(ot.jsx)(jr,{style:{textTransform:"uppercase",marginTop:"15px",marginBottom:"3px",width:"auto",lineHeight:"1.3",fontFamily:"Helvetica-Bold",textDecoration:"underline"},children:"DOCUMENTS REQUIRED:"}),Or(l)]}),Object(ot.jsxs)(Qo.View,{style:{position:"absolute",bottom:40,display:"flex",flexDirection:"row",marginHorizontal:20},fixed:!0,children:[Object(ot.jsxs)(Qo.View,{style:{width:"30%",borderTop:"1px solid #333"},children:[Object(ot.jsx)(jr,{style:{fontFamily:"Helvetica-Bold",marginBottom:"10px",paddingTop:"5px",textAlign:"center"},children:"BUYER"}),Object(ot.jsx)(jr,{style:{fontFamily:"Helvetica-Bold"},children:"CCL PRODUCTS(INDIA) LIMITED"}),Object(ot.jsxs)(jr,{children:["DT. ",i.po_date?ur(i.po_date):"-"]})]}),Object(ot.jsx)(Qo.View,{style:{width:"40%"}}),Object(ot.jsxs)(Qo.View,{style:{width:"30%",borderTop:"1px solid #333"},children:[Object(ot.jsx)(jr,{style:{fontFamily:"Helvetica-Bold",marginBottom:"10px",paddingTop:"5px",textAlign:"center"},children:"SELLER"}),Object(ot.jsx)(jr,{style:{fontFamily:"Helvetica-Bold",textAlign:"right"},children:_.a.upperCase(i.supplier_name)}),Object(ot.jsxs)(jr,{style:{textAlign:"right"},children:["DT. ",i.po_date?ur(i.po_date):"-"]})]})]})]})})},yr=Object(g.a)((function(e){return{button:{margin:e.spacing(1),backgroundColor:dt,color:st,minWidth:150,textTransform:"capitalize","&:hover":{backgroundColor:dt,opacity:.8},"& $MuiButton-label":{margin:0}}}})),_r=function(e){var t=yr(),a=e.purchaseDetails,n=e.documents,i=e.id;return Object(ot.jsx)(Qo.BlobProvider,{document:"Import"!==(null===a||void 0===a?void 0:a.supplier_type)?Object(ot.jsx)(rr,{purchaseDetails:a,id:i}):Object(ot.jsx)(fr,{purchaseDetails:a,documents:n}),children:function(a){var n=a.url;return Object(ot.jsx)(u.a,Object(nt.a)(Object(nt.a)({color:"primary",className:t.button},e),{},{children:Object(ot.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",style:{color:"white",flex:1,margin:0},children:"Generate PDF"})}))}})},Cr=Object(g.a)((function(e){return{popover:{padding:e.spacing(2,4,3)},labelheading:{marginTop:20,display:"inline-block"}}})),wr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{composition_name:"Density(Gm/Cc)",composition_rate:e.density},{composition_name:"Moisture (%)",composition_rate:e.moisture},{composition_name:"Browns (%)",composition_rate:e.browns},{composition_name:"Blacks (%)",composition_rate:e.blacks},{composition_name:"Broken & Bits (%)",composition_rate:e.brokenbits},{composition_name:"Insected Beans (%)",composition_rate:e.insectedbeans},{composition_name:"Bleached (%)",composition_rate:e.bleached},{composition_name:"Husk (%)",composition_rate:e.husk},{composition_name:"Sticks (%)",composition_rate:e.sticks},{composition_name:"Stones (%)",composition_rate:e.stones},{composition_name:"Beans retained on 5mm mesh during sieve analysis",composition_rate:e.beansretained}]},Sr=function(e){var t,a,l=Cr(),o=Object(n.useState)({}),s=Object(c.a)(o,2),u=s[0],b=s[1],p=Object(n.useState)(!1),j=Object(c.a)(p,2),v=j[0],h=j[1],g=Object(n.useState)([]),f=Object(c.a)(g,2),y=f[0],_=f[1],C=Object(n.useState)([]),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)([]),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)([]),T=Object(c.a)(A,2),E=T[0],q=T[1],F=Object(n.useState)({}),M=Object(c.a)(F,2),R=M[0],B=M[1],H=Object(n.useState)([]),G=Object(c.a)(H,2),L=G[0],U=G[1],Q=Object(n.useState)([]),V=Object(c.a)(Q,2),z=V[0],W=V[1],Y=Object(n.useState)([]),K=Object(c.a)(Y,2),J=K[0],Z=K[1],X=Object(n.useRef)(null),$=Object(n.useState)(!1),ee=Object(c.a)($,2),te=ee[0],ae=ee[1],ne=i.a.useState(-1),ie=Object(c.a)(ne,2),le=ie[0],oe=ie[1],re=Object(n.useState)("100%"),ce=Object(c.a)(re,2),se=ce[0],ue=ce[1],be=Object(n.useState)([]),pe=Object(c.a)(be,2),je=pe[0],me=pe[1],ve=Object(n.useState)({open:!1,message:"",severity:""}),he=Object(c.a)(ve,2),Oe=he[0],ge=he[1],xe=(0,Jt().getCurrentUserDetails)(),fe=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ee({type:"mrinsonponoforview",po_no:null===(a=e.id)||void 0===a?void 0:a.toString()});case 2:return i=t.sent,_(i),de({type:"currencies"}).then((function(e){var t={};e.forEach((function(e,a){t[e.currencyid]=e.currencycode})),Z(t)})),t.next=7,Pe({po_no:null===(n=e.id)||void 0===n?void 0:n.toString()}).then((function(e){var t;b(e);var a=[{id:"packing_forward_charges",label:"Packaging & Forwarding"},{id:"installation_charges",label:"Installation"},{id:"freight_charges",label:"Freight"},{id:"handling_charges",label:"Handling"},{id:"misc_charges",label:"Miscellaneous"},{id:"hamali_charges",label:"Hamali"},{id:"mandifee_charges",label:"Mandi Fee"},{id:"fulltax_charges",label:"Full Tax(Form Nill)"},{id:"insurance_charges",label:"Insurance"}],n=[];if(null===a||void 0===a||a.map((function(t,a){""!==e[t.id]&&n.push({name:t.id,label:t.label,rate:e[t.id]})})),me(n),oe(parseInt(e.status)-1),I(e.audit_log_gc_po),U(wr(e)),q((null===(t=e.item_dispatch)||void 0===t?void 0:t.length)>0?e.item_dispatch:null),"4"===e.status){var i,l,o=null===(i=e.item_dispatch)||void 0===i?void 0:i.map((function(e){return e.delivered_quantity?parseInt(e.delivered_quantity):0})).reduce((function(e,t){return e+t}),0),r=null===(l=e.item_dispatch)||void 0===l?void 0:l.map((function(e){return parseInt(e.dispatch_quantity)})).reduce((function(e,t){return e+t}),0);ue(o/r*100+"%")}Ne({type:"topmrinrecord",gcitem_id:e.item_id,po_date:new Date(e.po_date)}).then((function(e){if(null!==e&&void 0!==e&&e.gcitem_id){var t=Object(nt.a)(Object(nt.a)({},e),{},{number:1});k([t])}else k(null)}));var c=[];Re({type:"getDocumentsOnPo",po_id:e.poid}).then((function(e){null===e||void 0===e||e.map((function(e){return c.push({upload:!(null===e||void 0===e||!e.file_name),file_name:null===e||void 0===e?void 0:e.file_name,document_name:null===e||void 0===e?void 0:e.document_name,doc_kind:null===e||void 0===e?void 0:e.doc_kind,required:null===e||void 0===e?void 0:e.required,docid:null===e||void 0===e?void 0:e.docid})})),W(c)}))}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){fe()}),[]);var ye,_e=function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},Ce=[{type:"label",value:"Supplier",bold:!0,sm:"12",md:"12"},{type:"label",value:u.supplier_name,sm:"12",md:"12"},{type:"label",value:"Supplier Email",bold:!0,className:l.labelheading,sm:"12",md:"12"},{type:"label",value:u.supplier_email||"-",sm:"12",md:"12"}],Se=[{type:"label",value:"Supplier ID",bold:!0,sm:"12",md:"12"},{type:"label",value:u.supplier_id,sm:"12",md:"12"}],ke=[{type:"label",value:"Supplier Address",bold:!0,sm:"12",md:"12"},{type:"label",value:u.supplier_address,sm:"12",md:"12"}],De=[{type:"label",value:"Comments",bold:!0,sm:"12",md:"12"},{type:"label",value:u.comments||"-",sm:"12",md:"12"}],Ie=[{type:"label",value:"Taxes & Duties",bold:!0,sm:"12",md:"12"},{type:"label",value:u.taxes_duties||"-",sm:"12",md:"12"},{type:"label",value:"Packaging & Forwarding",bold:!0,sm:"12",md:"12",className:l.labelheading},{type:"label",value:u.packing_forwarding||"-",sm:"12",md:"12"}],Ae=[{type:"label",value:"Mode of Transport",bold:!0,sm:"12",md:"12"},{type:"label",value:u.mode_of_transport||"-",sm:"12",md:"12"}],Te=[{type:"label",value:"Transit Insurance",bold:!0,sm:"12",md:"12"},{type:"label",value:u.transit_insurance||"-",sm:"12",md:"12"}],qe=[{type:"label",value:"Currency",bold:!0,sm:"12",md:"12"},{type:"label",value:u.currency_name,sm:"12",md:"12"},{type:"label",value:"No of Days IOM can  be generated from date of invoice",bold:!0,sm:"12",className:l.labelheading,md:"12"},{type:"label",value:u.payment_terms_days,sm:"12",md:"12"}],Fe=[{type:"label",value:"Advance Type",bold:!0,sm:"12",md:"12"},{type:"label",value:u.advance_type,sm:"12",md:"12"}],Me=[{type:"label",value:"Advance",bold:!0,sm:"12",md:"12"},{type:"label",value:parseFloat(u.advance).toFixed(2),sm:"12",md:"12"}],Be=[{type:"label",value:"Incoterm",bold:!0,sm:"12",md:"12"},{type:"label",value:u.incoterms||"-",sm:"12",md:"12"},{type:"label",value:"Mode of Transport",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.mode_of_transport||"-",sm:"12",md:"12"},{type:"label",value:"Forwarding",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.forwarding||"-",sm:"12",md:"12"},{type:"label",value:"Payment Terms",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.payment_terms||"-",sm:"12",md:"12"},{type:"label",value:"No of Containers",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.no_of_containers||"-",sm:"12",md:"12"}],He=[{type:"label",value:"Origin",bold:!0,sm:"12",md:"12"},{type:"label",value:u.origin||"-",sm:"12",md:"12"},{type:"label",value:"Insurance",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.insurance||"-",sm:"12",md:"12"},{type:"label",value:"Currency",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.currency_name,sm:"12",md:"12"},{type:"label",value:"Comments",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.comments||"-",sm:"12",md:"12"},{type:"label",value:"Container Type",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.container_type||"-",sm:"12",md:"12"}],Ge=[{type:"label",value:"Port of Loading",bold:!0,sm:"12",md:"12"},{type:"label",value:u.ports||"-",sm:"12",md:"12"},{type:"label",value:"Place of Destination",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.place_of_destination||"-",sm:"12",md:"12"},{type:"label",value:"No of Bags",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.no_of_bags||"-",sm:"12",md:"12"},{type:"label",value:"Net Weight",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.net_weight||"-",sm:"12",md:"12"}],Le=[{type:"label",value:"Billing At",bold:!0,sm:"12",md:"12"},{type:"label",value:u.billing_at_name,sm:"12",md:"12"},{type:"label",value:"Billing Address",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.billing_at_addressline1,sm:"12",md:"12"},{type:"label",value:[u.billing_at_addressline2,null===u||void 0===u?void 0:u.billing_zipcode].filter(Boolean).join(", "),sm:"12",md:"12"},{type:"label",value:[u.billing_state,null===u||void 0===u?void 0:u.billing_country].filter(Boolean).join(", "),sm:"12",md:"12"}],Ue=[{type:"label",value:"Delivery At",bold:!0,sm:"12",md:"12"},{type:"label",value:u.delivery_at_name,sm:"12",md:"12"},{type:"label",value:"Delivery Address",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.delivery_at_addressline1,sm:"12",md:"12"},{type:"label",value:[u.delivery_at_addressline2,null===u||void 0===u?void 0:u.delivery_zipcode].filter(Boolean).join(", "),sm:"12",md:"12"},{type:"label",value:[u.delivery_state,null===u||void 0===u?void 0:u.delivery_country].filter(Boolean).join(", "),sm:"12",md:"12"}],Qe=[{type:"label",value:"Other charges",className:l.labelheading,bold:!0,sm:"3",md:"3"},{type:"label",value:u.otherCharges,sm:"3",md:"3"},{type:"label",value:"1002"===u.supplier_type_id?"Rate(INR)":"Rate",className:l.labelheading,bold:!0,sm:"3",md:"3"},{type:"label",value:u.rate,sm:"3",md:"3"}],Ve=[{type:"label",value:"Green Coffee Type",bold:!0,sm:"12",md:"12"},{type:"label",value:u.item_name,sm:"12",md:"12"}],ze=[{type:"label",value:"Quotation No",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.quot_no,sm:"12",md:"12"},{type:"label",value:"Quotation Date",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.quot_date?_e(u.quot_date):"-",sm:"12",md:"12"},{type:"label",value:"Price",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.quot_price?parseFloat(u.quot_price).toFixed(2):"-",sm:"12",md:"12"}],We=[{type:"label",value:"Quantity",bold:!0,sm:"12",md:"12"},{type:"label",value:u.total_quantity,sm:"12",md:"12"}],Ye=[{type:"label",value:"Dispatch Type",bold:!0,sm:"12",md:"12"},{type:"label",value:(null===(t=u.item_dispatch)||void 0===t?void 0:t.length)>1?"Multiple":"Single",sm:"12",md:"12"},{type:"label",value:"Dispatch Count",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:null===(a=u.item_dispatch)||void 0===a?void 0:a.length,sm:"12",md:"12"}],Ke=[{type:"label",value:"Purchase Type",bold:!0,sm:"12",md:"12"},{type:"label",value:u.purchase_type||"-",sm:"12",md:"12"},{type:"label",value:"Terminal Month",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.terminal_month?_e(u.terminal_month):"-",sm:"12",md:"12"}],Je=[{type:"label",value:"Fixation Date",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.fixation_date?_e(u.fixation_date):"-",sm:"12",md:"12"}],Ze=[{type:"label",value:"Booked Differential",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.booked_differential?parseFloat(u.booked_differential).toFixed(2):"-",sm:"12",md:"12"},{type:"label",value:"Total Price"+("ORM"===u.po_category?J[u.currency_id]?" ("+J[u.currency_id]+"/MT)":"":" (USD/MT)"),className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.totalPrice?parseFloat(u.totalPrice).toFixed(2):"-",sm:"12",md:"12"}],Xe=[{type:"label",value:"Fixed Terminal Rate",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.fixed_terminal_rate?parseFloat(u.fixed_terminal_rate).toFixed(2):"-",sm:"12",md:"12"},{type:"label",value:"Market Price"+("ORM"===u.po_category?J[u.currency_id]?" ("+J[u.currency_id]+"/MT)":"":" (USD/MT)"),className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.market_price?parseFloat(u.market_price).toFixed(2):"-",sm:"12",md:"12"},{type:"label",value:"Purchase Price"+("ORM"===u.po_category?J[u.currency_id]?" ("+J[u.currency_id]+"/MT)":"":" (USD/MT)"),className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.purchase_price?parseFloat(u.purchase_price).toFixed(2):"-",sm:"12",md:"12"}],$e=[{type:"label",value:"Booked Terminal Rate",bold:!0,sm:"12",md:"12"},{type:"label",value:u.booked_terminal_rate?parseFloat(u.booked_terminal_rate).toFixed(2):"-",sm:"12",md:"12"},{type:"label",value:"Fixed Differential",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.fixed_differential?parseFloat(u.fixed_differential).toFixed(2):"-",sm:"12",md:"12"},{type:"label",value:"PO Margin",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.po_margin?parseFloat(u.po_margin).toFixed(2):"-",sm:"12",md:"12"}],et=[{type:"label",value:"Terminal Price(USD)",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.terminalPrice?u.terminalPrice:"-",sm:"12",md:"12"},{type:"label",value:"Market Price (INR/KG)",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.marketPriceInr?parseFloat(u.marketPriceInr).toFixed(2):"-",sm:"12",md:"12"}],tt=[{type:"label",value:"Purchase Price (INR/KG)",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.purchasePriceInr?parseFloat(u.purchasePriceInr).toFixed(2):"-",sm:"12",md:"12"},{type:"label",value:"Gross Price (INR)",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.grossPrice?parseFloat(u.grossPrice).toFixed(2):"-",sm:"12",md:"12"},{type:"label",value:"Total Price (INR)",className:l.labelheading,bold:!0,sm:"12",md:"12"},{type:"label",value:u.totalPrice?parseFloat(u.totalPrice).toFixed(2):"-",sm:"12",md:"12"}],at=[{type:"label",value:"SGST (%)",bold:!0,sm:"12",md:"12"},{type:"label",value:""===u.sgst?0:parseFloat(u.sgst).toFixed(2),sm:"12",md:"12"}],it=[{type:"label",value:"CGST (%)",bold:!0,sm:"12",md:"12"},{type:"label",value:""===u.cgst?0:parseFloat(u.cgst).toFixed(2),sm:"12",md:"12"}],lt=[{type:"label",value:"IGST (%)",bold:!0,sm:"12",md:"12"},{type:"label",value:""===u.igst?0:parseFloat(u.igst).toFixed(2),sm:"12",md:"12"}],rt=[{type:"label",value:"AP Status",bold:!0,sm:"12",md:"12"},{type:"label",value:u.apStatus?u.apStatus:"Backlog",sm:"12",md:"12"}],st=[{type:"label",value:"QC Status",bold:!0,sm:"12",md:"12"},{type:"label",value:u.qcStatus?u.qcStatus:"Backlog",sm:"12",md:"12"}],dt=[{type:"label",value:"AP(payable amount)",bold:!0,sm:"12",md:"12"},{type:"label",value:u.payable_amount?u.payable_amount:"-",sm:"12",md:"12"}],ut=["Req Approval","Approve","In Progress","1001"===u.supplier_type_id?"Shipped":"Dispatched","Close Order"],bt=function(){var t=Object(r.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),t.prev=1,n=1===parseInt(u.status)?"changeToPendingStatus":3===parseInt(u.status)?"changeToclosedStatus":"changeToInprogessStatus",t.next=5,we({emailid:JSON.parse(localStorage.getItem("preference")).name,type:n,po_id:u.poid});case 5:t.sent&&(ge({open:!0,message:1===parseInt(u.status)?"PO sent for request approval":3===parseInt(u.status)?"PO closed successfully":"PO approved successfully"}),setTimeout((function(){e.back("purchase_details",1===parseInt(u.status)?"pendingwithapprovalpos":3===parseInt(u.status)?"closedpos":"inprogresspos")}),2e3)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),ge({open:!0,message:t.t0.message,severity:"error"});case 12:return t.prev=12,h(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(e){return t.apply(this,arguments)}}(),pt=function(){var t=Object(r.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,we({type:"close",emailid:JSON.parse(localStorage.getItem("preference")).name,po_id:u.poid,createduserid:localStorage.getItem("currentUserId")});case 3:t.sent&&(ge({open:!0,message:"PO closed successfully"}),setTimeout((function(){e.back("purchase_details","closedpos")}),2e3)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),ge({open:!0,message:t.t0.message,severity:"error"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),jt=function(){var e=Object(r.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,we({notify_email:!0,vendor_email:JSON.parse(localStorage.getItem("preference")).name,po_id:u.poid});case 4:e.sent&&ge({open:!0,message:"Email Sent Successfully"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),ge({open:!0,message:e.t0.message,severity:"error"});case 11:return e.prev=11,h(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),mt=function(e,t){ae(!0),B(t)};return ye=te?Object(ot.jsx)(qo,{purchaseDetails:u,activeStep:le,details:R,expComposition:L,back:function(e,t){ae(!1)}}):Object(ot.jsxs)(ot.Fragment,{children:[Oe.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},Oe),{},{handleClose:function(){return ge({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(ua.a,{className:"page-header",children:[Object(ot.jsx)(an.a,{title:" Purchase Order Details",className:"cardHeader"}),Object(ot.jsxs)(xa.a,{children:[Object(ot.jsxs)(m.a,{container:!0,md:12,children:[Object(ot.jsxs)(m.a,{container:!0,md:6,children:[Object(ot.jsxs)(m.a,{item:!0,md:4,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"PO No"}),Object(ot.jsx)(O.a,{children:e.id})]}),Object(ot.jsxs)(m.a,{item:!0,md:2,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"PO Date"}),Object(ot.jsx)(O.a,{children:_e(null===u||void 0===u?void 0:u.po_date)})]}),Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"PO Category"}),Object(ot.jsx)(O.a,{children:null===u||void 0===u?void 0:u.po_category})]}),Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"PO Sub Category"}),Object(ot.jsx)(O.a,{children:null===u||void 0===u?void 0:u.supplier_type})]})]}),1===parseInt(u.status)&&Object(ot.jsx)(m.a,{container:!0,md:2,justify:"flex-end",style:{display:"flex"},children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:v?"Loading...":"Request Approval",disabled:v,onClick:bt})})}),2===parseInt(u.status)&&Object(ot.jsx)(m.a,{container:!0,md:2,justify:"flex-end",style:{display:"flex"},children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:v?"Loading...":"Approve",disabled:v,onClick:bt})})}),(3===parseInt(u.status)||4===parseInt(u.status))&&Object(ot.jsx)(m.a,{container:!0,md:2,justify:"flex-end",style:{display:"flex"},children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:v?"Loading...":"Send Email To Vendor",onClick:jt,disabled:v})})}),4===parseInt(u.status)&&Object(ot.jsx)(m.a,{container:!0,md:2,justify:"flex-end",style:{display:"flex"},children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Close Order",onClick:pt})})}),Object(ot.jsx)("div",{id:"myMm",style:{height:"1mm"}}),Object(ot.jsx)(m.a,{container:!0,md:2,justify:"flex-end",style:{display:"flex"},children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(_r,{purchaseDetails:u,documents:z,id:e.id})})})]}),"1001"===u.supplier_type_id&&Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsxs)(m.a,{item:!0,md:4,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Contract No"}),Object(ot.jsx)(O.a,{children:null===u||void 0===u?void 0:u.contract})]})}),Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsx)(m.a,{item:!0,md:3,xs:6,children:Object(ot.jsx)(Wi,{linkLabel:"Dispatch Information",body:function(){return Object(ot.jsxs)(x.a,{className:l.popover,children:[Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Dispatch Information"})})}),Object(ot.jsx)(Eo,{data:E,mrin:y,dispatchDetails:function(e,t){return mt(e,t)}})]})},linkRef:X})})})]})]}),Object(ot.jsx)(ua.a,{className:"page-header",children:Object(ot.jsx)(xa.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,children:-1!==le?Object(ot.jsx)(dl,{activeStep:le,completeStep:le,steps:ut,activeStepProgress:se}):"Loading ..."})})})}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Vendor/Supplier Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:3,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Ce})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:3,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Se})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:ke})})]})})]}),"1002"===u.supplier_type_id&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Currency & Advance Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:qe})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Fe})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Me})})]})})]}),"1001"===u.supplier_type_id&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Currency & Incoterms"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Be})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:He})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Ge})})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Billing & Delivery Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Le})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Ue})})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Green Coffee Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,children:[Object(ot.jsxs)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:[Object(ot.jsx)(tn,{payload:Ve}),"speciality"===u.gc_type&&Object(ot.jsx)(tn,{payload:ze})]}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:We})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Ye})})]})})})]}),u.gc_type&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Specification Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(gn,{rows:L,columns:[{id:"composition_name",label:"Item"},{id:"composition_rate",label:"Composition"}],hasTotal:!1})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,ref:X,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"MRIN Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(gn,{rows:y,columns:[{id:"mrindate",label:"Date"},{id:"mrin_id",label:"MRIN"},{id:"dispatch_id",label:"Dispatch"},{id:"expected_quantity",label:"Expected(Kgs)"},{id:"delivered_quantity",label:"Delivered(Kgs)"},{id:"balance_quantity",label:"Balance Quantity(Kgs)"},{id:"related_detid",label:"Parent Dispatch"},{id:"apStatus",label:"AP Status"},{id:"qcStatus",label:"QC Status"}]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Finance Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:rt})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:st})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:dt})})]})})]}),u.gc_type&&"1002"===u.supplier_type_id&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Previous Tax Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(gn,{rows:S,columns:[{id:"number",label:"SNo"},{id:"mrin_date",label:"MRIN Date"},{id:"cgst_per",label:"Tax (%)"}]})})]}),"1002"===u.supplier_type_id&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Tax Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:at})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:it})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:lt})})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Other Charges"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:["1002"===u.supplier_type_id&&Object(ot.jsx)(gn,{rows:je,columns:[{id:"label",label:"Other Charges"},{id:"rate",label:"Rate"}]}),"1001"===u.supplier_type_id&&Object(ot.jsx)(tn,{payload:Qe}),"1002"===u.supplier_type_id&&Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:De})})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Price Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsxs)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:[Object(ot.jsx)(tn,{payload:Ke}),"Differential"===u.purchase_type&&Object(ot.jsx)(tn,{payload:Je}),"1001"===u.supplier_type_id&&Object(ot.jsx)(tn,{payload:Ze})]}),Object(ot.jsxs)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:["1001"===u.supplier_type_id&&Object(ot.jsx)(tn,{payload:Xe}),"1002"===u.supplier_type_id&&Object(ot.jsx)(tn,{payload:et})]}),Object(ot.jsxs)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:["1001"===u.supplier_type_id&&Object(ot.jsx)(tn,{payload:$e}),"1002"===u.supplier_type_id&&Object(ot.jsx)(tn,{payload:tt})]})]})})]}),"1001"!==u.supplier_type_id&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Other Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Ie})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Ae})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:4,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Te})})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(Bo,{data:D})})]}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:["GC Stores Executive"!==xe.role&&6!==parseInt(u.status)&&Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Edit",disabled:le>=2,onClick:function(t){return e.editPurchaseDetails("edit_po",e.id)}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})})]})]}),Object(ot.jsx)(ot.Fragment,{children:ye})},kr=[{id:"pono",label:"PO No"},{id:"podate",label:"PO Date",sort:!0},{id:"total_quantity",label:"PO Qty"},{id:"gc_itemname",label:"Item"},{id:"vendorname",label:"Vendor"},{id:"status",label:"Status"},{id:"pocat",label:"Category"},{id:"vendortype",label:"Bean Category"},{id:"currencycode",label:"currencycode"},{id:"povalue",label:"PO Value",sort:!0}];var Nr=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440},sortHeader:{cursor:"pointer"}}),Pr=function(e){var t=Nr(),a=i.a.useState(0),l=Object(c.a)(a,2),o=l[0],r=l[1],s=i.a.useState(10),d=Object(c.a)(s,2),u=d[0],b=d[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),m=j[0],v=j[1],h=i.a.useState("asc"),O=Object(c.a)(h,2),g=O[0],x=O[1],f=i.a.useState(""),y=Object(c.a)(f,2),_=y[0],C=y[1];function w(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}Object(n.useEffect)((function(){var t=[];e.data&&e.data.map((function(e){var a,n,i,l,o,r,c,s,d,u;t.push((a=e.pono,n=e.vendorname,i=e.vendortype,l=e.pocat,o=e.status,r=e.currencycode,c=e.povalue,s=function(e){var t=e?new Date(e):new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}(e.podate),d=e.total_quantity,u=e.gc_itemname,{pono:a,vendorname:n,vendortype:i,pocat:l,status:o,currencycode:r,povalue:c,podate:s,total_quantity:d,gc_itemname:u}))})),v(t)}),[e.data]);function S(e){var t=e.toString().split(".");return t[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")+(t[1]?"."+t[1]:"")}return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(Un,{classes:t,order:g,orderBy:_,onRequestSort:function(e,t){x(_===t&&"asc"===g?"desc":"asc"),C(t)},rowCount:m.length,headCells:kr,selectedAdvancedFilters:e.selectedAdvancedFilters,clearAdvancedFilters:e.clearAdvancedFilters}),Object(ot.jsx)(dn.a,{children:m.length>0?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(m,function(e,t){return"desc"===e?function(e,a){return w(e,a,t)}:function(e,a){return-w(e,a,t)}}(g,_)).slice(o*u,o*u+u).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:kr.map((function(a,n){var i=t[a.id];return Object(ot.jsx)(un.a,{align:a.align,children:n?"povalue"===a.id?S(parseFloat(t.povalue).toFixed(3)):"total_quantity"===a.id?S(parseFloat(t.total_quantity)):i:4===parseInt(t.status)||5===parseInt(t.status)?i:Object(ot.jsx)("a",{href:"#",onClick:function(a){return function(t,a,n){return t.preventDefault(),0===a&&e.purchaseDetails("create_po_edit",n),!1}(a,n,t.pono)},children:i})},a.id)}))},t.code)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:m.length,rowsPerPage:u,page:o,onChangePage:function(e,t){r(t)},onChangeRowsPerPage:function(e){b(+e.target.value),r(0)}})]})},Dr=Object(g.a)((function(e){return{root:{paddingTop:e.spacing(3),minWidth:"100%"},formControl:{margin:e.spacing(1),marginTop:e.spacing(2),minWidth:120},modal:{position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",margin:"auto",top:"50%",right:"50%",transform:"translate(50%, -50%)",width:500,backgroundColor:e.palette.background.paper,border:"1px solid #fefefe",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),Ir=function(e){var t=(0,Jt().getCurrentUserDetails)(),a=t.role,i=t.id,l=Object(n.useState)("allpos"),o=Object(c.a)(l,2),s=o[0],u=o[1],b=Object(n.useState)(null),p=Object(c.a)(b,2),j=p[0],v=p[1],h=Dr(),O=Object(n.useState)(null),g=Object(c.a)(O,2),f=g[0],y=g[1],C=Object(n.useState)(!1),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)(!1),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)(!1),T=Object(c.a)(A,2),E=T[0],q=T[1],F=Object(n.useState)(-1),M=Object(c.a)(F,2),R=M[0],B=M[1],H=Object(n.useState)(!1),G=Object(c.a)(H,2),L=G[0],U=G[1],Q=Object(n.useState)(-1),V=Object(c.a)(Q,2),z=V[0],W=V[1],Y=Object(n.useState)(!1),K=Object(c.a)(Y,2),J=K[0],Z=K[1],X=function(){var e=arguments.length>1?arguments[1]:void 0,t=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(a){return t.push({label:a[e],value:a.id||a[e]})})),t}([{type:"Green Coffee",id:1},{type:"Packing",id:2},{type:"M & E",id:3},{type:"Canteen",id:4},{type:"Others",id:5},{type:"Capital",id:6},{type:"CSR",id:7}],"type","id"),$=function(){var e=Object(r.a)(d.a.mark((function e(t,n){var l,o,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Val ",t,n),l="",a!==Kt.managingDirector&&(l+="createdbyuserid = '".concat(i,"'")),"Shipped"!==n&&"In progress"!==n&&"Closed"!==n&&"Pending with approval"!==n&&"New"!==n||(_.a.isEmpty(l)||(l+=" AND "),l+="status = '".concat(n,"'")),"GC"!==n&&"ORM"!==n||(_.a.isEmpty(l)||(l+=" AND "),l+="pocat = '".concat(n,"'")),"Import"!==n&&"Domestic"!==n||(_.a.isEmpty(l)||(l+=" AND "),l+="vendortype = '".concat(n,"'")),"specialgcpos"===n&&(_.a.isEmpty(l)||(l+=" AND "),l+="cat_type = 'speciality'"),_.a.isEmpty(t)||(_.a.isEmpty(l)||(l+=" AND "),l+="".concat(t)),o={filter:l,loggedinuserid:i},e.next=11,ye(o);case 11:r=e.sent,console.log("Response is",r),y(r);case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();console.log("Ran"),Object(n.useEffect)((function(){console.log("Came inside"),$(j,s)}),[j,s]),Object(n.useEffect)((function(){E||S||D||(v(null),u("allpos"))}),[E,S,D]);var ee,te=function(){q(!0),k(!1)},ae=function(){var e=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("allpos"),q(!1),e.next=4,$(j,"allpos");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(r.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(a),I(!1),e.next=4,$(j,a);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ie=[{label:"Select creation type",type:"autocomplete",labelprop:"label",required:!0,value:z||"",options:X||[],onChange:function(e,t){e.preventDefault(),W(t)},xs:12,sm:12}],le=function(){W(-1),U(!L)},oe=function(){U(!1),(1===z.value||2===z.value)&&te()};return ee=S?Object(ot.jsx)(Sr,{back:function(e,t){return function(e,t){u(t),k(!1)}(0,t)},id:R,editPurchaseDetails:function(e,t){return function(e,t){I(!0),k(!1),B(t)}(0,t)}}):E?Object(ot.jsx)(Io,{back:ae}):D?Object(ot.jsx)(Uo,{back:function(e,t){return ne(e,t)},id:R}):Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0,children:Object(ot.jsxs)(Da.a,{variant:"outlined",className:h.formControl,children:[Object(ot.jsx)(Ia.a,{htmlFor:"outlined-age-native-simple",children:"View"}),Object(ot.jsxs)(Aa.a,{native:!0,value:s,onChange:function(e){u(e.target.value),v(null)},label:"View",inputProps:{name:"view",id:"outlined-view-native-simple"},children:[Object(ot.jsx)("option",{value:"allpos",children:"All GC Purchase Orders"}),Object(ot.jsx)("option",{value:"New",children:"New GC Purchase Orders"}),Object(ot.jsx)("option",{value:"Pending with approval",children:"Pending GC Purchase Orders"}),Object(ot.jsx)("option",{value:"In progress",children:"In-Progress GC Purchase Orders"}),Object(ot.jsx)("option",{value:"Shipped",children:"Shipped GC Purchase Orders"}),Object(ot.jsx)("option",{value:"Closed",children:"Closed GC Purchase Orders"}),Object(ot.jsx)("option",{value:"GC",children:"GC Purchase Orders"}),Object(ot.jsx)("option",{value:"ORM",children:"ORM Purchase Orders"}),Object(ot.jsx)("option",{value:"Domestic",children:"Domestic GC Purchase Orders"}),Object(ot.jsx)("option",{value:"Import",children:"Import GC Purchase Orders"}),Object(ot.jsx)("option",{value:"specialgcpos",children:"Special GC Purchase Orders"})]})]})}),"GC Stores Executive"!==t.role&&Object(ot.jsxs)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:[null!==f&&Object(ot.jsx)(pi,{onClick:function(){Z(!0)},label:"Export to excel"}),Object(ot.jsx)(Rn,{onClick:function(){return U(!L)},label:"Create Purchase Order",variant:"extended"})]})]}),!0===J&&Object(ot.jsx)(ui,{tableData:f,tableName:"Purchase Orders"}),Object(ot.jsx)(Pr,{selectedAdvancedFilters:function(e){return v(e)},clearAdvancedFilters:function(){return v(null)},data:f,purchaseDetails:function(e,t){return function(e,t){k(!0),B(t)}(0,t)}})]}),Object(ot.jsxs)(x.a,{className:h.root,children:[ee,Object(ot.jsx)(zt,{open:L,handleClose:function(){return U(!L)},body:function(){return Object(ot.jsxs)(x.a,{className:h.modal,children:[Object(ot.jsx)("h2",{style:{color:dt,fontWeight:"700",alignSelf:"center",margin:"0 0 1rem 0"},children:"Select Purchase Order Type"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{id:"top-row",xs:12,container:!0,spacing:100,children:Object(ot.jsx)(tn,{payload:ie})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",style:{margin:"2rem 0 0 0"},children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Proceed",onClick:oe})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:le})})]})]})}})]})},Ar=[{id:"debitnoteno",label:"Debit Note No."},{id:"debitnoteid",label:"Entity"},{id:"debitnotedate",label:"Debit Note Date"},{id:"vendorname",label:"Vendor"},{id:"debitamount",label:"Debit Amount"},{id:"invoice_qty",label:"MRIN Qty"},{id:"netrecd",label:"Net Recd Qty"},{id:"mrinno",label:"MRINs"},{id:"status",label:"Status"}];var Tr=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),Er=function(e){var t=Tr(),a=i.a.useState(0),l=Object(c.a)(a,2),o=l[0],r=l[1],s=i.a.useState(10),d=Object(c.a)(s,2),u=d[0],b=d[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),m=j[0],v=j[1],h=i.a.useState("asc"),O=Object(c.a)(h,2),g=O[0],x=O[1],f=i.a.useState(""),y=Object(c.a)(f,2),_=y[0],C=y[1],w=[];function S(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}i.a.useEffect((function(){console.log("Props Data",e.data),e.data&&e.data.map((function(e){var t,a,n,i,l,o,r,c,s,d;w.push((t=e.debitnoteno,a=e.debitnoteid,n=function(e){var t=e?new Date(e):null;return t?t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear():null}(e.debitnotedate),i=e.vendorname,l=e.debitamount,o=e.invoice_qty,r=e.netrecd,c=e.mrinno,s=e.status,d=e.debitnoteid,{debitnoteno:t,entity:a,debitnotedate:n,vendorname:i,debitamount:l,invoice_qty:o,netrecd:r,mrinno:c,status:s,debitnoteid:d}))})),v(w)}),[e.data]);return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(Un,{classes:t,order:g,orderBy:_,onRequestSort:function(e,t){x(_===t&&"asc"===g?"desc":"asc"),C(t)},rowCount:m.length,headCells:Ar,selectedAdvancedFilters:e.selectedAdvancedFilters,clearAdvancedFilters:e.clearAdvancedFilters}),Object(ot.jsx)(dn.a,{children:m.length>0?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(m,function(e,t){return"desc"===e?function(e,a){return S(e,a,t)}:function(e,a){return-S(e,a,t)}}(g,_)).slice(o*u,o*u+u).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Ar.map((function(a){var n=t[a.id];return Object(ot.jsx)(un.a,{align:a.align,children:"debitnoteno"===a.id?Object(ot.jsx)("a",{href:"#",onClick:function(a){var n;n=t.debitnoteid,console.log("sample id is",n),e.sampleDetails("view_sample",n)},children:n}):n},a.id)}))},t.code)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:m.length,rowsPerPage:u,page:o,onChangePage:function(e,t){r(t)},onChangeRowsPerPage:function(e){b(+e.target.value),r(0)}})]})},qr=(a(421),a(287)),Fr=function(e){var t,a,i=Object(n.useState)(null),l=Object(c.a)(i,2),o=l[0],s=l[1],u=function(){var t=Object(r.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.debitNoteGcDetails&&((a={}).delivery_at_address="Ccl Products (India) Limited\r\nHead Office,Ho Address: 7-1-24/2/D, Greendale, Ameerpet,Hyderabad, Telangana - 500 016,Gst No. 36aaacc9552g2zl",a=e.debitNoteGcDetails,s(a));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){u()}),[e.debitNoteGcDetails]);return Object(ot.jsx)("div",{id:"po_view_main",children:null!==o&&Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(m.a,{container:!0,md:12,className:"",children:[Object(ot.jsx)(m.a,{container:!0,md:3,children:Object(ot.jsx)("img",{src:Vo,width:"200px",alt:"logo"})}),Object(ot.jsx)(m.a,{container:!0,md:9,children:Object(ot.jsxs)(m.a,{item:!0,className:"first-section-main-import",children:[Object(ot.jsx)("h3",{className:"first-title-debit",children:"CCL PRODUCTS (INDIA) LIMITED."}),Object(ot.jsx)("p",{className:"formerly-debit",children:Object(ot.jsx)("strong",{children:"(Formerly - CONTINENTAL COFFEE LTD.)"})}),null===o||void 0===o||null===(t=o.entity_address.split(","))||void 0===t?void 0:t.map((function(e,t){return Object(ot.jsxs)(ot.Fragment,{children:[e.includes("GST NO")||e.includes("PAN NO")?Object(ot.jsx)("b",{children:e}):e+",",t>=o.entity_address.split(",").length-4&&Object(ot.jsx)("br",{})]})}))]})})]}),Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsx)(m.a,{item:!0,className:"second-section-contract-debit",children:Object(ot.jsx)("p",{children:"DEBIT NOTE"})})}),Object(ot.jsxs)(m.a,{container:!0,md:12,className:"third-main-import",children:[Object(ot.jsx)(m.a,{container:!0,md:6,children:Object(ot.jsxs)(m.a,{item:!0,className:"third-section-left-main-contract",children:[Object(ot.jsx)("p",{children:Object(ot.jsx)("strong",{children:"TO,"})}),Object(ot.jsx)("p",{className:"supplier_name",children:null===o||void 0===o||null===(a=o.vendor_address.split(","))||void 0===a?void 0:a.map((function(e,t){return Object(ot.jsxs)(ot.Fragment,{children:[e.includes("GST NO")||e.includes("PAN NO")?Object(ot.jsx)("b",{children:e}):e+",",t>=o.vendor_address.split(",").length-4&&Object(ot.jsx)("br",{})]})}))})]})}),Object(ot.jsx)(m.a,{container:!0,md:6,children:Object(ot.jsxs)(m.a,{container:!0,md:12,className:"third-section-right-main",children:[Object(ot.jsx)(m.a,{container:!0,md:4,children:Object(ot.jsxs)(m.a,{item:!0,className:"third-section-right-main-right",children:[Object(ot.jsx)("p",{children:Object(ot.jsx)("strong",{children:"DEBIT NOTE NO"})}),Object(ot.jsx)("p",{children:Object(ot.jsx)("strong",{children:"Date"})})]})}),Object(ot.jsx)(m.a,{container:!0,md:8,children:Object(ot.jsxs)(m.a,{item:!0,className:"third-section-right-main-right",children:[Object(ot.jsx)("p",{children:o.debit_noteno?o.debit_noteno:"-"}),Object(ot.jsx)("p",{children:o.debit_notedate?function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()}(o.debit_notedate):"-"})]})})]})})]}),Object(ot.jsx)("p",{children:"Dear Sir (s),"}),Object(ot.jsxs)("p",{children:["Please note that your account has been debited with a sum of Rs."," ",Object(ot.jsxs)("strong",{children:[o.debit_amount," (Rupees"," ",qr(parseInt(o.debit_amount))," ","Only)"," "]})," ","towards weight and quality problems:"]}),Object(ot.jsx)(bn.a,{className:"pdf_table_main",children:Object(ot.jsxs)(sn.a,{className:"pdf_table","aria-label":"simple table",children:[Object(ot.jsxs)(pn.a,{children:[Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:"INVOICE NO"})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsxs)("strong",{children:["VEHICLE ",Object(ot.jsx)("br",{})," NO"]})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:"ITEM DESC"})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:"HS CODE"})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:"UOM"})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:" INVOICE QTY "})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:"NET RECD"})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:"DEBIT AMOUNT"})})]}),Object(ot.jsxs)(dn.a,{children:[Object(ot.jsxs)(jn.a,{children:[Object(ot.jsx)(un.a,{className:"text-center",rowSpan:3,children:o.invoice_no}),Object(ot.jsx)(un.a,{className:"text-center",rowSpan:3,children:o.vehicleno}),Object(ot.jsx)(un.a,{className:"text-center",rowSpan:3,children:o.itemdesc}),Object(ot.jsx)(un.a,{className:"text-center",children:o.hsc_code}),Object(ot.jsx)(un.a,{className:"text-center",children:"KGS"}),Object(ot.jsx)(un.a,{className:"text-center",children:o.invoice_qty}),Object(ot.jsx)(un.a,{className:"text-center",children:o.netrecd}),Object(ot.jsx)(un.a,{className:"text-center",children:o.debit_amount})]}),Object(ot.jsxs)(jn.a,{children:[Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:"HUSK"})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:"STONES"})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:"MOISTURE"})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:"QUALITY"})}),Object(ot.jsx)(un.a,{className:"text-center"})]}),Object(ot.jsxs)(jn.a,{children:[Object(ot.jsx)(un.a,{className:"text-center",children:o.husk}),Object(ot.jsx)(un.a,{className:"text-center",children:o.stones}),Object(ot.jsx)(un.a,{className:"text-center",children:o.moisture}),Object(ot.jsx)(un.a,{className:"text-center",children:o.quality}),Object(ot.jsx)(un.a,{className:"text-center"})]}),Object(ot.jsxs)(jn.a,{children:[Object(ot.jsx)(un.a,{colSpan:7,className:"text-right",children:Object(ot.jsx)("strong",{children:"TOTAL"})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:o.debit_amount})})]})]})]})}),Object(ot.jsx)("div",{style:{height:"400px"}}),Object(ot.jsxs)(m.a,{container:!0,md:12,className:"sign-main debit_btm",children:[Object(ot.jsx)(m.a,{container:!0,md:8}),Object(ot.jsx)(m.a,{container:!0,md:4,className:"sign-right",children:Object(ot.jsxs)(m.a,{item:!0,children:[Object(ot.jsxs)("p",{className:"authorised",children:["for ",Object(ot.jsx)("strong",{children:"CCL PRODUCTS (INDIA) LTD."})]}),Object(ot.jsx)("br",{}),Object(ot.jsx)("br",{}),Object(ot.jsx)("br",{}),Object(ot.jsx)("p",{className:"authorised",children:Object(ot.jsx)("strong",{children:"Authorised Signatory"})})]})})]}),Object(ot.jsx)("div",{style:{height:"10px",borderBottom:"1px dashed #000",width:"100%"}}),Object(ot.jsx)("p",{style:{borderBottom:"1px solid #000",width:"100%",textAlign:"center",paddingBottom:"10px"},children:"THIS IS ELECTRONICALLY APPROVED. SIGNATURE NOT REQUIRED"}),Object(ot.jsxs)(m.a,{container:!0,md:12,style:{paddingBottom:"10px"},children:[Object(ot.jsx)(m.a,{container:!0,md:8,children:Object(ot.jsxs)("h4",{children:[Object(ot.jsx)("b",{children:"Corporate Office:"}),'7-1-24/2/D. "GreenDale" Ameerpet, Hyderabad, Telangana - 500 016',Object(ot.jsx)("br",{})," Tel : (040) 23730855."," "]})}),Object(ot.jsxs)(m.a,{container:!0,md:4,children:[Object(ot.jsx)("h4",{children:Object(ot.jsx)("b",{children:"PAN No : AAACC9552G"})}),Object(ot.jsx)("h4",{children:Object(ot.jsx)("b",{children:"CIN No : L15110AP1961PLC000874"})})]})]})]})})},Mr=a(287),Rr=function(e){var t,a,i=Object(n.useState)(null),l=Object(c.a)(i,2),o=l[0],s=l[1],u=function(){var t=Object(r.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.debitNoteGcDetails&&((a={}).delivery_at_address="Ccl Products (India) Limited\r\nHead Office,Ho Address: 7-1-24/2/D, Greendale, Ameerpet,Hyderabad, Telangana - 500 016,Gst No. 36aaacc9552g2zl",a=e.debitNoteGcDetails,s(a));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){u()}),[e.debitNoteGcDetails]);var b=function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()};return Object(ot.jsx)("div",{id:"po_view_main_acc",children:null!==o&&Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(m.a,{container:!0,md:12,className:"",children:[Object(ot.jsx)(m.a,{container:!0,md:3,children:Object(ot.jsx)("img",{src:Vo,width:"200px",alt:"logo"})}),Object(ot.jsx)(m.a,{container:!0,md:9,children:Object(ot.jsxs)(m.a,{item:!0,className:"first-section-main-import",children:[Object(ot.jsx)("h3",{className:"first-title-debit",children:"CCL PRODUCTS (INDIA) LIMITED."}),Object(ot.jsx)("p",{className:"formerly-debit",children:Object(ot.jsx)("strong",{children:"(Formerly - CONTINENTAL COFFEE LTD.)"})}),null===o||void 0===o||null===(t=o.entity_address.split(","))||void 0===t?void 0:t.map((function(e,t){return Object(ot.jsxs)(ot.Fragment,{children:[e,","," ",t>=o.entity_address.split(",").length-4&&Object(ot.jsx)("br",{})]})}))]})})]}),Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsx)(m.a,{item:!0,className:"second-section-contract-debit",children:Object(ot.jsx)("p",{children:"DEBIT NOTE"})})}),Object(ot.jsxs)(m.a,{container:!0,md:12,className:"third-main-import",children:[Object(ot.jsx)(m.a,{container:!0,md:6,children:Object(ot.jsxs)(m.a,{item:!0,className:"third-section-left-main-contract",children:[Object(ot.jsx)("p",{children:Object(ot.jsx)("strong",{children:"TO,"})}),Object(ot.jsx)("p",{className:"supplier_name",children:null===o||void 0===o||null===(a=o.vendor_address.split(","))||void 0===a?void 0:a.map((function(e,t){return Object(ot.jsxs)(ot.Fragment,{children:[e,","," ",t>=o.vendor_address.split(",").length-4&&Object(ot.jsx)("br",{})]})}))})]})}),Object(ot.jsx)(m.a,{container:!0,md:6,children:Object(ot.jsxs)(m.a,{container:!0,md:12,className:"third-section-right-main",children:[Object(ot.jsx)(m.a,{container:!0,md:4,children:Object(ot.jsxs)(m.a,{item:!0,className:"third-section-right-main-right",children:[Object(ot.jsx)("p",{children:Object(ot.jsx)("strong",{children:"DEBIT NOTE NO"})}),Object(ot.jsx)("p",{children:Object(ot.jsx)("strong",{children:"Date"})})]})}),Object(ot.jsx)(m.a,{container:!0,md:8,children:Object(ot.jsxs)(m.a,{item:!0,className:"third-section-right-main-right",children:[Object(ot.jsx)("p",{children:o.debit_noteno?o.debit_noteno:"-"}),Object(ot.jsx)("p",{children:o.debit_notedate?b(o.debit_notedate):"-"})]})})]})})]}),Object(ot.jsx)("p",{children:"Dear Sir (s),"}),Object(ot.jsxs)("p",{children:["Please note that your account has been debited with a sum of Rs."," ",Object(ot.jsxs)("strong",{children:[o.debit_amount," (Indian Rupees"," ",Mr(parseInt(o.debit_amount))," ","Only)"," "]})," ","towards quality problems:"]}),Object(ot.jsx)(bn.a,{className:"pdf_table_main",children:Object(ot.jsxs)(sn.a,{className:"pdf_table","aria-label":"simple table",children:[Object(ot.jsxs)(pn.a,{children:[Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:"INVOICE NO"})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsxs)("strong",{children:["INVOICE ",Object(ot.jsx)("br",{})," DATE"]})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:"PO NO"})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:"PO DATE"})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:" MRIN NO "})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:" MRIN DT "})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:"GRADE"})}),Object(ot.jsx)(un.a,{className:"text-center",children:Object(ot.jsx)("strong",{children:"HS CODE"})})]}),Object(ot.jsx)(dn.a,{children:Object(ot.jsxs)(jn.a,{children:[Object(ot.jsx)(un.a,{className:"text-center",children:o.invoice_no}),Object(ot.jsx)(un.a,{className:"text-center",children:b(o.invoice_date)}),Object(ot.jsx)(un.a,{className:"text-center",children:o.po_no}),Object(ot.jsx)(un.a,{className:"text-center",children:b(o.po_date)}),Object(ot.jsx)(un.a,{className:"text-center",children:o.mrin_no}),Object(ot.jsx)(un.a,{className:"text-center",children:b(o.mrin_date)}),Object(ot.jsx)(un.a,{className:"text-center",children:o.gcitem_name}),Object(ot.jsx)(un.a,{className:"text-center",children:o.hsc_code})]})})]})}),Object(ot.jsx)("div",{style:{height:"550px"}}),Object(ot.jsxs)(m.a,{container:!0,md:12,className:"sign-main debit_btm",children:[Object(ot.jsx)(m.a,{container:!0,md:8}),Object(ot.jsx)(m.a,{container:!0,md:4,className:"sign-right",children:Object(ot.jsxs)(m.a,{item:!0,children:[Object(ot.jsxs)("p",{className:"authorised",children:["for ",Object(ot.jsx)("strong",{children:"CCL PRODUCTS (INDIA) LTD."})]}),Object(ot.jsx)("br",{}),Object(ot.jsx)("br",{}),Object(ot.jsx)("br",{}),Object(ot.jsx)("p",{className:"authorised",children:Object(ot.jsx)("strong",{children:"Authorised Signatory"})})]})})]}),Object(ot.jsx)("div",{style:{height:"10px",borderBottom:"1px dashed #000",width:"100%"}}),Object(ot.jsx)("p",{style:{borderBottom:"1px solid #000",width:"100%",textAlign:"center",paddingBottom:"10px"},children:"THIS IS ELECTRONICALLY APPROVED. SIGNATURE NOT REQUIRED"}),Object(ot.jsxs)(m.a,{container:!0,md:12,style:{paddingBottom:"10px"},children:[Object(ot.jsx)(m.a,{container:!0,md:8,children:Object(ot.jsxs)("h4",{children:[Object(ot.jsx)("b",{children:"Corporate Office:"}),'7-1-24/2/D. "GreenDale" Ameerpet, Hyderabad, Telangana - 500 016',Object(ot.jsx)("br",{})," Tel : (040) 23730855."," "]})}),Object(ot.jsxs)(m.a,{container:!0,md:4,children:[Object(ot.jsx)("h4",{children:Object(ot.jsx)("b",{children:"PAN No : AAACC9552G"})}),Object(ot.jsx)("h4",{children:Object(ot.jsx)("b",{children:"CIN No : L15110AP1961PLC000874"})})]})]})]})})},Br=[{id:"description",label:"Description"},{id:"createdby",label:"Created By"},{id:"createddate",label:"Created Date"},{id:"modifiedby",label:"Modified By"},{id:"modifieddate",label:"Modified Date"}],Hr=function(e){var t=new Date(e);return e?t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear():""};var Gr=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),Lr=function(e){var t=Gr(),a=i.a.useState(0),n=Object(c.a)(a,2),l=n[0],o=n[1],r=i.a.useState(10),s=Object(c.a)(r,2),d=s[0],u=s[1],b=[];i.a.useEffect((function(){console.log("Props Data",e.data)}),[e.data]),e.data&&e.data.map((function(e){var t,a,n,i,l;b.push((t=e.description,a=e.created_username,n=Hr(e.created_date),i=e.modified_username,l=Hr(e.modified_date),{description:t,createdby:a,createddate:n,modifiedby:i,modifieddate:l}))}));return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(pn.a,{children:Object(ot.jsx)(jn.a,{children:Br.map((function(e){return Object(ot.jsx)(un.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ot.jsxs)(dn.a,{children:[b.length>0&&b.slice(l*d,l*d+d).map((function(e,t){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Br.map((function(t,a){var n=e[t.id];return Object(ot.jsx)(un.a,{align:t.align,children:n},t.id)}))},e.code)})),0===b.length&&Object(ot.jsx)("p",{style:{float:"right",justifyContent:"center"},children:"No Records to Display."})]})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:b.length,rowsPerPage:d,page:l,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){u(+e.target.value),o(0)}})]})},Ur=a(143),Qr=a.n(Ur),Vr=a(160),zr=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .page-header":{width:"100%",marginBottom:15},"& .MuiAccordion-root":{width:"100%"},"& .dispatchTable":{maxHeight:"400px",overflowY:"auto"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"},modal:{position:"absolute",margin:"0 auto",top:"30%",right:"10%",left:"10%",width:700,textAlign:"center",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),Wr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return e.map((function(e){return n.push({label:e[t],value:e[a]||e[t]})})),n},Yr=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},Kr=function(e){var t=e?new Date(e):new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},Jr=function(e){var t,a=zr(),l=Object(n.useState)(null),o=Object(c.a)(l,2),s=o[0],u=o[1],b=Object(n.useState)([]),p=Object(c.a)(b,2),j=p[0],v=p[1],h=Object(n.useState)({}),g=Object(c.a)(h,2),x=g[0],f=g[1],y=Object(n.useState)([]),C=Object(c.a)(y,2),w=C[0],S=C[1],k=Object(n.useState)({open:!1,message:"",severity:""}),N=Object(c.a)(k,2),P=N[0],D=N[1],I=Object(n.useState)(!1),A=Object(c.a)(I,2),T=A[0],E=A[1],q=Object(n.useState)([]),F=Object(c.a)(q,2),M=F[0],R=F[1],B=Object(n.useState)([]),H=Object(c.a)(B,2),G=H[0],L=H[1],U=i.a.useState(-1),Q=Object(c.a)(U,2),V=Q[0],z=Q[1],W=Object(n.useState)("100%"),Y=Object(c.a)(W,2),K=Y[0],J=(Y[1],Object(n.useState)("")),Z=Object(c.a)(J,2),X=Z[0],$=Z[1],ee=Object(n.useState)(!1),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],ie=["Pending request","Pending approval","Approved","Account verified"];function le(){return le=Object(r.a)(d.a.mark((function e(){var t,a=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,ze({type:"allVendors"});case 3:t=e.sent,S(t);case 5:case"end":return e.stop()}}),e)}))),le.apply(this,arguments)}Object(n.useEffect)((function(){!function(){le.apply(this,arguments)}()}),[]),Object(n.useEffect)(Object(r.a)(d.a.mark((function t(){var a,n,i,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.data.debit_noteid){t.next=19;break}return a=e.data,t.next=4,ze({type:"mrinsOnVendor",entity_id:a.entity_id,vendor_id:a.vendor_id,debit_notedate:Kr(a.debit_notedate)});case 4:return n=t.sent,t.next=7,Te({type:"allEntities"});case 7:(i=t.sent).length&&v(Wr(i,"entity_name","entity_id")),a.mrins=n,l=i.find((function(e){return e.entity_id===a.entity_id})),a.entity_id={label:null===l||void 0===l?void 0:l.entity_name,value:null===l||void 0===l?void 0:l.entity_id},a.vendor={vendor_id:e.data.vendor_id,vendor_name:e.data.vendor_name},null!==n&&n.length&&L(Wr(n,"mrin_no","mrin_id")),a.mrin_id={label:a.mrin_no,value:a.mrin_id},z(ie.indexOf(e.data.status)),$(ie[ie.indexOf(e.data.status)+1]),u(a),R(e.data.audit_log_gc);case 19:case"end":return t.stop()}}),t)}))),[e.data]);var oe=function(e,t){u(Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({},t,e.target.value)))},re=function(){var e=Object(r.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,ze({type:"mrinsOnVendor",entity_id:null===s||void 0===s?void 0:s.entity_id,vendor_id:a.vendor_id,debit_notedate:Kr(null===s||void 0===s?void 0:s.debit_notedate)});case 6:n=e.sent,L(Wr(n,"mrin_no","mrin_id")),u(Object(nt.a)(Object(nt.a)({},s),{},{mrins:n,vendor:a,vendor_id:a.vendor_id,vendor_name:a.vendor_name}));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ce=function(){var e=Object(r.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],null===s||void 0===s||!s.vendor_id||""===(null===s||void 0===s?void 0:s.vendor_id)){e.next=6;break}return e.next=4,ze({type:"mrinsOnVendor",entity_id:a.value,vendor_id:null===s||void 0===s?void 0:s.vendor_id,debit_notedate:Kr(null===s||void 0===s?void 0:s.debit_notedate)});case 4:n=e.sent,L(Wr(n,"mrin_no","mrin_id"));case 6:u(Object(nt.a)(Object(nt.a)({},s),{},{mrins:n,entity_id:a.value}));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),se=function(){var e=Object(r.a)(d.a.mark((function e(t,a){var n,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],null===s||void 0===s||!s.vendor_id||""===(null===s||void 0===s?void 0:s.vendor_id)||null===s||void 0===s||!s.entity_id||""===(null===s||void 0===s?void 0:s.entity_id)){e.next=6;break}return e.next=4,ze({type:"mrinsOnVendor",entity_id:null===s||void 0===s?void 0:s.entity_id,vendor_id:null===s||void 0===s?void 0:s.vendor_id,debit_notedate:Kr(null===s||void 0===s?void 0:s.debit_notedate)});case 4:n=e.sent,L(Wr(n,"mrin_no","mrin_id"));case 6:i=Object(nt.a)(Object(nt.a)({},s),{},Object(Ot.a)({mrins:n},a,t)),u(i);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),de=[{label:"Debit Note date",type:"datePicker",value:""===(null===s||void 0===s?void 0:s.debit_notedate)?Yr():null===s||void 0===s?void 0:s.debit_notedate,onChange:function(e){return se(e,"debit_notedate")}},{label:"Entity",type:"autocomplete",labelprop:"label",value:null!==s&&void 0!==s&&s.entity_id?null===s||void 0===s?void 0:s.entity_id:"",options:j||[],onChange:ce}],ue=[{label:"Vendor",type:"autocomplete",labelprop:"vendor_name",value:null!==s&&void 0!==s&&s.vendor?null===s||void 0===s?void 0:s.vendor:"",options:w||[],onChange:re},{label:"Vendor Id",type:"input",disabled:!0,value:null!==s&&void 0!==s&&s.vendor_id?null===s||void 0===s?void 0:s.vendor_id:"",onChange:function(e){return oe(e,"vendor_id")}},{label:"Vendor Name",type:"input",disabled:!0,value:null!==s&&void 0!==s&&s.vendor_name?null===s||void 0===s?void 0:s.vendor_name:"",onChange:function(e){return oe(e,"vendor_name")}}],be=[{label:"Remarks",type:"input",rows:4,multiline:!0,value:(null===s||void 0===s?void 0:s.remarks)||"",onChange:function(e){return oe(e,"remarks")}}],pe=[{label:"Select MRIN",required:!0,type:"autocomplete",labelprop:"label",error:null===x||void 0===x?void 0:x.mrin_no,helperText:null===x||void 0===x?void 0:x.mrin_no,value:null!==s&&void 0!==s&&s.mrin_id?null===s||void 0===s?void 0:s.mrin_id:"",options:G||[],onChange:function(e){return function(e,t){var a=null===s||void 0===s?void 0:s.mrins.filter((function(e){return e.mrin_id===t.value}));a.length>0&&u(Object(nt.a)(Object(nt.a)({},s),{},{gcitem_name:a[0].gc_itemname,hsc_code:a[0].hsn_code,husk:a[0].husk,invoice_no:a[0].invoice_no,invoice_qty:a[0].invoice_quantity,item_id:a[0].item_id,moisture:a[0].moisture,stones:a[0].stones,mrin_id:t,mrin_no:a[0].mrin_no,netrecd:a[0].net_weightrecorded}))}(0,"mrin_id")},sm:12},{label:"Invoice No.",type:"input",disabled:!0,value:(null===s||void 0===s?void 0:s.invoice_no)||"",sm:12},{label:"MRIN Id",type:"input",disabled:!0,value:(null===s||void 0===s||null===(t=s.mrin_id)||void 0===t?void 0:t.value)||"",sm:12},{label:"Invoice Qty",type:"input",disabled:!0,value:(null===s||void 0===s?void 0:s.invoice_qty)||"",sm:12},{label:"Husk",type:"number",value:null!==s&&void 0!==s&&s.husk?null===s||void 0===s?void 0:s.husk:"",onChange:function(e){return oe(e,"husk")},sm:12},{label:"Moisture",type:"number",value:(null===s||void 0===s?void 0:s.moisture)||"",onChange:function(e){return oe(e,"moisture")},sm:12},{label:"Stones",type:"number",value:(null===s||void 0===s?void 0:s.stones)||"",onChange:function(e){return oe(e,"stones")},sm:12}],je=[{label:"Item Id",type:"input",disabled:!0,value:(null===s||void 0===s?void 0:s.item_id)||"",sm:12},{label:"Item Name",type:"input",disabled:!0,value:(null===s||void 0===s?void 0:s.gcitem_name)||"",sm:12},{label:"H S Code",type:"input",value:(null===s||void 0===s?void 0:s.hsc_code)||"",onChange:function(e){return oe(e,"hsc_code")},sm:12},{label:"Net WT RECD",type:"number",value:(null===s||void 0===s?void 0:s.netrecd)||"",onChange:function(e){return oe(e,"netrecd")},sm:12},{label:"Others",type:"input",value:(null===s||void 0===s?void 0:s.others)||"",onChange:function(e){return oe(e,"others")},sm:12},{label:"Quality",type:"number",value:(null===s||void 0===s?void 0:s.quality)||"",onChange:function(e){return oe(e,"quality")},sm:12},{label:"Debit Amount",type:"number",value:(null===s||void 0===s?void 0:s.debit_amount)||"",onChange:function(e){return oe(e,"debit_amount")},sm:12}],me=[{type:"label",value:null===s||void 0===s?void 0:s.debit_noteid,sm:"3"},{type:"label",value:null===s||void 0===s?void 0:s.debit_noteno,sm:"3"}],ve=function(){var e=Object(r.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("vendor"),a=document.getElementById("account"),t.style.display="block",a.style.display="block",ne(!0),n=document.getElementById("po_view_main"),Qr()(n).then(function(){var e=Object(r.a)(d.a.mark((function e(n){var i,l,o,c,u,b,p,j,m,v,h,O,g;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for("",l="",o=n.toDataURL("image/jpeg",1),0,u=210,295,c=n.height*u/n.width,b=c,p=Math.ceil(c/295)-1,j=new Vr.a("p","mm",[295,u]),m=0,j.addImage(o,"JPEG",0,m,u,c),b-=295,v=1;v<=p;v++)m=b-c,j.addPage(),j.addImage(o,"JPG",0,m*v,u,c);h=j.output(),i=btoa(h),O=j.output("bloburl"),window.open(O),ne(!1),t.style.display="none",g=document.getElementById("po_view_main_acc"),Qr()(g).then(function(){var e=Object(r.a)(d.a.mark((function e(t){var n,o,r,c,u,b,p,j,m,v,h,O;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.toDataURL("image/jpeg",1),0,r=210,295,o=t.height*r/t.width,c=o,u=Math.ceil(o/295)-1,b=new Vr.a("p","mm",[295,r]),p=0,b.addImage(n,"JPEG",0,p,r,o),c-=295,j=1;j<=u;j++)p=c-o,b.addPage(),b.addImage(n,"JPG",0,p*j,r,o);return m=b.output(),l=btoa(m),v=b.output("bloburl"),window.open(v),ne(!1),a.style.display="none",h={debit_noteid:null===s||void 0===s?void 0:s.debit_noteid,debit_notedate:null===s||void 0===s?void 0:s.debit_notedate,vendor_id:null===s||void 0===s?void 0:s.vendor_id,mrin_id:null===s||void 0===s?void 0:s.mrin_id,generated_by:localStorage.getItem("currentUserId"),doc_kind_account:"Debit_Note_Release_CCL_Accounts",docid_accounts:"Debit_Note_Release_CCL_Accounts-"+(null===s||void 0===s?void 0:s.debit_noteid),document_content_accounts:l,document_name_accounts:"Debit_Note_Release_CCL_Accounts.pdf",doc_kind_vendor:"Debit_Note_Release_Vendor",docid_vendor:"Debit_Note_Release_Vendor-"+(null===s||void 0===s?void 0:s.debit_noteid),document_content_vendor:i,document_name_vendor:"Debit_Note_Release_Vendor.pdf"},e.next=21,at(h);case 21:(O=e.sent)&&console.log("fd::",h,O);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},_.a.isEmpty(null===s||void 0===s?void 0:s.mrin_no)&&(a.mrin_no="MRIN cannot be empty"),t.prev=2,_.a.isEmpty(a)){t.next=9;break}throw f(a),{message:"Please fill all mandatory fields"};case 9:return l={update:!0,others:s.others,debit_notedate:null===s||void 0===s?void 0:s.debit_notedate,vendor_id:null===s||void 0===s?void 0:s.vendor_id,remarks:null===s||void 0===s?void 0:s.remarks,invoice_no:null===s||void 0===s?void 0:s.vendor_id,invoice_qty:null===s||void 0===s?void 0:s.invoice_qty,entity_id:null===s||void 0===s||null===(n=s.entity_id)||void 0===n?void 0:n.value,mrin_id:null===s||void 0===s||null===(i=s.mrin_id)||void 0===i?void 0:i.value,mrin_no:null===s||void 0===s?void 0:s.mrin_no,item_id:null===s||void 0===s?void 0:s.item_id,debit_amount:null!==s&&void 0!==s&&s.debit_amount?null===s||void 0===s?void 0:s.debit_amount:"0",hsc_code:null===s||void 0===s?void 0:s.hsc_code,husk:null!==s&&void 0!==s&&s.husk?null===s||void 0===s?void 0:s.husk:"0",quality:null!==s&&void 0!==s&&s.quality?null===s||void 0===s?void 0:s.quality:"0",netrecd:null!==s&&void 0!==s&&s.netrecd?null===s||void 0===s?void 0:s.netrecd:"0",moisture:null!==s&&void 0!==s&&s.moisture?null===s||void 0===s?void 0:s.moisture:"0",stones:null!==s&&void 0!==s&&s.stones?null===s||void 0===s?void 0:s.stones:"0",debit_noteid:e.id,updated_by:localStorage.getItem("currentUserId")},E(!0),t.next=13,Ye(l);case 13:t.sent&&(D({open:!0,message:"Debit note updated successfully"}),setTimeout((function(){e.back(),E(!1)}),2e3));case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(2),E(!1),D({open:!0,message:t.t0.message,severity:"error"});case 21:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),Oe=function(){var t=Object(r.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a="Pending request"===(null===s||void 0===s?void 0:s.status)?"changeToPendingStatus":"Pending approval"===(null===s||void 0===s?void 0:s.status)?"changeToApprovedStatus":"Approved"===(null===s||void 0===s?void 0:s.status)?"changeToAccountVerifiedStatus":"",t.next=4,Je({type:a,debit_noteid:e.id,updated_by:localStorage.getItem("currentUserId")});case 4:t.sent&&(D({open:!0,message:"Pending request"===(null===s||void 0===s?void 0:s.status)?"Debit note sent for pending approval":"Pending approval"===(null===s||void 0===s?void 0:s.status)?"Debit note sent for approved":"Debit note sent for account verified"}),setTimeout((function(){e.back()}),2e3)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),D({open:!0,message:t.t0.message,severity:"error"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:a.root,noValidate:!0,autoComplete:"off",children:[P.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},P),{},{handleClose:function(){return D({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(ua.a,{className:"page-header",children:[Object(ot.jsx)(an.a,{title:"Debit Note GC details",className:"cardHeader"}),Object(ot.jsx)(xa.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:8,md:8,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:[{type:"label",value:"Debit Note GC id",bold:!0,sm:"3"},{type:"label",value:"Debit Note GC Number",bold:!0,sm:"3"}]})}),Object(ot.jsx)(m.a,{id:"top-row",xs:4,md:4,container:!0,direction:"column"}),Object(ot.jsx)(m.a,{id:"top-row",xs:8,md:8,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:me})}),Object(ot.jsx)(m.a,{id:"top-row",xs:2,md:2,container:!0,direction:"column",children:void 0!==X&&Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:X,onClick:Oe})})}),Object(ot.jsx)(m.a,{id:"top-row",xs:2,md:2,container:!0,direction:"column",children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:ae,label:"".concat(ae?"Releasing ...":"Release Debit Note"),onClick:ve})})})]})})]}),Object(ot.jsx)(ua.a,{className:"page-header",children:Object(ot.jsx)(xa.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,children:-1!==V?Object(ot.jsx)(dl,{activeStep:V,completeStep:V,steps:ie,activeStepProgress:K}):"Loading ..."})})})}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"System Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:de})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Vendor Details"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:ue})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"MRIN Information"})})})}),Object(ot.jsxs)(on.a,{children:[Object(ot.jsx)(m.a,{item:!0,md:6,xs:6,className:"item",children:Object(ot.jsx)(tn,{payload:pe})}),Object(ot.jsx)(m.a,{item:!0,md:6,xs:6,className:"item",children:Object(ot.jsx)(tn,{payload:je})})]})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Other Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:be})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(Lr,{data:M})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:T,label:T?"Loading ...":"Save",onClick:he})})]}),null!==s&&Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)("div",{id:"vendor",style:{display:"none"},children:Object(ot.jsx)(Fr,{id:e.id,debitNoteGcDetails:s})}),Object(ot.jsx)("div",{id:"account",style:{display:"none"},children:Object(ot.jsx)(Rr,{id:e.id,debitNoteGcDetails:s})})]})]})},Zr=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .page-header":{width:"100%",marginBottom:15},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"},card:{boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)",marginBottom:5},modal:{position:"absolute",margin:"auto",top:"30%",left:"30%",width:700,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),Xr=function(e){var t=e?new Date(e):new Date;return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},$r=function(e){var t=Zr(),a=Object(n.useState)(null),l=Object(c.a)(a,2),o=l[0],s=l[1],u=Object(n.useState)(!1),b=Object(c.a)(u,2),p=b[0],j=b[1],v=Object(n.useState)({open:!1,message:"",severity:""}),h=Object(c.a)(v,2),g=h[0],f=h[1],y=Object(n.useState)([]),_=Object(c.a)(y,2),C=_[0],w=_[1],S=Object(n.useState)([]),k=Object(c.a)(S,2),N=k[0],P=k[1],D=i.a.useState(-1),I=Object(c.a)(D,2),A=I[0],T=I[1],E=Object(n.useState)("100%"),q=Object(c.a)(E,2),F=q[0],M=(q[1],Object(n.useState)("")),R=Object(c.a)(M,2),B=R[0],H=R[1],G=Object(n.useState)(!1),L=Object(c.a)(G,2),U=L[0],Q=L[1],V=Object(n.useState)(!1),z=Object(c.a)(V,2),W=z[0],Y=z[1],K=["Pending request","Pending approval","Approved","Account verified"];Object(n.useEffect)((function(){if(e.data){var t,a;s(e.data),T(K.indexOf(e.data.status)),H(K[K.indexOf(e.data.status)+1]),w(e.data.audit_log_gc);var n=[];null===(t=e.data)||void 0===t||null===(a=t.released_debitnotes)||void 0===a||a.map((function(e,t){n.push({label:"Debit Note Release CCL Account",download:Object(ot.jsx)(Yt,{label:"Download",onClick:function(){return J(e)}})})})),P(n)}}),[e.data]);var J=function(){var e=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke({type:"downloadDebitNote",file_name:"accountsdoc.pdf"});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=[{type:"label",value:null===o||void 0===o?void 0:o.debit_noteid,sm:"3"},{type:"label",value:null===o||void 0===o?void 0:o.debit_noteno,sm:"3"},{type:"label",value:Xr(null===o||void 0===o?void 0:o.debit_notedate),sm:"3"},{type:"label",value:null===o||void 0===o?void 0:o.entity_name,sm:"3"}],X=[{type:"label",value:"Vendor id",bold:!0,sm:"3"},{type:"label",value:null===o||void 0===o?void 0:o.vendor_id,sm:"3"},{type:"label",value:"Vendor Name",bold:!0,sm:"3"},{type:"label",value:null===o||void 0===o?void 0:o.vendor_name,sm:"3"}],$=[{type:"label",value:"MRIN id",bold:!0,sm:"3"},{type:"label",value:null===o||void 0===o?void 0:o.mrin_id,sm:"3"},{type:"label",value:"MRIN Number",bold:!0,sm:"3"},{type:"label",value:null===o||void 0===o?void 0:o.mrin_no,sm:"3"},{type:"label",value:"Invoice Number",bold:!0,sm:"3"},{type:"label",value:null===o||void 0===o?void 0:o.invoice_no,sm:"3"},{type:"label",value:"MRIN Quantity",bold:!0,sm:"3"},{type:"label",value:""===(null===o||void 0===o?void 0:o.invoice_qty)?"-":null===o||void 0===o?void 0:o.invoice_qty,sm:"3"},{type:"label",value:"Husk",bold:!0,sm:"3"},{type:"label",value:""===(null===o||void 0===o?void 0:o.husk)?"-":null===o||void 0===o?void 0:o.husk,sm:"3"},{type:"label",value:"Moisture",bold:!0,sm:"3"},{type:"label",value:""===(null===o||void 0===o?void 0:o.moisture)?"-":null===o||void 0===o?void 0:o.moisture,sm:"3"},{type:"label",value:"Stones",bold:!0,sm:"3"},{type:"label",value:""===(null===o||void 0===o?void 0:o.stones)?"-":null===o||void 0===o?void 0:o.stones,sm:"3"},{type:"label",value:"Item Id",bold:!0,sm:"3"},{type:"label",value:null===o||void 0===o?void 0:o.item_id,sm:"3"},{type:"label",value:"H S Code",bold:!0,sm:"3"},{type:"label",value:""===(null===o||void 0===o?void 0:o.hsc_code)?"-":null===o||void 0===o?void 0:o.hsc_code,sm:"3"},{type:"label",value:"Net WT RECD",bold:!0,sm:"3"},{type:"label",value:""===(null===o||void 0===o?void 0:o.netrecd)?"-":null===o||void 0===o?void 0:o.netrecd,sm:"3"},{type:"label",value:"Debit Amount",bold:!0,sm:"3"},{type:"label",value:null===o||void 0===o?void 0:o.debit_amount,sm:"3"}],ee=[{type:"label",value:"Remarks",bold:!0,sm:"3"},{type:"label",value:""===(null===o||void 0===o?void 0:o.remarks)?"-":null===o||void 0===o?void 0:o.remarks,sm:"3"},{type:"label",value:"Others",bold:!0,sm:"3"},{type:"label",value:null===o||void 0===o?void 0:o.others,sm:"3"}],te=function(){j(!1),e.back()},ae=function(){var t=Object(r.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a="Pending request"===(null===o||void 0===o?void 0:o.status)?"changeToPendingStatus":"Pending approval"===(null===o||void 0===o?void 0:o.status)?"changeToApprovedStatus":"Approved"===(null===o||void 0===o?void 0:o.status)?"changeToAccountVerifiedStatus":"",t.next=4,Je({type:a,debit_noteid:e.id,updated_by:localStorage.getItem("currentUserId")});case 4:t.sent&&(f({open:!0,message:"Pending request"===(null===o||void 0===o?void 0:o.status)?"Debit note sent for pending approval":"Pending approval"===(null===o||void 0===o?void 0:o.status)?"Debit note sent for approved":"Debit note sent for account verified"}),setTimeout((function(){e.back()}),2e3)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),f({open:!0,message:t.t0.message,severity:"error"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),ne=function(){var e=Object(r.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y(!1),t=document.getElementById("vendor"),a=document.getElementById("account"),t.style.display="block",a.style.display="block",Q(!0),n=document.getElementById("po_view_main"),Qr()(n).then(function(){var e=Object(r.a)(d.a.mark((function e(n){var i,l,c,s,u,b,p,j,m,v,h,O,g;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for("",l="",c=n.toDataURL("image/jpeg",1),0,u=210,295,s=n.height*u/n.width,b=s,p=Math.ceil(s/295)-1,j=new Vr.a("p","mm",[295,u]),m=0,j.addImage(c,"JPEG",0,m,u,s),b-=295,v=1;v<=p;v++)m=b-s,j.addPage(),j.addImage(c,"JPG",0,m*v,u,s);h=j.output(),i=btoa(h),O=j.output("bloburl"),window.open(O),Q(!1),t.style.display="none",g=document.getElementById("po_view_main_acc"),Qr()(g).then(function(){var e=Object(r.a)(d.a.mark((function e(t){var n,r,c,s,u,b,p,j,m,v,h,O;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.toDataURL("image/jpeg",1),0,c=210,295,r=t.height*c/t.width,s=r,u=Math.ceil(r/295)-1,b=new Vr.a("p","mm",[295,c]),p=0,b.addImage(n,"JPEG",0,p,c,r),s-=295,j=1;j<=u;j++)p=s-r,b.addPage(),b.addImage(n,"JPG",0,p*j,c,r);return m=b.output(),l=btoa(m),v=b.output("bloburl"),window.open(v),Q(!1),a.style.display="none",h={debit_noteid:null===o||void 0===o?void 0:o.debit_noteid,debit_notedate:null===o||void 0===o?void 0:o.debit_notedate,vendor_id:null===o||void 0===o?void 0:o.vendor_id,mrin_id:null===o||void 0===o?void 0:o.mrin_id,generated_by:localStorage.getItem("currentUserId"),doc_kind_account:"Debit_Note_Release_CCL_Accounts",docid_accounts:"Debit_Note_Release_CCL_Accounts-"+(null===o||void 0===o?void 0:o.debit_noteid),document_content_accounts:l,document_name_accounts:"Debit_Note_Release_CCL_Accounts.pdf",doc_kind_vendor:"Debit_Note_Release_Vendor",docid_vendor:"Debit_Note_Release_Vendor-"+(null===o||void 0===o?void 0:o.debit_noteid),document_content_vendor:i,document_name_vendor:"Debit_Note_Release_Vendor.pdf"},e.next=21,at(h);case 21:(O=e.sent)&&console.log("fd::",h,O);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ot.jsxs)(ot.Fragment,{children:[g.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},g),{},{handleClose:function(){return f({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(ua.a,{className:"page-header",children:[Object(ot.jsx)(an.a,{title:"Debit Note GC details",className:"cardHeader"}),Object(ot.jsx)(xa.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:8,md:8,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:[{type:"label",value:"Debit Note GC id",bold:!0,sm:"3"},{type:"label",value:"Debit Note GC Number",bold:!0,sm:"3"},{type:"label",value:"Debit Note GC Date",bold:!0,sm:"3"},{type:"label",value:"Entity",bold:!0,sm:"3"}]})}),Object(ot.jsx)(m.a,{id:"top-row",xs:4,md:2,container:!0,direction:"column"}),Object(ot.jsx)(m.a,{id:"top-row",xs:8,md:8,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:Z})}),Object(ot.jsx)(m.a,{id:"top-row",xs:2,md:2,container:!0,direction:"column",children:void 0!==B&&Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:B,onClick:ae})})}),Object(ot.jsx)(m.a,{id:"top-row",xs:2,md:2,container:!0,direction:"column",children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:U,label:"".concat(U?"Releasing ...":"Release Debit Note"),onClick:function(){null===(null===o||void 0===o?void 0:o.released_debitnotes)?ne():Y(!0)}})})})]})})]}),Object(ot.jsx)(ua.a,{className:"page-header",children:Object(ot.jsx)(xa.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,children:-1!==A?Object(ot.jsx)(dl,{activeStep:A,completeStep:A,steps:K,activeStepProgress:F}):"Loading ..."})})})}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Vendor Details"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:X})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"MRIN Details"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:$})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"File Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(gn,{rows:N,columns:[{id:"label",label:"File Name"},{id:"download",label:"Download"}]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Other Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:ee})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(Lr,{data:C})})]}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Edit",onClick:function(t){return e.editDebitNoteGc("edit_sample",e.id)}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})})]}),Object(ot.jsx)(zt,{open:p,handleClose:te,body:function(){return Object(ot.jsxs)(x.a,{className:t.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Success"}),Object(ot.jsx)("p",{children:"DebitNoteGc request submitted and email sent successfully"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Close",onClick:te})})})]})}}),Object(ot.jsx)(zt,{open:W,handleClose:function(){return Y(!1)},body:function(){return Object(ot.jsxs)(x.a,{className:t.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Warning"}),Object(ot.jsx)("p",{children:"Debit Note for this MRIN was already generated and released.Do you want to release it again?"}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Yes",onClick:ne})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"No",onClick:function(){return Y(!1)}})})]})]})}}),null!==o&&Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)("div",{id:"vendor",style:{display:"none"},children:Object(ot.jsx)(Fr,{id:e.id,debitNoteGcDetails:o})}),Object(ot.jsx)("div",{id:"account",style:{display:"none"},children:Object(ot.jsx)(Rr,{id:e.id,debitNoteGcDetails:o})})]})]})},ec=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .page-header":{width:"100%",marginBottom:15},"& .MuiAccordion-root":{width:"100%"},"& .dispatchTable":{maxHeight:"400px",overflowY:"auto"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"},modal:{position:"absolute",margin:"0 auto",top:"30%",right:"10%",left:"10%",width:700,textAlign:"center",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),tc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return e.map((function(e){return n.push({label:e[t],value:e[a]||e[t]})})),n},ac=function(e){var t=e?new Date(e):new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},nc=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},ic=function(e){var t=ec(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)([]),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)({}),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)([]),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)({open:!1,message:"",severity:""}),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)(!1),D=Object(c.a)(P,2),I=D[0],A=D[1],T=Object(n.useState)([]),E=Object(c.a)(T,2),q=E[0],F=E[1],M=Object(n.useState)(null),R=Object(c.a)(M,2),B=R[0],H=R[1];function G(){return G=Object(r.a)(d.a.mark((function e(){var t,a,n=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:{},F([]),e.next=4,ze({type:"allVendors"});case 4:return t=e.sent,C(t),e.next=8,Te({type:"allEntities"});case 8:a=e.sent,p(tc(a,"entity_name","entity_id"));case 10:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}Object(n.useEffect)((function(){!function(){G.apply(this,arguments)}()}),[]);var L=function(e,t){o(Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.value)))},U=function(){var e=Object(r.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,ze({type:"mrinsOnVendor",entity_id:l.entity,vendor_id:a.vendor_id,debit_notedate:ac(l.debitnotedate)});case 6:n=e.sent,F(n),o(Object(nt.a)(Object(nt.a)({},l),{},{vendorid:a.vendor_id,vendorname:a.vendor_name}));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Q=function(){var e=Object(r.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.vendorid||""===l.vendorid){e.next=5;break}return e.next=3,ze({type:"mrinsOnVendor",entity_id:a.value,vendor_id:l.entity,debit_notedate:ac(l.debitnotedate)});case 3:n=e.sent,F(n);case 5:o(Object(nt.a)(Object(nt.a)({},l),{},{entity:a.value}));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),V=[{label:"Debit Note date",type:"datePicker",value:""===l.debitnotedate?nc():l.debitnotedate,onChange:function(e){return L(e,"debitnotedate")}},{label:"Entity",type:"autocomplete",labelprop:"label",value:l.entity,options:b||[],onChange:Q}],z=[{label:"Vendor",type:"autocomplete",labelprop:"vendor_name",value:l.vendor,options:y||[],onChange:U},{label:"Vendor Id",type:"input",disabled:!0,value:l.vendorid?l.vendorid:"",onChange:function(e){return L(e,"vendorid")}},{label:"Vendor Name",type:"input",disabled:!0,value:l.vendorname?l.vendorname:"",onChange:function(e){return L(e,"vendorname")}}],W=[{label:"Remarks",type:"input",rows:4,multiline:!0,value:l.remarks||"",onChange:function(e){return L(e,"remarks")}}],Y=[{label:"Select MRIN",required:!0,type:"autocomplete",labelprop:"mrin_no",value:B,options:q||[],error:null===h||void 0===h?void 0:h.mrin_no,helperText:null===h||void 0===h?void 0:h.mrin_no,onChange:function(e,t){t&&(H(t),o(Object(nt.a)(Object(nt.a)({},l),{},{gc_itemname:t.gc_itemname,hsn_code:t.hsn_code,husk:t.husk,invoice_no:t.invoice_no,invoice_quantity:t.invoice_quantity,item_id:t.item_id,moisture:t.moisture,mrin_id:t.mrin_id,mrin_no:t.mrin_no,net_weightrecorded:t.net_weightrecorded,stones:t.stones})))},sm:12},{label:"Invoice No.",type:"input",disabled:!0,value:l.invoice_no||"",sm:12},{label:"MRIN Id",type:"input",disabled:!0,value:l.mrin_id||"",sm:12},{label:"Invoice Qty",type:"input",disabled:!0,value:l.invoice_quantity||"",sm:12},{label:"Husk",type:"number",value:l.husk?l.husk:"",onChange:function(e){return L(e,"husk")},sm:12},{label:"Moisture",type:"number",value:l.moisture?l.moisture:"",onChange:function(e){return L(e,"moisture")},sm:12},{label:"Stones",type:"number",value:l.stones?l.stones:"",onChange:function(e){return L(e,"stones")},sm:12}],K=[{label:"Item Id",type:"input",disabled:!0,value:l.item_id||"",sm:12},{label:"Item Name",type:"input",disabled:!0,value:l.gc_itemname||"",sm:12},{label:"H S Code",type:"input",value:l.hsn_code||"",onChange:function(e){return L(e,"hsn_code")},sm:12},{label:"Net WT RECD",type:"number",value:l.net_weightrecorded||"",onChange:function(e){return L(e,"net_weightrecorded")},sm:12},{label:"Others",type:"input",value:l.others||"",onChange:function(e){return L(e,"others")},sm:12},{label:"Quality",type:"number",value:l.quality||"",onChange:function(e){return L(e,"quality")},sm:12},{label:"Debit Amount",type:"number",value:l.debitamt||"",onChange:function(e){return L(e,"debitamt")},sm:12}],J=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,o,r,c,s,u,b;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a={},_.a.isEmpty(null===l||void 0===l?void 0:l.mrin_no)&&(a.mrin_no="MRIN cannot be empty"),g(a),_.a.isEmpty(a)){t.next=10;break}throw g(a),{message:"Please fill all mandatory fields"};case 10:return b={debit_notedate:ac(null===l||void 0===l?void 0:l.debitnotedate),others:null===l||void 0===l?void 0:l.others,vendor_id:null===l||void 0===l?void 0:l.vendorid,remarks:null===l||void 0===l?void 0:l.remarks,invoice_no:null===l||void 0===l?void 0:l.invoice_no,invoice_qty:null===l||void 0===l?void 0:l.invoice_quantity,entity_id:l.entity,mrin_id:null===l||void 0===l?void 0:l.mrin_id,mrin_no:null===l||void 0===l?void 0:l.mrin_no,item_id:null===l||void 0===l?void 0:l.item_id,debit_amount:null!==l&&void 0!==l&&l.debitamt?null===l||void 0===l||null===(n=l.debitamt)||void 0===n?void 0:n.toString():"0",hsc_code:null===l||void 0===l||null===(i=l.hsn_code)||void 0===i?void 0:i.toString(),husk:l.husk?null===l||void 0===l||null===(o=l.husk)||void 0===o?void 0:o.toString():"0",quality:l.quality?null===l||void 0===l||null===(r=l.quality)||void 0===r?void 0:r.toString():"0",netrecd:l.net_weightrecorded?null===l||void 0===l||null===(c=l.net_weightrecorded)||void 0===c?void 0:c.toString():"0",moisture:null!==l&&void 0!==l&&l.moisture?null===l||void 0===l||null===(s=l.moisture)||void 0===s?void 0:s.toString():"0",stones:null!==l&&void 0!==l&&l.stones?null===l||void 0===l||null===(u=l.stones)||void 0===u?void 0:u.toString():"0",created_by:localStorage.getItem("currentUserId")},A(!0),t.next=14,Ye(b);case 14:t.sent&&(N({open:!0,message:"Debit note created successfully"}),setTimeout((function(){e.back(),A(!1)}),2e3));case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),A(!1),N({open:!0,message:t.t0.message,severity:"error"});case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[k.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},k),{},{handleClose:function(){return N({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"System Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:V})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Vendor Details"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:z})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"MRIN Information"})})})}),Object(ot.jsxs)(on.a,{children:[Object(ot.jsx)(m.a,{item:!0,md:6,xs:6,className:"item",children:Object(ot.jsx)(tn,{payload:Y})}),Object(ot.jsx)(m.a,{item:!0,md:6,xs:6,className:"item",children:Object(ot.jsx)(tn,{payload:K})})]})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Other Information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:W})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:I,label:I?"Loading ...":"Create",onClick:J})})]})]})},lc=Object(g.a)((function(e){return{root:{paddingTop:e.spacing(3),minWidth:"100%"},formControl:{margin:e.spacing(1),marginTop:e.spacing(2),minWidth:120},modal:{position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",margin:"auto",top:"50%",right:"50%",transform:"translate(50%, -50%)",width:500,backgroundColor:e.palette.background.paper,border:"1px solid #fefefe",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),oc=[{label:"All",value:"all"},{label:"Pending Request",value:"Pending request"},{label:"Pending Approval",value:"Pending approval"},{label:"Approved",value:"Approved"},{label:"Account Verified",value:"Account verified"},{label:"Released",value:"Released"}],rc=function(e){var t=(0,Jt().getCurrentUserDetails)().id,a=Object(n.useState)("all"),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)(null),u=Object(c.a)(s,2),b=u[0],p=u[1],j=lc(),v=Object(n.useState)(null),h=Object(c.a)(v,2),O=h[0],g=h[1],f=Object(n.useState)(!1),y=Object(c.a)(f,2),C=y[0],w=y[1],S=Object(n.useState)(!1),k=Object(c.a)(S,2),N=k[0],P=k[1],D=Object(n.useState)(!1),I=Object(c.a)(D,2),A=I[0],T=I[1],E=Object(n.useState)(!1),q=Object(c.a)(E,2),F=q[0],M=q[1],R=Object(n.useState)({}),B=Object(c.a)(R,2),H=B[0],G=B[1],L=Object(n.useState)(-1),U=Object(c.a)(L,2),Q=U[0],V=U[1],z=Object(n.useState)(-1),W=Object(c.a)(z,2),Y=W[0],K=W[1],J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;console.log("key");var a=[];return e.map((function(e){return a.push({label:e[t],value:e.id||e[t]})})),a}([{type:"Green Coffee",id:1},{type:"Packing",id:2},{type:"M & E",id:3},{type:"Capital",id:4}],"type","id"),Z=Object(n.useState)(!1),X=Object(c.a)(Z,2),$=X[0],ee=X[1],te=function(){var e=Object(r.a)(d.a.mark((function e(a,n){var i,l,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Val ",a,n),i="","all"!==n&&(_.a.isEmpty(i)||(i+=" AND "),i+="status = '".concat(n,"'")),_.a.isEmpty(a)||(_.a.isEmpty(i)||(i+=" AND "),i+="".concat(a)),l={filter:i,loggedinuserid:t},e.next=7,We(l);case 7:o=e.sent,g(o);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){te(b,l)}),[b,l]),Object(n.useEffect)((function(){A||C||N||(p(null===b?void 0:null),o("all"))}),[C,N,A]);var ae,ne=function(){var e=Object(r.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(t.target.value),p(null);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(r.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke({debit_noteid:a});case 2:return n=e.sent,e.next=5,G(n);case 5:w(!0),V(a);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),le=[{label:"Select creation type",type:"autocomplete",labelprop:"label",required:!0,value:Y||"",options:J||[],onChange:function(e,t){e.preventDefault(),K(t)},xs:12,sm:12}],oe=function(){M(!1),T(!0)},re=function(){K(-1),M(!1)};if(C)ae=Object(ot.jsx)($r,{data:H,back:function(){K(-1),w(!1)},id:Q,editDebitNoteGc:function(e,t){return function(e,t){w(!1),T(!1),P(!0),V(t)}(0,t)}});else if(N)ae=Object(ot.jsx)(Jr,{data:H,back:function(){K(-1),P(!1),w(!1)},id:Q});else{if(!A)return Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0,children:Object(ot.jsxs)(Da.a,{variant:"outlined",className:j.formControl,children:[Object(ot.jsx)(Ia.a,{htmlFor:"outlined-age-native-simple",children:"View"}),Object(ot.jsx)(Aa.a,{native:!0,value:l,onChange:ne,label:"View",inputProps:{name:"view",id:"outlined-view-native-simple"},children:oc.map((function(e,t){return Object(ot.jsx)("option",{value:e.value,children:e.label})}))})]})}),Object(ot.jsxs)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:[null!==O&&Object(ot.jsx)(pi,{onClick:function(){ee(!0)},label:"Export to excel"}),Object(ot.jsx)(Rn,{onClick:function(){M(!0)},label:"Debit Note GC Request",variant:"extended"})]})]}),!0===$&&Object(ot.jsx)(ui,{tableData:O,tableName:"Debit Note GC"}),Object(ot.jsx)(Er,{selectedAdvancedFilters:function(e){return p(e)},clearAdvancedFilters:function(){return p(null)},data:O,sampleDetails:function(e,t){return ie(e,t)}}),Object(ot.jsx)(zt,{open:F,handleClose:function(){return M(!F)},body:function(){return Object(ot.jsxs)(x.a,{className:j.modal,children:[Object(ot.jsx)("h2",{style:{color:dt,fontWeight:"700",alignSelf:"center",margin:"0 0 1rem 0"},children:"Select Debit Note Type"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{id:"top-row",item:!0,sm:12,children:Object(ot.jsx)(tn,{payload:le})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",style:{margin:"2rem 0px 0px 0px"},children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Proceed",disabled:1!==(null===Y||void 0===Y?void 0:Y.value),onClick:oe})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:re})})]})]})}})]});ae=Object(ot.jsx)(ic,{back:function(){K(-1),T(!1)},CreatedDebitNoteGc:function(){w(!0),T(!1),P(!1)}})}return Object(ot.jsx)(x.a,{className:j.root,children:ae})},cc=[{id:"quotenumber",label:"Quote Number"},{id:"accountname",label:"Account Name"},{id:"status",label:"Status"},{id:"pendingwith",label:"Responsible Owner"},{id:"createdby",label:"Created By"},{id:"createddate",label:"Created Date"}];var sc=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),dc=function(e){var t=sc(),a=i.a.useState(0),l=Object(c.a)(a,2),o=l[0],r=l[1],s=i.a.useState(10),d=Object(c.a)(s,2),u=d[0],b=d[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),m=j[0],v=j[1],h=i.a.useState("asc"),O=Object(c.a)(h,2),g=O[0],x=O[1],f=i.a.useState(""),y=Object(c.a)(f,2),_=y[0],C=y[1],w=[];function S(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}i.a.useEffect((function(){console.log("Props Data",e.data),e.data&&e.data.map((function(e){var t,a,n,i,l,o,r;w.push((t=e.quoteid,a=e.quotenumber,n=e.accountname,i=e.status,l=e.createdby,o=function(e){var t=e?new Date(e):new Date;return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()}(e.createddate),r=e.pendingwith,{quoteid:t,quotenumber:a,accountname:n,status:i,createdby:l,createddate:o,pendingwith:r||"-"}))})),v(w)}),[e.data]);return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(Un,{classes:t,order:g,orderBy:_,onRequestSort:function(e,t){x(_===t&&"asc"===g?"desc":"asc"),C(t)},rowCount:m.length,headCells:cc,selectedAdvancedFilters:e.selectedAdvancedFilters,clearAdvancedFilters:e.clearAdvancedFilters}),Object(ot.jsx)(dn.a,{children:m.length>0?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(m,function(e,t){return"desc"===e?function(e,a){return S(e,a,t)}:function(e,a){return-S(e,a,t)}}(g,_)).slice(o*u,o*u+u).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:cc.map((function(a){var n=t[a.id];return Object(ot.jsx)(un.a,{align:a.align,children:"quotenumber"===a.id?Object(ot.jsx)("a",{href:"#",onClick:function(n){var i,l,o;i=a.id,l=t.quoteid,o=t.status,console.log(i),"quotenumber"===i&&e.quoteDetails("view_quote",l,o)},children:n}):n},a.id)}))},a)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:m.length,rowsPerPage:u,page:o,onChangePage:function(e,t){r(t)},onChangeRowsPerPage:function(e){b(+e.target.value),r(0)}})]})},uc=a(887),bc=Object(g.a)((function(e){return{root:{paddingTop:e.spacing(3),minWidth:"100%"},formControl:{margin:e.spacing(1),marginTop:e.spacing(2),minWidth:120}}})),pc=function(e){var t=(0,Jt().getCurrentUserDetails)(),a=null===t||void 0===t?void 0:t.role,l=null===t||void 0===t?void 0:t.id,o=i.a.useRef(null),s=bc(),u=Object(n.useState)(a===Kt.managingDirector||a===Kt.gmc?"All Quotes":"myquotes"),b=Object(c.a)(u,2),p=b[0],j=b[1],v=Object(n.useState)(null),h=Object(c.a)(v,2),O=h[0],g=h[1],f=Object(n.useState)(!1),y=Object(c.a)(f,2),C=y[0],w=y[1],S=Object(n.useState)(!1),k=Object(c.a)(S,2),N=k[0],P=k[1],D=Object(n.useState)(!1),I=Object(c.a)(D,2),A=I[0],T=I[1],E=Object(n.useState)(-1),q=Object(c.a)(E,2),F=q[0],M=q[1],R=Object(n.useState)({open:!1,message:""}),B=Object(c.a)(R,2),H=B[0],G=B[1],L=Object(n.useState)(a===Kt.managingDirector||a===Kt.gmc?"All Quotes":"myquotes"),U=Object(c.a)(L,2),Q=U[0],V=U[1],z=Object(n.useState)([]),W=Object(c.a)(z,2),K=W[0],J=W[1],Z=Object(n.useState)(""),X=Object(c.a)(Z,2),$=X[0],ee=X[1],te=Object(n.useState)(!1),ae=Object(c.a)(te,2),ne=ae[0],ie=ae[1],le=i.a.useState(0),oe=Object(c.a)(le,2),re=oe[0],ce=oe[1];i.a.useEffect((function(){ce(o.current.offsetWidth)}),[]);var se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=[];return null===e||void 0===e||e.map((function(e){return a.push({label:e[t],value:e[t]})})),a},ue=function(){var e=Object(r.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de({type:"listquotationstatus"});case 3:t=e.sent,J([{label:"All Quotes",value:"All Quotes"},{label:"My Quotes",value:"myquotes"}].concat(se(t,"status","id"))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),G({open:!0,message:e.t0.message,severity:"error"}),setTimeout({open:!1,message:""});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(r.a)(d.a.mark((function e(t,n){var i,o,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Val ",t,n),i="",(a!==Kt.managingDirector&&a!==Kt.gmc||"myquotes"===n)&&(i+="createdbyuserid = '".concat(l,"'")),"All Quotes"!==n&&"myquotes"!==n&&(_.a.isEmpty(i)||(i+=" AND "),i+="status = '".concat(n,"'")),_.a.isEmpty(t)||(_.a.isEmpty(i)||(i+=" AND "),i+="".concat(t)),o={filter:i,loggedinuserid:l},e.next=8,Y(o);case 8:r=e.sent,g(r);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){N&&A&&C||be($,p)}),[p,$,N,A,C]),Object(n.useEffect)((function(){ue()}),[]);var pe;return pe=C?Object(ot.jsx)(Cl,{back:function(){w(!1)}}):N?Object(ot.jsx)(Gl,{back:function(){P(!1)},id:F,status:Q,edit:function(e,t){return function(e,t){T(!0),M(t),P(!1)}(0,t)}}):A?Object(ot.jsx)(Ql,{back:function(){T(!1)},id:F}):Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0,children:Object(ot.jsxs)(Da.a,{variant:"outlined",className:s.formControl,children:[Object(ot.jsx)(Ia.a,{shrink:!0,ref:o,htmlFor:"outlined-age-always-notched",children:"View"}),Object(ot.jsx)(Aa.a,{native:!0,value:p,onChange:function(e){j(e.target.value),ee(null)},label:"View",input:Object(ot.jsx)(uc.a,{notched:!0,labelWidth:re,name:"age",id:"outlined-age-always-notched"}),children:K.map((function(e,t){return a!==Kt.managingDirector&&a!==Kt.gmc&&"All Quotes"===(null===e||void 0===e?void 0:e.value)?null:Object(ot.jsx)("option",{value:null===e||void 0===e?void 0:e.value,children:null===e||void 0===e?void 0:e.label},t)}))})]})}),Object(ot.jsxs)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:[null!==O&&Object(ot.jsx)(pi,{onClick:function(){ie(!0)},label:"Export to excel"}),Object(ot.jsx)(Rn,{onClick:function(){w(!0)},label:"Create Quote",variant:"extended"})]})]}),!0===ne&&Object(ot.jsx)(ui,{tableData:O,tableName:"Quotes"}),Object(ot.jsx)(dc,{selectedAdvancedFilters:function(e){return ee(e)},clearAdvancedFilters:function(){return ee(null)},data:O,quoteDetails:function(e,t,a){return function(e,t,a){P(!0),V(a),M(t)}(0,t,a)}})]}),Object(ot.jsxs)(x.a,{className:s.root,children:[H.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},H),{},{handleClose:function(){return G({open:!1,message:"",severity:""})}})),pe]})},jc=a(963),mc=a(241),vc=a.n(mc),hc=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .page-header":{width:"100%",marginBottom:15},"& .MuiAccordion-root":{width:"100%"},"& .dispatchTable":{maxHeight:"400px",overflowY:"auto"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"}}})),Oc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return e.map((function(e){return n.push({label:e[t],value:e[a]})})),n};function gc(e){var t=hc(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)({}),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)([]),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)([]),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)([]),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)(""),D=Object(c.a)(P,2),I=D[0],A=D[1],T=Object(n.useState)([]),E=Object(c.a)(T,2),q=E[0],F=E[1],M=Object(n.useState)(""),R=Object(c.a)(M,2),B=R[0],H=R[1],G=(0,Jt().getCurrentUserDetails)(),L=Object(n.useState)({open:!1,message:"",severity:""}),U=Object(c.a)(L,2),Q=U[0],V=U[1],z=Object(n.useState)(!1),W=Object(c.a)(z,2),Y=W[0],K=W[1];Object(n.useEffect)((function(){Ue({type:"itemgroups"}).then((function(e){F(e),g(Oc(e,"group_name","group_id"))})),Ue({type:"uoms"}).then((function(e){N(Oc(e,"uom_name","uom_id"))})),Ue({type:"itemcategories"}).then((function(e){C(Oc(e,"item_category_name","item_category_id"))}))}),[]);var J=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.value));o(a)},Z=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},{CoffeeType:(null===t||void 0===t?void 0:t.value)||""});o(a)},X=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.value));o(a)},$=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.checked));o(a)},ee=function(){var t=Object(r.a)(d.a.mark((function t(a){var n,i,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n="Please enter valid details",i={},_.a.isEmpty(l.ItemGroup)&&(i=Object(nt.a)(Object(nt.a)({},i),{},{ItemGroup:n})),_.a.isEmpty(l.ItemCode)&&(i=Object(nt.a)(Object(nt.a)({},i),{},{ItemCode:n})),_.a.isEmpty(l.ShortCode)&&(i=Object(nt.a)(Object(nt.a)({},i),{},{ShortCode:n})),_.a.isEmpty(l.ItemName)&&(i=Object(nt.a)(Object(nt.a)({},i),{},{ItemName:n})),_.a.isEmpty(l.ItemCategory)&&(i=Object(nt.a)(Object(nt.a)({},i),{},{ItemCategory:n})),_.a.isEmpty(l.Uom)&&(i=Object(nt.a)(Object(nt.a)({},i),{},{Uom:n})),_.a.isEmpty(l.CoffeeType)&&(i=Object(nt.a)(Object(nt.a)({},i),{},{CoffeeType:n})),p(i),_.a.isEmpty(i)){t.next=15;break}p(i),t.next=30;break;case 15:return K(!0),r={group_id:l.ItemGroup,createduserid:G.id,item_code:l.ItemCode,s_code:l.ShortCode,item_name:l.ItemName,item_desc:l.ItemDescription,hsn_code:l.HsnCode,convertion_ratio:l.conversionRatio?l.conversionRatio:"0",item_catid:l.ItemCategory,uom:l.Uom,created_on:new Date,created_by:localStorage.getItem("currentUserId"),display_inpo:l.gcpo,display_in_dailyupdates:l.gcDaily,is_specialcoffee:l.is_specialcoffee,coffee_type:l.CoffeeType,lgroupcode:I,lname:B,density:l.density?l.density:"0",moisture:l.moisture?l.moisture:"0",browns:l.browns?l.browns:"0",blacks:l.blacks?l.blacks:"0",broken_bits:l.broken_bits?l.broken_bits:"0",insected_beans:l.insected_beans?l.insected_beans:"0",bleached:l.bleached?l.bleached:"0",husk:l.husk?l.husk:"0",sticks:l.sticks?l.sticks:"0",stones:l.stones?l.stones:"0",beans_retained:l.beans_retained?l.beans_retained:"0"},t.prev=17,t.next=20,Qe(r);case 20:t.sent&&(V({open:!0,message:"GC Information Created Successfully"}),o({}),setTimeout((function(){e.back()}),1500)),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(17),V({open:!0,message:t.t0.message,severity:"error"});case 27:return t.prev=27,K(!1),t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[17,24,27,30]])})));return function(e){return t.apply(this,arguments)}}(),te=[{value:"GC",label:"GC"},{value:"ORM",label:"ORM"}],ae=[{label:"Display this item in purchase order",type:"checkbox",value:l.gcpo,onChange:function(e){return $(e,"gcpo")},sm:6},{label:"Display this green coffee rates in daily update",type:"checkbox",value:l.gcDaily,onChange:function(e){return $(e,"gcDaily")},sm:6},{label:"Item type",type:"autocomplete",labelprop:"label",value:l.CoffeeType,options:te||[],required:!0,error:null===b||void 0===b?void 0:b.CoffeeType,helperText:null===b||void 0===b?void 0:b.CoffeeType,onChange:Z,sm:6}],ne=[{label:"Display this item in purchase order",type:"checkbox",value:l.gcpo,onChange:function(e){return $(e,"gcpo")},sm:6},{label:"Display this green coffee rates in daily update",type:"checkbox",value:l.gcDaily,onChange:function(e){return $(e,"gcDaily")},sm:6},{label:"Item type",type:"autocomplete",labelprop:"label",value:l.CoffeeType,options:te||[],required:!0,error:null===b||void 0===b?void 0:b.CoffeeType,helperText:null===b||void 0===b?void 0:b.CoffeeType,onChange:Z,sm:6},{label:"Is special coffee",type:"checkbox",value:l.is_specialcoffee,onChange:function(e){return $(e,"is_specialcoffee")},sm:6}],ie=[{label:"Density(Gm/cc)",type:"number",value:l.density,onChange:function(e){return X(e,"density")}},{label:"Moisture(%)",type:"number",value:l.moisture,onChange:function(e){return X(e,"moisture")}},{label:"Browns(%)",type:"number",value:l.browns,onChange:function(e){return X(e,"browns")}},{label:"Blacks(%)",type:"number",value:l.blacks,onChange:function(e){return X(e,"blacks")}},{label:"Broken & bites(%)",type:"number",value:l.broken_bits,onChange:function(e){return X(e,"broken_bits")}},{label:"Insected beans(%)",type:"number",value:l.insected_beans,onChange:function(e){return X(e,"insected_beans")}},{label:"Bleached(%)",type:"number",value:l.bleached,onChange:function(e){return X(e,"bleached")}},{label:"Husk(%)",type:"number",value:l.husk,onChange:function(e){return X(e,"husk")}},{label:"Sticks(%)",type:"number",value:l.sticks,onChange:function(e){return X(e,"sticks")}},{label:"Stones(%)",type:"number",value:l.stones,onChange:function(e){return X(e,"stones")}},{label:"Beans retained on 5mm mesh during sieve analysis",type:"number",value:l.beans_retained,onChange:function(e){return X(e,"beans_retained")}}];return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[Q.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},Q),{},{handleClose:function(){return V({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Green coffee information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Da.a,{error:null===b||void 0===b?void 0:b.ItemGroup,fullWidth:!0,children:Object(ot.jsx)($a.a,{getOptionLabel:function(e){return e.label},label:"Item group *",value:l.ItemGroup,onChange:function(e,t){var a,n,i=Object(nt.a)(Object(nt.a)({},l),{},{ItemGroup:null===t||void 0===t?void 0:t.value});o(i);var r=q.filter((function(e){return(null===e||void 0===e?void 0:e.group_id)===(null===t||void 0===t?void 0:t.value)}));A((null===r||void 0===r||null===(a=r[0])||void 0===a?void 0:a.led_group_id)||""),H((null===r||void 0===r||null===(n=r[0])||void 0===n?void 0:n.group_name)||"")},options:h||[],renderInput:function(e){return Object(ot.jsx)(Fa,Object(nt.a)(Object(nt.a)({},e),{},{helperText:null===b||void 0===b?void 0:b.ItemGroup,label:"Item group",error:null===b||void 0===b?void 0:b.ItemGroup,variant:"outlined",required:!0}))}})})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:5,children:Object(ot.jsx)(Fa,{label:"Item code",value:l.ItemCode,onChange:function(e){return J(e,"ItemCode")},error:null===b||void 0===b?void 0:b.ItemCode,helperText:null===b||void 0===b?void 0:b.ItemCode,required:!0})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:1,children:Object(ot.jsx)(jc.a,{style:{height:"100%"},title:"Unique For Your Identification",arrow:!0,children:Object(ot.jsx)(Ct.a,{"aria-label":"Unique For Your Identification",children:Object(ot.jsx)(vc.a,{style:{color:"#F05A30"}})})})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Item name",value:l.ItemName,onChange:function(e){return J(e,"ItemName")},error:null===b||void 0===b?void 0:b.ItemName,helperText:null===b||void 0===b?void 0:b.ItemName,required:!0})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:5,children:Object(ot.jsx)(Fa,{label:"Short code",value:l.ShortCode,onChange:function(e){return J(e,"ShortCode")},error:null===b||void 0===b?void 0:b.ShortCode,helperText:null===b||void 0===b?void 0:b.ShortCode,required:!0})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:1,children:Object(ot.jsx)(jc.a,{style:{height:"100%"},title:"(R&D Purpose For Sample Creation)Please Contact R&D Department To Enter The Short Code",arrow:!0,children:Object(ot.jsx)(Ct.a,{"aria-label":"(R&D Purpose For Sample Creation)Please Contact R&D Department To Enter The Short Code",children:Object(ot.jsx)(vc.a,{style:{color:"#F05A30"}})})})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Item description",value:l.ItemDescription,onChange:function(e){return J(e,"ItemDescription")},error:null===b||void 0===b?void 0:b.ItemDescription,helperText:null===b||void 0===b?void 0:b.ItemDescription})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:5,children:Object(ot.jsx)(Fa,{type:"number",label:"Conversion ratio",value:l.conversionRatio,onChange:function(e){return J(e,"conversionRatio")},error:null===b||void 0===b?void 0:b.conversionRatio,helperText:null===b||void 0===b?void 0:b.conversionRatio})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:1,children:Object(ot.jsx)(jc.a,{style:{height:"100%"},title:"Please Enter This Item Contribution Percentage For The Powder Production",arrow:!0,children:Object(ot.jsx)(Ct.a,{"aria-label":"Please Enter This Item Contribution Percentage For The Powder Production",children:Object(ot.jsx)(vc.a,{style:{color:"#F05A30"}})})})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"HSN code",value:l.HsnCode,onChange:function(e){return J(e,"HsnCode")},error:null===b||void 0===b?void 0:b.HsnCode,helperText:null===b||void 0===b?void 0:b.HsnCode})})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Categories & UOM"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Da.a,{error:null===b||void 0===b?void 0:b.ItemCategory,fullWidth:!0,children:Object(ot.jsx)($a.a,{getOptionLabel:function(e){return e.label},label:"Item category *",value:l.ItemCategory,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},{ItemCategory:(null===t||void 0===t?void 0:t.value)||""});o(a)},options:y||[],renderInput:function(e){return Object(ot.jsx)(Fa,Object(nt.a)(Object(nt.a)({},e),{},{helperText:null===b||void 0===b?void 0:b.ItemCategory,label:"Item category",error:null===b||void 0===b?void 0:b.ItemCategory,variant:"outlined",required:!0}))}})})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Da.a,{error:null===b||void 0===b?void 0:b.Uom,fullWidth:!0,children:Object(ot.jsx)($a.a,{getOptionLabel:function(e){return e.label},label:"Item UOM *",value:l.Uom,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},{Uom:(null===t||void 0===t?void 0:t.value)||""});o(a)},options:k||[],renderInput:function(e){return Object(ot.jsx)(Fa,Object(nt.a)(Object(nt.a)({},e),{},{helperText:null===b||void 0===b?void 0:b.Uom,label:"Item UOM",error:null===b||void 0===b?void 0:b.Uom,variant:"outlined",required:!0}))}})})})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Display & Type information"})})})}),Object(ot.jsx)(on.a,{children:"GC"===l.CoffeeType?Object(ot.jsx)(tn,{payload:ne}):Object(ot.jsx)(tn,{payload:ae})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Specification information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:ie})})]}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:Y,label:Y?"Loading...":"Save",onClick:ee})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})})]})]})}var xc=[{id:"description",label:"Description"},{id:"created_username",label:"Created By"},{id:"created_date",label:"Created Date"},{id:"modified_username",label:"Modified By"},{id:"modified_date",label:"Modified Date"}],fc=function(e){var t=new Date(e);return e?t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear():""};var yc=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),_c=function(e){var t=yc(),a=i.a.useState(0),n=Object(c.a)(a,2),l=n[0],o=n[1],r=i.a.useState(10),s=Object(c.a)(r,2),d=s[0],u=s[1],b=[];i.a.useEffect((function(){console.log("Props Data",e.data)}),[e.data]),e.data&&e.data.map((function(e){var t,a,n,i,l;b.push((t=e.description,a=e.created_username,n=fc(e.created_date),i=e.modified_username,l=fc(e.modified_date),{description:t,created_username:a,created_date:n,modified_username:i,modified_date:l}))}));return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(pn.a,{children:Object(ot.jsx)(jn.a,{children:xc.map((function(e){return Object(ot.jsx)(un.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ot.jsxs)(dn.a,{children:[b.length>0&&b.slice(l*d,l*d+d).map((function(e,t){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:xc.map((function(t,a){var n=e[t.id];return Object(ot.jsx)(un.a,{align:t.align,children:n},t.id)}))},e.code)})),0===b.length&&Object(ot.jsx)("p",{children:"No records to display"})]})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:b.length,rowsPerPage:d,page:l,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){u(+e.target.value),o(0)}})]})},Cc=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .page-header":{width:"100%",marginBottom:15},"& .MuiAccordion-root":{width:"100%"},"& .dispatchTable":{maxHeight:"400px",overflowY:"auto"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"}}})),wc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return e.map((function(e){return n.push({label:e[t],value:e[a]})})),n},Sc=function(e){var t=Cc(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)([]),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)([]),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)([]),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)({}),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)(""),D=Object(c.a)(P,2),I=D[0],A=D[1],T=Object(n.useState)(""),E=Object(c.a)(T,2),q=E[0],F=E[1],M=Object(n.useState)([]),R=Object(c.a)(M,2),B=R[0],H=R[1],G=Object(n.useState)({open:!1,message:"",severity:""}),L=Object(c.a)(G,2),U=L[0],Q=L[1],V=Object(n.useState)(!1),z=Object(c.a)(V,2),W=z[0],Y=z[1];Object(n.useEffect)((function(){Ue({type:"itemgroups"}).then((function(t){p(wc(t,"group_name","group_id"));var a=t.filter((function(t){return t.group_id===e.data.group_id}));A(a[0].led_group_id),F(a[0].group_name)}))}),[]);Object(n.useEffect)((function(){!function(t){var a=Object(nt.a)({},e.data);a.group_id={label:a.lname,value:a.group_id},a.uom={label:a.uom_name,value:a.uom},a.item_catid={label:a.item_catname,value:a.item_catid},H(e.data.audit_log_gc),o(a),Ue({type:"uoms"}).then((function(e){C(wc(e,"uom_name","uom_id"))})),Ue({type:"itemcategories"}).then((function(e){g(wc(e,"item_category_name","item_category_id"))})),console.log("gro::",a)}(e.id)}),[e.id]);var K=function(){var t=Object(r.a)(d.a.mark((function t(a){var n,i,o,r,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),console.log("gcDetails::",l),n="Please enter valid details",i={},_.a.isEmpty(l.group_id)&&(i=Object(nt.a)(Object(nt.a)({},i),{},{group_id:n})),_.a.isEmpty(l.item_code)&&(i=Object(nt.a)(Object(nt.a)({},i),{},{item_code:n})),_.a.isEmpty(l.s_code)&&(i=Object(nt.a)(Object(nt.a)({},i),{},{s_code:n})),_.a.isEmpty(l.item_name)&&(i=Object(nt.a)(Object(nt.a)({},i),{},{item_name:n})),_.a.isEmpty(l.item_catid)&&(i=Object(nt.a)(Object(nt.a)({},i),{},{item_catid:n})),_.a.isEmpty(l.uom)&&(i=Object(nt.a)(Object(nt.a)({},i),{},{uom:n})),_.a.isEmpty(l.coffee_type)&&(i=Object(nt.a)(Object(nt.a)({},i),{},{coffee_type:n})),N(i),_.a.isEmpty(i)){t.next=16;break}N(i),t.next=31;break;case 16:return Y(!0),s={update:!0,item_id:e.id,group_id:null===(o=l.group_id)||void 0===o?void 0:o.value,item_code:l.item_code,s_code:l.s_code,item_name:l.item_name,item_desc:l.item_desc,hsn_code:l.hsn_code,convertion_ratio:l.convertion_ratio?l.convertion_ratio:"0",item_catid:null===(r=l.item_catid)||void 0===r?void 0:r.value,uom:null===(c=l.uom)||void 0===c?void 0:c.value,enable_status:l.status,updated_on:new Date,updated_by:localStorage.getItem("currentUserId"),display_inpo:l.display_inpo,display_in_dailyupdates:l.display_in_dailyupdates,is_specialcoffee:l.is_specialcoffee,coffee_type:l.coffee_type,lgroupcode:I,lname:q,density:l.density?l.density:"0",moisture:l.moisture?l.moisture:"0",browns:l.browns?l.browns:"0",blacks:l.blacks?l.blacks:"0",broken_bits:l.broken_bits?l.broken_bits:"0",insected_beans:l.insected_beans?l.insected_beans:"0",bleached:l.bleached?l.bleached:"0",husk:l.husk?l.husk:"0",sticks:l.sticks?l.sticks:"0",stones:l.stones?l.stones:"0",beans_retained:l.beans_retained?l.beans_retained:"0"},t.prev=18,t.next=21,Qe(s);case 21:t.sent&&(Q({open:!0,message:"GC updated successfully"}),setTimeout((function(){e.back()}),2e3)),t.next=28;break;case 25:t.prev=25,t.t0=t.catch(18),Q({open:!0,message:t.t0.message,severity:"error"});case 28:return t.prev=28,Y(!1),t.finish(28);case 31:case"end":return t.stop()}}),t,null,[[18,25,28,31]])})));return function(e){return t.apply(this,arguments)}}(),J=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.value));o(a)},Z=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.checked));o(a)},X=function(){var e=Object(r.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(a.led_group_id);case 2:return e.next=4,F(a.group_name);case 4:return n=Object(nt.a)(Object(nt.a)({},l),{},{group_id:a}),e.next=7,o(n);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),$=[{label:"Item group",type:"autocomplete",labelprop:"label",value:null!==l&&void 0!==l&&l.group_id?null===l||void 0===l?void 0:l.group_id:"",options:b||[],required:!0,error:null===k||void 0===k?void 0:k.group_id,helperText:null===k||void 0===k?void 0:k.group_id,onChange:X},{label:"Item code",type:"input",value:l.item_code,required:!0,error:null===k||void 0===k?void 0:k.item_code,helperText:null===k||void 0===k?void 0:k.item_code,onChange:function(e){return J(e,"item_code")}},{label:"Short code",type:"input",value:l.s_code,required:!0,error:null===k||void 0===k?void 0:k.s_code,helperText:null===k||void 0===k?void 0:k.s_code,onChange:function(e){return J(e,"s_code")}},{label:"Item name",type:"input",value:l.item_name,required:!0,error:null===k||void 0===k?void 0:k.item_name,helperText:null===k||void 0===k?void 0:k.item_name,onChange:function(e){return J(e,"item_name")}},{label:"Item description",type:"input",value:l.item_desc,onChange:function(e){return J(e,"item_desc")}},{label:"HSN code",type:"input",value:l.hsn_code,onChange:function(e){return J(e,"hsn_code")}},{label:"Conversion ratio",type:"number",value:l.convertion_ratio,onChange:function(e){return J(e,"convertion_ratio")}}],ee=[{label:"Density(Gm/cc)",type:"number",value:""===l.density?"":l.density,onChange:function(e){return J(e,"density")}},{label:"Bleached(%)",type:"number",value:""===l.bleached?"":l.bleached,onChange:function(e){return J(e,"bleached")}},{label:"Moisture(%)",type:"number",value:""===l.moisture?"":l.moisture,onChange:function(e){return J(e,"moisture")}},{label:"Husk(%)",type:"number",value:""===l.husk?"":l.husk,onChange:function(e){return J(e,"husk")}},{label:"Browns(%)",type:"number",value:""===l.browns?"":l.browns,onChange:function(e){return J(e,"browns")}},{label:"Sticks(%)",type:"number",value:""===l.sticks?"":l.sticks,onChange:function(e){return J(e,"sticks")}},{label:"Blacks(%)",type:"number",value:""===l.blacks?"":l.blacks,onChange:function(e){return J(e,"blacks")}},{label:"Stones(%)",type:"number",value:""===l.stones?"":l.stones,onChange:function(e){return J(e,"stones")}},{label:"Broken & Bites(%)",type:"number",value:""===l.broken_bits?"":l.broken_bits,onChange:function(e){return J(e,"broken_bits")}},{label:"Beans retained on 5mm mesh during sieve analysis",type:"number",value:""===l.beans_retained?"":l.beans_retained,onChange:function(e){return J(e,"beans_retained")}},{label:"Insected beans(%)",type:"number",value:""===l.insected_beans?"":l.insected_beans,onChange:function(e){return J(e,"insected_beans")}}],te=[{label:"Item category",type:"autocomplete",labelprop:"label",value:null!==l&&void 0!==l&&l.item_catid?null===l||void 0===l?void 0:l.item_catid:"",options:h||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},{item_catid:t});o(a)}},{label:"Item UOM",type:"autocomplete",labelprop:"label",options:y||[],disabled:!!l.po_created&&l.po_created,value:null!==l&&void 0!==l&&l.uom?null===l||void 0===l?void 0:l.uom:"",onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},{uom:t});o(a)}}],ae=[{value:"GC",label:"GC"},{value:"ORM",label:"ORM"}],ne=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},{coffee_type:e.target.value});o(a)},ie=[{label:"Display this item in purchase order",type:"checkbox",checked:!!l.display_inpo&&l.display_inpo,onChange:function(e){return Z(e,"display_inpo")},sm:6},{label:"Display this green coffee rates in daily update",type:"checkbox",checked:!!l.display_in_dailyupdates&&l.display_in_dailyupdates,onChange:function(e){return Z(e,"display_in_dailyupdates")},sm:6},{label:"Item type",type:"select",value:null!==l&&void 0!==l&&l.coffee_type?null===l||void 0===l?void 0:l.coffee_type:"",required:!0,error:null===k||void 0===k?void 0:k.coffee_type,helperText:null===k||void 0===k?void 0:k.coffee_type,options:ae||[],onChange:function(e){return ne(e)},sm:6}],le=[{label:"Display this item in purchase order",type:"checkbox",checked:!!l.display_inpo&&l.display_inpo,onChange:function(e){return Z(e,"display_inpo")},sm:6},{label:"Display this green coffee rates in daily update",type:"checkbox",checked:!!l.display_in_dailyupdates&&l.display_in_dailyupdates,onChange:function(e){return Z(e,"display_in_dailyupdates")},sm:6},{label:"Item type",type:"select",value:null!==l&&void 0!==l&&l.coffee_type?null===l||void 0===l?void 0:l.coffee_type:"",required:!0,error:null===k||void 0===k?void 0:k.coffee_type,helperText:null===k||void 0===k?void 0:k.coffee_type,options:ae||[],onChange:function(e){return ne(e)},sm:6},{label:"Is special coffee",type:"checkbox",checked:!0===l.is_specialcoffee&&l.is_specialcoffee,onChange:function(e){return Z(e,"is_specialcoffee")},sm:6}],oe=Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[U.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},U),{},{handleClose:function(){return Q({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Green coffee information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:$})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Categories and UOM"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:te})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Display & Type information"})})})}),Object(ot.jsx)(on.a,{children:"GC"===(null===l||void 0===l?void 0:l.coffee_type)?Object(ot.jsx)(tn,{payload:le}):Object(ot.jsx)(tn,{payload:ie})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Specification information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:ee})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(_c,{data:B})})]}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:W,label:W?"Loading...":"Save",onClick:K})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})})]})]});return Object(ot.jsx)(ot.Fragment,{children:oe})},kc=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiGrid-container":{alignItems:"center"},"& .MuiFormControl-fullWidth":{width:"95%"},"& .MuiPaper-rounded":{width:"100%"},"& .page-header":{width:"100%",marginBottom:15},"& .MuiAccordion-root":{width:"100%"},"& .dispatchTable":{maxHeight:"400px",overflowY:"auto"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"}}}));function Nc(e){var t=kc(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)(null),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)(null),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)([]),f=Object(c.a)(x,2),y=f[0],_=f[1],C=Object(n.useState)({open:!1,message:"",severity:""}),w=Object(c.a)(C,2),S=w[0],k=w[1];function N(){return(N=Object(r.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,He({item_id:e.id});case 2:a=t.sent,o(a),_(a.audit_log_gc),g(a.item_stock_location),p(a.vendor_list);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){N.apply(this,arguments)}()}),[e.id]);var P=function(){var t=Object(r.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.updateGcActionInfo(l);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=[{value:"Item description",type:"label",bold:!0,sm:6,lg:6},{type:"label",value:l.item_desc?l.item_desc:"-",sm:6,lg:6},{value:"Conversion ratio",type:"label",bold:!0,sm:6,lg:6},{type:"label",value:l.convertion_ratio?l.convertion_ratio:"-",sm:6,lg:6}],I=[{value:"HSN code",type:"label",bold:!0,sm:6,lg:6},{type:"label",value:l.hsn_code?l.hsn_code:"-",sm:6,lg:6}],A=[{value:"Item category",type:"label",bold:!0,sm:6,lg:6},{type:"label",value:l.item_catname?l.item_catname:"-",sm:6,lg:6}],T=[{value:"UOM",type:"label",bold:!0,sm:6,lg:6},{type:"label",value:l.uom_name?l.uom_name:"-",sm:6,lg:6}],E=[{label:"",type:"checkbox",checked:!!l.display_in_dailyupdates&&l.display_in_dailyupdates,sm:1,lg:1,disabled:!0},{value:"Display this green coffee rates in daily update",type:"label",bold:!0,sm:11,lg:11},{label:"",type:"checkbox",checked:!!l.display_inpo&&l.display_inpo,sm:1,lg:1,disabled:!0},{value:"Display this item in purchase order",type:"label",bold:!0,sm:11,lg:11}],q=[{value:"Item type",type:"label",bold:!0,sm:6,lg:6},{type:"label",value:l.coffee_type?l.coffee_type:"-",sm:6,lg:6}],F=[{value:"Item type",type:"label",bold:!0,sm:6,lg:6},{type:"label",value:l.coffee_type?l.coffee_type:"-",sm:6,lg:6},{label:"",type:"checkbox",checked:!0===(null===l||void 0===l?void 0:l.is_specialcoffee)&&l.is_specialcoffee,sm:1,lg:1,disabled:!0},{value:"Is special coffee",type:"label",bold:!0,sm:11,lg:11}],M=[{value:"Density(Gm/cc)",type:"label",bold:!0,sm:6,lg:6},{type:"label",value:""===l.density?"-":l.density,sm:6,lg:6},{value:"Moisture(%)",type:"label",bold:!0,sm:6,lg:6},{type:"label",value:""===l.moisture?"-":l.moisture,sm:6,lg:6},{value:"Browns(%)",type:"label",bold:!0,sm:6,lg:6},{type:"label",value:""===l.browns?"-":l.browns,sm:6,lg:6},{value:"Blacks(%)",type:"label",bold:!0,sm:6,lg:6},{type:"label",value:""===l.blacks?"-":l.blacks,sm:6,lg:6},{value:"Broken & Bites(%)",type:"label",bold:!0,sm:6,lg:6},{type:"label",value:""===l.broken_bits?"-":l.broken_bits,sm:6,lg:6},{value:"Insected beans(%)",type:"label",bold:!0,sm:6,lg:6},{type:"label",value:""===l.insected_beans?"-":l.insected_beans,sm:6,lg:6}],R=[{value:"Bleached(%)",type:"label",bold:!0,sm:8,lg:8},{type:"label",value:""===l.bleached?"-":l.bleached,sm:4,lg:4},{value:"Husk(%)",type:"label",bold:!0,sm:8,lg:8},{type:"label",value:""===l.husk?"-":l.husk,sm:4,lg:4},{value:"Sticks(%)",type:"label",bold:!0,sm:8,lg:8},{type:"label",value:""===l.sticks?"-":l.sticks,sm:4,lg:4},{value:"Stones(%)",type:"label",bold:!0,sm:8,lg:8},{type:"label",value:""===l.stones?"-":l.stones,sm:4,lg:4},{value:"Beans retained on 5mm mesh during sieve analysis",type:"label",bold:!0,sm:8,lg:8},{type:"label",value:""===l.beans_retained?"-":l.beans_retained,sm:4,lg:4}];return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[S.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},S),{},{handleClose:function(){return k({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(ua.a,{className:"page-header",children:[Object(ot.jsx)(an.a,{title:"GC Details",className:"cardHeader"}),Object(ot.jsx)(xa.a,{children:Object(ot.jsxs)(m.a,{container:!0,md:12,children:[Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"GC no"}),Object(ot.jsx)(O.a,{children:e.id?e.id:"-"})]}),Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Item code"}),Object(ot.jsx)(O.a,{children:null!==l&&void 0!==l&&l.item_code?null===l||void 0===l?void 0:l.item_code:"-"})]}),Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Item group"}),Object(ot.jsx)(O.a,{children:null!==l&&void 0!==l&&l.lname?null===l||void 0===l?void 0:l.lname:"-"})]}),Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Item name"}),Object(ot.jsx)(O.a,{children:null!==l&&void 0!==l&&l.item_name?null===l||void 0===l?void 0:l.item_name:"-"})]}),Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Short code"}),Object(ot.jsx)(O.a,{children:null!==l&&void 0!==l&&l.s_code?null===l||void 0===l?void 0:l.s_code:"-"})]})]})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsxs)(m.a,{item:!0,md:12,xs:12,children:[Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"GC information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:D})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:I})})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Category & UOM"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:A})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:T})})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Display & Type information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:E})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:"GC"===l.coffee_type?Object(ot.jsx)(tn,{payload:F}):Object(ot.jsx)(tn,{payload:q})})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Specification information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:M})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:R})})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:8,className:"item",children:Object(ot.jsx)(O.a,{children:"Item stock locations"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:8,className:"item",children:Object(ot.jsx)(gn,{rows:h,columns:[{id:"entity",label:"Entity"},{id:"name",label:"Name"},{id:"quantity",label:"Quantity"},{id:"value",label:"Value"},{id:"unit_price",label:"Unit Price"}]})})})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:4},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"List of vendors purchased this item "})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(m.a,{container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:8,className:"item",children:Object(ot.jsx)(gn,{rows:b,columns:[{id:"vendor_name",label:"Vendor"},{id:"contact_name",label:"Contact"},{id:"city",label:"City"},{id:"state",label:"State"},{id:"country",label:"Country"}]})})})})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(_c,{data:y})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",style:{margin:24},children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Edit",onClick:P})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:function(){return e.back()}})})]})]})})]})}var Pc=[{id:"itemcode",label:"Item Code"},{id:"s_code",label:"Short Code"},{id:"itemname",label:"Item Name"},{id:"category_name",label:"Item Category"},{id:"uom",label:"UOM"},{id:"groupname",label:"Group Name"},{id:"show_in_po",label:"Show In Po"},{id:"coffee_type",label:"Item Type"}],Dc=function(e){var t=e?new Date(e):"";return e?t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear():""};var Ic=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440},sortHeader:{cursor:"pointer"}}),Ac=function(e){var t=Ic(),a=i.a.useState(0),l=Object(c.a)(a,2),o=l[0],r=l[1],s=i.a.useState(10),d=Object(c.a)(s,2),u=d[0],b=d[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),m=j[0],v=j[1],h=i.a.useState("asc"),O=Object(c.a)(h,2),g=O[0],x=O[1],f=i.a.useState(""),y=Object(c.a)(f,2),_=y[0],C=y[1];function w(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}Object(n.useEffect)((function(){var t=[];e.data&&e.data.map((function(e){var a,n,i,l,o,r,c,s,d,u,b,p,j,m;t.push((a=e.itemid,n=e.itemcode,i=e.s_code,l=e.itemname,o=e.categoryname,r=e.uom,c=e.groupname,s=e.display_inpo,d=e.coffee_type,u=e.is_rawmeterial,b=e.created_by,p=Dc(e.created_on),j=e.updated_by,m=Dc(e.updated_on),{id:a,itemcode:n,s_code:i,itemname:l,category_name:o,uom:r,groupname:c,display_inpo:s,coffee_type:d,rm:u,createdby:b,createdon:p,lastupdatedby:j,lastupdatedon:m}))})),v(t)}),[e.data]);return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(Un,{classes:t,order:g,orderBy:_,onRequestSort:function(e,t){x(_===t&&"asc"===g?"desc":"asc"),C(t)},rowCount:m.length,headCells:Pc,selectedAdvancedFilters:e.selectedAdvancedFilters,clearAdvancedFilters:e.clearAdvancedFilters}),Object(ot.jsx)(dn.a,{children:m.length>0?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(m,function(e,t){return"desc"===e?function(e,a){return w(e,a,t)}:function(e,a){return-w(e,a,t)}}(g,_)).slice(o*u,o*u+u).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Pc.map((function(a,n){var i=t[a.id]?t[a.id]:"-";return Object(ot.jsx)(un.a,{align:a.align,children:n?"show_in_po"===a.id?Object(ot.jsx)(Va,{checked:!!t.display_inpo,name:t.display_inpo,disabled:!0}):i:4===parseInt(t.status)||5===parseInt(t.status)?i:Object(ot.jsx)("a",{href:"#",onClick:function(a){return function(t,a,n){return t.preventDefault(),0===a&&e.gcDetails("create_gc_edit",n),!1}(a,n,t.id)},children:i})},a.id)}))},t.code)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:m.length,rowsPerPage:u,page:o,onChangePage:function(e,t){r(t)},onChangeRowsPerPage:function(e){b(+e.target.value),r(0)}})]})},Tc=Object(g.a)((function(e){return{root:{paddingTop:e.spacing(3),minWidth:"100%"},formControl:{margin:e.spacing(1),marginTop:e.spacing(2),minWidth:120},modal:{position:"absolute",margin:"auto",top:"25%",left:"25%",width:700,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),Ec=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return e.map((function(e){return n.push({label:e[t],value:e[a]})})),n},qc=function(e){var t=(0,Jt().getCurrentUserDetails)(),a=t.role,i=t.id,l=Tc(),o=Object(n.useState)("allgcs"),s=Object(c.a)(o,2),u=s[0],b=s[1],p=Object(n.useState)(null),j=Object(c.a)(p,2),v=j[0],h=j[1],O=Object(n.useState)(null),g=Object(c.a)(O,2),f=g[0],y=g[1],C=Object(n.useState)(!1),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)(!1),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)(!1),T=Object(c.a)(A,2),E=T[0],q=T[1],F=Object(n.useState)(-1),M=Object(c.a)(F,2),R=M[0],B=M[1],H=Object(n.useState)({}),G=Object(c.a)(H,2),L=G[0],U=G[1],Q=Object(n.useState)([]),V=Object(c.a)(Q,2),z=V[0],W=V[1],Y=Object(n.useState)(!1),K=Object(c.a)(Y,2),J=K[0],Z=K[1],X=function(){var e=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ue({type:"itemgroups"}).then((function(e){console.log("Response fetched is",e),W(Ec(e,"group_name","group_id"))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(r.a)(d.a.mark((function e(t,n){var l,o,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l="",a!==Kt.managingDirector&&(l+="createdbyuserid = '".concat(i,"'")),console.log("state is",n,l),"specialgcs"===n?(_.a.isEmpty(l)||(l+=" AND "),l+="cat_type = 'speciality'"):"allgcs"!==n&&(_.a.isEmpty(l)||(l+=" AND "),l+="groupname = '".concat(n,"'")),_.a.isEmpty(t)||(_.a.isEmpty(l)||(l+=" AND "),l+="".concat(t)),o={filter:l,loggedinuserid:i},e.next=8,Be(o);case 8:r=e.sent,y(r);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){$(v,u)}),[v,u]),Object(n.useEffect)((function(){E||D||S||(h(null===v?void 0:null),b("allgcs"))}),[E,D,S]),Object(n.useEffect)((function(){X()}),[]);var ee,te=function(){var e=Object(r.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(t.target.value),h(null);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return ee=E?Object(ot.jsx)(gc,{back:function(){q(!1)}}):D?Object(ot.jsx)(Sc,{back:function(){I(!1)},id:R,data:L}):S?Object(ot.jsx)(Nc,{back:function(){k(!1)},updateGcActionInfo:function(e){return function(e){k(!S),U(e),I(!0)}(e)},id:R}):Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0,children:Object(ot.jsxs)(Da.a,{variant:"outlined",className:l.formControl,children:[Object(ot.jsx)(Ia.a,{htmlFor:"outlined-age-native-simple",children:"View"}),Object(ot.jsxs)(Aa.a,{native:!0,value:u,onChange:te,label:"View",inputProps:{name:"view",id:"outlined-view-native-simple"},children:[Object(ot.jsx)("option",{value:"allgcs",children:"All GCs"}),Object(ot.jsx)("option",{value:"specialgcs",children:"Special Coffee"}),z.map((function(e,t){return Object(ot.jsx)("option",{value:e.label,children:e.label})}))]})]})}),Object(ot.jsxs)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:[null!==f&&Object(ot.jsx)(pi,{onClick:function(){Z(!0)},label:"Export to excel"}),Object(ot.jsx)(Rn,{onClick:function(){q(!0),k(!1)},label:"Create GC",variant:"extended"})]})]}),!0===J&&Object(ot.jsx)(ui,{tableData:f,tableName:"GC"}),Object(ot.jsx)(Ac,{selectedAdvancedFilters:function(e){return h(e)},clearAdvancedFilters:function(){return h(null)},data:f,gcDetails:function(e,t){return function(e,t){k(!0),B(t)}(0,t)}})]}),Object(ot.jsx)(x.a,{className:l.root,children:ee})},Fc=[{id:"mrinno",label:"MRIN No"},{id:"mrindate",label:"MRIN Date"},{id:"entityname",label:"Delivery At"},{id:"pono",label:"PO No"},{id:"podate",label:"PO Date"},{id:"vendorname",label:"Vendor"},{id:"invoiceno",label:"Invoice No"},{id:"invoicedate",label:"Invoice Date"},{id:"status",label:"Status"}],Mc=function(e){var t=e?new Date(e):new Date;return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()};function Rc(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function Bc(e,t){return"desc"===e?function(e,a){return Rc(e,a,t)}:function(e,a){return-Rc(e,a,t)}}function Hc(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}var Gc=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440},capsText:{textTransform:"capitalize"}}),Lc=function(e){var t=Gc(),a=i.a.useState(0),n=Object(c.a)(a,2),l=n[0],o=n[1],r=i.a.useState(10),s=Object(c.a)(r,2),d=s[0],u=s[1],b=i.a.useState("asc"),p=Object(c.a)(b,2),j=p[0],m=p[1],v=i.a.useState(""),h=Object(c.a)(v,2),O=h[0],g=h[1],x=[];i.a.useEffect((function(){console.log("Props Data",e.data)}),[e.data]),e.data&&e.data.map((function(e){var t,a,n,i,l,o,r,c,s,d;x.push((t=e.mrinno,a=Mc(e.mrindate),n=e.entityname,i=e.pono,l=Mc(e.podate),o=e.vendorname,r=e.invoiceno,c=Mc(e.invoicedate),s=e.status,d=e.mrinid,{mrinno:t,mrindate:a,entityname:n,pono:i,podate:l,vendorname:o,invoiceno:r,invoicedate:c,status:s,mrinid:d}))}));return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(Un,{classes:t,order:j,orderBy:O,onRequestSort:function(e,t){m(O===t&&"asc"===j?"desc":"asc"),g(t)},rowCount:x.length,headCells:Fc,selectedAdvancedFilters:e.selectedAdvancedFilters,clearAdvancedFilters:e.clearAdvancedFilters}),Object(ot.jsx)(dn.a,{children:x.length>0?Hc(x,Bc(j,O)).slice(l*d,l*d+d).map((function(a,n){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Fc.map((function(n,i){var l=a[n.id];return Object(ot.jsx)(un.a,{align:n.align,children:"mrinno"===n.id?Object(ot.jsx)("a",{href:"#",onClick:function(t){return n=a.mrinid,console.log(n),void e.mrinDetails("view_mrin",n);var n},children:l}):"req"===n.id?Object(ot.jsx)(Va,{checked:"true"===a.req,name:a.req,disabled:!0}):"status"===n.id?Object(ot.jsx)("p",{className:t.capsText,children:l}):"pono"===n.id?Object(ot.jsx)("a",{href:"#",onClick:function(t){return e.viewPo("list_mrin",a.pono)},children:l}):l},n.id)}))},a.code)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:x.length,rowsPerPage:d,page:l,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){u(+e.target.value),o(0)}})]})},Uc=[{id:"dispatchNo",label:"Dispatch Id"},{id:"qty",label:"Quantity"},{id:"date",label:"Dispatch Date"},{id:"balance_quantity",label:"Balance Quantity"},{id:"relateddispatch_id",label:"Parent Dispatch"}];var Qc=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440},textCenter:{textAlign:"center"}}),Vc=function(e){var t=Qc(),a=i.a.useState(0),n=Object(c.a)(a,2),l=n[0],o=n[1],r=i.a.useState(10),s=Object(c.a)(r,2),d=s[0],u=s[1],b=[];i.a.useEffect((function(){console.log("Props Data",e.data)}),[e.data]),e.data&&e.data.map((function(e){var t,a,n,i,l,o;b.push((t=e.dispatch_id,a=e.quantity,n=e.dispatch_date,i=e.relateddispatch_id,l=e.balance_quantity,o=e.ismrin_created,{dispatchNo:t,qty:a,date:n,relateddispatch_id:i,balance_quantity:l,ismrin_created:o}))}));return Object(ot.jsx)("div",{className:"dispatch_mrin",children:Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(pn.a,{children:Object(ot.jsxs)(jn.a,{children:[Object(ot.jsx)(un.a,{children:Object(ot.jsxs)("p",{children:["Dispatch",Object(ot.jsx)("br",{}),"Id"]})}),Object(ot.jsx)(un.a,{children:Object(ot.jsxs)("p",{children:["Quantity",Object(ot.jsx)("br",{}),"(Kgs)"]})}),Object(ot.jsx)(un.a,{children:Object(ot.jsxs)("p",{children:["Dispatch",Object(ot.jsx)("br",{}),"Date"]})}),Object(ot.jsx)(un.a,{children:Object(ot.jsxs)("p",{children:["Balance",Object(ot.jsx)("br",{}),"Quantity"]})}),Object(ot.jsx)(un.a,{children:Object(ot.jsxs)("p",{children:["Parent",Object(ot.jsx)("br",{}),"Dispatch"]})}),Object(ot.jsx)(un.a,{})]})}),Object(ot.jsxs)(dn.a,{children:[b.length>0&&b.slice(l*d,l*d+d).map((function(t,a){return Object(ot.jsxs)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:[Uc.map((function(e,a){var n=null!==t[e.id]&&""!==t[e.id]?t[e.id]:"-";return Object(ot.jsx)(un.a,{align:e.align,children:n},e.id)})),Object(ot.jsx)(un.a,{children:!0===t.ismrin_created?Object(ot.jsx)("p",{children:"MRIN already created"}):Object(ot.jsx)(Yt,{label:"Create MRIN",onClick:function(){return a=t,void e.createMrin("create_mrin",a);var a}})})]},t.code)})),(0===b.length||null===b)&&Object(ot.jsx)(un.a,{colSpan:"5",children:Object(ot.jsx)("p",{className:t.textCenter,children:Object(ot.jsx)("b",{children:"No Records to Display."})})})]})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:b.length,rowsPerPage:d,page:l,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){u(+e.target.value),o(0)}})]})})},zc=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .page-header":{width:"100%",marginBottom:15},"& .MuiAccordion-root":{width:"100%"},"& .dispatchTable":{maxHeight:"400px",overflowY:"auto"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"},modal:{position:"absolute",margin:"0 auto",top:"30%",right:"10%",left:"10%",width:700,textAlign:"center",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),Wc=function(){return new Date},Yc=function(e){var t=zc(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)([]),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)({}),v=Object(c.a)(j,2),h=v[0],g=v[1],f=Object(n.useState)(!1),y=Object(c.a)(f,2),C=y[0],w=y[1],S=Object(n.useState)({open:!1,message:"",severity:""}),k=Object(c.a)(S,2),N=k[0],P=k[1],D=Object(n.useState)(!1),I=Object(c.a)(D,2),A=I[0],T=I[1],E=Object(n.useState)(!1),q=Object(c.a)(E,2),F=q[0],M=q[1],R=Object(n.useState)({}),B=Object(c.a)(R,2),H=B[0],G=B[1],L=Object(n.useState)({}),U=Object(c.a)(L,2),Q=U[0],V=U[1],z=(0,Jt().getCurrentUserDetails)();Object(n.useEffect)((function(){e.createMrinData&&(e.createMrinData.apStatus="Pending",e.createMrinData.qcStatus="Pending",e.createMrinData.invoiceStatus=!1),o(e.createMrinData),"QC Manager"===z.role&&w(!0),p(function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(n){return a.push({label:n[e],value:n[t]||n[e]})})),a}([{id:"Silo No 1",label:"Silo No 1"},{id:"Silo No 2",label:"Silo No 2"},{id:"Silo No 3",label:"Silo No 3"},{id:"Silo No 4",label:"Silo No 4"},{id:"Silo No 5",label:"Silo No 5"},{id:"Silo No 6",label:"Silo No 6"},{id:"Silo No 7",label:"Silo No 7"},{id:"Silo No 8",label:"Silo No 8"},{id:"Silo No 9",label:"Silo No 9"},{id:"Silo No 10",label:"Silo No 10"},{id:"Silo No 11",label:"Silo No 11"},{id:"Silo No 12",label:"Silo No 12"},{id:"Silo No 13",label:"Silo No 13"},{id:"Silo No 14",label:"Silo No 14"},{id:"Green Coffee Godown 1",label:"Green Coffee Godown 1"}],"label","id"))}),[e.createMrinData]);var W=function(e,t){var a=0,n=Object(nt.a)({},l);if("delivered_quantity"===t)if(parseFloat(e.target.value)>parseFloat(l.expected_quantity)){var i=Object(nt.a)({},h);i=Object(nt.a)(Object(nt.a)({},i),{},{delivered_quantity:"Delivered quantity should not be greater than Expected  quantity."}),g(i),n=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.value))}else{var r,c=Object(nt.a)({},h);delete c.delivered_quantity,g(c),a=parseFloat(l.expected_quantity)-(parseFloat(e.target.value)+parseFloat(l.wayment_shortage||0)),n=Object(nt.a)(Object(nt.a)({},l),{},(r={},Object(Ot.a)(r,t,e.target.value),Object(Ot.a)(r,"balance_quantity",a===isNaN?0:a),r))}else if("wayment_shortage"===t){var s;a=parseFloat(l.expected_quantity)-(parseFloat(e.target.value)+parseFloat(l.delivered_quantity)),n=Object(nt.a)(Object(nt.a)({},l),{},(s={},Object(Ot.a)(s,t,e.target.value),Object(Ot.a)(s,"balance_quantity",a===isNaN?0:a),s))}else n=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.value));console.log("::",parseFloat(e.target.value),l.expected_quantity),o(n)},Y=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e));o(a),console.log(a)},K=function(){var e=Object(r.a)(d.a.mark((function e(){var t,a,n,i,o,r,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o="Please enter valid details",r=Object(nt.a)({},h),g(r),_.a.isEmpty(null===(t=l.delivered_quantity)||void 0===t?void 0:t.toString())?r=Object(nt.a)(Object(nt.a)({},r),{},{delivered_quantity:o}):delete r.delivered_quantity,_.a.isEmpty(null===(a=l.wayment_shortage)||void 0===a?void 0:a.toString())?r=Object(nt.a)(Object(nt.a)({},r),{},{wayment_shortage:o}):delete r.wayment_shortage,_.a.isEmpty(null===(n=l.invoice_no)||void 0===n?void 0:n.toString())?r=Object(nt.a)(Object(nt.a)({},r),{},{invoice_no:o}):delete r.invoice_no,_.a.isEmpty(null===(i=l.vehicle_no)||void 0===i?void 0:i.toString())?r=Object(nt.a)(Object(nt.a)({},r),{},{vehicle_no:o}):delete r.vehicle_no,void 0===l.wayBillDate?r=Object(nt.a)(Object(nt.a)({},r),{},{wayBillDate:o}):delete r.wayBillDate,_.a.isEmpty(l.wayBillNumber)?r=Object(nt.a)(Object(nt.a)({},r),{},{wayBillNumber:o}):delete r.wayBillNumber,"1001"===l.subCategory&&_.a.isEmpty(l.billOfEntry)?r=Object(nt.a)(Object(nt.a)({},r),{},{billOfEntry:o}):delete r.billOfEntry,"1001"===l.subCategory&&_.a.isEmpty(l.billOfEntryDate)?r=Object(nt.a)(Object(nt.a)({},r),{},{billOfEntryDate:o}):delete r.billOfEntryDate,_.a.isEmpty(r)){e.next=23;break}throw e.prev=12,g(r),{message:"Please fill mandatory fields to save"};case 18:e.prev=18,e.t0=e.catch(12),P({open:!0,message:e.t0.message,severity:"error"});case 21:e.next=25;break;case 23:"0"!==(s={createmrin:!0,emailid:JSON.parse(localStorage.getItem("preference")).name,type:"uploadDocument",doc_kind:"MRIN",document_content:null===Q||void 0===Q?void 0:Q.file,document_name:null===Q||void 0===Q?void 0:Q.name,createduserid:localStorage.getItem("currentUserId"),poid:l.poid,pono:l.pono,detid:l.dispatch_id,related_detid:l.related_detid,expected_quantity:l.expected_quantity,invoice_no:l.invoice_no,vehicle_no:l.vehicle_no,invoice_date:l.invoice_date?l.invoice_date:Wc(),invoice_quantity:l.invoice_quantity,delivery_date:l.delivery_date?l.delivery_date:Wc(),delivered_quantity:l.delivered_quantity,wayment_shortage:l.wayment_shortage?l.wayment_shortage.toString():"",balance_quantity:l.balance_quantity?""===l.balance_quantity.toString()?"0":l.balance_quantity.toString():"0",createdon:Wc(),createdby:localStorage.getItem("currentUserName"),status:"new",vendor_id:l.vendor_id,entityid:l.entityid,mrindate:Wc(),wayBillDate:l.wayBillDate,wayBillNumber:l.wayBillNumber,billOfEntry:l.billOfEntry,billOfEntryDate:l.billOfEntryDate,apStatus:l.apStatus,qcStatus:l.qcStatus,apDetails:l.apDetails,invoiceAmount:l.invoiceAmount,location:null===(c=l.location)||void 0===c?void 0:c.value}).wayment_shortage||""===s.balance_quantity&&0===parseFloat(s.balance_quantity)?"0"===s.wayment_shortage?(T(!0),J(s,"MRIN created successfully"),M(!1)):""===s.wayment_shortage&&0===parseInt(s.wayment_shortage)||(G(s),T(!1),M(!0)):(T(!0),J(s,"MRIN created successfully"),M(!1));case 25:case"end":return e.stop()}}),e,null,[[12,18]])})));return function(){return e.apply(this,arguments)}}();function J(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(r.a)(d.a.mark((function t(a,n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ae(a);case 3:t.sent&&(P({open:!0,message:n}),T(!1),setTimeout((function(){e.back()}),2e3)),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),T(!1),P({open:!0,message:t.t0.message,severity:"error"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function X(e){T(!0),M(!F);var t="yes"===e?"Wayment shortage is ignored, MRIN created successfully":"MRIN create successfully. A new dispatch created with wayment shortage & balance quanotity",a=Object(nt.a)({},H);a.wayment_shortage_flag="yes"===e,G(a),J(a,t)}var $=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},ee=function(){var e=Object(r.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,$(t.target.files[0]);case 4:a=(a=e.sent).replace(/^data:application\/(pdf);base64,/,""),V({name:t.target.files[0].name,file:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=[{label:"PO number",type:"input",disabled:!0,value:l.pono},{label:"Parent dispatch",type:"input",value:l.related_detid||"-",disabled:!0},{label:"Dispatch number",type:"input",value:l.dispatch_id||"-",disabled:!0},{label:"Expected quantity(Kgs)",type:"number",value:l.expected_quantity,disabled:!0},{label:"Vehicle/BL number",type:"input",value:l.vehicle_no||"",required:!0,error:null===h||void 0===h?void 0:h.vehicle_no,helperText:null===h||void 0===h?void 0:h.vehicle_no,onChange:function(e){return W(e,"vehicle_no")}},{label:"Invoice number",type:"input",value:l.invoice_no||"",required:!0,error:null===h||void 0===h?void 0:h.invoice_no,helperText:null===h||void 0===h?void 0:h.invoice_no,onChange:function(e){return W(e,"invoice_no")}},{label:"Invoice quantity(Kgs)",type:"number",value:l.invoice_quantity,onChange:function(e){return W(e,"invoice_quantity")}},{label:"Invoice date",type:"datePicker",value:""===l.invoice_date?Wc():l.invoice_date,onChange:function(e){return Y(e,"invoice_date")}},{label:"Delivery date",type:"datePicker",value:""===l.delivery_date?Wc():l.delivery_date,onChange:function(e){return Y(e,"delivery_date")}},{label:"Delivered quantity(Kgs)",type:"number",value:l.delivered_quantity,required:!0,error:null===h||void 0===h?void 0:h.delivered_quantity,helperText:null===h||void 0===h?void 0:h.delivered_quantity,onChange:function(e){e.target.value>=0&&W(e,"delivered_quantity")}},{label:"Weighment shortage",type:"number",value:l.wayment_shortage,required:!0,error:null===h||void 0===h?void 0:h.wayment_shortage,helperText:null===h||void 0===h?void 0:h.wayment_shortage,onChange:function(e){e.target.value>=0&&W(e,"wayment_shortage")}},{label:"Balance quantity(Kgs)",type:"number",value:l.balance_quantity?l.balance_quantity.toFixed(4):0},{label:"Way bill number",type:"input",value:l.wayBillNumber,required:!0,error:null===h||void 0===h?void 0:h.wayBillNumber,helperText:null===h||void 0===h?void 0:h.wayBillNumber,onChange:function(e){return W(e,"wayBillNumber")},sm:6},{label:"Way bill date",type:"datePicker",value:l.wayBillDate||null,required:!0,error:null===h||void 0===h?void 0:h.wayBillDate,helperText:null===h||void 0===h?void 0:h.wayBillDate,onChange:function(e){return Y(e,"wayBillDate")}},{label:"Locations",type:"autocomplete",labelprop:"label",value:l.location,options:b||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},{location:t});o(a)}}],ae=[{label:"Bill of entry number",type:"input",value:l.billOfEntry,required:!0,error:null===h||void 0===h?void 0:h.billOfEntry,helperText:null===h||void 0===h?void 0:h.billOfEntry,onChange:function(e){return W(e,"billOfEntry")},sm:6},{label:"Bill of entry date",type:"datePicker",value:l.billOfEntryDate||null,required:!0,error:null===h||void 0===h?void 0:h.billOfEntryDate,helperText:null===h||void 0===h?void 0:h.billOfEntryDate,onChange:function(e){return Y(e,"billOfEntryDate")}}],ne=[{label:"AP status",type:"input",disabled:!0,value:l.apStatus,sm:6},{label:"AP details",type:"input",disabled:!0,value:l.apDetails||"",onChange:function(e){return W(e,"apDetails")},sm:6},{label:"Invoice amount",type:"number",value:l.invoiceAmount||"",disabled:!0,onChange:function(e){return W(e,"invoiceAmount")},sm:6}],ie=[{label:"QC status",type:"input",disabled:!0,value:l.qcStatus||""}],le=[{type:"file",disabled:C,onChange:function(e){return ee(e)}},{label:"Invoice status",type:"checkbox",sm:6,disabled:!0,checked:l.invoiceStatus}];return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[N.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},N),{},{handleClose:function(){return P({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"MRIN information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:te})}),Object(ot.jsx)(on.a,{children:"1001"===l.subCategory&&Object(ot.jsx)(tn,{payload:ae})})]}),("Accounts Executive"===z.role||"Accounts Manager"===z.role||"Managing Director"===z.role)&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Finance information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:ne})})]}),("QC Manager"===z.role||"Managing Director"===z.role)&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Quality information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:ie})})]}),("QC Manager"===z.role||"Managing Director"===z.role||"GC Stores Executive"===z.role)&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Invoice information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,xs:12,children:Object(ot.jsx)(tn,{payload:le})})})]}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:A,label:A?"Loading ...":"Create",onClick:K})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})})]}),Object(ot.jsx)(zt,{open:F,handleClose:function(){return M(!F)},body:function(){return Object(ot.jsxs)(x.a,{className:t.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Wayment confirmation"}),Object(ot.jsx)("p",{children:"Are You Ok With Wayment Shortage?"}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Yes",onClick:function(){return X("yes")}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"No",onClick:function(){return X("no")}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:function(){return M(!F)}})})]})]})}})]})},Kc=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .page-header":{width:"100%",marginBottom:15},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"},card:{boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)",marginBottom:5},modal:{position:"absolute",margin:"auto",top:"30%",left:"30%",width:700,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},control:{marginTop:3,marginBottom:3}}})),Jc=function(e){var t=Kc(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)(!1),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)(""),v=Object(c.a)(j,2),h=v[0],g=v[1],f=Object(n.useState)(!1),y=Object(c.a)(f,2),C=y[0],w=y[1],S=Object(n.useState)(!1),k=Object(c.a)(S,2),N=k[0],P=k[1],D=Object(n.useState)({}),I=Object(c.a)(D,2),A=I[0],T=I[1],E=Object(n.useState)([]),q=Object(c.a)(E,2),F=q[0],M=q[1],R=Object(n.useState)({open:!1,message:"",severity:""}),B=Object(c.a)(R,2),H=B[0],G=B[1],L=(0,Jt().getCurrentUserDetails)();Object(n.useEffect)((function(){Ie({type:"viewmrin",mrinid:e.id}).then((function(e){var t,a,n;null!==e&&(o(e),M((t=e.delivered_spec,a=e.dispatched_spec,[{composition_name:"Density(Gm/Cc)",key:"del_density",expected_spec:null!==(n=e.expected_spec)?n[0].exp_density:0,dispatched_spec:null!==a?a[0].dis_density:0,delivered_spec:null!==t?t[0].del_density:0,difference:null!==n&&null!==t?parseInt(n[0].exp_density-t[0].del_density):null===n&&null!==t?t[0].del_density:null!==n&&null===t?n[0].exp_density:0},{composition_name:"Moisture (%)",key:"del_moisture",expected_spec:null!==n?n[0].exp_moisture:0,dispatched_spec:null!==a?a[0].dis_moisture:0,delivered_spec:null!==t?t[0].del_moisture:0,difference:null!==n&&null!==t?parseInt(n[0].exp_moisture-t[0].del_moisture):null===n&&null!==t?t[0].del_moisture:null!==n&&null===t?n[0].exp_moisture:0},{composition_name:"Browns (%)",key:"del_browns",expected_spec:null!==n?n[0].exp_browns:0,dispatched_spec:null!==a?a[0].dis_browns:0,delivered_spec:null!==t?t[0].del_browns:0,difference:null!==n&&null!==t?parseInt(n[0].exp_browns-t[0].del_browns):null===n&&null!==t?t[0].del_browns:null!==n&&null===t?n[0].exp_browns:0},{composition_name:"Blacks (%)",key:"del_blacks",expected_spec:null!==n?n[0].exp_blacks:0,dispatched_spec:null!==a?a[0].dis_blacks:0,delivered_spec:null!==t?t[0].del_blacks:0,difference:null!==n&&null!==t?parseInt(n[0].exp_blacks-t[0].del_blacks):null===n&&null!==t?t[0].del_blacks:null!==n&&null===t?n[0].exp_blacks:0},{composition_name:"Broken & Bits (%)",key:"del_brokenbits",expected_spec:null!==n?n[0].exp_brokenbits:0,dispatched_spec:null!==a?a[0].dis_brokenbits:0,delivered_spec:null!==t?t[0].del_brokenbits:0,difference:null!==n&&null!==t?parseInt(n[0].exp_brokenbits-t[0].del_brokenbits):null===n&&null!==t?t[0].del_brokenbits:null!==n&&null===t?n[0].exp_brokenbits:0},{composition_name:"Insected beans (%)",key:"del_insectedbeans",expected_spec:null!==n?n[0].exp_insectedbeans:0,dispatched_spec:null!==a?a[0].dis_insectedbeans:0,delivered_spec:null!==t?t[0].del_insectedbeans:0,difference:null!==n&&null!==t?parseInt(n[0].exp_insectedbeans-t[0].del_insectedbeans):null===n&&null!==t?t[0].del_insectedbeans:null!==n&&null===t?n[0].exp_insectedbeans:0},{composition_name:"Bleached (%)",key:"del_bleached",expected_spec:null!==n?n[0].exp_bleached:0,dispatched_spec:null!==a?a[0].dis_bleached:0,delivered_spec:null!==t?t[0].del_bleached:0,difference:null!==n&&null!==t?parseInt(n[0].exp_bleached-t[0].del_bleached):null===n&&null!==t?t[0].del_bleached:null!==n&&null===t?n[0].exp_bleached:0},{composition_name:"Husk (%)",key:"del_husk",expected_spec:null!==n?n[0].exp_husk:0,dispatched_spec:null!==a?a[0].dis_husk:0,delivered_spec:null!==t?t[0].del_husk:0,difference:null!==n&&null!==t?parseInt(n[0].exp_husk-t[0].del_husk):null===n&&null!==t?t[0].del_husk:null!==n&&null===t?n[0].exp_husk:0},{composition_name:"Sticks (%)",key:"del_sticks",expected_spec:null!==n?n[0].exp_sticks:0,dispatched_spec:null!==a?a[0].dis_sticks:0,delivered_spec:null!==t?t[0].del_sticks:0,difference:null!==n&&null!==t?parseInt(n[0].exp_sticks-t[0].del_sticks):null===n&&null!==t?t[0].del_sticks:null!==n&&null===t?n[0].exp_sticks:0},{composition_name:"Stones (%)",key:"del_stones",expected_spec:null!==n?n[0].exp_stones:0,dispatched_spec:null!==a?a[0].dis_stones:0,delivered_spec:null!==t?t[0].del_stones:0,difference:null!==n&&null!==t?parseInt(n[0].exp_stones-t[0].del_stones):null===n&&null!==t?t[0].del_stones:null!==n&&null===t?n[0].exp_stones:0},{composition_name:"Beans retained on 5mm mesh during sieve analysis",key:"del_beansretained",expected_spec:null!==n?n[0].exp_beansretained:0,dispatched_spec:null!==a?a[0].dis_beansretained:0,delivered_spec:null!==t?t[0].del_beansretained:0,difference:null!==n&&null!==t?parseInt(n[0].exp_beansretained-t[0].del_beansretained):null===n&&null!==t?t[0].del_beansretained:null!==n&&null===t?n[0].exp_beansretained:0}])))})),Ie({type:"getDocumentsOnMRIN",mrinid:e.id}).then((function(e){e&&g(e[e.length-1])}))}),[e.id]);var U=[{type:"label",value:"PO number",bold:!0,sm:"6"},{type:"label",value:Object(ot.jsx)("a",{href:"#",children:l.pono}),onClick:function(t){e.viewPo("detail_mrin",l.pono)},sm:"6"},{type:"label",value:"Expected quantity(Kgs)",bold:!0,sm:"6"},{type:"label",value:l.expected_quantity?parseFloat(l.expected_quantity).toFixed(4):"-",sm:"6"},{type:"label",value:"Vehicle number",bold:!0,sm:"6"},{type:"label",value:l.vehicle_no&&""!==l.vehicle_no?l.vehicle_no:"-",sm:"6"},{type:"label",value:"Invoice date",bold:!0,sm:"6"},{type:"label",value:""===l.invoice_date?"-":l.invoice_date,sm:"6"},{type:"label",value:"Invoice quantity(Kgs)",bold:!0,sm:"6"},{type:"label",value:l.invoice_quantity?parseFloat(l.invoice_quantity).toFixed(4):"-",sm:"6"},{type:"label",value:"Delivery date",bold:!0,sm:"6"},{type:"label",value:l.delivery_date,sm:"6"},{type:"label",value:"Weighment shortage",bold:!0,sm:"6"},{type:"label",value:l.wayment_shortage?parseFloat(l.wayment_shortage).toFixed(4):"-",sm:"6"},{type:"label",value:"Way bill number",bold:!0,sm:"6"},{type:"label",value:l.wayBillNumber?l.wayBillNumber:"-",sm:"6"}],Q=["Jan","Feb","March","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],V=[{type:"label",value:"Parent dispatch",bold:!0,sm:"6"},{type:"label",value:""===l.related_detid?"-":l.related_detid,sm:"6"},{type:"label",value:"Dispatch number",bold:!0,sm:"6"},{type:"label",value:""===l.detid?"-":l.detid,sm:"6"},{type:"label",value:"Invoice number",bold:!0,sm:"6"},{type:"label",value:l.invoiceno?l.invoiceno:"-",sm:"6"},{type:"label",value:"Delivered quantity(Kgs)",bold:!0,sm:"6"},{type:"label",value:l.delivered_quantity?parseFloat(l.delivered_quantity).toFixed(4):"-",sm:"6"},{type:"label",value:"Balance quantity(Kgs)",bold:!0,sm:"6"},{type:"label",value:l.balance_quantity?parseFloat(l.balance_quantity).toFixed(4):"-",sm:"6"},{type:"label",value:"Total balance quantity(Kgs)",bold:!0,sm:"6"},{type:"label",value:l.total_balance_quantity?parseFloat(l.total_balance_quantity).toFixed(4):"-",sm:"6"},{type:"label",value:"Way bill date",bold:!0,sm:"6"},{type:"label",value:l.wayBillDate?function(e){var t=new Date(e);return e?t.getDate()+"-"+Q[t.getMonth()]+"-"+t.getFullYear():""}(l.wayBillDate):"-",sm:"6"},{type:"label",value:"Location",bold:!0,sm:"6"},{type:"label",value:l.location?l.location:"-",sm:"6"}],z=[{type:"label",value:"Bill of entry number",bold:!0,sm:"6"},{type:"label",value:""===l.billOfEntryNumber?"-":l.billOfEntryNumber,sm:"6"}],W=[{type:"label",value:"Bill of entry date",bold:!0,sm:"6"},{type:"label",value:""===l.billOfEntryDate?"-":l.billOfEntryDate,sm:"6"}],Y=[{type:"label",value:"AP status",bold:!0,sm:"6"},{type:"label",value:l.apStatus?l.apStatus:"-",sm:"6"},{type:"label",value:"Invoice amount",bold:!0,sm:"6"},{type:"label",value:l.invoiceAmount?l.invoiceAmount:"-",sm:"6"}],K=[{type:"label",value:"AP details",bold:!0,sm:"6"},{type:"label",value:""===l.apDetails?"-":l.apDetails,sm:"6"}],J=[{type:"label",value:"QC status",bold:!0,sm:"6"},{type:"label",value:""===l.qcStatus?"-":l.qcStatus,sm:"6"}],Z=function(){var e=Object(r.a)(d.a.mark((function e(t){var a,n,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie({type:"downloadMRINDocument",file_name:h.file_name});case 3:a=e.sent,console.log("Response",a),a&&(n="data:application/pdf;base64,".concat(a.fileData),(i=document.createElement("a")).href=n,i.download=h.file_name,i.click(),G({open:!0,message:"File downloaded successfully"})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),G({open:!0,message:e.t0.message,severity:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),X=[{type:"label",value:"Invoice file",bold:!0,sm:2},{type:"label",value:h.document_name,sm:"6"},{label:"Download attachment",type:"button",sm:12,onClick:function(e){return Z(e,"invoiceAttachment")}}],$=[{label:"Invoice status",type:"checkbox",checked:l.invoiceStatus,sm:12,disabled:!0}],ee=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.value));o(a)},te=[{label:"AP details",type:"input",value:l.apDetails||"",onChange:function(e){return ee(e,"apDetails")},className:t.control,sm:12},{label:"Invoice amount",type:"number",value:l.invoiceAmount||"",className:t.control,error:null===A||void 0===A?void 0:A.invoiceAmount,helperText:null===A||void 0===A?void 0:A.invoiceAmount,onChange:function(e){return ee(e,"invoiceAmount")},sm:12}],ae=function(){p(!1),e.back()},ne=function(){var t=Object(r.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={},!_.a.isEmpty(l.invoiceAmount)&&parseFloat(l.invoiceAmount)>parseInt(l.totalPrice)&&(n=Object(nt.a)(Object(nt.a)({},n),{},{invoiceAmount:"Cannot enter Invoice Amount more than PO Total Amount."})),_.a.isEmpty(n)){t.next=6;break}T(n),t.next=16;break;case 6:return t.prev=6,t.next=9,Ae({apStatus:"Paid",apDetails:l.apDetails,emailid:JSON.parse(localStorage.getItem("preference")).name,invoiceAmount:l.invoiceAmount,type:"Paid",role:L.role,createduserid:L.id,mrinid:e.id});case 9:t.sent&&(G({open:!0,message:"MRIN paid successfully"}),P(!N),setTimeout((function(){e.back()}),2e3)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),G({open:!0,message:t.t0.message,severity:"error"});case 16:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(e){return t.apply(this,arguments)}}(),ie=function(){var t=Object(r.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ae({qcStatus:"Approved",emailid:JSON.parse(localStorage.getItem("preference")).name,type:"Approve",role:L.role,createduserid:L.id,mrinid:e.id});case 3:t.sent&&(G({open:!0,message:"MRIN approved successfully"}),w(!C),setTimeout((function(){e.back()}),2e3)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),G({open:!0,message:t.t0.message,severity:"error"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(ot.jsxs)(ot.Fragment,{children:[H.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},H),{},{handleClose:function(){return G({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"MRIN information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsxs)(m.a,{item:!0,md:6,xs:6,children:[Object(ot.jsx)(tn,{payload:U}),"1001"===l.subCategory&&Object(ot.jsx)(tn,{payload:z})]}),Object(ot.jsxs)(m.a,{item:!0,md:6,xs:6,children:[Object(ot.jsx)(tn,{payload:V}),"1001"===l.subCategory&&Object(ot.jsx)(tn,{payload:W})]})]})})]}),("Accounts Executive"===L.role||"Accounts Manager"===L.role||"Managing Director"===L.role)&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Finance information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{item:!0,md:6,xs:6,children:Object(ot.jsx)(tn,{payload:Y})}),Object(ot.jsx)(m.a,{item:!0,md:6,xs:6,children:Object(ot.jsx)(tn,{payload:K})})]})})]}),("QC Manager"===L.role||"Managing Director"===L.role)&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Quality information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,xs:12,children:Object(ot.jsx)(tn,{payload:J})})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Order specification information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,xs:12,children:Object(ot.jsx)(gn,{rows:F,columns:[{id:"composition_name",label:"Item"},{id:"expected_spec",label:"Expected"},{id:"dispatched_spec",label:"Dispatched"},{id:"delivered_spec",label:"Delivered"},{id:"difference",label:"Difference"}],hasTotal:!1})})})]}),("QC Manager"===L.role||"Managing Director"===L.role||"GC Stores Executive"===L.role)&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Invoice information"})})})}),Object(ot.jsxs)(on.a,{children:[Object(ot.jsx)(m.a,{container:!0,md:12,xs:12,children:h&&Object(ot.jsx)(ot.Fragment,{children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,children:Object(ot.jsx)(tn,{payload:X})})})}),Object(ot.jsx)(m.a,{container:!0,md:12,xs:12,children:Object(ot.jsx)(tn,{payload:$})})]})]}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:["QC Manager"!==L.role&&"Accounts Manager"!==L.role&&"Accounts Executive"!==L.role&&"Closed"!==l.status&&Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Edit",onClick:function(t){return e.editMrin("edit_mrin",l)}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})}),"Pending with QC Approval"===l.status&&("QC Manager"===L.role||"Managing Director"===L.role)&&Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Approve",onClick:function(){return w(!C)}})}),"Pending with Finance"===l.status&&("Accounts Executive"===L.role||"Accounts Manager"===L.role||"Managing Director"===L.role)&&Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Paid",onClick:function(){return P(!N)}})})]}),Object(ot.jsx)(zt,{open:b,handleClose:ae,body:function(){return Object(ot.jsxs)(x.a,{className:t.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Success"}),Object(ot.jsx)("p",{children:"Sample Request Submitted and email sent successfully"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Close",onClick:ae})})})]})}}),Object(ot.jsx)(zt,{open:C,handleClose:function(){return w(!C)},body:function(){return Object(ot.jsxs)(x.a,{className:t.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Approve"}),Object(ot.jsx)("p",{children:"You are approving the Quality and invoice attachment. Are you sure you want to approve both?"}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Yes",onClick:ie})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"No",onClick:function(){return w(!C)}})})]})]})}}),Object(ot.jsx)(zt,{open:N,handleClose:function(){return P(!N)},body:function(){return Object(ot.jsxs)(x.a,{className:t.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Paid"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{id:"top-row",xs:6,md:12,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:te})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Yes",onClick:ne})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"No",onClick:function(){return P(!N)}})})]})]})}})]})},Zc=Object(gt.a)((function(e){return{head:{backgroundColor:"#feecda"},body:{fontSize:14}}}))(un.a),Xc=Object(gt.a)((function(e){return{root:{"&:nth-of-type(even)":{},"& .MuiOutlinedInput-input":{padding:"10px 14px"}}}}))(jn.a),$c=Object(g.a)({table:{minWidth:650},container:{width:"95%"}});function es(e){var t,a=$c(),i=function(){var t;return null===(t=e.rows)||void 0===t?void 0:t.map((function(t){return parseInt(t[e.totalColId]?t[e.totalColId]:0)})).reduce((function(e,t){return e+t}),0)},l=Object(n.useState)(i()),o=Object(c.a)(l,2),r=o[0],s=o[1],d=function(t){var a=Object(n.useState)(t.initialValue),l=Object(c.a)(a,2),o=l[0],r=l[1];return Object(n.useEffect)((function(){r(t.initialValue);var e=i();s(e)}),[t.initialValue]),Object(ot.jsx)(Fa,{value:o,onChange:function(e){r(e.target.value)},onBlur:function(e){u(t.index,t.id,o)},type:e.type})},u=function(t,a,n){e.rows.map((function(e,i){i===t&&(e[a]=n,e.difference=e.expected_spec-e.delivered_spec)})),e.onUpdate&&e.onUpdate(e.rows)};return Object(ot.jsx)(bn.a,{component:mn.a,className:a.container,children:Object(ot.jsxs)(sn.a,{className:a.table,"aria-label":"simple table",children:[!e.hideHeader&&Object(ot.jsx)(pn.a,{children:Object(ot.jsx)(Xc,{children:e.columns.map((function(e){return Object(ot.jsx)(Zc,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ot.jsx)(dn.a,{style:{backgroundColor:"#fff"},children:void 0===e.rows&&null===e.rows&&0===e.rows.length?Object(ot.jsx)("p",{children:Object(ot.jsx)("b",{children:"No Records"})}):null===(t=e.rows)||void 0===t?void 0:t.map((function(t,a){return Object(ot.jsx)(Xc,{children:e.columns.map((function(n){var i=""!==t[n.id]?t[n.id]:"-";return Object(ot.jsx)(Zc,{align:n.align,children:!0===n.isEditable?Object(ot.jsx)(d,{rows:e.rows,initialValue:i,index:a,id:n.id,type:n.type,label:n.label,handler:n.handler}):i},n.id)}))},t.name)}))}),null!==e.rows&&e.rows.length>0&&e.hasTotal&&Object(ot.jsxs)(Xc,{children:[Object(ot.jsx)(Zc,{colSpan:e.columns.findIndex((function(t){return t.id===e.totalColId}))-1}),Object(ot.jsx)(Zc,{children:r})]})]})})}var ts=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .page-header":{width:"100%",marginBottom:15},"& .MuiAccordion-root":{width:"100%"},"& .dispatchTable":{maxHeight:"400px",overflowY:"auto"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"},modal:{position:"absolute",margin:"auto",top:"30%",left:"30%",width:700,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},control:{marginTop:3,marginBottom:3}}})),as=function(){return new Date},ns=function(e){var t=ts(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)([]),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)(!1),v=Object(c.a)(j,2),h=v[0],g=v[1],f=Object(n.useState)({}),y=Object(c.a)(f,2),C=y[0],w=y[1],S=Object(n.useState)({}),k=Object(c.a)(S,2),N=k[0],P=k[1],D=Object(n.useState)({}),I=Object(c.a)(D,2),A=I[0],T=I[1],E=Object(n.useState)({}),q=Object(c.a)(E,2),F=q[0],M=q[1],R=Object(n.useState)(!1),B=Object(c.a)(R,2),H=B[0],G=B[1],L=Object(n.useState)(!1),U=Object(c.a)(L,2),Q=U[0],V=U[1],z=Object(n.useState)(!1),W=Object(c.a)(z,2),Y=W[0],K=W[1],J=Object(n.useState)({open:!1,message:"",severity:""}),Z=Object(c.a)(J,2),X=Z[0],$=Z[1],ee=Jt().getCurrentUserDetails,te=Object(n.useState)([]),ae=Object(c.a)(te,2),ne=ae[0],ie=ae[1],le=ee();Object(n.useEffect)((function(){var t,a,n,i,l,r=Object(nt.a)({},e.editData);r.location={label:null===(t=e.editData)||void 0===t?void 0:t.location,value:null===(a=e.editData)||void 0===a?void 0:a.location},o(r),ie((n=e.editData.delivered_spec,i=e.editData.dispatched_spec,[{composition_name:"Density(Gm/Cc)",key:"del_density",expected_spec:null!==(l=e.editData.expected_spec)?l[0].exp_density:0,dispatched_spec:null!==i?i[0].dis_density:0,delivered_spec:null!==n?n[0].del_density:0,difference:null!==l&&null!==n?parseInt(l[0].exp_density-n[0].del_density):null===l&&null!==n?n[0].del_density:null!==l&&null===n?l[0].exp_density:0},{composition_name:"Moisture (%)",key:"del_moisture",expected_spec:null!==l?l[0].exp_moisture:0,dispatched_spec:null!==i?i[0].dis_moisture:0,delivered_spec:null!==n?n[0].del_moisture:0,difference:null!==l&&null!==n?parseInt(l[0].exp_moisture-n[0].del_moisture):null===l&&null!==n?n[0].del_moisture:null!==l&&null===n?l[0].exp_moisture:0},{composition_name:"Browns (%)",key:"del_browns",expected_spec:null!==l?l[0].exp_browns:0,dispatched_spec:null!==i?i[0].dis_browns:0,delivered_spec:null!==n?n[0].del_browns:0,difference:null!==l&&null!==n?parseInt(l[0].exp_browns-n[0].del_browns):null===l&&null!==n?n[0].del_browns:null!==l&&null===n?l[0].exp_browns:0},{composition_name:"Blacks (%)",key:"del_blacks",expected_spec:null!==l?l[0].exp_blacks:0,dispatched_spec:null!==i?i[0].dis_blacks:0,delivered_spec:null!==n?n[0].del_blacks:0,difference:null!==l&&null!==n?parseInt(l[0].exp_blacks-n[0].del_blacks):null===l&&null!==n?n[0].del_blacks:null!==l&&null===n?l[0].exp_blacks:0},{composition_name:"Broken & Bits (%)",key:"del_brokenbits",expected_spec:null!==l?l[0].exp_brokenbits:0,dispatched_spec:null!==i?i[0].dis_brokenbits:0,delivered_spec:null!==n?n[0].del_brokenbits:0,difference:null!==l&&null!==n?parseInt(l[0].exp_brokenbits-n[0].del_brokenbits):null===l&&null!==n?n[0].del_brokenbits:null!==l&&null===n?l[0].exp_brokenbits:0},{composition_name:"Insected beans (%)",key:"del_insectedbeans",expected_spec:null!==l?l[0].exp_insectedbeans:0,dispatched_spec:null!==i?i[0].dis_insectedbeans:0,delivered_spec:null!==n?n[0].del_insectedbeans:0,difference:null!==l&&null!==n?parseInt(l[0].exp_insectedbeans-n[0].del_insectedbeans):null===l&&null!==n?n[0].del_insectedbeans:null!==l&&null===n?l[0].exp_insectedbeans:0},{composition_name:"Bleached (%)",key:"del_bleached",expected_spec:null!==l?l[0].exp_bleached:0,dispatched_spec:null!==i?i[0].dis_bleached:0,delivered_spec:null!==n?n[0].del_bleached:0,difference:null!==l&&null!==n?parseInt(l[0].exp_bleached-n[0].del_bleached):null===l&&null!==n?n[0].del_bleached:null!==l&&null===n?l[0].exp_bleached:0},{composition_name:"Husk (%)",key:"del_husk",expected_spec:null!==l?l[0].exp_husk:0,dispatched_spec:null!==i?i[0].dis_husk:0,delivered_spec:null!==n?n[0].del_husk:0,difference:null!==l&&null!==n?parseInt(l[0].exp_husk-n[0].del_husk):null===l&&null!==n?n[0].del_husk:null!==l&&null===n?l[0].exp_husk:0},{composition_name:"Sticks (%)",key:"del_sticks",expected_spec:null!==l?l[0].exp_sticks:0,dispatched_spec:null!==i?i[0].dis_sticks:0,delivered_spec:null!==n?n[0].del_sticks:0,difference:null!==l&&null!==n?parseInt(l[0].exp_sticks-n[0].del_sticks):null===l&&null!==n?n[0].del_sticks:null!==l&&null===n?l[0].exp_sticks:0},{composition_name:"Stones (%)",key:"del_stones",expected_spec:null!==l?l[0].exp_stones:0,dispatched_spec:null!==i?i[0].dis_stones:0,delivered_spec:null!==n?n[0].del_stones:0,difference:null!==l&&null!==n?parseInt(l[0].exp_stones-n[0].del_stones):null===l&&null!==n?n[0].del_stones:null!==l&&null===n?l[0].exp_stones:0},{composition_name:"Beans retained on 5mm mesh during sieve analysis",key:"del_beansretained",expected_spec:null!==l?l[0].exp_beansretained:0,dispatched_spec:null!==i?i[0].dis_beansretained:0,delivered_spec:null!==n?n[0].del_beansretained:0,difference:null!==l&&null!==n?parseInt(l[0].exp_beansretained-n[0].del_beansretained):null===l&&null!==n?n[0].del_beansretained:null!==l&&null===n?l[0].exp_beansretained:0}])),Ie({type:"getDocumentsOnMRIN",mrinid:e.id}).then((function(e){e&&w(e[e.length-1])})),"QC Manager"===le.role&&g(!0),p(function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(n){return a.push({label:n[e],value:n[t]||n[e]})})),a}([{id:"Silo No 1",label:"Silo No 1"},{id:"Silo No 2",label:"Silo No 2"},{id:"Silo No 3",label:"Silo No 3"},{id:"Silo No 4",label:"Silo No 4"},{id:"Silo No 5",label:"Silo No 5"},{id:"Silo No 6",label:"Silo No 6"},{id:"Silo No 7",label:"Silo No 7"},{id:"Silo No 8",label:"Silo No 8"},{id:"Silo No 9",label:"Silo No 9"},{id:"Silo No 10",label:"Silo No 10"},{id:"Silo No 11",label:"Silo No 11"},{id:"Silo No 12",label:"Silo No 12"},{id:"Silo No 13",label:"Silo No 13"},{id:"Silo No 14",label:"Silo No 14"},{id:"Green Coffee Godown 1",label:"Green Coffee Godown 1"}],"label","id"))}),[e.editData]);var oe=function(e,t){var a="",n=Object(nt.a)({},l);if("delivered_quantity"===t)if(parseFloat(e.target.value)>parseFloat(l.expected_quantity)){var i=Object(nt.a)({},A);i=Object(nt.a)(Object(nt.a)({},i),{},{delivered_quantity:"Delivered quantity should not be greater than Expected  quantity."}),T(i),n=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.value))}else{var r,c=Object(nt.a)({},A);delete c.delivered_quantity,T(c),a=parseFloat(l.expected_quantity)-(parseFloat(e.target.value)+parseFloat(l.wayment_shortage||0)),n=Object(nt.a)(Object(nt.a)({},l),{},(r={},Object(Ot.a)(r,t,e.target.value),Object(Ot.a)(r,"balance_quantity",a===isNaN?0:a),r))}else if("wayment_shortage"===t){var s;a=parseFloat(l.expected_quantity)-(parseFloat(e.target.value)+parseFloat(l.delivered_quantity)),n=Object(nt.a)(Object(nt.a)({},l),{},(s={},Object(Ot.a)(s,t,e.target.value),Object(Ot.a)(s,"balance_quantity",a===isNaN?0:a),s))}else n=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.value));o(n)},re=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e.target.value));o(a)},ce=function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},Object(Ot.a)({},t,e));o(a),console.log(a)},se=function(){var t=Object(r.a)(d.a.mark((function t(){var a,n,i,o,r,c,s,u,b,p,j,m,v,h,O,g,x,f,y,C,w,S,k,P;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c="Please enter valid details",s=Object(nt.a)({},A),T(s),_.a.isEmpty(null===(a=l.delivered_quantity)||void 0===a?void 0:a.toString())?s=Object(nt.a)(Object(nt.a)({},s),{},{delivered_quantity:c}):delete s.delivered_quantity,_.a.isEmpty(null===(n=l.wayment_shortage)||void 0===n?void 0:n.toString())?s=Object(nt.a)(Object(nt.a)({},s),{},{wayment_shortage:c}):delete s.wayment_shortage,_.a.isEmpty(null===(i=l.invoice_date)||void 0===i?void 0:i.toString())?s=Object(nt.a)(Object(nt.a)({},s),{},{invoice_date:c}):delete s.invoice_date,_.a.isEmpty(null===(o=l.invoiceno)||void 0===o?void 0:o.toString())?s=Object(nt.a)(Object(nt.a)({},s),{},{invoiceno:c}):delete s.invoiceno,_.a.isEmpty(null===(r=l.vehicle_no)||void 0===r?void 0:r.toString())?s=Object(nt.a)(Object(nt.a)({},s),{},{vehicle_no:c}):delete s.vehicle_no,_.a.isEmpty(l.wayBillDate)?s=Object(nt.a)(Object(nt.a)({},s),{},{wayBillDate:c}):delete s.wayBillDate,_.a.isEmpty(l.wayBillNumber)?s=Object(nt.a)(Object(nt.a)({},s),{},{wayBillNumber:c}):delete s.wayBillNumber,"1001"===l.subCategory&&_.a.isEmpty(l.billOfEntry)?s=Object(nt.a)(Object(nt.a)({},s),{},{billOfEntry:c}):delete s.billOfEntry,"1001"===l.subCategory&&_.a.isEmpty(l.billOfEntryDate)?s=Object(nt.a)(Object(nt.a)({},s),{},{billOfEntryDate:c}):delete s.billOfEntryDate,_.a.isEmpty(s)){t.next=24;break}throw t.prev=13,T(s),{message:"Please fill mandatory fields to update"};case 19:t.prev=19,t.t0=t.catch(13),$({open:!0,message:t.t0.message,severity:"error"});case 22:t.next=50;break;case 24:return K(!0),S={update:!0,type:"uploadDocument",emailid:JSON.parse(localStorage.getItem("preference")).name,doc_kind:"MRIN",document_content:null===N||void 0===N?void 0:N.file,document_name:null===N||void 0===N?void 0:N.document_name,expected_quantity:l.expected_quantity,detid:l.detid,delivery_date:l.delivery_date,delivered_quantity:l.delivered_quantity,wayment_shortage:l.wayment_shortage,balance_quantity:l.balance_quantity?""===(null===(u=l.balance_quantity)||void 0===u?void 0:u.toString())?"0":null===(b=l.balance_quantity)||void 0===b?void 0:b.toString():"0",mrinid:e.id,invoice_date:l.invoice_date?l.invoice_date:as(),invoice_no:l.invoiceno,vehicle_no:l.vehicle_no,invoice_quantity:l.invoice_quantity,wayBillDate:l.wayBillDate,wayBillNumber:l.wayBillNumber,billOfEntry:l.billOfEntry,billOfEntryDate:l.billOfEntryDate,apStatus:l.apStatus,apDetails:l.apDetails,qcStatus:l.qcStatus,invoiceAmount:l.invoiceAmount,location:null===(p=l.location)||void 0===p?void 0:p.value,invoiceStatus:l.invoiceStatus,role:localStorage.getItem("currentUserRole"),pono:l.pono,itemid:l.item_id},t.prev=26,t.next=29,Ae(S);case 29:k=t.sent,console.log("Response",k),k&&($({open:!0,message:"MRIN updated successfully"}),setTimeout((function(){K(!1),e.back()}),2e3)),t.next=38;break;case 34:t.prev=34,t.t1=t.catch(26),K(!1),$({open:!0,message:t.t1.message,severity:"error"});case 38:return P={update_spec:!0,detid:l.detid,role:localStorage.getItem("currentUserRole"),itemid:l.item_id,del_density:null===l||void 0===l||null===(j=l.del_density)||void 0===j?void 0:j.toString(),del_moisture:null===(m=l.del_moisture)||void 0===m?void 0:m.toString(),del_browns:null===(v=l.del_browns)||void 0===v?void 0:v.toString(),del_blacks:null===(h=l.del_blacks)||void 0===h?void 0:h.toString(),del_brokenbits:null===(O=l.del_brokenbits)||void 0===O?void 0:O.toString(),del_insectedbeans:null===(g=l.del_insectedbeans)||void 0===g?void 0:g.toString(),del_bleached:null===(x=l.del_bleached)||void 0===x?void 0:x.toString(),del_husk:null===(f=l.del_husk)||void 0===f?void 0:f.toString(),del_sticks:null===(y=l.del_sticks)||void 0===y?void 0:y.toString(),del_stones:null===(C=l.del_stones)||void 0===C?void 0:C.toString(),del_beansretained:null===(w=l.del_beansretained)||void 0===w?void 0:w.toString()},t.prev=39,t.next=42,et(P);case 42:t.sent&&($({open:!0,message:"MRIN GC specification updated successfully"}),setTimeout((function(){K(!1),e.back()}),2e3)),t.next=50;break;case 46:t.prev=46,t.t2=t.catch(39),K(!1),$({open:!0,message:t.t2.message,severity:"error"});case 50:case"end":return t.stop()}}),t,null,[[13,19],[26,34],[39,46]])})));return function(){return t.apply(this,arguments)}}(),de=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},ue=function(){var e=Object(r.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,de(t.target.files[0]);case 4:a=(a=e.sent).replace(/^data:application\/(pdf);base64,/,""),P({file_name:t.target.files[0].name,document_name:t.target.files[0].name,file:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=[{label:"PO number",type:"input",disabled:!0,value:l.pono},{label:"Parent dispatch",type:"input",value:l.related_detid||"-",disabled:!0},{label:"Dispatch number",type:"input",value:l.detid||"-",disabled:!0},{label:"Expected quantity(Kgs)",type:"number",value:l.expected_quantity?parseFloat(l.expected_quantity).toFixed(4):"-",disabled:!0},{label:"Vehicle number",type:"input",value:l.vehicle_no||"",required:!0,error:null===A||void 0===A?void 0:A.vehicle_no,helperText:null===A||void 0===A?void 0:A.vehicle_no,onChange:function(e){return re(e,"vehicle_no")}},{label:"Invoice number",type:"input",value:l.invoiceno||"",required:!0,error:null===A||void 0===A?void 0:A.invoiceno,helperText:null===A||void 0===A?void 0:A.invoiceno,onChange:function(e){return re(e,"invoiceno")}},{label:"Invoice quantity(Kgs)",type:"number",value:l.invoice_quantity?parseFloat(l.invoice_quantity).toFixed(4):"",onChange:function(e){return oe(e,"invoice_quantity")}},{label:"Invoice date",type:"datePicker",value:l.invoice_date||as(),required:!0,error:null===A||void 0===A?void 0:A.invoice_date,helperText:null===A||void 0===A?void 0:A.invoice_date,onChange:function(e){return ce(e,"invoice_date")}},{label:"Delivery date",type:"datePicker",value:l.delivery_date,required:!0,error:null===A||void 0===A?void 0:A.delivery_date,helperText:null===A||void 0===A?void 0:A.delivery_date,onChange:function(e){return ce(e,"delivery_date")}},{label:"Delivered quantity(Kgs)",type:"number",disabled:!0,inputProps:{min:0},value:l.delivered_quantity?parseFloat(l.delivered_quantity).toFixed(4):"-",required:!0,error:null===A||void 0===A?void 0:A.delivered_quantity,helperText:null===A||void 0===A?void 0:A.delivered_quantity,onChange:function(e){e.target.value>=0&&oe(e,"delivered_quantity")}},{label:"Weighment shortage",type:"number",disabled:!0,value:l.wayment_shortage?parseFloat(l.wayment_shortage).toFixed(4):"",required:!0,error:null===A||void 0===A?void 0:A.wayment_shortage,helperText:null===A||void 0===A?void 0:A.wayment_shortage,onChange:function(e){e.target.value>=0&&oe(e,"wayment_shortage")}},{label:"Balance quantity(Kgs)",type:"number",disabled:!0,value:l.balance_quantity?parseFloat(l.balance_quantity).toFixed(4):""},{label:"Way bill number",type:"input",disabled:!0,value:l.wayBillNumber,required:!0,error:null===A||void 0===A?void 0:A.wayBillNumber,helperText:null===A||void 0===A?void 0:A.wayBillNumber,onChange:function(e){return oe(e,"wayBillNumber")},sm:6},{label:"Way bill date",type:"datePicker",value:l.wayBillDate||null,required:!0,error:null===A||void 0===A?void 0:A.wayBillDate,helperText:null===A||void 0===A?void 0:A.wayBillDate,onChange:function(e){return ce(e,"wayBillDate")}},{label:"Locations",type:"autocomplete",labelprop:"label",value:l.location?l.location:"",options:b||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},l),{},{location:t});o(a)}}],pe=[{label:"Bill of entry number",type:"input",value:l.billOfEntry,required:!0,error:null===A||void 0===A?void 0:A.billOfEntry,helperText:null===A||void 0===A?void 0:A.billOfEntry,onChange:function(e){return oe(e,"billOfEntry")},sm:6},{label:"Bill of entry date",type:"datePicker",value:l.billOfEntryDate||null,required:!0,error:null===A||void 0===A?void 0:A.billOfEntryDate,helperText:null===A||void 0===A?void 0:A.billOfEntryDate,onChange:function(e){return ce(e,"billOfEntryDate")}}],je=[{label:"AP status",type:"input",disabled:!0,value:l.apStatus,sm:6},{label:"AP details",type:"input",value:l.apDetails||"",disabled:!0,onChange:function(e){return oe(e,"apDetails")},sm:6},{label:"Invoice amount",type:"number",value:l.invoiceAmount||"",disabled:!0,onChange:function(e){return oe(e,"invoiceAmount")},sm:6}],me=[{label:"QC status",type:"input",disabled:!0,value:l.qcStatus||"-"}],ve=[{type:"label",value:"Invoice file",bold:!0,sm:"1"},{type:"label",value:C.document_name,sm:"6"},{type:"file",disabled:h,onChange:function(e){return ue(e)}},{label:"Invoice status",type:"checkbox",sm:6,disabled:!0,checked:l.invoiceStatus}],he=[{label:"AP details",type:"input",value:l.apDetails||"",onChange:function(e){return oe(e,"apDetails")},className:t.control,sm:12},{label:"Invoice amount",type:"number",value:l.invoiceAmount||"",error:null===F||void 0===F?void 0:F.invoiceAmount,helperText:null===F||void 0===F?void 0:F.invoiceAmount,onChange:function(e){return oe(e,"invoiceAmount")},className:t.control,sm:12}],Oe=function(){var t=Object(r.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={},!_.a.isEmpty(l.invoiceAmount)&&parseFloat(l.invoiceAmount)>parseInt(l.totalPrice)&&(n=Object(nt.a)(Object(nt.a)({},n),{},{invoiceAmount:"Cannot enter Invoice Amount more than PO Total Amount."})),_.a.isEmpty(n)){t.next=6;break}M(n),t.next=16;break;case 6:return t.prev=6,t.next=9,Ae({type:"Paid",role:le.role,createduserid:le.id,emailid:JSON.parse(localStorage.getItem("preference")).name,mrinid:e.id,apStatus:"Paid",apDetails:l.apDetails,invoiceAmount:l.invoiceAmount});case 9:t.sent&&($({open:!0,message:"MRIN paid successfully"}),V(!Q),setTimeout((function(){e.back()}),2e3)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),$({open:!0,message:t.t0.message,severity:"error"});case 16:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(e){return t.apply(this,arguments)}}(),ge=function(){var t=Object(r.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ae({qcStatus:"Approved",type:"Approve",invoiceStatus:!0,emailid:JSON.parse(localStorage.getItem("preference")).name,role:le.role,createduserid:le.id,mrinid:e.id});case 3:t.sent&&($({open:!0,message:"MRIN approved successfully"}),G(!H),setTimeout((function(){e.back()}),2e3)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),$({open:!0,message:t.t0.message,severity:"error"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[X.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},X),{},{handleClose:function(){return $({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"MRIN information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:be})}),Object(ot.jsx)(on.a,{children:"1001"===l.subCategory&&Object(ot.jsx)(tn,{payload:pe})})]}),("Accounts Executive"===le.role||"Accounts Manager"===le.role||"Managing Director"===le.role)&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Finance information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:je})})]}),("QC Manager"===le.role||"Managing Director"===le.role)&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Quality information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:me})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Order specification information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,xs:12,children:Object(ot.jsx)(es,{rows:ne,columns:[{id:"composition_name",label:"Item"},{id:"expected_spec",label:"Expected"},{id:"dispatched_spec",label:"Dispatched"},{id:"delivered_spec",label:"Delivered",isEditable:!0,type:"number"},{id:"difference",label:"Difference",isEditable:!0,type:"number"}],hasTotal:!1,onUpdate:function(e){var t=Object(nt.a)({},l);e&&e.map((function(e,a){t[e.key]=parseFloat(e.delivered_spec)})),o(t)}})})})]}),("QC Manager"===le.role||"Managing Director"===le.role||"GC Stores Executive"===le.role)&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Invoice information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(m.a,{container:!0,md:12,xs:12,children:Object(ot.jsx)(tn,{payload:ve})})})]}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:Y,label:Y?"Loading ...":"Save",onClick:se})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})}),"Pending with QC Approval"===l.status&&("QC Manager"===le.role||"Managing Director"===le.role)&&Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Approve",disabled:!0,onClick:function(){return G(!H)}})}),"Pending with Finance"===l.status&&("Accounts Executive"===le.role||"Accounts Manager"===le.role||"Managing Director"===le.role)&&Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Paid",disabled:!0,onClick:function(){return V(!Q)}})})]}),Object(ot.jsx)(zt,{open:H,handleClose:function(){return G(!H)},body:function(){return Object(ot.jsxs)(x.a,{className:t.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Approve"}),Object(ot.jsx)("p",{children:"You are approving the Quality and invoice attachment. Are you sure you want to approve both?"}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Yes",onClick:ge})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"No",onClick:function(){return G(!H)}})})]})]})}}),Object(ot.jsx)(zt,{open:Q,handleClose:function(){return V(!Q)},body:function(){return Object(ot.jsxs)(x.a,{className:t.modal,children:[Object(ot.jsx)("h2",{id:"simple-modal-title",children:"Paid"}),Object(ot.jsx)(m.a,{id:"top-row",children:Object(ot.jsx)(m.a,{id:"top-row",xs:6,md:12,direction:"column",children:Object(ot.jsx)(tn,{payload:he})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Yes",onClick:Oe})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"No",onClick:function(){return V(!Q)}})})]})]})}})]})},is=Object(g.a)((function(e){return{root:{paddingTop:e.spacing(3),minWidth:"100%"},formControl:{margin:e.spacing(1),marginTop:e.spacing(2),minWidth:120},control:{marginTop:3,marginBottom:3},modal:{position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",margin:"auto",top:"50%",right:"50%",transform:"translate(50%, -50%)",width:700,backgroundColor:e.palette.background.paper,border:"1px solid #fefefe",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),overflowY:"scroll",maxHeight:"90vh",maxWidth:"90vw"}}})),ls=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];return e.map((function(e){return n.push({label:e[t],value:e[a]||e[t]})})),n},os=function(e){var t=(0,Jt().getCurrentUserDetails)(),a=t.role,i=t.id,l=Object(n.useState)(a!==Kt.managingDirector?"allmrins":"pendingqcmrins"),o=Object(c.a)(l,2),s=o[0],u=o[1],b=Object(n.useState)(null),p=Object(c.a)(b,2),j=p[0],v=p[1],h=is(),O=Object(n.useState)(null),g=Object(c.a)(O,2),f=g[0],y=g[1],C=Object(n.useState)([]),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)([]),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)(!1),T=Object(c.a)(A,2),E=T[0],q=T[1],F=Object(n.useState)(!1),M=Object(c.a)(F,2),R=M[0],B=M[1],H=Object(n.useState)({}),G=Object(c.a)(H,2),L=G[0],U=G[1],Q=Object(n.useState)(!1),V=Object(c.a)(Q,2),z=V[0],W=V[1],Y=Object(n.useState)(!1),K=Object(c.a)(Y,2),J=K[0],Z=K[1],X=Object(n.useState)(!1),$=Object(c.a)(X,2),ee=$[0],te=$[1],ae=Object(n.useState)(-1),ne=Object(c.a)(ae,2),ie=ne[0],le=ne[1],oe=Object(n.useState)(-1),re=Object(c.a)(oe,2),ce=re[0],se=re[1],de=Object(n.useState)(-1),ue=Object(c.a)(de,2),be=ue[0],pe=ue[1],je=Object(n.useState)(""),me=Object(c.a)(je,2),ve=me[0],he=me[1],Oe=Object(n.useState)(!1),ge=Object(c.a)(Oe,2),xe=ge[0],fe=ge[1],ye=Object(n.useState)(!1),_e=Object(c.a)(ye,2),Ce=_e[0],we=_e[1],Se=Object(n.useState)([]),ke=Object(c.a)(Se,2),Ne=ke[0],Ie=ke[1],Ae=Object(n.useState)([]),Ee=Object(c.a)(Ae,2),qe=Ee[0],Fe=Ee[1],Me=Object(n.useState)([]),Re=Object(c.a)(Me,2),Be=Re[0],He=Re[1],Ge=Object(n.useState)(!1),Le=Object(c.a)(Ge,2),Ue=Le[0],Qe=Le[1],Ve=function(){var e=Object(r.a)(d.a.mark((function e(t,a){var n,l,o,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="","Pending with QC Approval"!==a&&"Pending with Finance"!==a&&"Close"!==a||(_.a.isEmpty(n)||(n+=" AND "),n+="status = '".concat(a,"'")),"EOU2"!==a&&"EOU1 "!==a&&"HEAD OFFICE"!==a||(_.a.isEmpty(n)||(n+=" AND "),n+="entityname = '".concat(a,"'")),_.a.isEmpty(t)||(_.a.isEmpty(n)||(n+=" AND "),n+="".concat(t)),l={filter:n,loggedinuserid:i},e.next=7,De(l);case 7:return o=e.sent,y(o),e.next=11,Te({type:"allEntities"});case 11:r=e.sent,Fe(ls(r,"entity_name","entity_id")),He([]);case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){Ve(j,s)}),[j,s]),Object(n.useEffect)((function(){ee||xe||J||Ce||(v(null===j?void 0:null),u("allmrins"))}),[ee,xe,J,Ce]);var ze,We=function(){var e=Object(r.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(t.target.value),v(null);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(r.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),le(a),Ie(Object(nt.a)(Object(nt.a)({},Ne),{},{entityid:a.value})),e.next=5,Te({type:"poidsOnEntityId",entity_id:a.value});case 5:(n=e.sent)&&n.length?(He(n),pe(-1)):null===n&&(He([]),pe(-1),k([]),B(!1),U({}),W(!1));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(r.a)(d.a.mark((function e(t,a){var n,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=14;break}return t.preventDefault(),pe(a),Ie(Object(nt.a)(Object(nt.a)({},Ne),{},{pono:a.po_no,poid:a.po_id,vendor_id:a.vendor_id,subCategory:a.po_sub_category})),e.next=6,Te({type:"dispatchesonpono",po_no:a.po_no});case 6:return((n=e.sent)||null===n)&&(k(n),B(!0)),e.next=10,Pe({po_no:a.po_no});case 10:(i=e.sent)?(U(i),W(!0)):null===i&&(U(i),W(!1)),e.next=20;break;case 14:le(-1),pe(-1),k([]),B(!1),U({}),W(!1);case 20:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Je=[{label:"Delivery at",type:"autocomplete",labelprop:"label",required:!0,value:ie,options:qe||[],onChange:Ye,sm:12},{label:"PO number",type:"autocomplete",required:!0,labelprop:"po_no",value:be,className:h.control,options:Be||[],onChange:Ke,md:12,sm:12,xs:12}],Ze=[{label:"PO category",type:"input",disabled:!0,value:L.po_category||"",className:h.control,sm:12},{label:"PO sub category",type:"input",disabled:!0,value:L.po_sub_category||"",md:12,sm:12,className:h.control,xs:12},{label:"Green coffee type",type:"input",disabled:!0,value:L.item_name||"",className:h.control,md:12,sm:12,xs:12},{label:"Purchase Price/MT",type:"input",disabled:!0,value:L.purchase_price,className:h.control,md:12,sm:12,xs:12}],Xe=function(e,t){Ie(Object(nt.a)(Object(nt.a)({},Ne),{},{dispatch_date:t.date,dispatch_id:t.dispatchNo,expected_quantity:t.qty,related_detid:t.relateddispatch_id})),q(!E),fe(!0)},$e=function(e,t){Z(!1),te(!1),fe(!1),we(!0),he(t)};return ze=xe?Object(ot.jsx)(Yc,{back:function(){le(-1),pe(-1),k([]),B(!1),fe(!1),te(!1),U({}),W(!1)},createMrinData:Ne}):ee?Object(ot.jsx)(Jc,{back:function(){te(!1),fe(!1)},id:ce,viewPo:$e,editMrin:function(e,t){return I(t),Z(!0),te(!1),void fe(!1)}}):J?Object(ot.jsx)(ns,{back:function(){Z(!1),te(!1),fe(!1)},editData:D,id:ce}):Ce?Object(ot.jsx)(Sr,{back:function(e){Z(!1),te(!1),fe(!1),we(!1)},id:ve}):Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0,children:Object(ot.jsxs)(Da.a,{variant:"outlined",className:h.formControl,children:[Object(ot.jsx)(Ia.a,{htmlFor:"outlined-age-native-simple",children:"View"}),Object(ot.jsxs)(Aa.a,{native:!0,value:s,onChange:We,label:"View",inputProps:{name:"view",id:"outlined-view-native-simple"},children:[a===Kt.managingDirector?Object(ot.jsx)("option",{value:"allmrins",children:"All MRINs"}):null,Object(ot.jsx)("option",{value:"Pending with QC Approval",children:"Pending with QC Approval"}),Object(ot.jsx)("option",{value:"Pending with Finance",children:"Pending with Finance"}),Object(ot.jsx)("option",{value:"Close",children:"Closed MRINs"}),Object(ot.jsx)("option",{value:"HEAD OFFICE",children:"MRINs at HO"}),Object(ot.jsx)("option",{value:"EOU1 ",children:"MRINs at EOU1 "}),Object(ot.jsx)("option",{value:"EOU2",children:"MRINs at EOU2"})]})]})}),"QC Manager"!==t.role&&Object(ot.jsxs)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:[null!==f&&Object(ot.jsx)(pi,{onClick:function(){Qe(!0)},label:"Export to excel"}),Object(ot.jsx)(Rn,{onClick:function(){return q(!E)},label:"Create MRIN",variant:"extended"})]})]}),!0===Ue&&Object(ot.jsx)(ui,{tableData:f,tableName:"MRIN"}),Object(ot.jsx)(Lc,{selectedAdvancedFilters:function(e){v(e)},clearAdvancedFilters:function(){return v(null)},data:f,viewPo:$e,mrinDetails:function(e,t){return function(e,t){te(!0),se(t)}(0,t)}})]}),Object(ot.jsxs)(x.a,{className:h.root,children:[ze,Object(ot.jsx)(zt,{open:E,handleClose:function(){return q(!E)},body:function(){return Object(ot.jsx)(x.a,{className:h.modal,children:Object(ot.jsxs)("div",{style:{width:"100%",height:"100%",overflowY:"scroll"},children:[Object(ot.jsx)("h2",{style:{color:dt,fontWeight:"700",margin:"0 0 1rem 0"},children:"Select PO details"}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsxs)(m.a,{id:"top-row",className:"create_mrin",xs:12,container:!0,direction:"column",children:[Object(ot.jsx)(tn,{payload:Je}),z&&Object(ot.jsx)(tn,{payload:Ze})]})}),R&&Object(ot.jsx)(Vc,{data:S,createMrin:Xe}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:function(){return q(!E),le(-1),pe(-1),k([]),B(!1),U({}),void W(!1)}})})})]})})}})]})},rs=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"}}})),cs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=[];return e.map((function(e){return a.push({label:e[t],value:e[t]})})),a};function ss(e){var t,a,i,l,o,s,u,b,p,j,v,h,g,x=rs(),f=Object(n.useState)({}),y=Object(c.a)(f,2),C=y[0],w=y[1],S=Object(n.useState)({}),k=Object(c.a)(S,2),N=k[0],P=k[1],D=Object(n.useState)([]),I=Object(c.a)(D,2),A=I[0],T=I[1],E=Object(n.useState)([]),q=Object(c.a)(E,2),F=q[0],M=q[1],R=Object(n.useState)([]),B=Object(c.a)(R,2),H=B[0],G=B[1],L=Object(n.useState)(!1),U=Object(c.a)(L,2),Q=U[0],V=U[1],z=Object(n.useState)([]),W=Object(c.a)(z,2),Y=(W[0],W[1]),K=Object(n.useState)([]),J=Object(c.a)(K,2),Z=(J[0],J[1]),X=Object(n.useState)([]),$=Object(c.a)(X,2),ee=($[0],$[1]),ie=(0,Jt().getCurrentUserDetails)(),le=Object(n.useState)({open:!1,message:"",severity:""}),oe=Object(c.a)(le,2),re=oe[0],ce=oe[1];Object(n.useEffect)((function(){te().then((function(e){return T(cs(e,"country"))}))}),[]);var se=function(e,t){var a=Object(nt.a)(Object(nt.a)({},N),{},Object(Ot.a)({},t,e.target.value));P(a)},de=function(e,t){var a=Object(nt.a)(Object(nt.a)({},N),{},Object(Ot.a)({},t,e.target.value));P(a)},ue=function(e,t){var a=Object(nt.a)(Object(nt.a)({},N),{},Object(Ot.a)({},t,e.target.value));P(a)},be=function(){var t=Object(r.a)(d.a.mark((function t(a){var n,i,l,o,r,c,s,u,b,p,j,m,v,h;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),j={create:!0,createduserid:ie.id,vendor_name:N.VendorName,vendor_type_id:null===(n=N.vendorTypeId)||void 0===n?void 0:n.value,vendor_cat_id:null===(i=N.vendorCatId)||void 0===i?void 0:i.value,vendor_group_id:null===(l=N.vendorGroupId)||void 0===l?void 0:l.value,contact_name:N.ContactName,address1:N.Address1,address2:N.Address2,city:null===(o=N.city)||void 0===o?void 0:o.value,pincode:N.Pincode,state:null===(r=N.state)||void 0===r?void 0:r.value,country:null===(c=N.country)||void 0===c?void 0:c.value,phone:N.Phone,mobile:N.Mobile,email:N.Email,website:N.Website,pan_no:N.PanNo,gst_no:N.GstIdentificationNo,msmessi:N.MsmeSsi,bank_name:N.BankName,branch:N.Branch,account_type:N.AccountType,account_number:N.AccountNumber,ifsc_code:N.IfscCode,micr_code:N.MicrCode},m="Please enter valid details",v={},_.a.isEmpty(N.VendorName)&&(v=Object(nt.a)(Object(nt.a)({},v),{},{VendorName:m})),_.a.isEmpty(N.ContactName)&&(v=Object(nt.a)(Object(nt.a)({},v),{},{ContactName:m})),"1001"!==(null===(s=N.vendorTypeId)||void 0===s?void 0:s.value)&&_.a.isEmpty(N.PanNo)&&(v=Object(nt.a)(Object(nt.a)({},v),{},{PanNo:m})),"1001"!==(null===(u=N.vendorTypeId)||void 0===u?void 0:u.value)&&_.a.isEmpty(N.GstIdentificationNo)&&(v=Object(nt.a)(Object(nt.a)({},v),{},{GstIdentificationNo:m})),"1001"!==(null===(b=N.vendorTypeId)||void 0===b?void 0:b.value)&&_.a.isEmpty(N.MsmeSsi)&&(v=Object(nt.a)(Object(nt.a)({},v),{},{MsmeSsi:m})),_.a.isEmpty(N.vendorGroupId)&&(v=Object(nt.a)(Object(nt.a)({},v),{},{vendorGroupId:m})),_.a.isEmpty(N.vendorTypeId)&&(v=Object(nt.a)(Object(nt.a)({},v),{},{vendorTypeId:m})),_.a.isEmpty(N.vendorCatId)&&(v=Object(nt.a)(Object(nt.a)({},v),{},{vendorCatId:m})),_.a.isEmpty(N.Phone)&&(v=Object(nt.a)(Object(nt.a)({},v),{},{Phone:m})),"1001"!==(null===(p=N.vendorTypeId)||void 0===p?void 0:p.value)&&_.a.isEmpty(N.Pincode)&&(v=Object(nt.a)(Object(nt.a)({},v),{},{Pincode:m})),_.a.isEmpty(N.Address1)&&(v=Object(nt.a)(Object(nt.a)({},v),{},{Address1:m})),_.a.isEmpty(N.Address2)&&(v=Object(nt.a)(Object(nt.a)({},v),{},{Address2:m})),_.a.isEmpty(N.Email)&&(v=Object(nt.a)(Object(nt.a)({},v),{},{Email:m})),_.a.isEmpty(N.Email)||/^[a-zA-Z0-9.]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(N.Email)||(v=Object(nt.a)(Object(nt.a)({},v),{},{Email:"Please Enter Correct Email Format"})),console.log("validationError",v),w(v),!_.a.isEmpty(v)){t.next=36;break}return V(!0),t.prev=22,t.next=25,Le(j);case 25:(h=t.sent)&&(ce({open:!0,message:230===h.status?"Supplier with same name already exists":"Supplier Created successfully",severity:230===h.status?"error":"success"}),P({}),setTimeout((function(){e.back()}),1500)),t.next=33;break;case 29:t.prev=29,t.t0=t.catch(22),console.log("Error in creating Supplier",t.t0.message),ce({open:!0,message:t.t0.message,severity:"error"});case 33:return t.prev=33,V(!1),t.finish(33);case 36:case"end":return t.stop()}}),t,null,[[22,29,33,36]])})));return function(e){return t.apply(this,arguments)}}(),pe=[{label:"Supplier name",type:"input",value:N.VendorName,required:!0,error:null===C||void 0===C?void 0:C.VendorName,helperText:null===C||void 0===C?void 0:C.VendorName,onChange:function(e){return function(e,t){var a=Object(nt.a)(Object(nt.a)({},N),{},Object(Ot.a)({},t,e.target.value));P(a)}(e,"VendorName")},sm:6},{label:"Supplier type",type:"autocomplete",labelprop:"label",value:N.vendorTypeId,options:[{value:"1001",label:"Import"},{value:"1002",label:"Domestic"}]||[],required:!0,error:null===C||void 0===C?void 0:C.vendorTypeId,helperText:null===C||void 0===C?void 0:C.vendorTypeId,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},N),{},{vendorTypeId:t});P(a),Y(null===t||void 0===t?void 0:t.label)},sm:6},{label:"Supplier category",type:"autocomplete",labelprop:"label",value:N.vendorCatId,options:[{value:"1",label:"Company"},{value:"2",label:"Non Company"}]||[],required:!0,error:null===C||void 0===C?void 0:C.vendorCatId,helperText:null===C||void 0===C?void 0:C.vendorCatId,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},N),{},{vendorCatId:t});P(a),Z(null===t||void 0===t?void 0:t.label)},sm:6},{label:"Supplier group",type:"autocomplete",labelprop:"label",value:N.vendorGroupId,options:[{value:"FAC-9",label:"Instant Coffee Suppliers"},{value:"FAC-3",label:"Indigenous Green Coffee Suppliers"},{value:"FAC-2",label:"Imported Green Coffee Suppliers"},{value:"FAC-20",label:"Indigenous Other Raw Material Suppliers"},{value:"FAC-21",label:"Imported Other Raw Material Suppliers"}]||[],required:!0,error:null===C||void 0===C?void 0:C.vendorGroupId,helperText:null===C||void 0===C?void 0:C.vendorGroupId,onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},N),{},{vendorGroupId:t});P(a),ee(null===t||void 0===t?void 0:t.label)},sm:6}],je=[{label:"Contact name",type:"input",value:N.ContactName,required:!0,error:null===C||void 0===C?void 0:C.ContactName,helperText:null===C||void 0===C?void 0:C.ContactName,onChange:function(e){return se(e,"ContactName")},sm:6},{label:"Address1",type:"input",value:N.Address1,required:!0,error:null===C||void 0===C?void 0:C.Address1,helperText:null===C||void 0===C?void 0:C.Address1,onChange:function(e){return se(e,"Address1")},sm:6},{label:"Address2",type:"input",value:N.Address2,required:!0,error:null===C||void 0===C?void 0:C.Address2,helperText:null===C||void 0===C?void 0:C.Address2,onChange:function(e){return se(e,"Address2")},sm:6},{label:"Country",type:"autocomplete",labelprop:"label",value:N.country,options:A||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},N),{},{country:t});null!==t&&void 0!==t&&t.value?ae({countryname:t.value}).then((function(e){return M(cs(e,"state"))})).catch((function(e){return console.log("Get state error",e.message)})):(M([]),G([])),P(a)},sm:6},{label:"State",type:"autocomplete",labelprop:"label",value:N.state,options:F||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},N),{},{state:t});null!==t&&void 0!==t&&t.value?ne({statename:t.value}).then((function(e){return G(cs(e,"city"))})).catch((function(e){return console.log("Get state error",e.message)})):G([]),P(a)},sm:6},{label:"City",type:"autocomplete",labelprop:"label",value:N.city,options:H||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},N),{},{city:t});P(a)},sm:6},{label:"Pincode",type:"number",value:N.Pincode,required:"1001"!==(null===(t=N.vendorTypeId)||void 0===t?void 0:t.value),error:"1001"===(null===(a=N.vendorTypeId)||void 0===a?void 0:a.value)?"":null===C||void 0===C?void 0:C.Pincode,helperText:"1001"===(null===(i=N.vendorTypeId)||void 0===i?void 0:i.value)?"":null===C||void 0===C?void 0:C.Pincode,onChange:function(e){return se(e,"Pincode")},sm:6},{label:"Phone",type:"number",value:N.Phone,required:!0,error:null===C||void 0===C?void 0:C.Phone,helperText:null===C||void 0===C?void 0:C.Phone,onChange:function(e){return se(e,"Phone")},sm:6},{label:"Mobile",type:"number",value:N.Mobile,required:!1,error:null===C||void 0===C?void 0:C.Mobile,helperText:null===C||void 0===C?void 0:C.Mobile,onChange:function(e){return se(e,"Mobile")},sm:6},{label:"Email",type:"input",value:N.Email,required:!0,error:null===C||void 0===C?void 0:C.Email,helperText:null===C||void 0===C?void 0:C.Email,onChange:function(e){return se(e,"Email")},sm:6},{label:"Website",type:"input",value:N.Website,required:!1,error:null===C||void 0===C?void 0:C.Website,helperText:null===C||void 0===C?void 0:C.Website,onChange:function(e){return se(e,"Website")},sm:6}],me=[{label:"PAN no",type:"input",value:N.PanNo,required:"1001"!==(null===(l=N.vendorTypeId)||void 0===l?void 0:l.value),error:"1001"===(null===(o=N.vendorTypeId)||void 0===o?void 0:o.value)?"":null===C||void 0===C?void 0:C.PanNo,helperText:"1001"===(null===(s=N.vendorTypeId)||void 0===s?void 0:s.value)?"":null===C||void 0===C?void 0:C.PanNo,onChange:function(e){return de(e,"PanNo")},sm:6},{label:"GST identification no",type:"input",value:N.GstIdentificationNo,required:"1001"!==(null===(u=N.vendorTypeId)||void 0===u?void 0:u.value),error:"1001"===(null===(b=N.vendorTypeId)||void 0===b?void 0:b.value)?"":null===C||void 0===C?void 0:C.GstIdentificationNo,helperText:"1001"===(null===(p=N.vendorTypeId)||void 0===p?void 0:p.value)?"":null===C||void 0===C?void 0:C.GstIdentificationNo,onChange:function(e){return de(e,"GstIdentificationNo")},sm:6},{label:"MSME/SSI",type:"input",value:N.MsmeSsi,required:"1001"!==(null===(j=N.vendorTypeId)||void 0===j?void 0:j.value),error:"1001"===(null===(v=N.vendorTypeId)||void 0===v?void 0:v.value)?"":null===C||void 0===C?void 0:C.MsmeSsi,helperText:"1001"===(null===(h=N.vendorTypeId)||void 0===h?void 0:h.value)?"":null===C||void 0===C?void 0:C.MsmeSsi,onChange:function(e){return de(e,"MsmeSsi")},sm:6}],ve=[{label:"Bank name",type:"input",value:N.BankName,onChange:function(e){return ue(e,"BankName")}},{label:"Branch",type:"input",value:N.Branch,onChange:function(e){return ue(e,"Branch")}},{label:"Account type",type:"input",value:N.AccountType,onChange:function(e){return ue(e,"AccountType")}},{label:"Account number",type:"number",value:N.AccountNumber,onChange:function(e){return ue(e,"AccountNumber")}},{label:"IFSC code",type:"input",value:N.IfscCode,onChange:function(e){return ue(e,"IfscCode")}},{label:"MICR code",type:"input",value:N.MicrCode,onChange:function(e){return ue(e,"MicrCode")}}];return Object(ot.jsxs)("form",{className:x.root,noValidate:!0,autoComplete:"off",children:[re.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},re),{},{handleClose:function(){return ce({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsxs)(m.a,{item:!0,md:12,xs:12,children:[Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Supplier information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:pe})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Contact information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:je})})]}),"1001"!==(null===(g=N.vendorTypeId)||void 0===g?void 0:g.value)&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Identification numbers"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:me})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Bank details"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:ve})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",style:{margin:24},children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:Q,label:Q?"Loading...":"Create",onClick:be})})]})]})})]})}var ds=[{id:"description",label:"Description"},{id:"created_username",label:"Created By"},{id:"created_date",label:"Created Date"},{id:"modified_username",label:"Modified By"},{id:"modified_date",label:"Modified Date"}],us=function(e){var t=new Date(e);return e?t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear():""};var bs=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),ps=function(e){var t=bs(),a=i.a.useState(0),n=Object(c.a)(a,2),l=n[0],o=n[1],r=i.a.useState(10),s=Object(c.a)(r,2),d=s[0],u=s[1],b=[];i.a.useEffect((function(){console.log("Props Data",e.data)}),[e.data]),e.data&&e.data.map((function(e){var t,a,n,i,l;b.push((t=e.description,a=e.createduserid,n=us(e.createddate),i=e.modifieduserid,l=us(e.modifieddate),{description:t,created_username:a,created_date:n,modified_username:i,modified_date:l}))}));return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(pn.a,{children:Object(ot.jsx)(jn.a,{children:ds.map((function(e){return Object(ot.jsx)(un.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(ot.jsxs)(dn.a,{children:[b.length>0&&b.slice(l*d,l*d+d).map((function(e,t){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:ds.map((function(t,a){var n=e[t.id];return Object(ot.jsx)(un.a,{align:t.align,children:n},t.id)}))},e.code)})),0===b.length&&Object(ot.jsx)("p",{children:"No records to display"})]})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:b.length,rowsPerPage:d,page:l,onChangePage:function(e,t){o(t)},onChangeRowsPerPage:function(e){u(+e.target.value),o(0)}})]})},js=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .MuiPaper-rounded":{width:"100%"},"& .page-header":{width:"100%",marginBottom:15},"& .MuiAccordion-root":{width:"100%"},"& .dispatchTable":{maxHeight:"400px",overflowY:"auto"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"}}}));function ms(e){var t=js(),a=Object(n.useState)([]),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)([]),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)({open:!1,message:"",severity:""}),v=Object(c.a)(j,2),h=v[0],g=v[1];Object(n.useEffect)((function(){o(e.supplierData),p(e.supplierData.audit_log_vendor)}),[e.supplierData]);var x=function(){var t=Object(r.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.updateSupplierInfo();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=[{value:"Contact name",type:"label",bold:!0,sm:6,lg:6},{value:l.contact_name?l.contact_name:"-",type:"label",bold:!0,sm:6,lg:6},{value:"Address2",type:"label",bold:!0,sm:6,lg:6},{value:l.address2?l.address2:"-",type:"label",bold:!0,sm:6,lg:6},{value:"State",type:"label",bold:!0,sm:6,lg:6},{value:l.state?l.state:"-",type:"label",bold:!0,sm:6,lg:6},{value:"Pin code",type:"label",bold:!0,sm:6,lg:6},{value:l.pincode?l.pincode:"-",type:"label",bold:!0,sm:6,lg:6},{value:"Mobile",type:"label",bold:!0,sm:6,lg:6},{value:l.mobile?l.mobile:"-",type:"label",bold:!0,sm:6,lg:6},{value:"Website",type:"label",bold:!0,sm:6,lg:6},{value:l.website?l.website:"-",type:"label",bold:!0,sm:6,lg:6}],y=[{value:"Address1",type:"label",bold:!0,sm:6,lg:6},{value:l.address1?l.address1:"-",type:"label",bold:!0,sm:6,lg:6},{value:"Country",type:"label",bold:!0,sm:6,lg:6},{value:l.country?l.country:"-",type:"label",bold:!0,sm:6,lg:6},{value:"City",type:"label",bold:!0,sm:6,lg:6},{value:l.City?l.City:"-",type:"label",bold:!0,sm:6,lg:6},{value:"Phone",type:"label",bold:!0,sm:6,lg:6},{value:l.phone?l.phone:"-",type:"label",bold:!0,sm:6,lg:6},{value:"Email",type:"label",bold:!0,sm:6,lg:6},{value:l.email?l.email:"-",type:"label",bold:!0,sm:6,lg:6}],_=[{type:"label",value:"PAN no",bold:!0,sm:6,lg:6},{type:"label",value:l.pan_no?l.pan_no:"-",bold:!0,sm:6,lg:6},{type:"label",value:"GST identification no",bold:!0,sm:6,lg:6},{type:"label",value:l.gst_no?l.gst_no:"-",bold:!0,sm:6,lg:6}],C=[{type:"label",value:"MSME/SSI",bold:!0,sm:6,lg:6},{type:"label",value:l.msmessi?l.msmessi:"-",bold:!0,sm:6,lg:6}],w=[{value:"Bank name",type:"label",bold:!0,sm:6,lg:6},{type:"label",bold:!0,sm:6,lg:6,value:l.bank_name?l.bank_name:"-"},{value:"Account type",type:"label",bold:!0,sm:6,lg:6},{type:"label",bold:!0,sm:6,lg:6,value:l.account_type?l.account_type:"-"},{value:"IFSC code",type:"label",bold:!0,sm:6,lg:6},{type:"label",bold:!0,sm:6,lg:6,value:l.ifsc_code?l.ifsc_code:"-"}],S=[{value:"Branch",type:"label",bold:!0,sm:6,lg:6},{type:"label",bold:!0,sm:6,lg:6,value:l.branch?l.branch:"-"},{value:"Account number",type:"label",bold:!0,sm:6,lg:6},{type:"label",bold:!0,sm:6,lg:6,value:l.account_number?l.account_number:"-"},{value:"MICR code",type:"label",bold:!0,sm:6,lg:6},{type:"label",bold:!0,sm:6,lg:6,value:l.micr_code?l.micr_code:"-"}];return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[h.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},h),{},{handleClose:function(){return g({open:!1,message:"",severity:""})}})),Object(ot.jsxs)(ua.a,{className:"page-header",children:[Object(ot.jsx)(an.a,{title:"Supplier details",className:"cardHeader"}),Object(ot.jsx)(xa.a,{children:Object(ot.jsxs)(m.a,{container:!0,md:12,children:[Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Supplier name"}),Object(ot.jsx)(O.a,{children:l.vendor_name?l.vendor_name:"-"})]}),Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Supplier group"}),Object(ot.jsx)(O.a,{children:l.groupname?l.groupname:"-"})]}),Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Supplier category"}),Object(ot.jsx)(O.a,{children:l.vendorcatname?l.vendorcatname:"-"})]}),Object(ot.jsxs)(m.a,{item:!0,md:3,xs:12,children:[Object(ot.jsx)(O.a,{variant:"h7",children:"Supplier type"}),Object(ot.jsx)(O.a,{children:"1002"===l.vendor_type_id?"Domestic":"Import"})]})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Contact information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:f})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:y})})]})})]}),"1001"!==l.vendor_type_id&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Identification numbers"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:_})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:C})})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Bank details"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:w})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:S})})]})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(ps,{data:b})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",style:{margin:24},children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Edit",onClick:x})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:function(){return e.back()}})})]})]})}var vs=[{label:"Name",id:"vendorname"},{label:"Contact Person",id:"contactname"},{label:"Phone",id:"phone"},{label:"City",id:"city"},{label:"State",id:"state"},{label:"Country",id:"country"},{label:"Group",id:"groupname"}];var hs=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440},sortHeader:{cursor:"pointer"}}),Os=function(e){var t=hs(),a=i.a.useState(0),l=Object(c.a)(a,2),o=l[0],r=l[1],s=i.a.useState(10),d=Object(c.a)(s,2),u=d[0],b=d[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),m=j[0],v=j[1],h=i.a.useState("asc"),O=Object(c.a)(h,2),g=O[0],x=O[1],f=i.a.useState(""),y=Object(c.a)(f,2),_=y[0],C=y[1];function w(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}Object(n.useEffect)((function(){var t=[];e.data&&e.data.map((function(e){var a,n,i,l,o,r,c,s,d;t.push((a=e.vendorname,n=e.contactname,i=e.phone,l=e.city,o=e.state,r=e.country,c=e.groupname,s=e.suppliers,d=e.vendorid,{vendorname:a,contactname:n,phone:i,city:l,state:o,country:r,groupname:c,suppliers:s,number:d}))})),v(t)}),[e.data]);return console.log("Columns are",vs,m),Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(Un,{classes:t,order:g,orderBy:_,onRequestSort:function(e,t){x(_===t&&"asc"===g?"desc":"asc"),C(t)},rowCount:m.length,headCells:vs,selectedAdvancedFilters:e.selectedAdvancedFilters,clearAdvancedFilters:e.clearAdvancedFilters}),Object(ot.jsx)(dn.a,{children:m.length>0?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(m,function(e,t){return"desc"===e?function(e,a){return w(e,a,t)}:function(e,a){return-w(e,a,t)}}(g,_)).slice(o*u,o*u+u).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:vs.map((function(a,n){var i=t[a.id];return Object(ot.jsx)(un.a,{align:a.align,children:"vendorname"===a.id?Object(ot.jsx)("a",{href:"#",onClick:function(a){return n=t.number,console.log("Id is",n),void e.supplierDetails("create_supplier_edit",n);var n},children:i}):i},a.id)}))},t.code)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:m.length,rowsPerPage:u,page:o,onChangePage:function(e,t){r(t)},onChangeRowsPerPage:function(e){b(+e.target.value),r(0)}})]})},gs=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},"& .MuiPaper-rounded":{width:"100%"},"& .page-header":{width:"100%",marginBottom:15},"& .MuiAccordion-root":{width:"100%"},"& .dispatchTable":{maxHeight:"400px",overflowY:"auto"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"}}})),xs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=[];return e.map((function(e){return a.push({label:e[t],value:e[t]})})),a};function fs(e){var t=gs(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)([]),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)([]),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)([]),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)([]),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)([]),D=Object(c.a)(P,2),I=D[0],A=D[1],T=Object(n.useState)({open:!1,message:"",severity:""}),E=Object(c.a)(T,2),q=E[0],F=E[1],M=Object(n.useState)(!1),R=Object(c.a)(M,2),B=R[0],H=R[1];function G(){return(G=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){var t=Object(nt.a)({},e.supplierData);A(e.supplierData.audit_log_vendor),t.country={label:t.country,value:t.country},t.City={label:t.City,value:t.City},t.state={label:t.state,value:t.state},te().then((function(e){p(xs(e,"country"))})),""!==e.supplierData.country&&ae({countryname:e.supplierData.country}).then((function(e){return g(xs(e,"state"))})).catch((function(e){return console.log("Get state error",e.message)})),""!==e.supplierData.state&&ne({statename:e.supplierData.state}).then((function(e){return C(xs(e,"city"))})).catch((function(e){return console.log("Get state error",e.message)})),N(t)}),[e.supplierData]),Object(n.useEffect)((function(){!function(){G.apply(this,arguments)}()}),[]);var L=function(e,t){N(Object(nt.a)(Object(nt.a)({},k),{},Object(Ot.a)({},t,e.target.value))),"country"===t&&ae({countryname:e.target.value}).then((function(e){return g(xs(e,"state"))})).catch((function(e){return console.log("Get state error",e.message)})),"state"===t&&ne({statename:e.target.value}).then((function(e){return C(xs(e,"city"))})).catch((function(e){return console.log("Get state error",e.message)}))},U=function(e,t){var a=Object(nt.a)(Object(nt.a)({},k),{},Object(Ot.a)({},t,e.target.value));N(a)},Q=function(){var t=Object(r.a)(d.a.mark((function t(a){var n,i,l,r,c,s,u;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r={update:!0,updated_by:localStorage.getItem("currentUserId"),vendor_id:k.vendor_id,vendor_name:k.vendor_name,vendor_type:0,vendor_cat_name:0,vendor_group:k.vendor_group_id,lastvendorid:k.lastvendorid,vendor_type_id:k.vendor_type_id,vendor_cat_id:k.vendor_cat_id,vendor_group_id:k.vendor_group_id,pan_no:k.pan_no,gst_no:k.gst_no,msmessi:k.msmessi,bank_name:k.bank_name,branch:k.branch,account_type:k.account_type,account_number:k.account_number,ifsc_code:k.ifsc_code,micr_code:k.micr_code,contact_name:k.contact_name,address1:k.address1,address2:k.address2,city:null===(n=k.City)||void 0===n?void 0:n.value,pincode:k.pincode,state:null===(i=k.state)||void 0===i?void 0:i.value,country:null===(l=k.country)||void 0===l?void 0:l.value,phone:k.phone,mobile:k.mobile,email:k.email,website:k.website,modifieduserid:localStorage.getItem("currentUserId")},c="Please enter valid details",s={},_.a.isEmpty(k.vendor_name)&&(s=Object(nt.a)(Object(nt.a)({},s),{},{vendor_name:c})),_.a.isEmpty(k.contact_name)&&(s=Object(nt.a)(Object(nt.a)({},s),{},{contact_name:c})),"1001"!==k.vendor_type_id&&_.a.isEmpty(k.pan_no)&&(s=Object(nt.a)(Object(nt.a)({},s),{},{pan_no:c})),"1001"!==k.vendor_type_id&&_.a.isEmpty(k.gst_no)&&(s=Object(nt.a)(Object(nt.a)({},s),{},{gst_no:c})),"1001"!==k.vendor_type_id&&_.a.isEmpty(k.msmessi)&&(s=Object(nt.a)(Object(nt.a)({},s),{},{msmessi:c})),_.a.isEmpty(k.vendor_group_id)&&(s=Object(nt.a)(Object(nt.a)({},s),{},{vendor_group_id:c})),_.a.isEmpty(k.vendor_type_id)&&(s=Object(nt.a)(Object(nt.a)({},s),{},{vendor_type_id:c})),_.a.isEmpty(k.vendor_cat_id)&&(s=Object(nt.a)(Object(nt.a)({},s),{},{vendor_cat_id:c})),_.a.isEmpty(k.phone)&&(s=Object(nt.a)(Object(nt.a)({},s),{},{phone:c})),"1001"!==k.vendor_type_id&&_.a.isEmpty(k.pincode)&&(s=Object(nt.a)(Object(nt.a)({},s),{},{pincode:c})),_.a.isEmpty(k.address1)&&(s=Object(nt.a)(Object(nt.a)({},s),{},{address1:c})),_.a.isEmpty(k.address2)&&(s=Object(nt.a)(Object(nt.a)({},s),{},{address2:c})),_.a.isEmpty(k.email)&&(s=Object(nt.a)(Object(nt.a)({},s),{},{email:c})),_.a.isEmpty(k.email)||/^[a-zA-Z0-9.]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(k.email)||(s=Object(nt.a)(Object(nt.a)({},s),{},{email:"Please Enter Correct Email Format"})),o(s),!_.a.isEmpty(s)){t.next=37;break}return H(!0),t.prev=21,t.next=24,Le(r);case 24:(u=t.sent)&&(F({open:!0,message:230===u.status?"Supplier with same name already exists":"Supplier Updated successfully",severity:230===u.status?"error":"success"}),N({}),N({}),N({}),N({}),setTimeout((function(){e.back()}),1500)),t.next=32;break;case 28:t.prev=28,t.t0=t.catch(21),console.log("Error in creating Supplier",t.t0.message),F({open:!0,message:t.t0.message,severity:"error"});case 32:return t.prev=32,H(!1),t.finish(32);case 35:t.next=39;break;case 37:F({open:!0,message:"Please fill all mandatory fields",severity:"error"}),setTimeout((function(){F({open:!1,message:""})}),[2e3]);case 39:case"end":return t.stop()}}),t,null,[[21,28,32,35]])})));return function(e){return t.apply(this,arguments)}}(),V=[{label:"Supplier name",type:"input",value:k.vendor_name,required:!0,error:null===l||void 0===l?void 0:l.vendor_name,helperText:null===l||void 0===l?void 0:l.vendor_name,onChange:function(e){return L(e,"vendor_name")}},{label:"Supplier type",type:"select",value:k.vendor_type_id?k.vendor_type_id:"",required:!0,options:[{value:"1001",label:"Import"},{value:"1002",label:"Domestic"}]||[],error:null===l||void 0===l?void 0:l.vendor_type_id,helperText:null===l||void 0===l?void 0:l.vendor_type_id,onChange:function(e){return function(e,t){var a=Object(nt.a)(Object(nt.a)({},k),{},{vendor_type_id:e.target.value});N(a)}(e)}},{label:"Supplier category",type:"select",value:k.vendor_cat_id?k.vendor_cat_id:"",required:!0,options:[{value:"1",label:"Company"},{value:"2",label:"Non Company"}]||[],error:null===l||void 0===l?void 0:l.vendor_cat_id,helperText:null===l||void 0===l?void 0:l.vendor_cat_id,onChange:function(e){return function(e,t){var a=Object(nt.a)(Object(nt.a)({},k),{},{vendor_cat_id:e.target.value});N(a)}(e)}},{label:"Supplier group",type:"select",value:k.vendor_group_id?k.vendor_group_id:"",required:!0,options:[{value:"FAC-9",label:"Instant Coffee Supplier"},{value:"FAC-3",label:"Indigenous Green Coffee Supplier"},{value:"FAC-2",label:"Imported Green Coffee Supplier"},{value:"FAC-20",label:"Indigenous Other Raw Material Suppliers"},{value:"FAC-21",label:"Imported Other Raw Material Suppliers"}]||[],error:null===l||void 0===l?void 0:l.vendor_group_id,helperText:null===l||void 0===l?void 0:l.vendor_group_id,onChange:function(e){return function(e,t){var a=Object(nt.a)(Object(nt.a)({},k),{},{vendor_group_id:e.target.value});N(a)}(e)}}],z=[{label:"Contact name",type:"input",value:k.contact_name,required:!0,error:null===l||void 0===l?void 0:l.contact_name,helperText:null===l||void 0===l?void 0:l.contact_name,onChange:function(e){return L(e,"contact_name")}},{label:"Address1",type:"input",value:k.address1,required:!0,error:null===l||void 0===l?void 0:l.address1,helperText:null===l||void 0===l?void 0:l.address1,onChange:function(e){return L(e,"address1")}},{label:"Address2",type:"input",value:k.address2,required:!0,error:null===l||void 0===l?void 0:l.address2,helperText:null===l||void 0===l?void 0:l.address2,onChange:function(e){return L(e,"address2")}},{label:"Country",type:"autocomplete",labelprop:"label",value:k.country?k.country:"",options:b||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},k),{},{country:t});null!==t&&void 0!==t&&t.value?ae({countryname:t.value}).then((function(e){return g(xs(e,"state"))})).catch((function(e){return console.log("Get state error",e.message)})):(g([]),C([]),a.state=null,a.City=null),N(a)}},{label:"State",type:"autocomplete",labelprop:"label",value:k.state?k.state:"",options:h||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},k),{},{state:t});null!==t&&void 0!==t&&t.value?ne({statename:t.value}).then((function(e){return C(xs(e,"city"))})).catch((function(e){return console.log("Get state error",e.message)})):(C([]),a.City=null),N(a)}},{label:"City",type:"autocomplete",labelprop:"label",value:k.City?k.City:"",options:y||[],onChange:function(e,t){var a=Object(nt.a)(Object(nt.a)({},k),{},{City:t});N(a)}},{label:"Pin code",type:"number",value:k.pincode,required:"1001"!==k.pincode,error:"1001"===k.pincode?"":null===l||void 0===l?void 0:l.pan_no,helperText:"1001"===k.pincode?"":null===l||void 0===l?void 0:l.pan_no,onChange:function(e){return L(e,"pincode")}},{label:"Phone",type:"number",value:k.phone,required:!0,error:null===l||void 0===l?void 0:l.phone,helperText:null===l||void 0===l?void 0:l.phone,onChange:function(e){return L(e,"phone")}},{label:"Mobile",type:"number",value:k.mobile,onChange:function(e){return L(e,"mobile")}},{label:"Email",type:"input",value:k.email,required:!0,error:null===l||void 0===l?void 0:l.email,helperText:null===l||void 0===l?void 0:l.email,onChange:function(e){return L(e,"email")}},{label:"Website",type:"input",value:k.website,onChange:function(e){return L(e,"website")}}],W=[{label:"PAN no",type:"input",value:k.pan_no,required:"1001"!==k.vendor_type_id,error:"1001"===k.vendor_type_id?"":null===l||void 0===l?void 0:l.pan_no,helperText:"1001"===k.vendor_type_id?"":null===l||void 0===l?void 0:l.pan_no,onChange:function(e){return L(e,"pan_no")}},{label:"GST identification no",type:"input",value:k.gst_no,required:"1001"!==k.vendor_type_id,error:"1001"===k.vendor_type_id?"":null===l||void 0===l?void 0:l.gst_no,helperText:"1001"===k.vendor_type_id?"":null===l||void 0===l?void 0:l.gst_no,onChange:function(e){return L(e,"gst_no")}},{label:"MSME/SSI",type:"input",value:k.msmessi,required:"1001"!==k.vendor_type_id,error:"1001"===k.vendor_type_id?"":null===l||void 0===l?void 0:l.msmessi,helperText:"1001"===k.vendor_type_id?"":null===l||void 0===l?void 0:l.msmessi,onChange:function(e){return L(e,"msmessi")}}],Y=[{label:"Bank name",type:"input",value:k.bank_name,onChange:function(e){return U(e,"bank_name")}},{label:"Branch",type:"input",value:k.branch,onChange:function(e){return U(e,"branch")}},{label:"Account type",type:"input",value:k.account_type,onChange:function(e){return U(e,"account_type")}},{label:"Account number",type:"input",value:k.account_number,onChange:function(e){return U(e,"account_number")}},{label:"IFSC code",type:"input",value:k.ifsc_code,onChange:function(e){return U(e,"ifsc_code")}},{label:"MICR code",type:"input",value:k.micr_code,onChange:function(e){return U(e,"micr_code")}}];return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[q.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},q),{},{handleClose:function(){return F({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsxs)(m.a,{item:!0,md:12,xs:12,children:[Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Supplier information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:V})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Contact information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:z})})]}),"1001"!==k.vendor_type_id&&Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Identification numbers"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:W})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Bank details"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(tn,{payload:Y})})]}),Object(ot.jsxs)(nn.a,{defaultExpanded:!0,children:[Object(ot.jsx)(ln.a,{expandIcon:Object(ot.jsx)(cn.a,{}),children:Object(ot.jsx)(m.a,{id:"top-row",container:!0,style:{margin:6},children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Audit log information"})})})}),Object(ot.jsx)(on.a,{children:Object(ot.jsx)(ps,{data:I})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",style:{margin:24},children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:B,label:B?"Loading...":"Save",onClick:Q})})]})]})})]})}var ys=Object(g.a)((function(e){return{root:{paddingTop:e.spacing(3),minWidth:"100%"},formControl:{margin:e.spacing(1),marginTop:e.spacing(2),minWidth:120},modal:{position:"absolute",margin:"auto",top:"25%",left:"25%",width:700,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),_s=function(e){var t=(0,Jt().getCurrentUserDetails)().id,a=Object(n.useState)("allsuppliers"),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)(null),u=Object(c.a)(s,2),b=u[0],p=u[1],j=ys(),v=Object(n.useState)(!1),h=Object(c.a)(v,2),O=h[0],g=h[1],f=Object(n.useState)(!1),y=Object(c.a)(f,2),C=y[0],w=y[1],S=Object(n.useState)(-1),k=Object(c.a)(S,2),N=k[0],P=k[1],D=Object(n.useState)(null),I=Object(c.a)(D,2),A=I[0],T=I[1],E=Object(n.useState)({}),q=Object(c.a)(E,2),F=q[0],M=q[1],R=Object(n.useState)(!1),B=Object(c.a)(R,2),H=B[0],G=B[1],L=Object(n.useState)(!1),U=Object(c.a)(L,2),Q=U[0],V=U[1],z=function(){var e=Object(r.a)(d.a.mark((function e(a,n){var i,l,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Val ",a,n),i="","allsuppliers"!==n&&(_.a.isEmpty(i)||(i+=" AND "),i+="groupname = '".concat(n,"'")),_.a.isEmpty(a)||(_.a.isEmpty(i)||(i+=" AND "),i+="".concat(a)),l={filter:i,loggedinuserid:t},e.next=7,Ge(l);case 7:o=e.sent,T(o);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){z(b,l)}),[b,l]),Object(n.useEffect)((function(){H||C||O||(p(null===b?void 0:null),o("Instant Coffee Suppliers"),o("allsuppliers"))}),[H,C,O]);var W,Y=function(){var e=Object(r.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(t.target.value),p(null);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(r.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!O),P(a),e.next=4,Le({view:!0,vendor_id:a});case 4:n=e.sent,M(n);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return W=H?Object(ot.jsx)(ss,{back:function(){G(!1)}}):C?Object(ot.jsx)(fs,{back:function(){w(!C)},id:N,supplierData:F}):O?Object(ot.jsx)(ms,{back:function(){g(!O)},supplierData:F,updateSupplierInfo:function(){return g(!O),void w(!0)},id:N}):Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0,children:Object(ot.jsxs)(Da.a,{variant:"outlined",className:j.formControl,children:[Object(ot.jsx)(Ia.a,{htmlFor:"outlined-age-native-simple",children:"View"}),Object(ot.jsxs)(Aa.a,{native:!0,value:l,onChange:Y,label:"View",inputProps:{name:"view",id:"outlined-view-native-simple"},children:[Object(ot.jsx)("option",{value:"allsuppliers",children:"All Suppliers"}),Object(ot.jsx)("option",{value:"Instant Coffee Suppliers",children:"Instant Coffee Suppliers"}),Object(ot.jsx)("option",{value:"Indegenious Green Coffee Supliers",children:"Indigenous Green Coffee Suppliers"}),Object(ot.jsx)("option",{value:"Imported Green Coffee Suppliers",children:"Imported Green Coffee Suppliers"}),Object(ot.jsx)("option",{value:"Indigenous Other Raw Material Suppliers",children:"Indigenous Other Raw Material Suppliers"}),Object(ot.jsx)("option",{value:"Imported Other Raw Material Suppliers",children:"Imported Other Raw Material Suppliers"})]})]})}),Object(ot.jsxs)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:[null!==A&&Object(ot.jsx)(pi,{onClick:function(){V(!0)},label:"Export to excel"}),Object(ot.jsx)(Rn,{onClick:function(){G(!H)},label:"Create Supplier",variant:"extended"})]})]}),!0===Q&&Object(ot.jsx)(ui,{tableData:A,tableName:"Supplier"}),Object(ot.jsx)(Os,{data:A,selectedAdvancedFilters:function(e){return p(e)},clearAdvancedFilters:function(){return p(null)},supplierDetails:function(e,t){return K(e,t)}})]}),Object(ot.jsx)(x.a,{className:j.root,children:W})},Cs=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"}}})),ws=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=[];return null===e||void 0===e||e.map((function(e){return a.push({label:e[t],value:e[t]})})),a};function Ss(e){var t=Cs(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)({}),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)([]),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)([]),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)([]),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)([]),D=Object(c.a)(P,2),I=D[0],A=D[1],T=Object(n.useState)([]),E=Object(c.a)(T,2),q=E[0],F=E[1],M=Object(n.useState)([]),R=Object(c.a)(M,2),B=R[0],G=R[1],L=Object(n.useState)([]),U=Object(c.a)(L,2),V=U[0],z=U[1],W=Object(n.useState)([]),Y=Object(c.a)(W,2),le=Y[0],oe=Y[1],re=Object(n.useState)([]),ce=Object(c.a)(re,2),se=ce[0],de=ce[1],ue=Object(n.useState)([]),be=Object(c.a)(ue,2),pe=be[0],je=be[1],me=Object(n.useState)({}),ve=Object(c.a)(me,2),he=ve[0],Oe=ve[1],ge=Object(n.useState)({}),xe=Object(c.a)(ge,2),fe=xe[0],ye=xe[1],_e=Object(n.useState)({open:!1,message:"",severity:""}),Ce=Object(c.a)(_e,2),we=Ce[0],Se=Ce[1],ke=Object(n.useState)(!1),Ne=Object(c.a)(ke,2),Pe=Ne[0],De=Ne[1];Object(n.useEffect)((function(){K().then((function(e){return g(ws(e,"userrole"))})),J().then((function(e){return C(ws(e,"compname"))})),Z().then((function(e){return N(ws(e,"desgName"))})),X().then((function(e){return A(ws(e,"deptname"))})),ee().then((function(e){return e&&G(ws(e,"delegatedapprover"))})),te().then((function(e){return z(ws(e,"country"))})),ie().then((function(e){return je(ws(e,"userprofile"))}))}),[]);var Ie=function(e,t){var a=Object(nt.a)(Object(nt.a)({},b),{},Object(Ot.a)({},t,e.target.value));p(a),"department"===t&&$({deptname:e.target.value}).then((function(e){return F(ws(e,"division"))}))},Ae=function(e,t){Oe(Object(nt.a)(Object(nt.a)({},he),{},Object(Ot.a)({},t,e.target.value))),"country"===t&&ae({countryname:e.target.value}).then((function(e){return oe(ws(e,"state"))})).catch((function(e){return console.log("Get state error",e.message)})),"state"===t&&ne({statename:e.target.value}).then((function(e){return de(ws(e,"city"))})).catch((function(e){return console.log("Get state error",e.message)}))},Te=function(e,t){ye(Object(nt.a)(Object(nt.a)({},fe),{},Object(Ot.a)({},t,e.target.value)))};function Ee(e){return/\S+@\S+\.\S+/.test(e)}var qe=function(){var t=Object(r.a)(d.a.mark((function t(a){var n,i,l,c,s,u,j,m,v,h,O,g,x,f,y,C,w,S,k,N,P,D,I,A,T,E,q,F,M;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=b.firstName,i=b.lastName,l=b.middlename,c=b.email,s=b.alias,u=b.username,j=b.empcode,m=b.designation,v=b.company,h=b.employee,O=b.department,g=b.division,x=b.role,f=b.title,y=b.active,C=b.profile,w=b.phone,S=b.mobile,k=b.extension,N=he.street,P=he.city,D=he.state,I=he.postalcode,A=he.country,T={userid:(new Date).getTime(),emailid:null===c||void 0===c?void 0:c.trim(),password:"Ccl@1234",firstname:n,lastname:i,middlename:l,alias:s,username:null===u||void 0===u?void 0:u.trim(),empcode:j,designation:m,company:v,employee:h,department:O,division:g,role:x,title:f,active:y,ext:k,phone:w,mobile:S,profile:null===b||void 0===b?void 0:b.profile,delegatedapprover:null===fe||void 0===fe?void 0:fe.delegatedapprover,manager:null===fe||void 0===fe?void 0:fe.manager,street:N,city:P,state:D,postalcode:I,country:A},E="Please enter valid details",q={},_.a.isEmpty(n)&&(q=Object(nt.a)(Object(nt.a)({},q),{},{firstName:E})),_.a.isEmpty(i)&&(q=Object(nt.a)(Object(nt.a)({},q),{},{lastName:E})),_.a.isEmpty(c)&&(q=Object(nt.a)(Object(nt.a)({},q),{},{email:E})),_.a.isEmpty(s)&&(q=Object(nt.a)(Object(nt.a)({},q),{},{alias:E})),_.a.isEmpty(u)&&(q=Object(nt.a)(Object(nt.a)({},q),{},{username:E})),_.a.isEmpty(j)&&(q=Object(nt.a)(Object(nt.a)({},q),{},{empcode:E})),_.a.isEmpty(x)&&(q=Object(nt.a)(Object(nt.a)({},q),{},{role:E})),_.a.isEmpty(C)&&(q=Object(nt.a)(Object(nt.a)({},q),{},{profile:E})),_.a.isEmpty(P)&&(q=Object(nt.a)(Object(nt.a)({},q),{},{city:E})),_.a.isEmpty(D)&&(q=Object(nt.a)(Object(nt.a)({},q),{},{state:E})),_.a.isEmpty(A)&&(q=Object(nt.a)(Object(nt.a)({},q),{},{country:E})),_.a.isEmpty(N)&&(q=Object(nt.a)(Object(nt.a)({},q),{},{street:E})),_.a.isEmpty(I)&&(q=Object(nt.a)(Object(nt.a)({},q),{},{postalcode:E})),c===u&&(q=Object(nt.a)(Object(nt.a)({},q),{},{username:E})),Ee(c)||(q=Object(nt.a)(Object(nt.a)({},q),{},{email:"Please enter valid email"})),/[A-Z]/.test(c)&&(q=Object(nt.a)(Object(nt.a)({},q),{},{email:"Email id should not contain capital letter."})),o(q),!_.a.isEmpty(q)){t.next=48;break}return De(!0),t.prev=25,t.next=28,H(T);case 28:if(F=t.sent,console.log("response::",F),!F){t.next=37;break}if(230!==F.status){t.next=33;break}throw{message:"User with same email already exists"};case 33:Se({open:!0,message:"User created successfully",severity:"success"}),p({}),ye({}),setTimeout((function(){e.back(),e.updateCreationInfo()}),1500);case 37:M={username:null===c||void 0===c?void 0:c.trim()},void 0!==T.active&&T.active||setTimeout(Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(M);case 2:case"end":return e.stop()}}),e)}))),5e3),t.next=45;break;case 41:t.prev=41,t.t0=t.catch(25),console.log("Error in creating user",t.t0.message),Se({open:!0,message:t.t0.message,severity:"error"});case 45:return t.prev=45,De(!1),t.finish(45);case 48:case"end":return t.stop()}}),t,null,[[25,41,45,48]])})));return function(e){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[we.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},we),{},{handleClose:function(){return Se({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"General Information"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:4,children:Object(ot.jsx)(Fa,{label:"First name",value:b.name,onChange:function(e){return Ie(e,"firstName")},error:null===l||void 0===l?void 0:l.firstName,helperText:null===l||void 0===l?void 0:l.firstName,required:!0})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:4,children:Object(ot.jsx)(Fa,{label:"Middle name",value:b.middlename,onChange:function(e){return Ie(e,"middlename")}})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:4,children:Object(ot.jsx)(Fa,{label:"Last name",value:b.lastName,onChange:function(e){return Ie(e,"lastName")},error:null===l||void 0===l?void 0:l.lastName,helperText:null===l||void 0===l?void 0:l.lastName,required:!0})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Alias",value:b.alias,onChange:function(e){return Ie(e,"alias")},error:null===l||void 0===l?void 0:l.alias,helperText:null===l||void 0===l?void 0:l.alias,required:!0})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Email",value:b.email,onChange:function(e){return Ie(e,"email")},error:null===l||void 0===l?void 0:l.email,helperText:null===l||void 0===l?void 0:l.email,required:!0})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Username",value:b.username,onChange:function(e){return Ie(e,"username")},error:null===l||void 0===l?void 0:l.username,helperText:null===l||void 0===l?void 0:l.username,required:!0})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"EMP code",value:b.empcode,onChange:function(e){return Ie(e,"empcode")},error:null===l||void 0===l?void 0:l.empcode,helperText:null===l||void 0===l?void 0:l.empcode,required:!0})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:2,sm:1,children:Object(ot.jsx)(Fa,{label:"Ext",value:b.extension,onChange:function(e){return Ie(e,"extension")}})}),Object(ot.jsx)(m.a,{item:!0,xs:10,sm:5,children:Object(ot.jsx)(Fa,{label:"Phone",value:b.phone,onChange:function(e){return Ie(e,"phone")},inputProps:{maxLength:10}})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Mobile",value:b.mobile,onChange:function(e){return Ie(e,"mobile")},inputProps:{maxLength:10}})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Designation",value:b.designation,onChange:function(e){return Ie(e,"designation")},options:k||[]})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Company",value:b.company,onChange:function(e){return Ie(e,"company")},options:y||[]})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Department",value:b.department,onChange:function(e){return Ie(e,"department")},options:I||[]})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Division",value:b.division,onChange:function(e){return Ie(e,"division")},options:q||[]})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Da.a,{error:null===l||void 0===l?void 0:l.role,fullWidth:!0,children:Object(ot.jsx)(qa,{label:"Role *",value:b.role,onChange:function(e){return Ie(e,"role")},options:h||[],error:null===l||void 0===l?void 0:l.role,helperText:null===l||void 0===l?void 0:l.role,required:!0})})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Da.a,{error:null===l||void 0===l?void 0:l.profile,fullWidth:!0,children:Object(ot.jsx)(qa,{label:"Profile *",value:b.profile,onChange:function(e){return Ie(e,"profile")},options:pe||[],error:null===l||void 0===l?void 0:l.profile,helperText:null===l||void 0===l?void 0:l.profile,required:!0})})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Employee",value:b.employee,onChange:function(e){return Ie(e,"employee")},options:[{label:"YES",value:!0},{label:"NO",value:!1}]})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Title",value:b.title,onChange:function(e){return Ie(e,"title")}})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,spacing:24,children:Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Active",value:b.active,onChange:function(e){return Ie(e,"active")},options:[{label:"Active",value:!0},{label:"In Active",value:!1}]})})}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Approver settings"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Delegated approver",value:fe.delegatedapprover,onChange:function(e){return Te(e,"delegatedapprover")},options:B||[]})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Manager",value:fe.manager,onChange:function(e){return Te(e,"manager")},options:B||[]})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Mailing address"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Country *",value:he.country,onChange:function(e){return Ae(e,"country")},options:V||[],error:null===l||void 0===l?void 0:l.country,helperText:null===l||void 0===l?void 0:l.country,required:!0})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"State/Province *",value:he.state,onChange:function(e){return Ae(e,"state")},options:le||[],error:null===l||void 0===l?void 0:l.state,helperText:null===l||void 0===l?void 0:l.state,required:!0})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Address",value:he.street,onChange:function(e){return Ae(e,"street")},rows:3,multiline:!0,error:null===l||void 0===l?void 0:l.street,helperText:null===l||void 0===l?void 0:l.street,required:!0})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"City *",value:he.city,onChange:function(e){return Ae(e,"city")},options:se||[],error:null===l||void 0===l?void 0:l.city,helperText:null===l||void 0===l?void 0:l.city,required:!0})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,spacing:24,children:Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Zip/Postal code",value:he.postalcode,onChange:function(e){return Ae(e,"postalcode")},error:null===l||void 0===l?void 0:l.postalcode,helperText:null===l||void 0===l?void 0:l.postalcode,required:!0})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:Pe,label:Pe?"Loading...":"Create User",onClick:qe})})]})]})}var ks=function(e){var t=Object(n.useState)({}),a=Object(c.a)(t,2),i=a[0],l=a[1];Object(n.useEffect)((function(){!function(){var t;L({type:"getuser",emailid:null===(t=e.emailId)||void 0===t?void 0:t.toString()}).then((function(e){l(e)}))}()}),[]);var o,r=[{type:"label",value:"First name",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.firstname,sm:"6"},{type:"label",value:"Middle name",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.middlename,sm:"6"},{type:"label",value:"Last name",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.lastname,sm:"6"},{type:"label",value:"Alias",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.alias,sm:"6"},{type:"label",value:"Email",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.emailid,sm:"6"},{type:"label",value:"EMP code",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.empcode,sm:"6"},{type:"label",value:"Phone ",bold:!0,sm:"6"},{type:"label",value:(null===i||void 0===i?void 0:i.ext)+"-"+(null===i||void 0===i?void 0:i.phone),sm:"6"},{type:"label",value:"Mobile",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.mobile,sm:"6"}],s=[{type:"label",value:"Designation",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.designation,sm:"6"},{type:"label",value:"Company",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.company,sm:"6"},{type:"label",value:"Department",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.department,sm:"6"},{type:"label",value:"Division",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.division,sm:"6"},{type:"label",value:"Role",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.role,sm:"6"},{type:"label",value:"Profile",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.profile,sm:"6"},{type:"label",value:"Employee",bold:!0,sm:"6"},{type:"label",value:null!==i&&void 0!==i&&i.employee?"Yes":"No",sm:"6"},{type:"label",value:"Title",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.title,sm:"6"},{type:"label",value:"Active",bold:!0,sm:"6"},{type:"label",value:null!==i&&void 0!==i&&i.active?"Yes":"No",sm:"6"}],d=[{type:"label",value:"Delegated approver",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.delegatedapprover,sm:"6"}],u=[{type:"label",value:"Manager",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.manager,sm:"6"}],b=[{type:"label",value:"Address",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.street,sm:"6"},{type:"label",value:"Country",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.country,sm:"6"}],p=[{type:"label",value:"State/provision",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.state,sm:"6"},{type:"label",value:"City",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.city,sm:"6"},{type:"label",value:"Zip/Postal code",bold:!0,sm:"6"},{type:"label",value:null===i||void 0===i?void 0:i.postalcode,sm:"6"}];return o=Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"General information"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:r})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:s})})]}),Object(ot.jsx)("br",{}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Approval setting"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:d})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:u})})]}),Object(ot.jsx)("br",{}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Mailing address"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,children:[Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:b})}),Object(ot.jsx)(m.a,{id:"top-row",xs:12,md:6,container:!0,direction:"column",children:Object(ot.jsx)(tn,{payload:p})})]}),Object(ot.jsx)("br",{}),Object(ot.jsxs)(m.a,{container:!0,xs:12,md:12,style:{margin:24},justify:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Edit",onClick:function(t){return e.edit("edit_user",e.emailId)}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Cancel",onClick:e.back})})]})]}),Object(ot.jsx)(ot.Fragment,{children:o})},Ns=Object(g.a)((function(e){return{root:{"& .MuiTextField-root":{marginTop:10},"& .MuiFormControl-fullWidth":{width:"95%"},flexGrow:1,justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"}}})),Ps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=[];return null===e||void 0===e||e.map((function(e){return a.push({label:e[t],value:e[t]})})),a};function Ds(e){var t=Ns(),a=Object(n.useState)({}),i=Object(c.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)({}),u=Object(c.a)(s,2),b=u[0],p=u[1],j=Object(n.useState)([]),v=Object(c.a)(j,2),h=v[0],g=v[1],x=Object(n.useState)([]),f=Object(c.a)(x,2),y=f[0],C=f[1],w=Object(n.useState)([]),S=Object(c.a)(w,2),k=S[0],N=S[1],P=Object(n.useState)([]),D=Object(c.a)(P,2),I=D[0],A=D[1],T=Object(n.useState)([]),E=Object(c.a)(T,2),q=E[0],F=E[1],M=Object(n.useState)([]),R=Object(c.a)(M,2),B=R[0],H=R[1],V=Object(n.useState)([]),z=Object(c.a)(V,2),W=z[0],Y=z[1],le=Object(n.useState)([]),oe=Object(c.a)(le,2),re=oe[0],ce=oe[1],se=Object(n.useState)([]),de=Object(c.a)(se,2),ue=de[0],be=de[1],pe=Object(n.useState)([]),je=Object(c.a)(pe,2),me=je[0],ve=je[1],he=Object(n.useState)({}),Oe=Object(c.a)(he,2),ge=Oe[0],xe=Oe[1],fe=Object(n.useState)({}),ye=Object(c.a)(fe,2),_e=ye[0],Ce=ye[1],we=Object(n.useState)({open:!1,message:"",severity:""}),Se=Object(c.a)(we,2),ke=Se[0],Ne=Se[1],Pe=Object(n.useState)(!1),De=Object(c.a)(Pe,2),Ie=De[0],Ae=De[1];Object(n.useEffect)((function(){var t;K().then((function(e){return g(Ps(e,"userrole"))})),J().then((function(e){return C(Ps(e,"compname"))})),Z().then((function(e){return N(Ps(e,"desgName"))})),X().then((function(e){return A(Ps(e,"deptname"))})),ee().then((function(e){return e&&H(Ps(e,"delegatedapprover"))})),te().then((function(e){return Y(Ps(e,"country"))})),ie().then((function(e){return ve(Ps(e,"userprofile"))})),L({type:"getuser",emailid:null===(t=e.emailId)||void 0===t?void 0:t.toString()}).then((function(e){p(e,"generalInfo"),xe(e,"mailingAddress"),Ce(e,"approver"),e.country&&ae({countryname:e.country}).then((function(e){return ce(Ps(e,"state"))})).catch((function(e){return console.log("Get state error",e.message)})),e.state&&ne({statename:e.state}).then((function(e){return be(Ps(e,"city"))})).catch((function(e){return console.log("Get state error",e.message)})),e.department&&$({deptname:e.department}).then((function(e){return F(Ps(e,"division"))}))}))}),[]);var Te=function(e,t){console.log("event.target.value",e.target.value),console.log("key",t);var a=Object(nt.a)(Object(nt.a)({},b),{},Object(Ot.a)({},t,e.target.value));p(a),"department"===t&&$({deptname:e.target.value}).then((function(e){return F(Ps(e,"division"))}))},Ee=function(e,t){console.log("event.target.value",e.target.value),console.log("key",t),xe(Object(nt.a)(Object(nt.a)({},ge),{},Object(Ot.a)({},t,e.target.value))),"country"===t&&ae({countryname:e.target.value}).then((function(e){return ce(Ps(e,"state"))})).catch((function(e){return console.log("Get state error",e.message)})),"state"===t&&ne({statename:e.target.value}).then((function(e){return be(Ps(e,"city"))})).catch((function(e){return console.log("Get state error",e.message)}))},qe=function(e,t){console.log("Value",e.target.value),console.log("Key",t),Ce(Object(nt.a)(Object(nt.a)({},_e),{},Object(Ot.a)({},t,e.target.value)))},Fe=function(){var t=Object(r.a)(d.a.mark((function t(a){var n,i,l,r,c,s,u,j,m,v,h,O,g,x,f,y,C,w,S,k,N,P,D,I,A,T,E,q,F;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=b.firstname,i=b.lastname,l=b.middlename,r=b.emailid,c=b.alias,s=b.username,u=b.empcode,j=b.designation,m=b.company,v=b.employee,h=b.department,O=b.division,g=b.role,x=b.title,f=b.active,y=b.profile,C=b.phone,w=b.mobile,S=b.ext,k=ge.street,N=ge.city,P=ge.state,D=ge.postalcode,I=ge.country,A={update:!0,emailid:r.trim(),firstname:n,lastname:i,middlename:l,alias:c,username:s.trim(),empcode:u,designation:j,company:m,employee:v,department:h,division:O,role:g,title:x,active:f,ext:S,phone:C,mobile:w,profile:b.profile,delegatedapprover:_e.delegatedapprover,manager:_e.manager,street:k,city:N,state:P,postalcode:D,country:I},T="Please enter valid details",E={},_.a.isEmpty(n)&&(E=Object(nt.a)(Object(nt.a)({},E),{},{firstName:T})),_.a.isEmpty(i)&&(E=Object(nt.a)(Object(nt.a)({},E),{},{lastName:T})),_.a.isEmpty(r)&&(E=Object(nt.a)(Object(nt.a)({},E),{},{email:T})),_.a.isEmpty(c)&&(E=Object(nt.a)(Object(nt.a)({},E),{},{alias:T})),_.a.isEmpty(s)&&(E=Object(nt.a)(Object(nt.a)({},E),{},{username:T})),_.a.isEmpty(u)&&(E=Object(nt.a)(Object(nt.a)({},E),{},{empcode:T})),_.a.isEmpty(g)&&(E=Object(nt.a)(Object(nt.a)({},E),{},{role:T})),_.a.isEmpty(y)&&(E=Object(nt.a)(Object(nt.a)({},E),{},{profile:T})),_.a.isEmpty(N)&&(E=Object(nt.a)(Object(nt.a)({},E),{},{city:T})),_.a.isEmpty(P)&&(E=Object(nt.a)(Object(nt.a)({},E),{},{state:T})),_.a.isEmpty(I)&&(E=Object(nt.a)(Object(nt.a)({},E),{},{country:T})),_.a.isEmpty(k)&&(E=Object(nt.a)(Object(nt.a)({},E),{},{street:T})),_.a.isEmpty(D)&&(E=Object(nt.a)(Object(nt.a)({},E),{},{postalcode:T})),r===s&&(E=Object(nt.a)(Object(nt.a)({},E),{},{username:T})),console.log("validationError",E),o(E),!_.a.isEmpty(E)){t.next=54;break}return Ae(!0),t.prev=24,t.next=27,G(A);case 27:if((q=t.sent)&&(Ne({open:!0,message:"User edited successfully"}),p({}),Ce({}),setTimeout((function(){e.back(),e.update()}),1500)),t.prev=29,F={username:r.trim()},void 0!==A.active&&A.active){t.next=36;break}return t.next=34,Q(F);case 34:t.next=39;break;case 36:if(!A.active){t.next=39;break}return t.next=39,U(F);case 39:console.log("response",q),t.next=45;break;case 42:t.prev=42,t.t0=t.catch(29),console.log("User status is already in place",t.t0.message);case 45:t.next=51;break;case 47:t.prev=47,t.t1=t.catch(24),console.log("Error in updating user",t.t1.message),Ne({open:!0,message:t.t1.message,severity:"error"});case 51:return t.prev=51,Ae(!1),t.finish(51);case 54:case"end":return t.stop()}}),t,null,[[24,47,51,54],[29,42]])})));return function(e){return t.apply(this,arguments)}}();return Object(ot.jsxs)("form",{className:t.root,noValidate:!0,autoComplete:"off",children:[ke.open&&Object(ot.jsx)(ct,Object(nt.a)(Object(nt.a)({},ke),{},{handleClose:function(){return Ne({open:!1,message:"",severity:""})}})),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"General Information"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:4,children:Object(ot.jsx)(Fa,{label:"First name",value:b.firstname||"",onChange:function(e){return Te(e,"firstname")},error:null===l||void 0===l?void 0:l.firstName,helperText:null===l||void 0===l?void 0:l.firstName,required:!0})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:4,children:Object(ot.jsx)(Fa,{label:"Middle name",value:b.middlename||"",onChange:function(e){return Te(e,"middlename")}})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:4,children:Object(ot.jsx)(Fa,{label:"Last name",value:b.lastname||"",onChange:function(e){return Te(e,"lastname")},error:null===l||void 0===l?void 0:l.lastName,helperText:null===l||void 0===l?void 0:l.lastName,required:!0})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Alias",value:b.alias||"",onChange:function(e){return Te(e,"alias")},error:null===l||void 0===l?void 0:l.alias,helperText:null===l||void 0===l?void 0:l.alias,required:!0})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Email",value:b.emailid||"",disabled:!0,onChange:function(e){return Te(e,"emailid")},error:null===l||void 0===l?void 0:l.email,helperText:null===l||void 0===l?void 0:l.email,required:!0})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Username",value:b.username||"",onChange:function(e){return Te(e,"username")},error:null===l||void 0===l?void 0:l.username,helperText:null===l||void 0===l?void 0:l.username,required:!0})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"EMP code",value:b.empcode||"",onChange:function(e){return Te(e,"empcode")},error:null===l||void 0===l?void 0:l.empcode,helperText:null===l||void 0===l?void 0:l.empcode,required:!0})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:2,sm:1,children:Object(ot.jsx)(Fa,{label:"Ext",value:b.ext||"",onChange:function(e){return Te(e,"ext")}})}),Object(ot.jsx)(m.a,{item:!0,xs:10,sm:5,children:Object(ot.jsx)(Fa,{label:"Phone",value:b.phone||"",onChange:function(e){return Te(e,"phone")},inputProps:{maxLength:10}})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Mobile",value:b.mobile||"",onChange:function(e){return Te(e,"mobile")},inputProps:{maxLength:10}})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Designation",value:b.designation||"",onChange:function(e){return Te(e,"designation")},options:k||[]})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Company",value:b.company||"",onChange:function(e){return Te(e,"company")},options:y||[]})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Department",value:b.department||"",onChange:function(e){return Te(e,"department")},options:I||[]})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Division",value:b.division||"",onChange:function(e){return Te(e,"division")},options:q||[]})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Da.a,{error:null===l||void 0===l?void 0:l.role,fullWidth:!0,children:Object(ot.jsx)(qa,{label:"Role *",value:b.role||"",onChange:function(e){return Te(e,"role")},options:h||[],error:null===l||void 0===l?void 0:l.role,helperText:null===l||void 0===l?void 0:l.role,required:!0})})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Da.a,{error:null===l||void 0===l?void 0:l.profile,fullWidth:!0,children:Object(ot.jsx)(qa,{label:"Profile *",value:b.profile||"",onChange:function(e){return Te(e,"profile")},options:me||[],error:null===l||void 0===l?void 0:l.profile,helperText:null===l||void 0===l?void 0:l.profile,required:!0})})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Employee",value:b.employee||!1,onChange:function(e){return Te(e,"employee")},options:[{label:"YES",value:!0},{label:"NO",value:!1}]})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Title",value:b.title||"",onChange:function(e){return Te(e,"title")}})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,spacing:24,children:Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Active",value:b.active||!1,onChange:function(e){return Te(e,"active")},options:[{label:"Active",value:!0},{label:"In Active",value:!1}]})})}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Approver settings"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Delegated approver",value:(null===_e||void 0===_e?void 0:_e.delegatedapprover)||"",onChange:function(e){return qe(e,"delegatedapprover")},options:B||[]})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Manager",value:(null===_e||void 0===_e?void 0:_e.manager)||"",onChange:function(e){return qe(e,"manager")},options:B||[]})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,children:Object(ot.jsx)(m.a,{item:!0,md:12,xs:12,className:"item",children:Object(ot.jsx)(O.a,{children:"Mailing address"})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"Country *",value:ge.country||"",onChange:function(e){return Ee(e,"country")},options:W||[],error:null===l||void 0===l?void 0:l.country,helperText:null===l||void 0===l?void 0:l.country,required:!0})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"State/Province *",value:ge.state||"",onChange:function(e){return Ee(e,"state")},options:re||[],error:null===l||void 0===l?void 0:l.state,helperText:null===l||void 0===l?void 0:l.state,required:!0})})]}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Address",value:ge.street||"",onChange:function(e){return Ee(e,"street")},rows:3,multiline:!0,error:null===l||void 0===l?void 0:l.street,helperText:null===l||void 0===l?void 0:l.street,required:!0})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(qa,{label:"City *",value:ge.city||"",onChange:function(e){return Ee(e,"city")},options:ue||[],error:null===l||void 0===l?void 0:l.city,helperText:null===l||void 0===l?void 0:l.city,required:!0})})]}),Object(ot.jsx)(m.a,{id:"top-row",container:!0,spacing:24,children:Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Fa,{label:"Zip/Postal code",value:ge.postalcode||"",onChange:function(e){return Ee(e,"postalcode")},error:null===l||void 0===l?void 0:l.postalcode,helperText:null===l||void 0===l?void 0:l.postalcode,required:!0})})}),Object(ot.jsxs)(m.a,{id:"top-row",container:!0,spacing:24,justify:"center",alignItems:"center",children:[Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{label:"Back",onClick:function(){return e.back()}})}),Object(ot.jsx)(m.a,{item:!0,children:Object(ot.jsx)(Yt,{disabled:Ie,label:Ie?"Loading...":"Save",onClick:Fe})})]})]})}var Is=a(882),As=Object(gt.a)({switchBase:{color:dt,"&$checked":{color:dt},"&$checked + $track":{backgroundColor:dt}},checked:{},track:{}})(Tl.a);function Ts(e){return Object(ot.jsx)(Is.a,{children:Object(ot.jsx)(v.a,{control:Object(ot.jsx)(As,{checked:e.checked,onChange:e.onChange,name:e.name})})})}var Es=[{id:"emailid",label:"Email ID"},{id:"firstname",label:"First Name"},{id:"department",label:"Department"},{id:"role",label:"Role"},{id:"title",label:"Title"},{id:"active",label:"Active"}];var qs=Object(g.a)({root:{width:"100%"},container:{maxHeight:440}}),Fs=function(e){var t=qs(),a=i.a.useState(0),l=Object(c.a)(a,2),o=l[0],r=l[1],s=i.a.useState(10),d=Object(c.a)(s,2),u=d[0],b=d[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),m=j[0],v=j[1],h=i.a.useState("asc"),O=Object(c.a)(h,2),g=O[0],x=O[1],f=i.a.useState(""),y=Object(c.a)(f,2),_=y[0],C=y[1],w=[];function S(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}i.a.useEffect((function(){console.log("Props Data",e.data),e.data&&e.data.map((function(e){var t,a,n,i,l,o;w.push((t=e.emailid,a=e.firstname,n=e.department,i=e.role,l=e.title,o=e.active,{emailid:t,firstname:a,department:n,role:i,title:l,active:o}))})),v(w)}),[e.data]);var k=function(t){console.log("event.target.name",t.target.name),console.log("event.target.checked",t.target.checked);var a=t.target.checked?"enable":"disable";e.userStatus(t.target.name,a)};return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(Un,{classes:t,order:g,orderBy:_,onRequestSort:function(e,t){x(_===t&&"asc"===g?"desc":"asc"),C(t)},rowCount:m.length,headCells:Es,selectedAdvancedFilters:e.selectedAdvancedFilters,clearAdvancedFilters:e.clearAdvancedFilters}),Object(ot.jsx)(dn.a,{children:m.length>0?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(m,function(e,t){return"desc"===e?function(e,a){return S(e,a,t)}:function(e,a){return-S(e,a,t)}}(g,_)).slice(o*u,o*u+u).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Es.map((function(n){var i,l,o=t[n.id];return Object(ot.jsx)(un.a,{align:n.align,children:"emailid"===n.id?Object(ot.jsx)("a",{href:"#",onClick:function(t){var a;a=o,e.viewUserDetails("view_userdetails",a)},children:o}):"active"===n.id?Object(ot.jsx)(Ts,{onChange:k,checked:null===(i=e.data[a])||void 0===i?void 0:i.active,name:null===(l=e.data[a])||void 0===l?void 0:l.emailid}):o},n.id)}))},t.code)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:m.length,rowsPerPage:u,page:o,onChangePage:function(e,t){r(t)},onChangeRowsPerPage:function(e){b(+e.target.value),r(0)}})]})},Ms=Object(g.a)((function(e){return{root:{paddingTop:e.spacing(3),minWidth:"100%"},excelExport:{margin:"0 10px 0 0 !important",color:"#ffffff",textTransform:"capitalize",backgroundColor:"#F05A30",width:"auto",height:"48px",padding:"0 20px",minWidth:"48px",minHeight:"auto",borderRadius:"24px",boxShadow:"0px 3px 5px -1px rgb(0 0 0 / 20%), 0px 6px 10px 0px rgb(0 0 0 / 14%), 0px 1px 18px 0px rgb(0 0 0 / 12%)"}}})),Rs=function(e){var t,a=Ms(),i=(0,Jt().getCurrentUserDetails)(),l=null===i||void 0===i?void 0:i.id,o=Object(n.useState)(null),s=Object(c.a)(o,2),u=s[0],b=s[1],p=Object(n.useState)(!1),j=Object(c.a)(p,2),v=j[0],h=j[1],O=Object(n.useState)(!1),g=Object(c.a)(O,2),f=g[0],y=g[1],C=Object(n.useState)(!1),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)(),P=Object(c.a)(N,2),D=P[0],I=P[1],A=Object(n.useState)(""),T=Object(c.a)(A,2),E=T[0],q=T[1],F=Object(n.useState)(""),M=Object(c.a)(F,2),R=M[0],B=M[1],H=function(){var e=Object(r.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={filter:t,loggedinuserid:l},e.next=3,L(a);case 3:n=e.sent,b(null!==n&&void 0!==n?n:[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){""===R&&H(E)}),[E,R]);var G=function(){var e=Object(r.a)(d.a.mark((function e(t,a){var n,i,o,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i={username:t.trim()},console.log("status",a),"disable"!==a){e.next=9;break}return e.next=6,Q(i);case 6:n=e.sent,e.next=12;break;case 9:return e.next=11,U(i);case 11:n=e.sent;case 12:return o="disable"!==a,r={type:"changestatus",emailid:t.trim(),active:o,loggedinuserid:l},e.next=16,L(r);case 16:n=e.sent,console.log("response",n),n&&H(),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.log("Error changeing user status",e.t0.message);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,a){return e.apply(this,arguments)}}();return t=_.a.isEmpty(R)?Object(ot.jsx)(ot.Fragment,{children:Object(ot.jsxs)(m.a,{container:!0,direction:"column",children:[Object(ot.jsxs)(m.a,{item:!0,justify:"flex-end",style:{display:"flex"},children:[null!==u&&Object(ot.jsx)(pi,{onClick:function(){k(!0)},label:"Export to excel",className:a.excelExport}),Object(ot.jsx)(Rn,{onClick:function(){return B("createuser")},label:"Create User",variant:"extended"})]}),!0===S&&Object(ot.jsx)(ui,{tableData:u,tableName:"Users"}),Object(ot.jsx)(m.a,{item:!0,style:{marginTop:25,maxWidth:"100%"},children:Object(ot.jsx)(Fs,{selectedAdvancedFilters:function(e){return q(e)},clearAdvancedFilters:function(){return q("")},data:u,userStatus:G,viewUserDetails:function(e,t){return function(e,t){h(!0),y(!1),I(t),B("viewUserDetails")}(0,t)}})})]})}):v&&!_.a.isEmpty(R)&&"viewUserDetails"===R?Object(ot.jsx)(ks,{emailId:D,back:function(){return B("")},edit:function(e,t){return function(e,t){y(!0),I(t),h(!1),B("editUserDetails")}(0,t)}}):f&&!_.a.isEmpty(R)&&"editUserDetails"===R?Object(ot.jsx)(Ds,{emailId:D,back:function(){return B("")},update:function(){}}):Object(ot.jsx)(Ss,{back:function(){return B("")},updateCreationInfo:function(){}}),Object(ot.jsx)(x.a,{className:a.root,children:t})},Bs=[{id:"samplereqno",label:"Packing Type Number"},{id:"accountname",label:"Account Name"},{id:"contactfirstname",label:"Status"},{id:"contactlastname",label:"Created By"},{id:"products",label:"Created Date"},{id:"createddate",label:"Packaging Category"},{id:"createdbyusername",label:"Packaging Type"}];var Hs=Object(g.a)({root:{width:"100%",marginTop:24},container:{maxHeight:440}}),Gs=function(e){var t=Hs(),a=i.a.useState(0),l=Object(c.a)(a,2),o=l[0],r=l[1],s=i.a.useState(10),d=Object(c.a)(s,2),u=d[0],b=d[1],p=Object(n.useState)([]),j=Object(c.a)(p,2),m=j[0],v=j[1],h=i.a.useState("asc"),O=Object(c.a)(h,2),g=O[0],x=O[1],f=i.a.useState(""),y=Object(c.a)(f,2),_=y[0],C=y[1],w=[];function S(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}i.a.useEffect((function(){console.log("Props Data",e.data),e.data&&null!==e.data&&e.data.map((function(e){var t,a,n,i,l,o,r,c,s,d,u;w.push((t=e.samplereqno,a=e.samplereqid,n=e.accountname,i=e.contactfirstname,l=e.contactlastname,o=e.products,r=e.createddate,c=e.createdbyusername,s=e.status,d=e.requesttoqcstatus,u=e.receivedqcstatus,{samplereqno:t,samplereqid:a,accountname:n,contactfirstname:i,contactlastname:l,products:o,createddate:r,createdbyusername:c,status:s,requesttoqcstatus:d,receivedqcstatus:u}))})),v(w)}),[e.data]);return Object(ot.jsxs)(mn.a,{className:t.root,children:[Object(ot.jsx)(bn.a,{className:t.container,children:Object(ot.jsxs)(sn.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(ot.jsx)(Un,{classes:t,order:g,orderBy:_,onRequestSort:function(e,t){x(_===t&&"asc"===g?"desc":"asc"),C(t)},rowCount:m.length,headCells:Bs,selectedAdvancedFilters:e.selectedAdvancedFilters,clearAdvancedFilters:e.clearAdvancedFilters}),Object(ot.jsx)(dn.a,{children:m.length>0?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(m,function(e,t){return"desc"===e?function(e,a){return S(e,a,t)}:function(e,a){return-S(e,a,t)}}(g,_)).slice(o*u,o*u+u).map((function(t,a){return Object(ot.jsx)(jn.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Bs.map((function(a){var n=t[a.id];return Object(ot.jsx)(un.a,{align:a.align,children:"samplereqno"===a.id?Object(ot.jsx)("a",{href:"#",onClick:function(a){var n,i;i=null!==(n=t.samplereqid)&&void 0!==n?n:t.id,e.sampleDetails("view_sample",i)},children:n}):"requesttoqcstatus"===a.id?Object(ot.jsx)(Va,{checked:"true"===t.requesttoqcstatus|!0===t.requesttoqcstatus,name:t.requesttoqcstatus,disabled:!0}):"receivedqcstatus"===a.id?Object(ot.jsx)(Va,{checked:"true"===t.receivedqcstatus||!0===t.receivedqcstatus,name:t.receivedqcstatus,disabled:!0}):n},a.id)}))},t.code)})):"No records to display"})]})}),Object(ot.jsx)(ea.a,{rowsPerPageOptions:[10,25,100],component:"div",count:m.length,rowsPerPage:u,page:o,onChangePage:function(e,t){r(t)},onChangeRowsPerPage:function(e){b(+e.target.value),r(0)}})]})},Ls=Object(g.a)((function(e){return{root:{paddingTop:e.spacing(3),minWidth:"100%"},formControl:{margin:e.spacing(1),marginTop:e.spacing(2),minWidth:120}}})),Us=function(e){var t=(0,Jt().getCurrentUserDetails)(),a=null===t||void 0===t?void 0:t.role,l=null===t||void 0===t?void 0:t.id,o=i.a.useState(a===Kt.managingDirector?"all":"mysamples"),s=Object(c.a)(o,2),u=s[0],b=s[1],p=Object(n.useState)(""),j=Object(c.a)(p,2),v=j[0],h=j[1],O=Ls(),g=Object(n.useState)(null),x=Object(c.a)(g,2),f=x[0],y=x[1],C=Object(n.useState)([]),w=Object(c.a)(C,2),S=w[0],k=w[1],N=Object(n.useState)(!1),P=Object(c.a)(N,2),D=(P[0],P[1]),I=Object(n.useState)(!1),A=Object(c.a)(I,2),T=A[0],E=A[1],q=function(){var e=Object(r.a)(d.a.mark((function e(t,n){var i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i="",a===Kt.managingDirector&&"mysamples"!==n||(i+="createdbyuserid = '".concat(l,"'")),"all"!==n&&"mysamples"!==n&&(console.log("Filter ",i),_.a.isEmpty(i)||(i+=" AND "),i+=" status = '".concat(n,"'")),_.a.isEmpty(t)||(_.a.isEmpty(i)||(i+=" AND "),i+="".concat(t)),console.log("Filter string is",i),y([]);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){q(v,u);var e=[];if(a===Kt.managerPackackingDevelopment)e.push({label:"All Packaging Types",value:"all"},{label:"Pending Packaging Types",value:"pending"},{label:"Approved Packaging types",value:"approved"},{label:"Rejected packaging types",value:"rejected"});else if(a===Kt.qcManager)e.push({label:"Pending for approval packaging types",value:"pending_approval"},{label:"Approved packaging  types",value:"approved"},{label:"Rejected packaging types",value:"rejected"});else if(a===Kt.managingDirector){var t;e.push({label:"All Packaging Types",value:"all"},{label:"Pending Packaging Types",value:"pending"},{label:"Approved Packaging types",value:"approved"},(t={label:"Rejected packaging types",value:"rejected"},Object(Ot.a)(t,"label","Pending for approval packaging types"),Object(Ot.a)(t,"value","pending_approval"),t))}k(e)}),[u,v]);var F=function(){var e=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h("");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsxs)(m.a,{container:!0,direction:"row",children:[Object(ot.jsx)(m.a,{xs:6,item:!0,children:(null===S||void 0===S?void 0:S.length)>0&&Object(ot.jsxs)(Da.a,{variant:"outlined",className:O.formControl,children:[Object(ot.jsx)(Ia.a,{htmlFor:"outlined-age-native-simple",children:"View"}),Object(ot.jsx)(Aa.a,{native:!0,value:u,onChange:function(e){b(e.target.value),h("")},label:"View",inputProps:{name:"view",id:"outlined-view-native-simple"},children:S.map((function(e,t){return Object(ot.jsx)("option",{value:e.value,children:e.label})}))})]})}),Object(ot.jsxs)(m.a,{xs:6,item:!0,justify:"flex-end",alignItems:"center",style:{display:"flex"},children:[null!==f&&Object(ot.jsx)(pi,{onClick:function(){E(!0)},label:"Export to excel"}),Object(ot.jsx)(Rn,{onClick:function(){return D(!0)},label:"Packing Type",variant:"extended"})]})]}),!0===T&&Object(ot.jsx)(ui,{tableData:f,tableName:"Packing Type"}),Object(ot.jsx)(Gs,{selectedAdvancedFilters:function(e){return h(e)},clearAdvancedFilters:F,data:f,sampleDetails:function(e,t){}})]})},Qs=Object(g.a)((function(e){return{root:{display:"flex",flexDirection:"column",width:"100vw",position:"relative",maxWidth:"100%",margin:0,backgroundImage:"url(".concat(fa,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",paddingRight:0,paddingLeft:0}}})),Vs=function(e){var t=Qs();return Object(ot.jsx)(x.a,{component:"main",maxWidth:"xs",className:t.root,children:e.iframe?Object(ot.jsxs)(m.a,{container:!0,spacing:0,direction:"row",style:{height:"100vh"},children:[Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,justify:"center",alignItems:"center",style:{display:"flex"},children:Object(ot.jsx)(ua.a,{children:Object(ot.jsx)(xa.a,{children:e.children})})}),Object(ot.jsx)(m.a,{item:!0,xs:12,sm:6,children:Object(ot.jsx)(Pa,{})})]}):Object(ot.jsx)(m.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"},children:Object(ot.jsx)(m.a,{item:!0,xs:12,sm:12,children:Object(ot.jsx)(ua.a,{children:Object(ot.jsx)(xa.a,{children:e.children})})})})})};function zs(e){var t,a=Object(n.useContext)(ut),i=Object(f.f)();if(!a.token)return Object(ot.jsx)(f.a,{to:"/login",state:{from:i}});if(a.role===Kt.vendor&&"/vendor"!==e.path)return Object(ot.jsx)(f.a,{to:"/vendor"});var l=null===(t=ca.find((function(e){return(null===e||void 0===e?void 0:e.to)===i.pathname})))||void 0===t?void 0:t.roles;return a.role!==Kt.vendor&&"/vendor"===e.path||void 0!==l&&-1===(null===l||void 0===l?void 0:l.indexOf(null===a||void 0===a?void 0:a.role))?Object(ot.jsx)(f.a,{to:"/home"}):e.children}function Ws(e){var t,a,i=Object(n.useContext)(ut),l=Object(f.f)();return i.token&&i.role===Kt.vendor?Object(ot.jsx)(f.a,{to:"/vendor"}):i.token?Object(ot.jsx)(f.a,{to:(null===l||void 0===l||null===(t=l.state)||void 0===t||null===(a=t.from)||void 0===a?void 0:a.pathname)||"/home"}):e.children}function Ys(e){return Object(ot.jsx)(zs,{routes:ca,children:Object(ot.jsx)(ra,{routes:ca,children:e.children})})}var Ks=function(){var e=Jt(),t=e.storeToken,a=e.setPreference,i=e.getPreference,l=e.token,o=e.role,r=e.removeToken,c=e.refreshToken;return Object(n.useEffect)((function(){c();var e=setInterval((function(){c()}),12e5);return function(){clearInterval(e)}}),[]),Object(ot.jsx)(ot.Fragment,{children:Object(ot.jsx)(ut.Provider,{value:{token:l,role:o,storeToken:t,setPreference:a,getPreference:i,removeToken:r},children:Object(ot.jsxs)(f.d,{children:[Object(ot.jsx)(f.b,{path:"/vendor",element:Object(ot.jsx)(zs,{path:"/vendor",children:Object(ot.jsx)(ra,{routes:sa,children:Object(ot.jsx)(Sn,{})})})}),Object(ot.jsx)(f.b,{path:"/home",exact:!0,element:Object(ot.jsx)(Ys,{children:Object(ot.jsx)(Tn,{})})}),Object(ot.jsx)(f.b,{path:"/leads",exact:!0,element:Object(ot.jsx)(Ys,{children:Object(ot.jsx)(mi,{})})}),Object(ot.jsx)(f.b,{path:"/home",exact:!0,element:Object(ot.jsx)(Ys,{children:Object(ot.jsx)(Tn,{})})}),Object(ot.jsx)(f.b,{path:"/accounts",exact:!0,element:Object(ot.jsx)(Ys,{children:Object(ot.jsx)(vo,{})})}),Object(ot.jsx)(f.b,{path:"/contacts",exact:!0,element:Object(ot.jsx)(Ys,{children:Object(ot.jsx)(fo,{})})}),Object(ot.jsx)(f.b,{path:"/sample-request",exact:!0,element:Object(ot.jsx)(Ys,{children:Object(ot.jsx)(No,{})})}),Object(ot.jsx)(f.b,{path:"/quotes",exact:!0,element:Object(ot.jsx)(Ys,{children:Object(ot.jsx)(pc,{})})}),Object(ot.jsx)(f.b,{path:"/users",exact:!0,element:Object(ot.jsx)(Ys,{children:Object(ot.jsx)(Rs,{})})}),Object(ot.jsx)(f.b,{path:"/purchase-orders",exact:!0,element:Object(ot.jsx)(Ys,{children:Object(ot.jsx)(Ir,{})})}),Object(ot.jsx)(f.b,{path:"/debit-note-gc",exact:!0,element:Object(ot.jsx)(Ys,{children:Object(ot.jsx)(rc,{})})}),Object(ot.jsx)(f.b,{path:"/mrin",exact:!0,element:Object(ot.jsx)(Ys,{children:Object(ot.jsx)(os,{})})}),Object(ot.jsx)(f.b,{path:"/gc",exact:!0,element:Object(ot.jsx)(Ys,{children:Object(ot.jsx)(qc,{})})}),Object(ot.jsx)(f.b,{path:"/packing-type",exact:!0,element:Object(ot.jsx)(Ys,{children:Object(ot.jsx)(Us,{})})}),Object(ot.jsx)(f.b,{path:"/supplier",exact:!0,element:Object(ot.jsx)(Ys,{children:Object(ot.jsx)(_s,{})})}),Object(ot.jsx)(f.b,{path:"/login",element:Object(ot.jsx)(Ws,{children:Object(ot.jsx)(Vs,{children:Object(ot.jsx)(pt,{})})})}),Object(ot.jsx)(f.b,{path:"/forget",element:Object(ot.jsx)(Vs,{children:Object(ot.jsx)(ht,{})})}),Object(ot.jsx)(f.b,{path:"/profile",element:Object(ot.jsx)(ga,{})}),Object(ot.jsx)(f.b,{path:"/login/vendor",element:Object(ot.jsx)(Ws,{children:Object(ot.jsx)(Vs,{children:Object(ot.jsx)(mt,{})})})}),Object(ot.jsx)(f.b,{path:"*",element:Object(ot.jsx)(f.a,{to:"/home"})})]})})})},Js=function(e){e&&e instanceof Function&&a.e(5).then(a.bind(null,1131)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,l=t.getLCP,o=t.getTTFB;a(e),n(e),i(e),l(e),o(e)}))},Zs=Object(Ka.a)({typography:{fontFamily:'"Nunito", "Helvetica", "Arial", sans-serif'}});o.a.render(Object(ot.jsx)(i.a.StrictMode,{children:Object(ot.jsx)(Ja.a,{theme:Zs,children:Object(ot.jsx)(na.a,{children:Object(ot.jsx)(Ks,{})})})}),document.getElementById("root")),Js()}},[[873,1,2]]]);
//# sourceMappingURL=main.251fd641.chunk.js.map